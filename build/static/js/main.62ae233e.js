/*! For license information please see main.62ae233e.js.LICENSE.txt */
(()=>{var e={20:(e,t,n)=>{"use strict";var i=n(949)(!0);n(3914)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},96:(e,t,n)=>{var i=n(7832);i(i.S,"Object",{create:n(5478)})},219:(e,t,n)=>{"use strict";var i=n(3763),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?a:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!i||!i[v])&&(!m||!m[v])&&(!s||!s[v])){var y=d(n,v);try{c(t,v,y)}catch(A){}}}}return t}},457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i.A});var i=n(7868)},528:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case a:case o:case u:case h:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case s:return e;default:return t}}case i:return t}}}t.vM=c,t.lD=d},579:(e,t,n)=>{"use strict";e.exports=n(1153)},614:(e,t,n)=>{n(96);var i=n(4353).Object;e.exports=function(e,t){return i.create(e,t)}},638:(e,t,n)=>{e.exports={default:n(4803),__esModule:!0}},647:(e,t,n)=>{var i=n(1084);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},859:e=>{e.exports={}},869:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(5043);var i=n(3290),r=n(579);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(i=e)||null===i||0===Object.keys(i).length?n:e);var i}:t;return(0,r.jsx)(i.mL,{styles:o})}},918:(e,t,n)=>{"use strict";function i(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>i})},949:(e,t,n)=>{var i=n(8968),r=n(5429);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},1084:e=>{e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},1141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},1164:(e,t,n)=>{e.exports={default:n(6429),__esModule:!0}},1422:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},1496:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},1497:(e,t,n)=>{"use strict";var i=n(3218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},1638:(e,t,n)=>{var i=n(8330),r=n(8721).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},1688:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MemoryRouter:()=>_,Prompt:()=>E,Redirect:()=>M,Route:()=>P,Router:()=>x,StaticRouter:()=>U,Switch:()=>j,__HistoryContext:()=>A,__RouterContext:()=>b,generatePath:()=>I,matchPath:()=>B,useHistory:()=>G,useLocation:()=>Q,useParams:()=>W,useRouteMatch:()=>q,withRouter:()=>V});var i=n(5540),r=n(5043),o=n(5173),a=n.n(o),s=n(7321),l=n(3404),c=n(8168),u=n(8123),h=n.n(u),d=(n(7681),n(8587)),p=n(219),f=n.n(p),m=1073741823,g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var v=r.createContext||function(e,t){var n,o,s="__create-react-context-"+function(){var e="__global_unique_id__";return g[e]=(g[e]||0)+1}()+"__",l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,i){e=n,t.forEach(function(t){return t(e,i)})}}}(t.props.value),t}(0,i.A)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;((o=i)===(a=r)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof t?t(i,r):m,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[s]=a().object.isRequired,n);var c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,i.A)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?m:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?m:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return c.contextTypes=((o={})[s]=a().object,o),{Provider:l,Consumer:c}},y=function(e){var t=v();return t.displayName=e,t},A=y("Router-History"),b=y("Router"),x=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._pendingLocation=e})),n}(0,i.A)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(t){e._isMounted&&e.setState({location:t})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return r.createElement(b.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(A.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);var _=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=(0,s.createMemoryHistory)(t.props),t}return(0,i.A)(t,e),t.prototype.render=function(){return r.createElement(x,{history:this.history,children:this.props.children})},t}(r.Component);var w=function(e){function t(){return e.apply(this,arguments)||this}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(r.Component);function E(e){var t=e.message,n=e.when,i=void 0===n||n;return r.createElement(b.Consumer,null,function(e){if(e||(0,l.A)(!1),!i||e.staticContext)return null;var n=e.history.block;return r.createElement(w,{onMount:function(e){e.release=n(t)},onUpdate:function(e,i){i.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})})}var C={},S=1e4,T=0;function I(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(C[e])return C[e];var t=h().compile(e);return T<S&&(C[e]=t,T++),t}(e)(t,{pretty:!0})}function M(e){var t=e.computedMatch,n=e.to,i=e.push,o=void 0!==i&&i;return r.createElement(b.Consumer,null,function(e){e||(0,l.A)(!1);var i=e.history,a=e.staticContext,u=o?i.push:i.replace,h=(0,s.createLocation)(t?"string"===typeof n?I(n,t.params):(0,c.A)({},n,{pathname:I(n.pathname,t.params)}):n);return a?(u(h),null):r.createElement(w,{onMount:function(){u(h)},onUpdate:function(e,t){var n=(0,s.createLocation)(t.to);(0,s.locationsAreEqual)(n,(0,c.A)({},h,{key:n.key}))||u(h)},to:n})})}var k={},R=1e4,L=0;function B(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,o=void 0!==r&&r,a=n.strict,s=void 0!==a&&a,l=n.sensitive,c=void 0!==l&&l;return[].concat(i).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=k[n]||(k[n]={});if(i[e])return i[e];var r=[],o={regexp:h()(e,r,t),keys:r};return L<R&&(i[e]=o,L++),o}(n,{end:o,strict:s,sensitive:c}),r=i.regexp,a=i.keys,l=r.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),p=e===u;return o&&!p?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:p,params:a.reduce(function(e,t,n){return e[t.name]=d[n],e},{})}},null)}var P=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(b.Consumer,null,function(t){t||(0,l.A)(!1);var n=e.props.location||t.location,i=e.props.computedMatch?e.props.computedMatch:e.props.path?B(n.pathname,e.props):t.match,o=(0,c.A)({},t,{location:n,match:i}),a=e.props,s=a.children,u=a.component,h=a.render;return Array.isArray(s)&&function(e){return 0===r.Children.count(e)}(s)&&(s=null),r.createElement(b.Provider,{value:o},o.match?s?"function"===typeof s?s(o):s:u?r.createElement(u,o):h?h(o):null:"function"===typeof s?s(o):null)})},t}(r.Component);function D(e){return"/"===e.charAt(0)?e:"/"+e}function O(e,t){if(!e)return t;var n=D(e);return 0!==t.pathname.indexOf(n)?t:(0,c.A)({},t,{pathname:t.pathname.substr(n.length)})}function N(e){return"string"===typeof e?e:(0,s.createPath)(e)}function F(e){return function(){(0,l.A)(!1)}}function z(){}var U=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return z},t.handleBlock=function(){return z},t}(0,i.A)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,i=n.basename,r=void 0===i?"":i,o=n.context,a=void 0===o?{}:o;a.action=t,a.location=function(e,t){return e?(0,c.A)({},t,{pathname:D(e)+t.pathname}):t}(r,(0,s.createLocation)(e)),a.url=N(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,i=e.context,o=void 0===i?{}:i,a=e.location,l=void 0===a?"/":a,u=(0,d.A)(e,["basename","context","location"]),h={createHref:function(e){return D(n+N(e))},action:"POP",location:O(n,(0,s.createLocation)(l)),push:this.handlePush,replace:this.handleReplace,go:F(),goBack:F(),goForward:F(),listen:this.handleListen,block:this.handleBlock};return r.createElement(x,(0,c.A)({},u,{history:h,staticContext:o}))},t}(r.Component);var j=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(b.Consumer,null,function(t){t||(0,l.A)(!1);var n,i,o=e.props.location||t.location;return r.Children.forEach(e.props.children,function(e){if(null==i&&r.isValidElement(e)){n=e;var a=e.props.path||e.props.from;i=a?B(o.pathname,(0,c.A)({},e.props,{path:a})):t.match}}),i?r.cloneElement(n,{location:o,computedMatch:i}):null})},t}(r.Component);function V(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,i=(0,d.A)(t,["wrappedComponentRef"]);return r.createElement(b.Consumer,null,function(t){return t||(0,l.A)(!1),r.createElement(e,(0,c.A)({},i,t,{ref:n}))})};return n.displayName=t,n.WrappedComponent=e,f()(n,e)}var H=r.useContext;function G(){return H(A)}function Q(){return H(b).location}function W(){var e=H(b).match;return e?e.params:{}}function q(e){var t=Q(),n=H(b).match;return e?B(t.pathname,e):n}},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>i,SF:()=>r,sk:()=>o});function i(e,t,n){var i="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(i+=n+" ")}),i}var r=function(e,t,n){var i=e.key+"-"+t.name;!1===n&&void 0===e.registered[i]&&(e.registered[i]=t.styles)},o=function(e,t,n){r(e,t,n);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+i:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1774:(e,t,n)=>{var i=n(8544),r=n(5429);e.exports=function(e){return i(r(e))}},1827:(e,t,n)=>{"use strict";var i=n(5761),r=n(1496),o=n(4098),a=n(7832),s=n(3384),l=n(7367).KEY,c=n(5949),u=n(8563),h=n(3193),d=n(1422),p=n(4027),f=n(7705),m=n(6535),g=n(8212),v=n(2294),y=n(8321),A=n(1084),b=n(4591),x=n(1774),_=n(647),w=n(9885),E=n(5478),C=n(7800),S=n(8500),T=n(9729),I=n(9066),M=n(8198),k=S.f,R=I.f,L=C.f,B=i.Symbol,P=i.JSON,D=P&&P.stringify,O="prototype",N=p("_hidden"),F=p("toPrimitive"),z={}.propertyIsEnumerable,U=u("symbol-registry"),j=u("symbols"),V=u("op-symbols"),H=Object[O],G="function"==typeof B&&!!T.f,Q=i.QObject,W=!Q||!Q[O]||!Q[O].findChild,q=o&&c(function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=k(H,t);i&&delete H[t],R(e,t,n),i&&e!==H&&R(H,t,i)}:R,X=function(e){var t=j[e]=E(B[O]);return t._k=e,t},Y=G&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof B},K=function(e,t,n){return e===H&&K(V,t,n),y(e),t=_(t,!0),y(n),r(j,t)?(n.enumerable?(r(e,N)&&e[N][t]&&(e[N][t]=!1),n=E(n,{enumerable:w(0,!1)})):(r(e,N)||R(e,N,w(1,{})),e[N][t]=!0),q(e,t,n)):R(e,t,n)},J=function(e,t){y(e);for(var n,i=g(t=x(t)),r=0,o=i.length;o>r;)K(e,n=i[r++],t[n]);return e},Z=function(e){var t=z.call(this,e=_(e,!0));return!(this===H&&r(j,e)&&!r(V,e))&&(!(t||!r(this,e)||!r(j,e)||r(this,N)&&this[N][e])||t)},$=function(e,t){if(e=x(e),t=_(t,!0),e!==H||!r(j,t)||r(V,t)){var n=k(e,t);return!n||!r(j,t)||r(e,N)&&e[N][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=L(x(e)),i=[],o=0;n.length>o;)r(j,t=n[o++])||t==N||t==l||i.push(t);return i},te=function(e){for(var t,n=e===H,i=L(n?V:x(e)),o=[],a=0;i.length>a;)!r(j,t=i[a++])||n&&!r(H,t)||o.push(j[t]);return o};G||(s((B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(V,n),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),q(this,e,w(1,n))};return o&&W&&q(H,e,{configurable:!0,set:t}),X(e)})[O],"toString",function(){return this._k}),S.f=$,I.f=K,n(1638).f=C.f=ee,n(3350).f=Z,T.f=te,o&&!n(9799)&&s(H,"propertyIsEnumerable",Z,!0),f.f=function(e){return X(p(e))}),a(a.G+a.W+a.F*!G,{Symbol:B});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)p(ne[ie++]);for(var re=M(p.store),oe=0;re.length>oe;)m(re[oe++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return r(U,e+="")?U[e]:U[e]=B(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?E(e):J(E(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=c(function(){T.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return T.f(b(e))}}),P&&a(a.S+a.F*(!G||c(function(){var e=B();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(A(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,D.apply(P,i)}}),B[O][F]||n(9993)(B[O],F,B[O].valueOf),h(B,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},1912:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=n(6926),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))&&"function"!==typeof t?e:t}},2015:(e,t,n)=>{var i=n(7832);i(i.S,"Object",{setPrototypeOf:n(6271).set})},2079:(e,t,n)=>{n(1827),n(6819),n(8987),n(3655),e.exports=n(4353).Symbol},2213:e=>{"use strict";var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},2294:(e,t,n)=>{var i=n(4008);e.exports=Array.isArray||function(e){return"Array"==i(e)}},2374:(e,t,n)=>{"use strict";t.A=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(5043)),r=n(3174);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=i.useContext(r.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},2395:e=>{e.exports=function(){}},2721:(e,t,n)=>{var i=n(1084),r=n(5761).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function A(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O,N=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function j(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&A(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=G(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),i=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ae(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,Ee=null;function Ce(e){if(e=Ar(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=xr(t),_e(e.stateNode,e.type,t))}}function Se(e){we?Ee?Ee.push(e):Ee=[e]:we=e}function Te(){if(we){var e=we,t=Ee;if(Ee=we=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Me(){}var ke=!1;function Re(e,t,n){if(ke)return e(t,n);ke=!0;try{return Ie(e,t,n)}finally{ke=!1,(null!==we||null!==Ee)&&(Me(),Te())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Be=!1}function De(e,t,n,i,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Ne=null,Fe=!1,ze=null,Ue={onError:function(e){Oe=!0,Ne=e}};function je(e,t,n,i,r,o,a,s,l){Oe=!1,Ne=null,De.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ve(e)!==e)throw Error(o(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ge(r),e;if(a===i)return Ge(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Je=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?i=ht(s):0!==(o&=a)&&(i=ht(o))}else 0!==(a=n&~r)?i=ht(a):0!==o&&(i=ht(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var At=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,wt,Et,Ct,St=!1,Tt=[],It=null,Mt=null,kt=null,Rt=new Map,Lt=new Map,Bt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Ar(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nt(e){var t=yr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ar(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==It&&Ft(It)&&(It=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==kt&&Ft(kt)&&(kt=null),Rt.forEach(zt),Lt.forEach(zt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&jt(It,e),null!==Mt&&jt(Mt,e),null!==kt&&jt(kt,e),Rt.forEach(t),Lt.forEach(t),n=0;n<Bt.length;n++)(i=Bt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Bt.shift()}var Ht=b.ReactCurrentBatchConfig,Gt=!0;function Qt(e,t,n,i){var r=At,o=Ht.transition;Ht.transition=null;try{At=1,qt(e,t,n,i)}finally{At=r,Ht.transition=o}}function Wt(e,t,n,i){var r=At,o=Ht.transition;Ht.transition=null;try{At=4,qt(e,t,n,i)}finally{At=r,Ht.transition=o}}function qt(e,t,n,i){if(Gt){var r=Yt(e,t,n,i);if(null===r)Gi(e,t,i,Xt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=Ot(It,e,t,n,i,r),!0;case"dragenter":return Mt=Ot(Mt,e,t,n,i,r),!0;case"mouseover":return kt=Ot(kt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Rt.set(o,Ot(Rt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Lt.set(o,Ot(Lt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Pt.indexOf(e)){for(;null!==r;){var o=Ar(r);if(null!==o&&xt(o),null===(o=Yt(e,t,n,i))&&Gi(e,t,i,Xt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Gi(e,t,i,null,n)}}var Xt=null;function Yt(e,t,n,i){if(Xt=null,null!==(e=yr(e=xe(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,i=n.length,r="value"in Jt?Jt.value:Jt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=N({},cn,{view:0,detail:0}),dn=on(hn),pn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(N({},pn,{dataTransfer:0})),gn=on(N({},hn,{relatedTarget:0})),vn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),An=on(yn),bn=on(N({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Cn(){return En}var Sn=N({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Sn),In=on(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),kn=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=N({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Rn),Bn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var On=u&&"TextEvent"in window&&!Dn,Nn=u&&(!Pn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,i){Se(i),0<(t=Wi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Xn(e){Fi(e,0)}function Yn(e){if(q(br(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),qn=Wn=null)}function ni(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Qn(t,qn,e,xe(e)),Re(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),qn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function oi(e,t){if("click"===e)return Yn(t)}function ai(e,t){if("input"===e||"change"===e)return Yn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,Ai=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ai||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Wi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},wi={},Ei={};function Ci(e){if(wi[e])return wi[e];if(!_i[e])return e;var t,n=_i[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return wi[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Si=Ci("animationend"),Ti=Ci("animationiteration"),Ii=Ci("animationstart"),Mi=Ci("transitionend"),ki=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(e,t){ki.set(e,t),l(t,[e])}for(var Bi=0;Bi<Ri.length;Bi++){var Pi=Ri[Bi];Li(Pi.toLowerCase(),"on"+(Pi[0].toUpperCase()+Pi.slice(1)))}Li(Si,"onAnimationEnd"),Li(Ti,"onAnimationIteration"),Li(Ii,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Mi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Ni(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,s,l,c){if(je.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var u=Ne;Oe=!1,Ne=null,Fe||(Fe=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Ni(r,s,c),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Ni(r,s,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[ji]){e[ji]=!0,a.forEach(function(t){"selectionchange"!==t&&(Oi.has(t)||Ui(t,!1,e),Ui(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,Ui("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Kt(t)){case 1:var r=Qt;break;case 4:r=Wt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Gi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=yr(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}s=s.parentNode}}i=i.return}Re(function(){var i=o,r=xe(n),a=[];e:{var s=ki.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Si:case Ti:case Ii:l=vn;break;case Mi:l=kn;break;case"scroll":l=dn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=An;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Le(f,d))&&u.push(Qi(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:br(l),p=null==c?s:br(c),(s=new u(m,f+"leave",l,n,r)).target=h,s.relatedTarget=p,m=null,yr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=qi(p))f++;for(p=0,m=d;m;m=qi(m))p++;for(;0<f-p;)u=qi(u),f--;for(;0<p-f;)d=qi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qi(u),d=qi(d)}u=null}else u=null;null!==l&&Xi(a,s,l,u,!1),null!==c&&null!==h&&Xi(a,h,c,u,!0)}if("select"===(l=(s=i?br(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Gn(s))if(Jn)g=ai;else{g=ri;var v=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=oi);switch(g&&(g=g(e,i))?Qn(a,g,n,r):(v&&v(e,s,i),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=i?br(i):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,bi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(a,n,r)}var y;if(Pn)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Vn?Un(e,n)&&(A="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(A="onCompositionStart");A&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==A?"onCompositionEnd"===A&&Vn&&(y=en()):(Zt="value"in(Jt=r)?Jt.value:Jt.textContent,Vn=!0)),0<(v=Wi(i,A)).length&&(A=new bn(A,e,null,n,r),a.push({event:A,listeners:v}),y?A.data=y:null!==(y=jn(n))&&(A.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&Un(e,t)?(e=en(),$t=Zt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Fi(a,t)})}function Qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Le(e,n))&&i.unshift(Qi(e,o,r)),null!=(o=Le(e,t))&&i.push(Qi(e,o,r))),e=e.return}return i}function qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Le(n,o))&&a.unshift(Qi(n,l,s)):r||null!=(l=Le(n,o))&&a.push(Qi(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Ji(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Ki,"")}function Zi(e,t,n){if(t=Ji(t),Ji(e)!==t&&n)throw Error(o(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function Ar(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xr(e){return e[pr]||null}var _r=[],wr=-1;function Er(e){return{current:e}}function Cr(e){0>wr||(e.current=_r[wr],_r[wr]=null,wr--)}function Sr(e,t){wr++,_r[wr]=e.current,e.current=t}var Tr={},Ir=Er(Tr),Mr=Er(!1),kr=Tr;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Lr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Br(){Cr(Mr),Cr(Ir)}function Pr(e,t,n){if(Ir.current!==Tr)throw Error(o(168));Sr(Ir,t),Sr(Mr,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,H(e)||"Unknown",r));return N({},n,i)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,kr=Ir.current,Sr(Ir,e),Sr(Mr,Mr.current),!0}function Nr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Dr(e,t,kr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Mr),Cr(Ir),Sr(Ir,e)):Cr(Mr),Sr(Mr,n)}var Fr=null,zr=!1,Ur=!1;function jr(e){null===Fr?Fr=[e]:Fr.push(e)}function Vr(){if(!Ur&&null!==Fr){Ur=!0;var e=0,t=At;try{var n=Fr;for(At=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),qe($e,Vr),r}finally{At=t,Ur=!1}}return null}var Hr=[],Gr=0,Qr=null,Wr=0,qr=[],Xr=0,Yr=null,Kr=1,Jr="";function Zr(e,t){Hr[Gr++]=Wr,Hr[Gr++]=Qr,Qr=e,Wr=t}function $r(e,t,n){qr[Xr++]=Kr,qr[Xr++]=Jr,qr[Xr++]=Yr,Yr=e;var i=Kr;e=Jr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var o=32-at(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kr=1<<32-at(t)+r|n<<r|i,Jr=o+e}else Kr=1<<o|n<<r|i,Jr=e}function eo(e){null!==e.return&&(Zr(e,1),$r(e,1,0))}function to(e){for(;e===Qr;)Qr=Hr[--Gr],Hr[Gr]=null,Wr=Hr[--Gr],Hr[Gr]=null;for(;e===Yr;)Yr=qr[--Xr],qr[Xr]=null,Jr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null}var no=null,io=null,ro=!1,oo=null;function ao(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Kr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&so(e,t)?ao(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ao(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Nc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===w?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&Ao(o)===t.type)?((i=r(t,n.props)).ref=vo(e,t,n),i.return=e,i):((i=Pc(n.type,n.key,n.props,null,e.mode,i)).ref=vo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case L:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,i):null;case _:return n.key===r?u(e,t,n,i):null;case L:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:h(e,t,n,i,null);yo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case L:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return h(t,e=e.get(n)||null,i,r,null);yo(t,i)}return null}function m(r,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(r,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(r,h),ro&&Zr(r,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return ro&&Zr(r,m),c}for(h=i(r,h);m<s.length;m++)null!==(g=f(h,r,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),ro&&Zr(r,m),c}function g(r,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var A=p(r,m,y.value,c);if(null===A){null===m&&(m=v);break}e&&m&&null===A.alternate&&t(r,m),s=a(A,s,g),null===h?u=A:h.sibling=A,h=A,m=v}if(y.done)return n(r,m),ro&&Zr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,c))&&(s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return ro&&Zr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(r,e)}),ro&&Zr(r,g),u}return function e(i,o,a,l){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===w){if(7===u.tag){n(i,u.sibling),(o=r(u,a.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&Ao(c)===u.type){n(i,u.sibling),(o=r(u,a.props)).ref=vo(i,u,a),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===w?((o=Dc(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=Pc(a.type,a.key,a.props,null,i.mode,l)).ref=vo(i,o,a),l.return=i,i=l)}return s(i);case _:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=r(o,a.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Fc(a,i.mode,l)).return=i,i=o}return s(i);case L:return e(i,o,(u=a._init)(a._payload),l)}if(te(a))return m(i,o,a,l);if(D(a))return g(i,o,a,l);yo(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,a)).return=i,i=o):(n(i,o),(o=Nc(a,i.mode,l)).return=i,i=o),s(i)):n(i,o)}}var xo=bo(!0),_o=bo(!1),wo=Er(null),Eo=null,Co=null,So=null;function To(){So=Co=Eo=null}function Io(e){var t=wo.current;Cr(wo),e._currentValue=t}function Mo(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){Eo=e,So=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(As=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Eo)throw Error(o(308));Co=e,Eo.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Lo=null;function Bo(e){null===Lo?Lo=[e]:Lo.push(e)}function Po(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Bo(t)):(n.next=r.next,r.next=n),t.interleaved=n,Do(e,i)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Do(e,n)}return null===(r=i.interleaved)?(t.next=t,Bo(i)):(t.next=r.next,r.next=t),i.interleaved=t,Do(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,i){var r=e.updateQueue;Oo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=N({},h,d);break e;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function Go(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Qo={},Wo=Er(Qo),qo=Er(Qo),Xo=Er(Qo);function Yo(e){if(e===Qo)throw Error(o(174));return e}function Ko(e,t){switch(Sr(Xo,t),Sr(qo,e),Sr(Wo,Qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Wo),Sr(Wo,t)}function Jo(){Cr(Wo),Cr(qo),Cr(Xo)}function Zo(e){Yo(Xo.current);var t=Yo(Wo.current),n=le(t,e.type);t!==n&&(Sr(qo,e),Sr(Wo,n))}function $o(e){qo.current===e&&(Cr(Wo),Cr(qo))}var ea=Er(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ia(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ra=b.ReactCurrentDispatcher,oa=b.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function ga(e,t,n,i,r,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:es,e=n(i,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ra.current=ts,e=n(i,r)}while(ha)}if(ra.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function Aa(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=la,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,sa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,si(i,t.memoizedState)||(As=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,sa.lanes|=a,Ol|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);si(a,t.memoizedState)||(As=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Ea(e,t){var n=sa,i=Aa(),r=t(),a=!si(i.memoizedState,r);if(a&&(i.memoizedState=r,As=!0),i=i.queue,Oa(Ta.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ra(9,Sa.bind(null,n,i,r,t),void 0,null),null===Ml)throw Error(o(349));0!==(30&aa)||Ca(n,t,r)}return r}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,i){t.value=n,t.getSnapshot=i,Ia(t)&&Ma(e)}function Ta(e,t,n){return n(function(){Ia(t)&&Ma(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function Ma(e){var t=Do(e,1);null!==t&&nc(t,e,1,-1)}function ka(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Ra(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function La(){return Aa().memoizedState}function Ba(e,t,n,i){var r=ya();sa.flags|=e,r.memoizedState=Ra(1|t,n,void 0,void 0===i?null:i)}function Pa(e,t,n,i){var r=Aa();i=void 0===i?null:i;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==i&&ma(i,a.deps))return void(r.memoizedState=Ra(t,n,o,i))}sa.flags|=e,r.memoizedState=Ra(1|t,n,o,i)}function Da(e,t){return Ba(8390656,8,e,t)}function Oa(e,t){return Pa(2048,8,e,t)}function Na(e,t){return Pa(4,2,e,t)}function Fa(e,t){return Pa(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,za.bind(null,t,e),n)}function ja(){}function Va(e,t){var n=Aa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=Aa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(si(n,t)||(n=mt(),sa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Qa(e,t){var n=At;At=0!==n&&4>n?n:4,e(!0);var i=oa.transition;oa.transition={};try{e(!1),t()}finally{At=n,oa.transition=i}}function Wa(){return Aa().memoizedState}function qa(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ka(t,n);else if(null!==(n=Po(e,t,n,i))){nc(n,e,i,ec()),Ja(n,t,i)}}function Xa(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ka(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,a)){var l=t.interleaved;return null===l?(r.next=r,Bo(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Po(e,t,r,i))&&(nc(n,e,i,r=ec()),Ja(n,t,i))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Ro,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ro,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ya();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,sa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:ka,useDebugValue:ja,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Qa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=sa,r=ya();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ml)throw Error(o(349));0!==(30&aa)||Ca(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Da(Ta.bind(null,i,a,e),[e]),i.flags|=2048,Ra(9,Sa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Ml.identifierPrefix;if(ro){var n=Jr;t=":"+t+"R"+(n=(Kr&~(1<<32-at(Kr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ro,useCallback:Va,useContext:Ro,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:Na,useLayoutEffect:Fa,useMemo:Ha,useReducer:xa,useRef:La,useState:function(){return xa(ba)},useDebugValue:ja,useDeferredValue:function(e){return Ga(Aa(),la.memoizedState,e)},useTransition:function(){return[xa(ba)[0],Aa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1},ts={readContext:Ro,useCallback:Va,useContext:Ro,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:Na,useLayoutEffect:Fa,useMemo:Ha,useReducer:_a,useRef:La,useState:function(){return _a(ba)},useDebugValue:ja,useDeferredValue:function(e){var t=Aa();return null===la?t.memoizedState=e:Ga(t,la.memoizedState,e)},useTransition:function(){return[_a(ba)[0],Aa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function is(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=zo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),jo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=zo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),jo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=zo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Uo(e,r,i))&&(nc(t,e,i,n),jo(t,e,i))}};function os(e,t,n,i,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function as(e,t,n){var i=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(r=Lr(t)?kr:Ir.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rr(e,r):Tr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},No(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ro(o):(o=Lr(t)?kr:Ir.current,r.context=Rr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(is(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),Ho(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",i=t;do{n+=j(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=i),hs(0,t)},n}function fs(e,t,n){(n=zo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ds;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ys=b.ReactCurrentOwner,As=!1;function bs(e,t,n,i){t.child=null===e?_o(t,null,n,i):xo(t,e.child,n,i)}function xs(e,t,n,i,r){n=n.render;var o=t.ref;return ko(t,r),i=ga(e,t,n,i,o,r),n=va(),null===e||As?(ro&&n&&eo(t),t.flags|=1,bs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Gs(e,t,r))}function _s(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ws(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Gs(e,t,r)}return t.flags|=1,(e=Bc(o,i)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(As=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Gs(e,t,r);0!==(131072&e.flags)&&(As=!0)}}return Ss(e,t,n,i,r)}function Es(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Bl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sr(Bl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Sr(Bl,Ll),Ll|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Sr(Bl,Ll),Ll|=i;return bs(e,t,r,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,i,r){var o=Lr(n)?kr:Ir.current;return o=Rr(t,o),ko(t,r),n=ga(e,t,n,i,o,r),i=va(),null===e||As?(ro&&i&&eo(t),t.flags|=1,bs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Gs(e,t,r))}function Ts(e,t,n,i,r){if(Lr(n)){var o=!0;Or(t)}else o=!1;if(ko(t,r),null===t.stateNode)Hs(e,t),as(t,n,i),ls(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ro(c):c=Rr(t,c=Lr(n)?kr:Ir.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==c)&&ss(t,a,i,c),Oo=!1;var d=t.memoizedState;a.state=d,Ho(t,i,a,r),l=t.memoizedState,s!==i||d!==l||Mr.current||Oo?("function"===typeof u&&(is(t,n,u,i),l=t.memoizedState),(s=Oo||os(t,n,s,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ro(l):l=Rr(t,l=Lr(n)?kr:Ir.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,i,l),Oo=!1,d=t.memoizedState,a.state=d,Ho(t,i,a,r);var f=t.memoizedState;s!==h||d!==f||Mr.current||Oo?("function"===typeof p&&(is(t,n,p,i),f=t.memoizedState),(c=Oo||os(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Is(e,t,n,i,o,r)}function Is(e,t,n,i,r,o){Cs(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Nr(t,n,!1),Gs(e,t,o);i=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=i.state,r&&Nr(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Pr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pr(0,t.context,!1),Ko(e,t.containerInfo)}function ks(e,t,n,i,r){return fo(),mo(r),t.flags|=256,bs(e,t,n,i),t.child}var Rs,Ls,Bs,Ps,Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ns(e,t,n){var i,r=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Sr(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,r,0,null),e=Dc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ds,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,i=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Oc({mode:"visible",children:i.children},r,0,null),(a=Dc(a,r,s,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zs(e,t,s,i=us(a=Error(o(419)),i,void 0))}if(l=0!==(s&e.childLanes),As||l){if(null!==(i=Ml)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Do(e,r),nc(i,e,r,-1))}return mc(),zs(e,t,s,i=us(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(qr[Xr++]=Kr,qr[Xr++]=Jr,qr[Xr++]=Yr,Kr=e.id,Jr=e.overflow,Yr=t),t=Fs(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(s){s=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Bc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?s=Bc(i,s):(s=Dc(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,r}return e=(s=e.child).sibling,r=Bc(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,i){return null!==i&&mo(i),xo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Mo(e.return,t,n)}function js(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Vs(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(bs(e,t,i.children,n),0!==(2&(i=ea.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Sr(ea,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),js(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}js(t,!0,n,null,o);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function qs(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Lr(t.type)&&Br(),Ws(t),null;case 3:return i=t.stateNode,Jo(),Cr(Mr),Cr(Ir),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ls(e,t),Ws(t),null;case 5:$o(t);var r=Yo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)Bs(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=Yo(Wo.current),ho(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[dr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":K(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":W(i),$(i,a,!0);break;case"textarea":W(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ae(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":K(e,i),r=Y(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=N({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",e):null!=u&&A(e,a,u,l))}switch(n){case"input":W(e),$(e,i,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+G(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo(Wo.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(a=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ws(t),null;case 13:if(Cr(ea),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Jo(),Ls(e,t),null===e&&Vi(t.stateNode.containerInfo),Ws(t),null;case 10:return Io(t.type._context),Ws(t),null;case 19:if(Cr(ea),null===(a=t.memoizedState))return Ws(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Qs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Qs(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sr(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Vl&&(t.flags|=128,i=!0,Qs(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ta(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ro)return Ws(t),null}else 2*Je()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Qs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Sr(ea,i?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Lr(t.type)&&Br(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Cr(Mr),Cr(Ir),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Cr(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ea),null;case 4:return Jo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Bs=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Yo(Wo.current);var o,a=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),a=[];break;case"select":r=N({},r,{value:void 0}),i=N({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ps=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ys=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Ec(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,n,o)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ks||$s(n,t);case 6:var i=ul,r=hl;ul=null,dl(e,t,n),hl=r,null!==(ul=i)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Ks&&($s(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Ec(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(i=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=i):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&$s(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Ec(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(r,a),Ae(l,s);var u=Ae(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):A(r,h,d,u)}switch(l){case"input":Z(r,a);break;case"textarea":oe(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(jl=Je())),4&i&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||h,ml(t,e),Ks=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(d=Zs=h;null!==Zs;){switch(f=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$s(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(i,n,g)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Zs=f):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),cl(e,sl(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,Al(e,t,n)}function Al(e,t,n){for(var i=0!==(1&e.mode);null!==Zs;){var r=Zs,o=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Ys;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Zs=r;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?_l(r):null!==l?(l.return=a,Zs=l):_l(r);for(;null!==o;)Zs=o,Al(o,t,n),o=o.sibling;Zs=r,Ys=s,Ks=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Zs=o):bl(e)}}function bl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ks)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Go(t,a,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Go(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&rl(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _l(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ec(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Ec(t,o,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var wl,El=Math.ceil,Cl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Il=0,Ml=null,kl=null,Rl=0,Ll=0,Bl=Er(0),Pl=0,Dl=null,Ol=0,Nl=0,Fl=0,zl=null,Ul=null,jl=0,Vl=1/0,Hl=null,Gl=!1,Ql=null,Wl=null,ql=!1,Xl=null,Yl=0,Kl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Il)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===$l&&($l=mt()),$l):0!==(e=At)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,i){if(50<Kl)throw Kl=0,Jl=null,Error(o(185));vt(e,n,i),0!==(2&Il)&&e===Ml||(e===Ml&&(0===(2&Il)&&(Nl|=n),4===Pl&&sc(e,Rl)),ic(e,i),1===n&&0===Il&&0===(1&t.mode)&&(Vl=Je()+500,zr&&Vr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=r[a];-1===l?0!==(s&n)&&0===(s&i)||(r[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var i=dt(e,e===Ml?Rl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zr=!0,jr(e)}(lc.bind(null,e)):jr(lc.bind(null,e)),ar(function(){0===(6&Il)&&Vr()}),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Mc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zl=-1,$l=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var i=dt(e,e===Ml?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Il;Il|=2;var a=fc();for(Ml===e&&Rl===t||(Hl=null,Vl=Je()+500,dc(e,t));;)try{yc();break}catch(l){pc(e,l)}To(),Cl.current=a,Il=r,null!==kl?t=0:(Ml=null,Rl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=Dl,dc(e,0),sc(e,i),ic(e,Je()),n;if(6===t)sc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(a=ft(e))&&(i=a,t=oc(e,a))),1===t))throw n=Dl,dc(e,0),sc(e,i),ic(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Ul,Hl);break;case 3:if(sc(e,i),(130023424&i)===i&&10<(t=jl+500-Je())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,Ul,Hl),t);break}xc(e,Ul,Hl);break;case 4:if(sc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-at(i);a=1<<s,(s=t[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=Je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,Ul,Hl),i);break}xc(e,Ul,Hl);break;default:throw Error(o(329))}}}return ic(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Fl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Il))throw Error(o(327));_c();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Dl,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Hl),ic(e,Je()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Vl=Je()+500,zr&&Vr())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&_c();var t=Il;Il|=1;var n=Tl.transition,i=At;try{if(Tl.transition=null,At=1,e)return e()}finally{At=i,Tl.transition=n,0===(6&(Il=t))&&Vr()}}function hc(){Ll=Bl.current,Cr(Bl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==kl)for(n=kl.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Br();break;case 3:Jo(),Cr(Mr),Cr(Ir),ia();break;case 5:$o(i);break;case 4:Jo();break;case 13:case 19:Cr(ea);break;case 10:Io(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Ml=e,kl=e=Bc(e.current,null),Rl=Ll=t,Pl=0,Dl=null,Fl=Nl=Ol=0,Ul=zl=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(i=(n=Lo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=r,i.next=a}n.pending=i}Lo=null}return e}function pc(e,t){for(;;){var n=kl;try{if(To(),ra.current=Za,ua){for(var i=sa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Sl.current=null,null===n||null===n.return){Pl=1,Dl=t,kl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Pl&&(Pl=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(0,c,t));break e;case 1:l=c;var y=a.type,A=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===Wl||!Wl.has(A)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Za,null===e?Za:e}function mc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Nl)||sc(Ml,Rl)}function gc(e,t){var n=Il;Il|=2;var i=fc();for(Ml===e&&Rl===t||(Hl=null,dc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(To(),Il=n,Cl.current=i,null!==kl)throw Error(o(261));return Ml=null,Rl=0,Pl}function vc(){for(;null!==kl;)Ac(kl)}function yc(){for(;null!==kl&&!Ye();)Ac(kl)}function Ac(e){var t=wl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bc(e):kl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ll)))return void(kl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Pl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,n){var i=At,r=Tl.transition;try{Tl.transition=null,At=1,function(e,t,n,i){do{_c()}while(null!==Xl);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,a),e===Ml&&(kl=Ml=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Mc(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=At;At=1;var l=Il;Il|=4,Sl.current=null,function(e,t){if(er=Gt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=s),p===a&&++h===i&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Gt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,A=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Gt=!!er,tr=er=null,e.current=n,yl(n,e,r),Ke(),Il=l,At=s,Tl.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Yl=r),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Vr()}(e,t,n,i)}finally{Tl.transition=r,At=i}return null}function _c(){if(null!==Xl){var e=bt(Yl),t=Tl.transition,n=At;try{if(Tl.transition=null,At=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zs=d;else for(;null!==Zs;){var p=(h=Zs).sibling,f=h.return;if(ol(h),h===u){Zs=null;break}if(null!==p){p.return=f,Zs=p;break}Zs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var A=e.current;for(Zs=A;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=A;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Ec(l,l.return,_)}if(l===s){Zs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zs=x;break e}Zs=l.return}}if(Il=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(_){}i=!0}return i}finally{At=n,Tl.transition=t}}return!1}function wc(e,t,n){e=Uo(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){t=Uo(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Rl&n)===n&&(4===Pl||3===Pl&&(130023424&Rl)===Rl&&500>Je()-jl?dc(e,0):Fl|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Do(e,t))&&(vt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Sc(e,n)}function Mc(e,t){return qe(e,t)}function kc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new kc(e,t,n,i)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,i,r,a){var s=2;if(i=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Dc(n.children,r,a,t);case E:s=8,r|=8;break;case C:return(e=Rc(12,n,t,2|r)).elementType=C,e.lanes=a,e;case M:return(e=Rc(13,n,t,r)).elementType=M,e.lanes=a,e;case k:return(e=Rc(19,n,t,r)).elementType=k,e.lanes=a,e;case B:return Oc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case L:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Dc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function Oc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=B,e.lanes=n,e.stateNode={isHidden:!1},e}function Nc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},No(o),e}function jc(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Lr(n))return Dr(e,n,t)}return t}function Vc(e,t,n,i,r,o,a,s,l){return(e=Uc(n,i,!0,e,0,o,0,s,l)).context=jc(null),n=e.current,(o=zo(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Hc(e,t,n,i){var r=t.current,o=ec(),a=tc(r);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Uo(r,t,a))&&(nc(e,r,a,o),jo(e,r,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mr.current)As=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),fo();break;case 5:Zo(t);break;case 1:Lr(t.type)&&Or(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Sr(wo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Sr(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ns(e,t,n):(Sr(ea,1&ea.current),null!==(e=Gs(e,t,n))?e.sibling:null);Sr(ea,1&ea.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Sr(ea,ea.current),i)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Gs(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,ro&&0!==(1048576&t.flags)&&$r(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Hs(e,t),e=t.pendingProps;var r=Rr(t,Ir.current);ko(t,n),r=ga(null,t,i,e,r,n);var a=va();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(i)?(a=!0,Or(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,No(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,ls(t,i,e,n),t=Is(null,t,i,!0,a,n)):(t.tag=0,ro&&a&&eo(t),bs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(i),e=ns(i,e),r){case 0:t=Ss(null,t,i,e,n);break e;case 1:t=Ts(null,t,i,e,n);break e;case 11:t=xs(null,t,i,e,n);break e;case 14:t=_s(null,t,i,ns(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ss(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ts(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 3:e:{if(Ms(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,Fo(e,t),Ho(t,i,null,n);var s=t.memoizedState;if(i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,i,n,r=cs(Error(o(423)),t));break e}if(i!==r){t=ks(e,t,i,n,r=cs(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=_o(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Gs(e,t,n);break e}bs(e,t,i,n)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==a&&nr(i,a)&&(t.flags|=32),Cs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ns(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=xo(t,null,i,n):bs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xs(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value,Sr(wo,i._currentValue),i._currentValue=s,null!==a)if(si(a.value,s)){if(a.children===r.children&&!Mr.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=zo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mo(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Mo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,ko(t,n),i=i(r=Ro(r)),t.flags|=1,bs(e,t,i,n),t.child;case 14:return r=ns(i=t.type,t.pendingProps),_s(e,t,i,r=ns(i.type,r),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ns(i,r),Hs(e,t),t.tag=1,Lr(i)?(e=!0,Or(t)):e=!1,ko(t,n),as(t,i,r),ls(t,i,r,n),Is(null,t,i,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof r){var s=r;r=function(){var e=Gc(a);s.call(e)}}Hc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Gc(a);o.call(e)}}var a=Vc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fr]=a.current,Vi(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Gc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,Vi(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,i)}),l}(n,t,e,r,i);return Gc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[fr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Il)&&(Vl=Je()+500,Vr()))}break;case 13:uc(function(){var t=Do(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),n=Do(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return At},Ct=function(e,t){var n=At;try{return At=e,t()}finally{At=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(o(90));q(i),Z(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Me=uc;var eu={usingClientEntryPoint:!1,Events:[Ar,br,xr,Se,Te,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,i="",r=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,a,s),e[fr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $c(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},2897:(e,t,n)=>{var i=n(3693);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>_.A,StyledEngineProvider:()=>x,ThemeContext:()=>r.T,css:()=>v.AH,default:()=>w,internal_processStyles:()=>E,internal_serializeStyles:()=>S,keyframes:()=>v.i7});var i=n(8168),r=n(9369),o=n(6598),a=n(9436),s=n(1722),l=n(5043),c=n(918),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,c.A)(function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),d=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:d},f=function(e,t,n){var i;if(t){var r=t.shouldForwardProp;i=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof i&&n&&(i=e.__emotion_forwardProp),i},m=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return(0,s.SF)(t,n,i),(0,a.s)(function(){return(0,s.sk)(t,n,i)}),null},g=function e(t,n){var a,c,u=t.__emotion_real===t,h=u&&t.__emotion_base||t;void 0!==n&&(a=n.label,c=n.target);var d=f(t,n,u),g=d||p(h),v=!g("as");return function(){var y=arguments,A=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&A.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)A.push.apply(A,y);else{var b=y[0];A.push(b[0]);for(var x=y.length,_=1;_<x;_++)A.push(y[_],b[_])}var w=(0,r.w)(function(e,t,n){var i=v&&e.as||h,a="",u=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=l.useContext(r.T)}"string"===typeof e.className?a=(0,s.Rk)(t.registered,u,e.className):null!=e.className&&(a=e.className+" ");var b=(0,o.J)(A.concat(u),t.registered,f);a+=t.key+"-"+b.name,void 0!==c&&(a+=" "+c);var x=v&&void 0===d?p(i):g,_={};for(var w in e)v&&"as"===w||x(w)&&(_[w]=e[w]);return _.className=a,n&&(_.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:b,isStringTag:"string"===typeof i}),l.createElement(i,_))});return w.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=h,w.__emotion_styles=A,w.__emotion_forwardProp=d,Object.defineProperty(w,"toString",{value:function(){return"."+c}}),w.withComponent=function(t,r){return e(t,(0,i.A)({},n,r,{shouldForwardProp:f(w,r,!0)})).apply(void 0,A)},w}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){g[e]=g(e)});var v=n(3290),y=n(3803),A=n(579);const b=new Map;function x(e){const{injectFirst:t,enableCssLayer:n,children:i}=e,o=l.useMemo(()=>{const e="".concat(t,"-").concat(n);if("object"===typeof document&&b.has(e))return b.get(e);const i=function(e,t){const n=(0,y.A)({key:"css",prepend:e});if(t){const e=n.insert;n.insert=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n[1].styles.match(/^@layer\s+[^{]*$/)||(n[1].styles="@layer mui {".concat(n[1].styles,"}")),e(...n)}}return n}(t,n);return b.set(e,i),i},[t,n]);return t||n?(0,A.jsx)(r.C,{value:o,children:i}):i}var _=n(869);function w(e,t){return g(e,t)}const E=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},C=[];function S(e){return C[0]=e,(0,o.J)(C)}},3193:(e,t,n)=>{var i=n(9066).f,r=n(1496),o=n(4027)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},3204:(e,t,n)=>{var i=n(8968),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i.A,extendSxProp:()=>r.A,unstable_createStyleFunctionSx:()=>i.k,unstable_defaultSxConfig:()=>o.A});var i=n(8812),r=n(8698),o=n(7758)},3255:(e,t,n)=>{var i=n(1774),r=n(8312),o=n(3204);e.exports=function(e){return function(t,n,a){var s,l=i(t),c=r(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>h,mL:()=>c});var i=n(9369),r=n(5043),o=n(1722),a=n(9436),s=n(6598),l=(n(3803),n(219),function(e,t){var n=arguments;if(null==t||!i.h.call(t,"css"))return r.createElement.apply(void 0,n);var o=n.length,a=new Array(o);a[0]=i.E,a[1]=(0,i.c)(e,t);for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,i.w)(function(e,t){var n=e.styles,l=(0,s.J)([n],void 0,r.useContext(i.T)),c=r.useRef();return(0,a.i)(function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,r=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==r&&(i=!0,r.setAttribute("data-emotion",e),n.hydrate([r])),c.current=[n,i],function(){n.flush()}},[t]),(0,a.i)(function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}t.insert("",l,n,!1)}},[t,l.name]),null});function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.J)(t)}function h(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},3350:(e,t)=>{t.f={}.propertyIsEnumerable},3382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var i=n(528);const r=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(r);return t&&t[1]||""}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function s(e,t,n){const i=a(t);return e.displayName||(""!==i?"".concat(n,"(").concat(i,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return a(e,"Component");if("object"===typeof e)switch(e.$$typeof){case i.vM:return s(e,e.render,"ForwardRef");case i.lD:return s(e,e.type,"memo");default:return}}}},3384:(e,t,n)=>{e.exports=n(9993)},3404:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=!0,r="Invariant failed";function o(e,t){if(!e){if(i)throw new Error(r);var n="function"===typeof t?t():t,o=n?"".concat(r,": ").concat(n):r;throw new Error(o)}}},3655:(e,t,n)=>{n(6535)("observable")},3693:(e,t,n)=>{var i=n(7736);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>re});var i=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(i){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),r=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,A=0,b="";function x(e,t,n,i,r,o,a){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:m,column:g,length:a,return:""}}function _(e,t){return a(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function w(){return A=y>0?u(b,--y):0,g--,10===A&&(g=1,m--),A}function E(){return A=y<v?u(b,y++):0,g++,10===A&&(g=1,m++),A}function C(){return u(b,y)}function S(){return y}function T(e,t){return h(b,e,t)}function I(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function M(e){return m=g=1,v=d(b=e),y=0,[]}function k(e){return b="",e}function R(e){return s(T(y-1,P(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(A=C())&&A<33;)E();return I(e)>2||I(A)>3?"":" "}function B(e,t){for(;--t&&E()&&!(A<48||A>102||A>57&&A<65||A>70&&A<97););return T(e,S()+(t<6&&32==C()&&32==E()))}function P(e){for(;E();)switch(A){case e:return y;case 34:case 39:34!==e&&39!==e&&P(A);break;case 40:41===e&&P(e);break;case 92:E()}return y}function D(e,t){for(;E()&&e+A!==57&&(e+A!==84||47!==C()););return"/*"+T(t,y-1)+"*"+o(47===e?e:E())}function O(e){for(;!I(C());)E();return T(e,y)}var N="-ms-",F="-moz-",z="-webkit-",U="comm",j="rule",V="decl",H="@keyframes";function G(e,t){for(var n="",i=p(e),r=0;r<i;r++)n+=t(e[r],r,e,t)||"";return n}function Q(e,t,n,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case U:return"";case H:return e.return=e.value+"{"+G(e.children,i)+"}";case j:e.value=e.props.join(",")}return d(n=G(e.children,i))?e.return=e.value+"{"+n+"}":""}function W(e){return k(q("",null,null,null,[""],e=M(e),0,[0],e))}function q(e,t,n,i,r,a,s,h,p){for(var m=0,g=0,v=s,y=0,A=0,b=0,x=1,_=1,T=1,I=0,M="",k=r,P=a,N=i,F=M;_;)switch(b=I,I=E()){case 40:if(108!=b&&58==u(F,v-1)){-1!=c(F+=l(R(I),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:F+=R(I);break;case 9:case 10:case 13:case 32:F+=L(b);break;case 92:F+=B(S()-1,7);continue;case 47:switch(C()){case 42:case 47:f(Y(D(E(),S()),t,n),p);break;default:F+="/"}break;case 123*x:h[m++]=d(F)*T;case 125*x:case 59:case 0:switch(I){case 0:case 125:_=0;case 59+g:-1==T&&(F=l(F,/\f/g,"")),A>0&&d(F)-v&&f(A>32?K(F+";",i,n,v-1):K(l(F," ","")+";",i,n,v-2),p);break;case 59:F+=";";default:if(f(N=X(F,t,n,m,g,r,h,M,k=[],P=[],v),a),123===I)if(0===g)q(F,t,N,N,k,a,v,h,P);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:q(e,N,N,i&&f(X(e,N,N,0,0,r,h,M,r,k=[],v),P),r,P,v,h,i?k:P);break;default:q(F,N,N,N,[""],P,0,h,P)}}m=g=A=0,x=T=1,M=F="",v=s;break;case 58:v=1+d(F),A=b;default:if(x<1)if(123==I)--x;else if(125==I&&0==x++&&125==w())continue;switch(F+=o(I),I*x){case 38:T=g>0?1:(F+="\f",-1);break;case 44:h[m++]=(d(F)-1)*T,T=1;break;case 64:45===C()&&(F+=R(E())),y=C(),g=v=d(M=F+=O(S())),I++;break;case 45:45===b&&2==d(F)&&(x=0)}}return a}function X(e,t,n,i,o,a,c,u,d,f,m){for(var g=o-1,v=0===o?a:[""],y=p(v),A=0,b=0,_=0;A<i;++A)for(var w=0,E=h(e,g+1,g=r(b=c[A])),C=e;w<y;++w)(C=s(b>0?v[w]+" "+E:l(E,/&\f/g,v[w])))&&(d[_++]=C);return x(e,t,n,0===o?j:u,d,f,m)}function Y(e,t,n){return x(e,t,n,U,o(A),h(e,2,-2),0)}function K(e,t,n,i){return x(e,t,n,V,h(e,0,i),h(e,i+1,-1),i)}var J=function(e,t,n){for(var i=0,r=0;i=r,r=C(),38===i&&12===r&&(t[n]=1),!I(r);)E();return T(e,y)},Z=function(e,t){return k(function(e,t){var n=-1,i=44;do{switch(I(i)){case 0:38===i&&12===C()&&(t[n]=1),e[n]+=J(y-1,t,n);break;case 2:e[n]+=R(i);break;case 4:if(44===i){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(i)}}while(i=E());return e}(M(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(n))&&!i){$.set(e,!0);for(var r=[],o=Z(t,r),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=r[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+N+e+e;case 6828:case 4268:return z+e+N+e+e;case 6165:return z+e+N+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+N+"flex-$1$2")+e;case 5443:return z+e+N+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+N+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+N+l(e,"shrink","negative")+e;case 5292:return z+e+N+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+N+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+N+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+N+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+N+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+N+e+e}return e}var ie=[function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case H:return G([_(e,{value:l(e.value,"@","@"+z)})],i);case j:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return G([_(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return G([_(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,N+"input-$1")]})],i)}return""})}}],re=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var r,o,a=e.stylisPlugins||ie,s={},l=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)});var c,u,h=[Q,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,i,r,o){for(var a="",s=0;s<t;s++)a+=e[s](n,i,r,o)||"";return a}}([ee,te].concat(a,h));o=function(e,t,n,i){c=n,G(W(e?e+"{"+t.styles+"}":t.styles),d),i&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new i({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return f.sheet.hydrate(l),f}},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(9172);const r=function(e,t){return t?(0,i.A)(e,t,{clone:!1}):e}},3914:(e,t,n)=>{"use strict";var i=n(9799),r=n(7832),o=n(3384),a=n(9993),s=n(859),l=n(4301),c=n(3193),u=n(5436),h=n(4027)("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,v,y,A){l(n,t,g);var b,x,_,w=function(e){if(!d&&e in T)return T[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",C=v==f,S=!1,T=e.prototype,I=T[h]||T["@@iterator"]||v&&T[v],M=I||w(v),k=v?C?w("entries"):M:void 0,R="Array"==t&&T.entries||I;if(R&&(_=u(R.call(new e)))!==Object.prototype&&_.next&&(c(_,E,!0),i||"function"==typeof _[h]||a(_,h,m)),C&&I&&I.name!==f&&(S=!0,M=function(){return I.call(this)}),i&&!A||!d&&!S&&T[h]||a(T,h,M),s[t]=M,s[E]=m,v)if(b={values:C?M:w(f),keys:y?M:w(p),entries:k},A)for(x in b)x in T||o(T,x,b[x]);else r(r.P+r.F*(d||S),t,b);return b}},4008:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},4027:(e,t,n)=>{var i=n(8563)("wks"),r=n(1422),o=n(5761).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},4066:function(e,t,n){var i=n(2897).default;e.exports=function(){"use strict";var e={},t={};function n(n,i,r){if(t[n]=r,"index"===n){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",a={};return t.shared(a),t.index(e,a),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return n("shared",["exports"],function(e){function t(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var r=o;function o(e,t){this.x=e,this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var a=n(r),s=l;function l(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}l.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var a=0,s=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var c=n(s);let u,h;function d(){return null==u&&(u="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),u}function p(){if(null==h&&(h=!1,d())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let i=0;i<e*e;i++){const n=4*i;t.fillStyle="rgb(".concat(n,",").concat(n+1,",").concat(n+2,")"),t.fillRect(i%e,Math.floor(i/e),1,1)}const n=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&n[t]!==t){h=!0;break}}}return h||!1}function f(e,t,n,i){const r=new c(e,t,n,i);return e=>r.solve(e)}const m=f(.25,.1,.25,1);function g(e,t,n){return Math.min(n,Math.max(t,e))}function v(e,t,n){const i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}let A=1;function b(e,t,n){const i={};for(const r in e)i[r]=t.call(this,e[r],r,e);return i}function x(e,t,n){const i={};for(const r in e)t.call(this,e[r],r,e)&&(i[r]=e[r]);return i}function _(e){return Array.isArray(e)?e.map(_):"object"==typeof e&&e?b(e,_):e}const w={};function E(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function C(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function S(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let T=null;function I(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function k(e,n,i,r,o){return t(this,void 0,void 0,function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const a=null==t?void 0:t.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error("Unrecognized format ".concat(a));const s=a.startsWith("BGR"),l=new Uint8ClampedArray(r*o*4);if(yield t.copyTo(l,function(e,t,n,i,r){const o=4*Math.max(-t,0),a=(Math.max(0,n)-n)*i*4+o,s=4*i,l=Math.max(0,t),c=Math.max(0,n);return{rect:{x:l,y:c,width:Math.min(e.width,t+i)-l,height:Math.min(e.height,n+r)-c},layout:[{offset:a,stride:s}]}}(e,n,i,r,o)),s)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}})}let R,L;const B="AbortError";function P(){return new Error(B)}const D={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function O(e){return D.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const N="global-dispatcher";class F extends Error{constructor(e,t,n,i){super("AJAXError: ".concat(t," (").concat(e,"): ").concat(n)),this.status=e,this.statusText=t,this.url=n,this.body=i}}const z=()=>S(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,U=function(e,n){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=O(e.url);if(t)return t(e,n);if(S(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:N},n)}if(!(/^file:/.test(i=e.url)||/^file:/.test(z())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,n){return t(this,void 0,void 0,function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:z(),signal:n.signal});"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");const i=yield fetch(t);if(!i.ok){const t=yield i.blob();throw new F(i.status,i.statusText,e.url,t)}let r;r="arrayBuffer"===e.type||"image"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text();const o=yield r;if(n.signal.aborted)throw P();return{data:o,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}})}(e,n);if(S(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:N},n)}var i;return function(e,t){return new Promise((n,i)=>{var r;const o=new XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);"json"===e.type&&(o.responseType="text",(null===(r=e.headers)||void 0===r?void 0:r.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{i(new Error(o.statusText))},o.onload=()=>{if(!t.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return void i(e)}n({data:t,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const t=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});i(new F(o.status,o.statusText,e.url,t))}},t.signal.addEventListener("abort",()=>{o.abort(),i(P())}),o.send(e.body)})}(e,n)};function j(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function V(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function H(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}class G{constructor(e){y(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class Q extends G{constructor(e){super("error",y({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class W{on(e,t){return this._listeners=this._listeners||{},V(e,t,this._listeners),this}off(e,t){return H(e,t,this._listeners),H(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},V(e,t,this._oneTimeListeners),this):new Promise(t=>this.once(e,t))}fire(e,t){"string"==typeof e&&(e=new G(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of i)H(n,o,this._oneTimeListeners),o.call(this,e);const r=this._eventedParent;r&&(y(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(e))}else e instanceof Q&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const X=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Y(e,t){const n={};for(const i in e)"ref"!==i&&(n[i]=e[i]);return X.forEach(e=>{e in t&&(n[e]=t[e])}),n}function K(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!K(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!K(e[n],t[n]))return!1;return!0}return e===t}function J(e,t){e.push(t)}function Z(e,t,n){J(n,{command:"addSource",args:[e,t[e]]})}function $(e,t,n){J(t,{command:"removeSource",args:[e]}),n[e]=!0}function ee(e,t,n,i){$(e,n,i),Z(e,t,n)}function te(e,t,n){let i;for(i in e[n])if(Object.prototype.hasOwnProperty.call(e[n],i)&&"data"!==i&&!K(e[n][i],t[n][i]))return!1;for(i in t[n])if(Object.prototype.hasOwnProperty.call(t[n],i)&&"data"!==i&&!K(e[n][i],t[n][i]))return!1;return!0}function ne(e,t,n,i,r,o){e=e||{},t=t||{};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(K(e[a],t[a])||n.push({command:o,args:[i,a,t[a],r]}));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(K(e[a],t[a])||n.push({command:o,args:[i,a,t[a],r]}))}function ie(e){return e.id}function re(e,t){return e[t.id]=t,e}class oe{constructor(e,t,n,i){this.message=(e?"".concat(e,": "):"")+n,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}class se extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[n,i]of t)this.bindings[n]=i}concat(e){return new le(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ce={kind:"null"},ue={kind:"number"},he={kind:"string"},de={kind:"boolean"},pe={kind:"color"},fe={kind:"object"},me={kind:"value"},ge={kind:"collator"},ve={kind:"formatted"},ye={kind:"padding"},Ae={kind:"resolvedImage"},be={kind:"variableAnchorOffsetCollection"};function xe(e,t){return{kind:"array",itemType:e,N:t}}function _e(e){if("array"===e.kind){const t=_e(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const we=[ce,ue,he,de,pe,ve,fe,xe(me),ye,Ae,be];function Ee(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ee(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!Ee(e,t))return null}return"Expected ".concat(_e(e)," but found ").concat(_e(t)," instead.")}function Ce(e,t){return t.some(t=>t.kind===e.kind)}function Se(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function Te(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Ie=.96422,Me=.82521,ke=4/29,Re=6/29,Le=3*Re*Re,Be=Re*Re*Re,Pe=Math.PI/180,De=180/Math.PI;function Oe(e){return(e%=360)<0&&(e+=360),e}function Ne(e){let t,n,[i,r,o,a]=e;const s=ze((.2225045*(i=Fe(i))+.7168786*(r=Fe(r))+.0606169*(o=Fe(o)))/1);i===r&&r===o?t=n=s:(t=ze((.4360747*i+.3850649*r+.1430804*o)/Ie),n=ze((.0139322*i+.0971045*r+.7141733*o)/Me));const l=116*s-16;return[l<0?0:l,500*(t-s),200*(s-n),a]}function Fe(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ze(e){return e>Be?Math.pow(e,1/3):e/Le+ke}function Ue(e){let[t,n,i,r]=e,o=(t+16)/116,a=isNaN(n)?o:o+n/500,s=isNaN(i)?o:o-i/200;return o=1*Ve(o),a=Ie*Ve(a),s=Me*Ve(s),[je(3.1338561*a-1.6168667*o-.4906146*s),je(-.9787684*a+1.9161415*o+.033454*s),je(.0719453*a-.2289914*o+1.4052427*s),r]}function je(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function Ve(e){return e>Re?e*e*e:Le*(e-ke)}function He(e){return parseInt(e.padEnd(2,e),16)/255}function Ge(e,t){return Qe(t?e/100:e,0,1)}function Qe(e,t,n){return Math.min(Math.max(t,e),n)}function We(e){return!e.some(Number.isNaN)}const qe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Xe{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=n,this.a=i,r||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,n,i]))}static parse(e){if(e instanceof Xe)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=qe[e];if(t){const[e,n,i]=t;return[e/255,n/255,i/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[He(e.slice(n,n+=t)),He(e.slice(n,n+=t)),He(e.slice(n,n+=t)),He(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,n,i,r,o,a,s,l,c,u,h,d]=t,p=[r||" ",s||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[i,a,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[Qe(+n/t,0,1),Qe(+o/t,0,1),Qe(+l/t,0,1),h?Ge(+h,d):1];if(We(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,i,r,o,a,s,l,c]=n,u=[i||" ",o||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,Qe(+r,0,100),Qe(+a,0,100),l?Ge(+l,c):1];if(We(e))return function(e){let[t,n,i,r]=e;function o(e){const r=(e+t/30)%12,o=n*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(r-3,9-r,1))}return t=Oe(t),n/=100,i/=100,[o(0),o(8),o(4),r]}(e)}}}(e);return t?new Xe(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:i}=this,r=i||1/0;return this.overwriteGetter("rgb",[e/r,t/r,n/r,i])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,i,r]=Ne(e),o=Math.sqrt(n*n+i*i);return[Math.round(1e4*o)?Oe(Math.atan2(i,n)*De):NaN,o,t,r]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ne(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,i]=this.rgb;return"rgba(".concat([e,t,n].map(e=>Math.round(255*e)).join(","),",").concat(i,")")}}Xe.black=new Xe(0,0,0,1),Xe.white=new Xe(1,1,1,1),Xe.transparent=new Xe(0,0,0,0),Xe.red=new Xe(1,0,0,1);class Ye{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ke{constructor(e,t,n,i,r){this.text=e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=r}}class Je{constructor(e){this.sections=e}static fromString(e){return new Je([new Ke(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Je?e:Je.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class Ze{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ze)return e;if("number"==typeof e)return new Ze([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Ze(e)}}toString(){return JSON.stringify(this.values)}}const $e=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class et{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof et)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1];if("string"!=typeof n||!$e.has(n))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new et(e)}}toString(){return JSON.stringify(this.values)}}class tt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new tt({name:e,available:!1}):null}}function nt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([e,t,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function it(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof Xe||e instanceof Ye||e instanceof Je||e instanceof Ze||e instanceof et||e instanceof tt)return!0;if(Array.isArray(e)){for(const t of e)if(!it(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!it(e[t]))return!1;return!0}return!1}function rt(e){if(null===e)return ce;if("string"==typeof e)return he;if("boolean"==typeof e)return de;if("number"==typeof e)return ue;if(e instanceof Xe)return pe;if(e instanceof Ye)return ge;if(e instanceof Je)return ve;if(e instanceof Ze)return ye;if(e instanceof et)return be;if(e instanceof tt)return Ae;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const e=rt(i);if(n){if(n===e)continue;n=me;break}n=e}return xe(n||me,t)}return fe}function ot(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Xe||e instanceof Je||e instanceof Ze||e instanceof et||e instanceof tt?e.toString():JSON.stringify(e)}class at{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!it(e[1]))return t.error("invalid value");const n=e[1];let i=rt(n);const r=t.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new at(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class st{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const lt={string:he,number:ue,boolean:de,object:fe};class ct{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,i=1;const r=e[0];if("array"===r){let r,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in lt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=lt[n],i++}else r=me;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}n=xe(r,o)}else{if(!lt[r])throw new Error("Types doesn't contain name = ".concat(r));n=lt[r]}const o=[];for(;i<e.length;i++){const n=t.parse(e[i],i,me);if(!n)return null;o.push(n)}return new ct(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Ee(this.type,rt(n)))return n;if(t===this.args.length-1)throw new st("Expected value to be of type ".concat(_e(this.type),", but found ").concat(_e(rt(n))," instead."))}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const ut={"to-boolean":de,"to-color":pe,"to-number":ue,"to-string":he};class ht{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!ut[n])throw new Error("Can't parse ".concat(n," as it is not part of the known types"));if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const i=ut[n],r=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,me);if(!n)return null;r.push(n)}return new ht(i,r)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof Xe)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):nt(t[0],t[1],t[2],t[3]),!n))return new Xe(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new st(n||"Could not parse color from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const i=Ze.parse(t);if(i)return i}throw new st("Could not parse padding from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const i=et.parse(t);if(i)return i}throw new st("Could not parse variableAnchorOffsetCollection from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new st("Could not convert ".concat(JSON.stringify(t)," to number."))}case"formatted":return Je.fromString(ot(this.args[0].evaluate(e)));case"resolvedImage":return tt.fromString(ot(this.args[0].evaluate(e)));default:return ot(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const dt=["Unknown","Point","LineString","Polygon"];class pt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Xe.parse(e)),t}}class ft{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new le,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=n,this.key=n.map(e=>"[".concat(e,"]")).join(""),this.scope=r,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}_parse(e,t){function n(e,t,n){return"assert"===n?new ct(t,[e]):"coerce"===n?new ht(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[i];if(r){let i=r.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,r=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind)if("padding"!==e.kind||"value"!==r.kind&&"number"!==r.kind&&"array"!==r.kind)if("variableAnchorOffsetCollection"!==e.kind||"value"!==r.kind&&"array"!==r.kind){if(this.checkSubtype(e,r))return null}else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof at)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new pt;try{i=new at(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,n){const i="number"==typeof e?this.path.concat(e):this.path,r=n?this.scope.concat(n):this.scope;return new ft(this.registry,this._isConstant,i,t||null,r,this.errors)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r="".concat(this.key).concat(n.map(e=>"[".concat(e,"]")).join(""));this.errors.push(new se(r,e))}checkSubtype(e,t){const n=Ee(e,t);return n&&this.error(n),n}}class mt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error("Expected string, but found ".concat(typeof i," instead."),r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new mt(n,i):null}outputDefined(){return this.result.outputDefined()}}class gt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new gt(n,t.scope.get(n)):t.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class vt{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ue),i=t.parse(e[2],2,xe(t.expectedType||me));return n&&i?new vt(i.type.itemType,n,i):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new st("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new st("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new st("Array index must be an integer, but found ".concat(t," instead."));return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class yt{constructor(e,t){this.type=de,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,me),i=t.parse(e[2],2,me);return n&&i?Ce(n.type,[de,he,ue,ce,me])?new yt(n,i):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Se(t,["boolean","string","number","null"]))throw new st("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(rt(t))," instead."));if(!Se(n,["string","array"]))throw new st("Expected second argument to be of type array or string, but found ".concat(_e(rt(n))," instead."));return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class At{constructor(e,t,n){this.type=ue,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,me),i=t.parse(e[2],2,me);if(!n||!i)return null;if(!Ce(n.type,[de,he,ue,ce,me]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,ue);return r?new At(n,i,r):null}return new At(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Se(t,["boolean","string","number","null"]))throw new st("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(rt(t))," instead."));let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Se(n,["string"])){const e=n.indexOf(t,i);return-1===e?-1:[...n.slice(0,e)].length}if(Se(n,["array"]))return n.indexOf(t,i);throw new st("Expected second argument to be of type array or string, but found ".concat(_e(rt(n))," instead."))}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class bt{constructor(e,t,n,i,r,o){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,rt(e)))return null}else n=rt(e);if(void 0!==r[String(e)])return c.error("Branch labels must be unique.");r[String(e)]=o.length}const u=t.parse(s,l,i);if(!u)return null;i=i||u.type,o.push(u)}const a=t.parse(e[1],1,me);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,i);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new bt(n,i,a,r,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(rt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class xt{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const r=t.parse(e[o],o,de);if(!r)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;i.push([r,a]),n=n||a.type}const r=t.parse(e[e.length-1],e.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new xt(n,i,r)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(e=>{let[t,n]=e;return n.outputDefined()})&&this.otherwise.outputDefined()}}class _t{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,me),i=t.parse(e[2],2,ue);if(!n||!i)return null;if(!Ce(n.type,[xe(me),he,me]))return t.error("Expected first argument to be of type array or string, but found ".concat(_e(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,ue);return r?new _t(n.type,n,i,r):null}return new _t(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Se(t,["string"]))return[...t].slice(n,i).join("");if(Se(t,["array"]))return t.slice(n,i);throw new st("Expected first argument to be of type array or string, but found ".concat(_e(rt(t))," instead."))}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function wt(e,t){const n=e.length-1;let i,r,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=e[s],r=e[s+1],i<=t){if(s===n||t<r)return s;o=s+1}else{if(!(i>t))throw new st("Input is not a number.");a=s-1}return 0}class Et{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,r]of n)this.labels.push(i),this.outputs.push(r)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ue);if(!n)return null;const i=[];let r=null;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,r);if(!c)return null;r=r||c.type,i.push([n,c])}return new Et(r,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[wt(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var St=Tt;function Tt(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}Tt.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var a=0,s=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var It=Ct(St);function Mt(e,t,n){return e+n*(t-e)}function kt(e,t,n){return e.map((e,i)=>Mt(e,t[i],n))}const Rt={number:Mt,color:function(e,t,n){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[i,r,o,a]=kt(e.rgb,t.rgb,n);return new Xe(i,r,o,a,!1)}case"hcl":{const[i,r,o,a]=e.hcl,[s,l,c,u]=t.hcl;let h,d;if(isNaN(i)||isNaN(s))isNaN(i)?isNaN(s)?h=NaN:(h=s,1!==o&&0!==o||(d=l)):(h=i,1!==c&&0!==c||(d=r));else{let e=s-i;s>i&&e>180?e-=360:s<i&&i-s>180&&(e+=360),h=i+n*e}const[p,f,m,g]=function(e){let[t,n,i,r]=e;return t=isNaN(t)?0:t*Pe,Ue([i,Math.cos(t)*n,Math.sin(t)*n,r])}([h,null!=d?d:Mt(r,l,n),Mt(o,c,n),Mt(a,u,n)]);return new Xe(p,f,m,g,!1)}case"lab":{const[i,r,o,a]=Ue(kt(e.lab,t.lab,n));return new Xe(i,r,o,a,!1)}}},array:kt,padding:function(e,t,n){return new Ze(kt(e.values,t.values,n))},variableAnchorOffsetCollection:function(e,t,n){const i=e.values,r=t.values;if(i.length!==r.length)throw new st("Cannot interpolate values of different length. from: ".concat(e.toString(),", to: ").concat(t.toString()));const o=[];for(let a=0;a<i.length;a+=2){if(i[a]!==r[a])throw new st("Cannot interpolate values containing mismatched anchors. from[".concat(a,"]: ").concat(i[a],", to[").concat(a,"]: ").concat(r[a]));o.push(i[a]);const[e,t]=i[a+1],[s,l]=r[a+1];o.push([Mt(e,s,n),Mt(t,l,n)])}return new et(o)}};class Lt{constructor(e,t,n,i,r){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[o,a]of r)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,i){let r=0;if("exponential"===e.name)r=Bt(t,e.base,n,i);else if("linear"===e.name)r=Bt(t,1,n,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;r=new It(o[0],o[1],o[2],o[3]).solve(Bt(t,1,n,i))}return r}static parse(e,t){let[n,i,r,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type ".concat(String(i[0])),1,0);{const e=i.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(r,2,ue),!r)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=pe:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],i=l+3,r=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(n,r,s);if(!c)return null;s=s||c.type,a.push([e,c])}return Te(s,ue)||Te(s,pe)||Te(s,ye)||Te(s,be)||Te(s,xe(ue))?new Lt(s,n,i,r,a):t.error("Type ".concat(_e(s)," is not interpolatable."))}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;if(i>=t[r-1])return n[r-1].evaluate(e);const o=wt(t,i),a=Lt.interpolationFactor(this.interpolation,i,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);switch(this.operator){case"interpolate":return Rt[this.type.kind](s,l,a);case"interpolate-hcl":return Rt.color(s,l,a,"hcl");case"interpolate-lab":return Rt.color(s,l,a,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Bt(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}class Pt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const i=t.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const a of e.slice(1)){const e=t.parse(a,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,r.push(e)}if(!n)throw new Error("No output type");const o=i&&r.some(e=>Ee(i,e.type));return new Pt(o?me:n,r)}evaluate(e){let t,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(e),n&&n instanceof tt&&!n.available&&(t||(t=n.name),n=null,i===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Dt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Ot(e,t,n,i){return 0===i.compare(t,n)}function Nt(e,t,n){const i="=="!==e&&"!="!==e;return class r{constructor(e,t,n){this.type=de,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,me);if(!o)return null;if(!Dt(n,o.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(o.type),"'."));let a=t.parse(e[2],2,me);if(!a)return null;if(!Dt(n,a.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(_e(o.type),"' and '").concat(_e(a.type),"'."));i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ct(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ct(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ge),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const t=rt(o),n=rt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new st('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){const e=rt(o),n=rt(a);if("string"!==e.kind||"string"!==n.kind)return t(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):t(r,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const Ft=Nt("==",function(e,t,n){return t===n},Ot),zt=Nt("!=",function(e,t,n){return t!==n},function(e,t,n,i){return!Ot(0,t,n,i)}),Ut=Nt("<",function(e,t,n){return t<n},function(e,t,n,i){return i.compare(t,n)<0}),jt=Nt(">",function(e,t,n){return t>n},function(e,t,n,i){return i.compare(t,n)>0}),Vt=Nt("<=",function(e,t,n){return t<=n},function(e,t,n,i){return i.compare(t,n)<=0}),Ht=Nt(">=",function(e,t,n){return t>=n},function(e,t,n,i){return i.compare(t,n)>=0});class Gt{constructor(e,t,n){this.type=ge,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,de);if(!i)return null;const r=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,de);if(!r)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,he),!o)?null:new Gt(i,r,o)}evaluate(e){return new Ye(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Qt{constructor(e,t,n,i,r){this.type=he,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ue);if(!n)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=t.parse(i.locale,1,he),!r))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,he),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,ue),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=t.parse(i["max-fraction-digits"],1,ue),!s)?null:new Qt(n,r,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Wt{constructor(e){this.type=ve,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const i=[];let r=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(r&&"object"==typeof n&&!Array.isArray(n)){r=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ue),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,xe(he)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,pe),!a))return null;const s=i[i.length-1];s.scale=e,s.font=o,s.textColor=a}else{const n=t.parse(e[o],1,me);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:n,scale:null,font:null,textColor:null})}}return new Wt(i)}evaluate(e){return new Je(this.sections.map(t=>{const n=t.content.evaluate(e);return rt(n)===Ae?new Ke("",n,null,null,null):new Ke(ot(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class qt{constructor(e){this.type=Ae,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,he);return n?new qt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=tt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class Xt{constructor(e){this.type=ue,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found ".concat(_e(n.type)," instead.")):new Xt(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new st("Expected value to be of type string or array, but found ".concat(_e(rt(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}}const Yt=8192;function Kt(e,t){const n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*Yt),Math.round(i*r*Yt)]}function Jt(e,t){const n=Math.pow(2,t.z);return[(r=(e[0]/Yt+t.x)/n,360*r-180),(i=(e[1]/Yt+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,r}function Zt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function $t(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function en(e,t,n){const i=e[0]-t[0],r=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return i*a-o*r==0&&i*o<=0&&r*a<=0}function tn(e,t,n,i){return 0!=(r=[i[0]-n[0],i[1]-n[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-r[1]*o[0]&&!(!ln(e,t,n,i)||!ln(n,i,e,t));var r,o}function nn(e,t,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(tn(e,t,i[n],i[n+1]))return!0;return!1}function rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;for(const s of t)for(let t=0;t<s.length-1;t++){if(en(e,s[t],s[t+1]))return n;(o=s[t])[1]>(r=e)[1]!=(a=s[t+1])[1]>r[1]&&r[0]<(a[0]-o[0])*(r[1]-o[1])/(a[1]-o[1])+o[0]&&(i=!i)}var r,o,a;return i}function on(e,t){for(const n of t)if(rn(e,n))return!0;return!1}function an(e,t){for(const n of e)if(!rn(n,t))return!1;for(let n=0;n<e.length-1;++n)if(nn(e[n],e[n+1],t))return!1;return!0}function sn(e,t){for(const n of t)if(an(e,n))return!0;return!1}function ln(e,t,n,i){const r=i[0]-n[0],o=i[1]-n[1],a=(e[0]-n[0])*o-r*(e[1]-n[1]),s=(t[0]-n[0])*o-r*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function cn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=[];for(let i=0;i<e[r].length;i++){const a=Kt(e[r][i],n);Zt(t,a),o.push(a)}i.push(o)}return i}function un(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=cn(e[r],t,n);i.push(o)}return i}function hn(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const t=.5*i;let r=e[0]-n[0]>t?-i:n[0]-e[0]>t?i:0;0===r&&(r=e[0]-n[2]>t?-i:n[2]-e[0]>t?i:0),e[0]+=r}Zt(t,e)}function dn(e,t,n,i){const r=Math.pow(2,i.z)*Yt,o=[i.x*Yt,i.y*Yt],a=[];for(const s of e)for(const e of s){const i=[e.x+o[0],e.y+o[1]];hn(i,t,n,r),a.push(i)}return a}function pn(e,t,n,i){const r=Math.pow(2,i.z)*Yt,o=[i.x*Yt,i.y*Yt],a=[];for(const l of e){const e=[];for(const n of l){const i=[n.x+o[0],n.y+o[1]];Zt(t,i),e.push(i)}a.push(e)}if(t[2]-t[0]<=r/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const i of e)hn(i,t,n,r)}var s;return a}class fn{constructor(e,t){this.type=de,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(it(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:i}=n.geometry;"Polygon"===t&&e.push(i),"MultiPolygon"===t&&e.push(...i)}if(e.length)return new fn(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new fn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new fn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=cn(t.coordinates,i,r),a=dn(e.geometry(),n,i,r);if(!$t(n,i))return!1;for(const e of a)if(!rn(e,o))return!1}if("MultiPolygon"===t.type){const o=un(t.coordinates,i,r),a=dn(e.geometry(),n,i,r);if(!$t(n,i))return!1;for(const e of a)if(!on(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=cn(t.coordinates,i,r),a=pn(e.geometry(),n,i,r);if(!$t(n,i))return!1;for(const e of a)if(!an(e,o))return!1}if("MultiPolygon"===t.type){const o=un(t.coordinates,i,r),a=pn(e.geometry(),n,i,r);if(!$t(n,i))return!1;for(const e of a)if(!sn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let mn=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}};function gn(e,t,n,i,r){vn(e,t,n,i||e.length-1,r||An)}function vn(e,t,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);vn(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),r)}var u=e[t],h=n,d=i;for(yn(e,n,t),r(e[i],u)>0&&yn(e,n,i);h<d;){for(yn(e,h,d),h++,d--;r(e[h],u)<0;)h++;for(;r(e[d],u)>0;)d--}0===r(e[n],u)?yn(e,n,d):yn(e,++d,i),d<=t&&(n=d+1),t<=d&&(i=d-1)}}function yn(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function An(e,t){return e<t?-1:e>t?1:0}function bn(e,t){if(e.length<=1)return[e];const n=[];let i,r;for(const o of e){const e=_n(o);0!==e&&(o.area=Math.abs(e),void 0===r&&(r=e<0),r===e<0?(i&&n.push(i),i=[o]):i.push(o))}if(i&&n.push(i),t>1)for(let o=0;o<n.length;o++)n[o].length<=t||(gn(n[o],t,1,n[o].length-1,xn),n[o]=n[o].slice(0,t));return n}function xn(e,t){return t.area-e.area}function _n(e){let t=0;for(let n,i,r=0,o=e.length,a=o-1;r<o;a=r++)n=e[r],i=e[a],t+=(i.x-n.x)*(n.y+i.y);return t}const wn=1/298.257223563,En=wn*(2-wn),Cn=Math.PI/180;class Sn{constructor(e){const t=6378.137*Cn*1e3,n=Math.cos(e*Cn),i=1/(1-En*(1-n*n)),r=Math.sqrt(i);this.kx=t*r*n,this.ky=t*r*i*(1-En)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,t){let n,i,r,o,a=1/0;for(let s=0;s<e.length-1;s++){let l=e[s][0],c=e[s][1],u=this.wrap(e[s+1][0]-l)*this.kx,h=(e[s+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[s+1][0],c=e[s+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<a&&(a=p,n=l,i=c,r=s,o=d)}return{point:[n,i],index:r,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Tn(e,t){return t[0]-e[0]}function In(e){return e[1]-e[0]+1}function Mn(e,t){return e[1]>=e[0]&&e[1]<t}function kn(e,t){if(e[0]>e[1])return[null,null];const n=In(e);if(t){if(2===n)return[e,null];const t=Math.floor(n/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===n)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function Rn(e,t){if(!Mn(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)Zt(n,e[i]);return n}function Ln(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const e of n)Zt(t,e);return t}function Bn(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function Pn(e,t,n){if(!Bn(e)||!Bn(t))return NaN;let i=0,r=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(r=e[1]-t[3]),e[3]<t[1]&&(r=t[1]-e[3]),n.distance([0,0],[i,r])}function Dn(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function On(e,t,n,i,r){const o=Math.min(Dn(e,[n,i],r),Dn(t,[n,i],r)),a=Math.min(Dn(n,[e,t],r),Dn(i,[e,t],r));return Math.min(o,a)}function Nn(e,t,n,i,r){if(!Mn(t,e.length)||!Mn(i,n.length))return 1/0;let o=1/0;for(let a=t[0];a<t[1];++a){const t=e[a],s=e[a+1];for(let e=i[0];e<i[1];++e){const i=n[e],a=n[e+1];if(tn(t,s,i,a))return 0;o=Math.min(o,On(t,s,i,a,r))}}return o}function Fn(e,t,n,i,r){if(!Mn(t,e.length)||!Mn(i,n.length))return NaN;let o=1/0;for(let a=t[0];a<=t[1];++a)for(let t=i[0];t<=i[1];++t)if(o=Math.min(o,r.distance(e[a],n[t])),0===o)return o;return o}function zn(e,t,n){if(rn(e,t,!0))return 0;let i=1/0;for(const r of t){const t=r[0],o=r[r.length-1];if(t!==o&&(i=Math.min(i,Dn(e,[o,t],n)),0===i))return i;const a=n.pointOnLine(r,e);if(i=Math.min(i,n.distance(e,a.point)),0===i)return i}return i}function Un(e,t,n,i){if(!Mn(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(rn(e[o],n,!0))return 0;let r=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],a=e[o+1];for(const e of n)for(let n=0,o=e.length,s=o-1;n<o;s=n++){const o=e[s],l=e[n];if(tn(t,a,o,l))return 0;r=Math.min(r,On(t,a,o,l,i))}}return r}function jn(e,t){for(const n of e)for(const e of n)if(rn(e,t,!0))return!0;return!1}function Vn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=Ln(e),o=Ln(t);if(i!==1/0&&Pn(r,o,n)>=i)return i;if($t(r,o)){if(jn(e,t))return 0}else if(jn(t,e))return 0;let a=1/0;for(const s of e)for(let e=0,i=s.length,r=i-1;e<i;r=e++){const i=s[r],o=s[e];for(const e of t)for(let t=0,r=e.length,s=r-1;t<r;s=t++){const r=e[s],l=e[t];if(tn(i,o,r,l))return 0;a=Math.min(a,On(i,o,r,l,n))}}return a}function Hn(e,t,n,i,r,o){if(!o)return;const a=Pn(Rn(i,o),r,n);a<t&&e.push([a,o,[0,0]])}function Gn(e,t,n,i,r,o,a){if(!o||!a)return;const s=Pn(Rn(i,o),Rn(r,a),n);s<t&&e.push([s,o,a])}function Qn(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(i.distance(e[0],n[0][0]),r);if(0===o)return o;const a=new mn([[0,[0,e.length-1],[0,0]]],Tn),s=Ln(n);for(;a.length>0;){const r=a.pop();if(r[0]>=o)continue;const l=r[1],c=t?50:100;if(In(l)<=c){if(!Mn(l,e.length))return NaN;if(t){const t=Un(e,l,n,i);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const r=zn(e[t],n,i);if(o=Math.min(o,r),0===o)return 0}}else{const n=kn(l,t);Hn(a,o,i,e,s,n[0]),Hn(a,o,i,e,s,n[1])}}return o}function Wn(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(o,r.distance(e[0],n[0]));if(0===a)return a;const s=new mn([[0,[0,e.length-1],[0,n.length-1]]],Tn);for(;s.length>0;){const o=s.pop();if(o[0]>=a)continue;const l=o[1],c=o[2],u=t?50:100,h=i?50:100;if(In(l)<=u&&In(c)<=h){if(!Mn(l,e.length)&&Mn(c,n.length))return NaN;let o;if(t&&i)o=Nn(e,l,n,c,r),a=Math.min(a,o);else if(t&&!i){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=Dn(n[e],t,r),a=Math.min(a,o),0===a)return a}else if(!t&&i){const t=n.slice(c[0],c[1]+1);for(let n=l[0];n<=l[1];++n)if(o=Dn(e[n],t,r),a=Math.min(a,o),0===a)return a}else o=Fn(e,l,n,c,r),a=Math.min(a,o)}else{const o=kn(l,t),u=kn(c,i);Gn(s,a,r,e,n,o[0],u[0]),Gn(s,a,r,e,n,o[0],u[1]),Gn(s,a,r,e,n,o[1],u[0]),Gn(s,a,r,e,n,o[1],u[1])}}return a}function qn(e){return"MultiPolygon"===e.type?e.coordinates.map(e=>({type:"Polygon",coordinates:e})):"MultiLineString"===e.type?e.coordinates.map(e=>({type:"LineString",coordinates:e})):"MultiPoint"===e.type?e.coordinates.map(e=>({type:"Point",coordinates:e})):[e]}class Xn{constructor(e,t){this.type=ue,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'distance' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(it(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new Xn(t,t.features.map(e=>qn(e.geometry)).flat());if("Feature"===t.type)return new Xn(t,qn(t.geometry));if("type"in t&&"coordinates"in t)return new Xn(t,qn(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map(t=>Jt([t.x,t.y],e.canonical));if(0===n.length)return NaN;const r=new Sn(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Wn(i,!1,[a.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Wn(i,!1,a.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Qn(i,!1,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map(t=>Jt([t.x,t.y],e.canonical));if(0===n.length)return NaN;const r=new Sn(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Wn(i,!0,[a.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Wn(i,!0,a.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Qn(i,!0,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const n=e.geometry();if(0===n.length||0===n[0].length)return NaN;const i=bn(n,0).map(t=>t.map(t=>t.map(t=>Jt([t.x,t.y],e.canonical)))),r=new Sn(i[0][0][0][1]);let o=1/0;for(const a of t)for(const e of i){switch(a.type){case"Point":o=Math.min(o,Qn([a.coordinates],!1,e,r,o));break;case"LineString":o=Math.min(o,Qn(a.coordinates,!0,e,r,o));break;case"Polygon":o=Math.min(o,Vn(e,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Yn={"==":Ft,"!=":zt,">":jt,"<":Ut,">=":Ht,"<=":Vt,array:ct,at:vt,boolean:ct,case:xt,coalesce:Pt,collator:Gt,format:Wt,image:qt,in:yt,"index-of":At,interpolate:Lt,"interpolate-hcl":Lt,"interpolate-lab":Lt,length:Xt,let:mt,literal:at,match:bt,number:ct,"number-format":Qt,object:ct,slice:_t,step:Et,string:ct,"to-boolean":ht,"to-color":ht,"to-number":ht,"to-string":ht,var:gt,within:fn,distance:Xn};class Kn{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],i=Kn.definitions[n];if(!i)return t.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter(t=>{let[n]=t;return!Array.isArray(n)||n.length===e.length-1});let s=null;for(const[l,c]of a){s=new ft(t.registry,ti,t.path,null,t.scope);const i=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],r=Array.isArray(l)?l[t-1]:l.type,a=s.parse(n,1+i.length,r);if(!a){o=!0;break}i.push(a)}if(!o)if(Array.isArray(l)&&l.length!==i.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(i.length," instead."));else{for(let e=0;e<i.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=i[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Kn(n,r,c,i)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map(e=>{let[t]=e;return n=t,Array.isArray(n)?"(".concat(n.map(_e).join(", "),")"):"(".concat(_e(n.type),"...)");var n}).join(" | "),i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],1+i.length);if(!n)return null;i.push(_e(n.type))}t.error("Expected arguments of type ".concat(n,", but found (").concat(i.join(", "),") instead."))}return null}static register(e,t){Kn.definitions=t;for(const n in t)e[n]=Kn}}function Jn(e,t){let[n,i,r,o]=t;n=n.evaluate(e),i=i.evaluate(e),r=r.evaluate(e);const a=o?o.evaluate(e):1,s=nt(n,i,r,a);if(s)throw new st(s);return new Xe(n/255,i/255,r/255,a,!1)}function Zn(e,t){return e in t}function $n(e,t){const n=t[e];return void 0===n?null:n}function ei(e){return{type:e}}function ti(e){if(e instanceof gt)return ti(e.boundExpression);if(e instanceof Kn&&"error"===e.name)return!1;if(e instanceof Gt)return!1;if(e instanceof fn)return!1;if(e instanceof Xn)return!1;const t=e instanceof ht||e instanceof ct;let n=!0;return e.eachChild(e=>{n=t?n&&ti(e):n&&e instanceof at}),!!n&&ni(e)&&ri(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ni(e){if(e instanceof Kn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof fn)return!1;if(e instanceof Xn)return!1;let t=!0;return e.eachChild(e=>{t&&!ni(e)&&(t=!1)}),t}function ii(e){if(e instanceof Kn&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!ii(e)&&(t=!1)}),t}function ri(e,t){if(e instanceof Kn&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!ri(e,t)&&(n=!1)}),n}function oi(e){return{result:"success",value:e}}function ai(e){return{result:"error",value:e}}function si(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function li(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ci(e){return!!e.expression&&e.expression.interpolated}function ui(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function hi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function di(e){return e}function pi(e,t){const n="color"===t.type,i=e.stops&&"object"==typeof e.stops[0][0],r=i||!(i||void 0!==e.property),o=e.type||(ci(t)?"exponential":"interval");if(n||"padding"===t.type){const i=n?Xe.parse:Ze.parse;(e=ae({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],i(e[1])])),e.default=i(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(a=e.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error('Unknown color space: "'.concat(e.colorSpace,'"'));var a;let s,l,c;if("exponential"===o)s=vi;else if("interval"===o)s=gi;else if("categorical"===o){s=mi,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));s=yi}if(i){const n={},i=[];for(let t=0;t<e.stops.length;t++){const r=e.stops[t],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const e of i)r.push([n[e].zoom,pi(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Lt.interpolationFactor.bind(void 0,o),zoomStops:r.map(e=>e[0]),evaluate:(n,i)=>{let{zoom:o}=n;return vi({stops:r,base:e.base},t,o).evaluate(o,i)}}}if(r){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Lt.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map(e=>e[0]),evaluate:n=>{let{zoom:i}=n;return s(e,t,i,l,c)}}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[e.property]:void 0;return void 0===r?fi(e.default,t.default):s(e,t,r,l,c)}}}function fi(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function mi(e,t,n,i,r){return fi(typeof n===r?i[n]:void 0,e.default,t.default)}function gi(e,t,n){if("number"!==ui(n))return fi(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const r=wt(e.stops.map(e=>e[0]),n);return e.stops[r][1]}function vi(e,t,n){const i=void 0!==e.base?e.base:1;if("number"!==ui(n))return fi(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const o=wt(e.stops.map(e=>e[0]),n),a=function(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],c=Rt[t.type]||di;return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const r=s.evaluate.apply(void 0,n),o=l.evaluate.apply(void 0,n);if(void 0!==r&&void 0!==o)return c(r,o,a,e.colorSpace)}}:c(s,l,a,e.colorSpace)}function yi(e,t,n){switch(t.type){case"color":n=Xe.parse(n);break;case"formatted":n=Je.fromString(n.toString());break;case"resolvedImage":n=tt.fromString(n.toString());break;case"padding":n=Ze.parse(n);break;default:ui(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return fi(n,e.default,t.default)}Kn.register(Yn,{error:[{kind:"error"},[he],(e,t)=>{let[n]=t;throw new st(n.evaluate(e))}],typeof:[he,[me],(e,t)=>{let[n]=t;return _e(rt(n.evaluate(e)))}],"to-rgba":[xe(ue,4),[pe],(e,t)=>{let[n]=t;const[i,r,o,a]=n.evaluate(e).rgb;return[255*i,255*r,255*o,a]}],rgb:[pe,[ue,ue,ue],Jn],rgba:[pe,[ue,ue,ue,ue],Jn],has:{type:de,overloads:[[[he],(e,t)=>{let[n]=t;return Zn(n.evaluate(e),e.properties())}],[[he,fe],(e,t)=>{let[n,i]=t;return Zn(n.evaluate(e),i.evaluate(e))}]]},get:{type:me,overloads:[[[he],(e,t)=>{let[n]=t;return $n(n.evaluate(e),e.properties())}],[[he,fe],(e,t)=>{let[n,i]=t;return $n(n.evaluate(e),i.evaluate(e))}]]},"feature-state":[me,[he],(e,t)=>{let[n]=t;return $n(n.evaluate(e),e.featureState||{})}],properties:[fe,[],e=>e.properties()],"geometry-type":[he,[],e=>e.geometryType()],id:[me,[],e=>e.id()],zoom:[ue,[],e=>e.globals.zoom],"heatmap-density":[ue,[],e=>e.globals.heatmapDensity||0],"line-progress":[ue,[],e=>e.globals.lineProgress||0],accumulated:[me,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ue,ei(ue),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[ue,ei(ue),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:ue,overloads:[[[ue,ue],(e,t)=>{let[n,i]=t;return n.evaluate(e)-i.evaluate(e)}],[[ue],(e,t)=>{let[n]=t;return-n.evaluate(e)}]]},"/":[ue,[ue,ue],(e,t)=>{let[n,i]=t;return n.evaluate(e)/i.evaluate(e)}],"%":[ue,[ue,ue],(e,t)=>{let[n,i]=t;return n.evaluate(e)%i.evaluate(e)}],ln2:[ue,[],()=>Math.LN2],pi:[ue,[],()=>Math.PI],e:[ue,[],()=>Math.E],"^":[ue,[ue,ue],(e,t)=>{let[n,i]=t;return Math.pow(n.evaluate(e),i.evaluate(e))}],sqrt:[ue,[ue],(e,t)=>{let[n]=t;return Math.sqrt(n.evaluate(e))}],log10:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN10}],ln:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))}],log2:[ue,[ue],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN2}],sin:[ue,[ue],(e,t)=>{let[n]=t;return Math.sin(n.evaluate(e))}],cos:[ue,[ue],(e,t)=>{let[n]=t;return Math.cos(n.evaluate(e))}],tan:[ue,[ue],(e,t)=>{let[n]=t;return Math.tan(n.evaluate(e))}],asin:[ue,[ue],(e,t)=>{let[n]=t;return Math.asin(n.evaluate(e))}],acos:[ue,[ue],(e,t)=>{let[n]=t;return Math.acos(n.evaluate(e))}],atan:[ue,[ue],(e,t)=>{let[n]=t;return Math.atan(n.evaluate(e))}],min:[ue,ei(ue),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[ue,ei(ue),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[ue,[ue],(e,t)=>{let[n]=t;return Math.abs(n.evaluate(e))}],round:[ue,[ue],(e,t)=>{let[n]=t;const i=n.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ue,[ue],(e,t)=>{let[n]=t;return Math.floor(n.evaluate(e))}],ceil:[ue,[ue],(e,t)=>{let[n]=t;return Math.ceil(n.evaluate(e))}],"filter-==":[de,[he,me],(e,t)=>{let[n,i]=t;return e.properties()[n.value]===i.value}],"filter-id-==":[de,[me],(e,t)=>{let[n]=t;return e.id()===n.value}],"filter-type-==":[de,[he],(e,t)=>{let[n]=t;return e.geometryType()===n.value}],"filter-<":[de,[he,me],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[de,[me],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[de,[he,me],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[de,[me],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[de,[he,me],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[de,[me],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[de,[he,me],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[de,[me],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[de,[me],(e,t)=>{let[n]=t;return n.value in e.properties()}],"filter-has-id":[de,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[de,[xe(he)],(e,t)=>{let[n]=t;return n.value.indexOf(e.geometryType())>=0}],"filter-id-in":[de,[xe(me)],(e,t)=>{let[n]=t;return n.value.indexOf(e.id())>=0}],"filter-in-small":[de,[he,xe(me)],(e,t)=>{let[n,i]=t;return i.value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[de,[he,xe(me)],(e,t)=>{let[n,i]=t;return function(e,t,n,i){for(;n<=i;){const r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:de,overloads:[[[de,de],(e,t)=>{let[n,i]=t;return n.evaluate(e)&&i.evaluate(e)}],[ei(de),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:de,overloads:[[[de,de],(e,t)=>{let[n,i]=t;return n.evaluate(e)||i.evaluate(e)}],[ei(de),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[de,[de],(e,t)=>{let[n]=t;return!n.evaluate(e)}],"is-supported-script":[de,[he],(e,t)=>{let[n]=t;const i=e.globals&&e.globals.isSupportedScript;return!i||i(n.evaluate(e))}],upcase:[he,[he],(e,t)=>{let[n]=t;return n.evaluate(e).toUpperCase()}],downcase:[he,[he],(e,t)=>{let[n]=t;return n.evaluate(e).toLowerCase()}],concat:[he,ei(me),(e,t)=>t.map(t=>ot(t.evaluate(e))).join("")],"resolved-locale":[he,[ge],(e,t)=>{let[n]=t;return n.evaluate(e).resolvedLocale()}]});class Ai{constructor(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new pt,this._defaultValue=t?"color"===(n=t).type&&hi(n.default)?new Xe(0,0,0,0):"color"===n.type?Xe.parse(n.default)||null:"padding"===n.type?Ze.parse(n.default)||null:"variableAnchorOffsetCollection"===n.type?et.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,r,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new st("Expected value to be one of ".concat(Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function bi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Yn}function xi(e,t){const n=new ft(Yn,ti,[],t?function(e){const t={color:pe,string:he,number:ue,enum:he,boolean:de,formatted:ve,padding:ye,resolvedImage:Ae,variableAnchorOffsetCollection:be};return"array"===e.type?xe(t[e.value]||me,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?oi(new Ai(i,t)):ai(n.errors)}class _i{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ii(t.expression)}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._styleExpression.evaluate(e,t,n,i,r,o)}}class wi{constructor(e,t,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ii(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._styleExpression.evaluate(e,t,n,i,r,o)}interpolationFactor(e,t,n){return this.interpolationType?Lt.interpolationFactor(this.interpolationType,e,t,n):0}}function Ei(e,t){const n=xi(e,t);if("error"===n.result)return n;const i=n.value.expression,r=ni(i);if(!r&&!si(t))return ai([new se("","data expressions not supported")]);const o=ri(i,["zoom"]);if(!o&&!li(t))return ai([new se("","zoom expressions not supported")]);const a=Si(i);return a||o?a instanceof se?ai([a]):a instanceof Lt&&!ci(t)?ai([new se("",'"interpolate" expressions cannot be used with this property')]):oi(a?new wi(r?"camera":"composite",n.value,a.labels,a instanceof Lt?a.interpolation:void 0):new _i(r?"constant":"source",n.value)):ai([new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ci{constructor(e,t){this._parameters=e,this._specification=t,ae(this,pi(this._parameters,this._specification))}static deserialize(e){return new Ci(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Si(e){let t=null;if(e instanceof mt)t=Si(e.result);else if(e instanceof Pt){for(const n of e.args)if(t=Si(n),t)break}else(e instanceof Et||e instanceof Lt)&&e.input instanceof Kn&&"zoom"===e.input.name&&(t=e);return t instanceof se||e.eachChild(e=>{const n=Si(e);n instanceof se?t=n:!t&&n?t=new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Ti(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Ti(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Ii={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mi(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Ti(e)||(e=Li(e));const t=xi(e,Ii);if("error"===t.result)throw new Error(t.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));return{filter:(e,n,i)=>t.value.evaluate(e,n,{},i),needGeometry:Ri(e)}}function ki(e,t){return e<t?-1:e>t?1:0}function Ri(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Ri(e[t]))return!0;return!1}function Li(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Bi(e[1],e[2],"=="):"!="===t?Oi(Bi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Bi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Li))):"all"===t?["all"].concat(e.slice(1).map(Li)):"none"===t?["all"].concat(e.slice(1).map(Li).map(Oi)):"in"===t?Pi(e[1],e.slice(2)):"!in"===t?Oi(Pi(e[1],e.slice(2))):"has"===t?Di(e[1]):"!has"!==t||Oi(Di(e[1]));var n}function Bi(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Pi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(ki)]]:["filter-in-small",e,["literal",t]]}}function Di(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Oi(e){return["!",e]}function Ni(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const n of e)t+="".concat(Ni(n),",");return"".concat(t,"]")}const n=Object.keys(e).sort();let i="{";for(let r=0;r<n.length;r++)i+="".concat(JSON.stringify(n[r]),":").concat(Ni(e[n[r]]),",");return"".concat(i,"}")}function Fi(e){let t="";for(const n of X)t+="/".concat(Ni(e[n]));return t}function zi(e){const t=e.value;return t?[new oe(e.key,t,"constants have been deprecated as of v8")]:[]}function Ui(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ji(e){if(Array.isArray(e))return e.map(ji);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=ji(e[n]);return t}return Ui(e)}function Vi(e){const t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=e.validateSpec;let l=[];const c=ui(n);if("object"!==c)return[new oe(t,n,"object expected, ".concat(c," found"))];for(const u in n){const e=u.split(".")[0],c=i[e]||i["*"];let h;if(r[e])h=r[e];else if(i[e])h=s;else if(r["*"])h=r["*"];else{if(!i["*"]){l.push(new oe(t,n[u],'unknown property "'.concat(u,'"')));continue}h=s}l=l.concat(h({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:u,validateSpec:s},n))}for(const u in i)r[u]||i[u].required&&void 0===i[u].default&&void 0===n[u]&&l.push(new oe(t,n,'missing required property "'.concat(u,'"')));return l}function Hi(e){const t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,o=e.key,a=e.arrayElementValidator||e.validateSpec;if("array"!==ui(t))return[new oe(o,t,"array expected, ".concat(ui(t)," found"))];if(n.length&&t.length!==n.length)return[new oe(o,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new oe(o,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];let s={type:n.value,values:n.values};r.$version<7&&(s.function=n.function),"object"===ui(n.value)&&(s=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,validateSpec:e.validateSpec,style:i,styleSpec:r,key:"".concat(o,"[").concat(c,"]")}));return l}function Gi(e){const t=e.key,n=e.value,i=e.valueSpec;let r=ui(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new oe(t,n,"number expected, ".concat(r," found"))]:"minimum"in i&&n<i.minimum?[new oe(t,n,"".concat(n," is less than the minimum value ").concat(i.minimum))]:"maximum"in i&&n>i.maximum?[new oe(t,n,"".concat(n," is greater than the maximum value ").concat(i.maximum))]:[]}function Qi(e){const t=e.valueSpec,n=Ui(e.value.type);let i,r,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===ui(e.value.stops)&&"array"===ui(e.value.stops[0])&&"object"===ui(e.value.stops[0][0]),u=Vi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new oe(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat(Hi({key:e.key,value:i,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===ui(i)&&0===i.length&&t.push(new oe(e.key,i,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new oe(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new oe(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!ci(e.valueSpec)&&u.push(new oe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!si(e.valueSpec)?u.push(new oe(e.key,e.value,"property functions not supported")):s&&!li(e.valueSpec)&&u.push(new oe(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new oe(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const i=e.value,s=e.key;if("array"!==ui(i))return[new oe(s,i,"array expected, ".concat(ui(i)," found"))];if(2!==i.length)return[new oe(s,i,"array length 2 expected, length ".concat(i.length," found"))];if(c){if("object"!==ui(i[0]))return[new oe(s,i,"object expected, ".concat(ui(i[0])," found"))];if(void 0===i[0].zoom)return[new oe(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new oe(s,i,"object stop key must have value")];if(o&&o>Ui(i[0].zoom))return[new oe(s,i[0].zoom,"stop zoom values must appear in ascending order")];Ui(i[0].zoom)!==o&&(o=Ui(i[0].zoom),r=void 0,a={}),n=n.concat(Vi({key:"".concat(s,"[0]"),value:i[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Gi,value:d}}))}else n=n.concat(d({key:"".concat(s,"[0]"),value:i[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},i));return bi(ji(i[1]))?n.concat([new oe("".concat(s,"[1]"),i[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:"".concat(s,"[1]"),value:i[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=ui(e.value),l=Ui(e.value),c=null!==e.value?e.value:o;if(i){if(s!==i)return[new oe(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(i))]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new oe(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i="number expected, ".concat(s," found");return si(t)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new oe(e.key,c,i)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==r&&l<r?[new oe(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in a?[new oe(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new oe(e.key,c,"integer expected, found ".concat(l))]}}function Wi(e){const t=("property"===e.expressionContext?Ei:xi)(ji(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new oe("".concat(e.key).concat(t.key),e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new oe(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ii(n))return[new oe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ii(n))return[new oe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ri(n,["zoom","feature-state"]))return[new oe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ni(n))return[new oe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qi(e){const t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Ui(n))&&r.push(new oe(t,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(Ui(n))&&r.push(new oe(t,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function Xi(e){return Ti(ji(e.value))?Wi(ae({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yi(e)}function Yi(e){const t=e.value,n=e.key;if("array"!==ui(t))return[new oe(n,t,"array expected, ".concat(ui(t)," found"))];const i=e.styleSpec;let r,o=[];if(t.length<1)return[new oe(n,t,"filter array must have at least 1 element")];switch(o=o.concat(qi({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ui(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Ui(t[1])&&o.push(new oe(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&o.push(new oe(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&(r=ui(t[1]),"string"!==r&&o.push(new oe("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found"))));for(let a=2;a<t.length;a++)r=ui(t[a]),"$type"===Ui(t[1])?o=o.concat(qi({key:"".concat(n,"[").concat(a,"]"),value:t[a],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new oe("".concat(n,"[").concat(a,"]"),t[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let i=1;i<t.length;i++)o=o.concat(Yi({key:"".concat(n,"[").concat(i,"]"),value:t[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=ui(t[1]),2!==t.length?o.push(new oe(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new oe("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")))}return o}function Ki(e,t){const n=e.key,i=e.validateSpec,r=e.style,o=e.styleSpec,a=e.value,s=e.objectKey,l=o["".concat(t,"_").concat(e.layerType)];if(!l)return[];const c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return i({key:n,value:a,valueSpec:o.transition,style:r,styleSpec:o});const u=e.valueSpec||l[s];if(!u)return[new oe(n,a,'unknown property "'.concat(s,'"'))];let h;if("string"===ui(a)&&si(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(a)))return[new oe(n,a,'"'.concat(s,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(h[1])," }`."))];const d=[];return"symbol"===e.layerType&&("text-field"===s&&r&&!r.glyphs&&d.push(new oe(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&hi(ji(a))&&"identity"===Ui(a.type)&&d.push(new oe(n,a,'"text-font" does not support identity functions'))),d.concat(i({key:e.key,value:a,valueSpec:u,style:r,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:s}))}function Ji(e){return Ki(e,"paint")}function Zi(e){return Ki(e,"layout")}function $i(e){let t=[];const n=e.value,i=e.key,r=e.style,o=e.styleSpec;n.type||n.ref||t.push(new oe(i,n,'either "type" or "ref" is required'));let a=Ui(n.type);const s=Ui(n.ref);if(n.id){const o=Ui(n.id);for(let a=0;a<e.arrayIndex;a++){const e=r.layers[a];Ui(e.id)===o&&t.push(new oe(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(e.id.__line__)))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new oe(i,n[e],'"'.concat(e,'" is prohibited for ref layers')))}),r.layers.forEach(t=>{Ui(t.id)===s&&(e=t)}),e?e.ref?t.push(new oe(i,n.ref,"ref cannot reference another ref layer")):a=Ui(e.type):t.push(new oe(i,n.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a)if(n.source){const e=r.sources&&r.sources[n.source],o=e&&Ui(e.type);e?"vector"===o&&"raster"===a?t.push(new oe(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster-dem"!==o&&"hillshade"===a?t.push(new oe(i,n.source,'layer "'.concat(n.id,'" requires a raster-dem source'))):"raster"===o&&"raster"!==a?t.push(new oe(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new oe(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new oe(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new oe(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new oe(i,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new oe(i,n,'missing required property "source"'));return t=t.concat(Vi({key:i,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:"".concat(i,".type"),value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:Xi,layout:e=>Vi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Zi(ae({layerType:a},e))}}),paint:e=>Vi({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Ji(ae({layerType:a},e))}})}})),t}function er(e){const t=e.value,n=e.key,i=ui(t);return"string"!==i?[new oe(n,t,"string expected, ".concat(i," found"))]:[]}const tr={promoteId:function(e){let{key:t,value:n}=e;if("string"===ui(n))return er({key:t,value:n});{const e=[];for(const i in n)e.push(...er({key:"".concat(t,".").concat(i),value:n[i]}));return e}}};function nr(e){const t=e.value,n=e.key,i=e.styleSpec,r=e.style,o=e.validateSpec;if(!t.type)return[new oe(n,t,'"type" is required')];const a=Ui(t.type);let s;switch(a){case"vector":case"raster":return s=Vi({key:n,value:t,valueSpec:i["source_".concat(a.replace("-","_"))],style:e.style,styleSpec:i,objectElementValidators:tr,validateSpec:o}),s;case"raster-dem":return s=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",i=e.value,r=e.styleSpec,o=r.source_raster_dem,a=e.style;let s=[];const l=ui(i);if(void 0===i)return s;if("object"!==l)return s.push(new oe("source_raster_dem",i,"object expected, ".concat(l," found"))),s;const c="custom"===Ui(i.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?'"'.concat(e.value.encoding,'"'):"Default";for(const d in i)!c&&u.includes(d)?s.push(new oe(d,i[d],'In "'.concat(n,'": "').concat(d,'" is only valid when "encoding" is set to "custom". ').concat(h," encoding found"))):o[d]?s=s.concat(e.validateSpec({key:d,value:i[d],valueSpec:o[d],validateSpec:e.validateSpec,style:a,styleSpec:r})):s.push(new oe(d,i[d],'unknown property "'.concat(d,'"')));return s}({sourceName:n,value:t,style:e.style,styleSpec:i,validateSpec:o}),s;case"geojson":if(s=Vi({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:tr}),t.cluster)for(const e in t.clusterProperties){const[i,r]=t.clusterProperties[e],a="string"==typeof i?[i,["accumulated"],["get",e]]:i;s.push(...Wi({key:"".concat(n,".").concat(e,".map"),value:r,validateSpec:o,expressionContext:"cluster-map"})),s.push(...Wi({key:"".concat(n,".").concat(e,".reduce"),value:a,validateSpec:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Vi({key:n,value:t,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return Vi({key:n,value:t,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new oe(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qi({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,validateSpec:o,styleSpec:i})}}function ir(e){const t=e.value,n=e.styleSpec,i=n.light,r=e.style;let o=[];const a=ui(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new oe("light",t,"object expected, ".concat(a," found"))]),o;for(const s in t){const a=s.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?e.validateSpec({key:s,value:t[s],valueSpec:n.transition,validateSpec:e.validateSpec,style:r,styleSpec:n}):i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new oe(s,t[s],'unknown property "'.concat(s,'"'))])}return o}function rr(e){const t=e.value,n=e.styleSpec,i=n.sky,r=e.style,o=ui(t);if(void 0===t)return[];if("object"!==o)return[new oe("sky",t,"object expected, ".concat(o," found"))];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new oe(s,t[s],'unknown property "'.concat(s,'"'))]);return a}function or(e){const t=e.value,n=e.styleSpec,i=n.terrain,r=e.style;let o=[];const a=ui(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new oe("terrain",t,"object expected, ".concat(a," found"))]),o;for(const s in t)o=o.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new oe(s,t[s],'unknown property "'.concat(s,'"'))]);return o}function ar(e){let t=[];const n=e.value,i=e.key;if(Array.isArray(n)){const r=[],o=[];for(const a in n)n[a].id&&r.includes(n[a].id)&&t.push(new oe(i,n,"all the sprites' ids must be unique, but ".concat(n[a].id," is duplicated"))),r.push(n[a].id),n[a].url&&o.includes(n[a].url)&&t.push(new oe(i,n,"all the sprites' URLs must be unique, but ".concat(n[a].url," is duplicated"))),o.push(n[a].url),t=t.concat(Vi({key:"".concat(i,"[").concat(a,"]"),value:n[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return er({key:i,value:n})}const sr={"*":()=>[],array:Hi,boolean:function(e){const t=e.value,n=e.key,i=ui(t);return"boolean"!==i?[new oe(n,t,"boolean expected, ".concat(i," found"))]:[]},number:Gi,color:function(e){const t=e.key,n=e.value,i=ui(n);return"string"!==i?[new oe(t,n,"color expected, ".concat(i," found"))]:Xe.parse(String(n))?[]:[new oe(t,n,'color expected, "'.concat(n,'" found'))]},constants:zi,enum:qi,filter:Xi,function:Qi,layer:$i,object:Vi,source:nr,light:ir,sky:rr,terrain:or,projection:function(e){const t=e.value,n=e.styleSpec,i=n.projection,r=e.style,o=ui(t);if(void 0===t)return[];if("object"!==o)return[new oe("projection",t,"object expected, ".concat(o," found"))];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new oe(s,t[s],'unknown property "'.concat(s,'"'))]);return a},string:er,formatted:function(e){return 0===er(e).length?[]:Wi(e)},resolvedImage:function(e){return 0===er(e).length?[]:Wi(e)},padding:function(e){const t=e.key,n=e.value;if("array"===ui(n)){if(n.length<1||n.length>4)return[new oe(t,n,"padding requires 1 to 4 values; ".concat(n.length," values found"))];const i={type:"number"};let r=[];for(let o=0;o<n.length;o++)r=r.concat(e.validateSpec({key:"".concat(t,"[").concat(o,"]"),value:n[o],validateSpec:e.validateSpec,valueSpec:i}));return r}return Gi({key:t,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,i=ui(n),r=e.styleSpec;if("array"!==i||n.length<1||n.length%2!=0)return[new oe(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<n.length;a+=2)o=o.concat(qi({key:"".concat(t,"[").concat(a,"]"),value:n[a],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(Hi({key:"".concat(t,"[").concat(a+1,"]"),value:n[a+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:r}));return o},sprite:ar};function lr(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return e.validateSpec=lr,n.expression&&hi(Ui(t))?Qi(e):n.expression&&bi(ji(t))?Wi(e):n.type&&sr[n.type]?sr[n.type](e):Vi(ae({},e,{valueSpec:n.type?i[n.type]:n}))}function cr(e){const t=e.value,n=e.key,i=er(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new oe(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new oe(n,t,'"glyphs" url must include a "{range}" token'))),i}function ur(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,n=[];return n=n.concat(lr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:lr,objectElementValidators:{glyphs:cr,"*":()=>[]}})),e.constants&&(n=n.concat(zi({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:lr}))),dr(n)}function hr(e){return function(t){return e(i(i({},t),{},{validateSpec:lr}))}}function dr(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function pr(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return dr(e.apply(this,n))}}ur.source=pr(hr(nr)),ur.sprite=pr(hr(ar)),ur.glyphs=pr(hr(cr)),ur.light=pr(hr(ir)),ur.sky=pr(hr(rr)),ur.terrain=pr(hr(or)),ur.layer=pr(hr($i)),ur.filter=pr(hr(Xi)),ur.paintProperty=pr(hr(Ji)),ur.layoutProperty=pr(hr(Zi));const fr=ur,mr=fr.light,gr=fr.sky,vr=fr.paintProperty,yr=fr.layoutProperty;function Ar(e,t){let n=!1;if(t&&t.length)for(const i of t)e.fire(new Q(new Error(i.message))),n=!0;return n}class br{constructor(e,t,n){const i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(let e=0;e<this.d*this.d;e++){const t=r[3+e],n=r[3+e+1];i.push(t===n?null:r.subarray(t,n))}const o=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],o),this.bboxes=r.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const r=n/t*e;this.min=-r,this.max=e+r}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,i,r,o){this.cells[r].push(o)}query(e,t,n,i,r){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,n,i,this._queryCell,o,{},r),o}}_queryCell(e,t,n,i,r,o,a,s){const l=this.cells[r];if(null!==l){const r=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===a[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&i>=c[l+1])?(a[h]=!0,o.push(r[h])):a[h]=!1}}}}_forEachCell(e,t,n,i,r,o,a,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&r.call(this,e,t,n,i,c,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let r=t;for(let o=0;o<e.length;o++){const t=e[o];i[3+o]=r,i.set(t,r),r+=t.length}return i[3+e.length]=r,i.set(this.keys,r),r+=this.keys.length,i[3+e.length+1]=r,i.set(this.bboxes,r),r+=this.bboxes.length,i.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new br(e.buffer)}}const xr={};function _r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(xr[e])throw new Error("".concat(e," is already registered."));Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),xr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}_r("Object",Object),_r("TransferableGridIndex",br),_r("Color",Xe),_r("Error",Error),_r("AJAXError",F),_r("ResolvedImage",tt),_r("StylePropertyFunction",Ci),_r("StyleExpression",Ai,{omit:["_evaluator"]}),_r("ZoomDependentExpression",wi),_r("ZoomConstantExpression",_i),_r("CompoundExpression",Kn,{omit:["_evaluate"]});for(const i in Yn)Yn[i]._classRegistryKey||_r("Expression_".concat(i),Yn[i]);function wr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Er(e){return e.$name||e.constructor._classRegistryKey}function Cr(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=Er(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||wr(e)||I(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function Sr(e,t){if(Cr(e))return(wr(e)||I(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const i of e)n.push(Sr(i,t));return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const n=Er(e);if(!n)throw new Error("can't serialize object of unregistered class ".concat(e.constructor.name));if(!xr[n])throw new Error("".concat(n," is not registered."));const{klass:i}=xr[n],r=i.serialize?i.serialize(e,t):{};if(i.serialize){if(t&&r===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in e){if(!e.hasOwnProperty(i))continue;if(xr[n].omit.indexOf(i)>=0)continue;const o=e[i];r[i]=xr[n].shallow.indexOf(i)>=0?o:Sr(o,t)}e instanceof Error&&(r.message=e.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}function Tr(e){if(Cr(e))return e;if(Array.isArray(e))return e.map(Tr);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=Er(e)||"Object";if(!xr[t])throw new Error("can't deserialize unregistered class ".concat(t));const{klass:n}=xr[t];if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);const i=Object.create(n.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const n=e[r];i[r]=xr[t].shallow.indexOf(r)>=0?n:Tr(n)}return i}class Ir{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Mr={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function kr(e){for(const t of e)if(Or(t.charCodeAt(0)))return!0;return!1}function Rr(e){for(const t of e)if(!Pr(t.charCodeAt(0)))return!1;return!0}function Lr(e){const t=e.map(e=>{try{return new RegExp("\\p{sc=".concat(e,"}"),"u").source}catch(e){return null}}).filter(e=>e);return new RegExp(t.join("|"),"u")}const Br=Lr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Pr(e){return!Br.test(String.fromCodePoint(e))}const Dr=Lr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Or(e){return!(746!==e&&747!==e&&(e<4352||!(Mr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Mr["CJK Compatibility"](e)||Mr["CJK Strokes"](e)||!(!Mr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Mr["Enclosed CJK Letters and Months"](e)||Mr["Ideographic Description Characters"](e)||Mr.Kanbun(e)||Mr.Katakana(e)&&12540!==e||!(!Mr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Mr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Mr["Vertical Forms"](e)||Mr["Yijing Hexagram Symbols"](e)||/(?:[\u1400-\u167F\u18B0-\u18F5]|\uD806[\uDEB0-\uDEBF])/.test(String.fromCodePoint(e))||/[\u1100-\u11FF\u302E\u302F\u3131-\u318E\u3200-\u321E\u3260-\u327E\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/.test(String.fromCodePoint(e))||Dr.test(String.fromCodePoint(e)))))}function Nr(e){return!(Or(e)||function(e){return!!(Mr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Mr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Mr["Letterlike Symbols"](e)||Mr["Number Forms"](e)||Mr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Mr["Control Pictures"](e)&&9251!==e||Mr["Optical Character Recognition"](e)||Mr["Enclosed Alphanumerics"](e)||Mr["Geometric Shapes"](e)||Mr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Mr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Mr["CJK Symbols and Punctuation"](e)||Mr.Katakana(e)||Mr["Private Use Area"](e)||Mr["CJK Compatibility Forms"](e)||Mr["Small Form Variants"](e)||Mr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}const Fr=Lr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function zr(e){return Fr.test(String.fromCodePoint(e))}function Ur(e,t){return!(!t&&zr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Mr.Khmer(e))}function jr(e){for(const t of e)if(zr(t.charCodeAt(0)))return!0;return!1}const Vr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Hr{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ir,this.transition={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!Ur(n.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Vr.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class Gr{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(hi(e))return new Ci(e,t);if(bi(e)){const n=Ei(e,t);if("error"===n.result)throw new Error(n.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));return n.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=Xe.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)&&(n=et.parse(e)):n=Ze.parse(e),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Qr{constructor(e){this.property=e,this.value=new Gr(e,void 0)}transitioned(e,t){return new qr(this.property,this.value,t,y({},e.transition,this.transition),e.now)}untransitioned(){return new qr(this.property,this.value,null,{},0)}}class Wr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return _(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Qr(this._values[e].property)),this._values[e].value=new Gr(this._values[e].property,null===t?void 0:_(t))}getTransition(e){return _(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Qr(this._values[e].property)),this._values[e].transition=_(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const i=this.getTransition(t);void 0!==i&&(e["".concat(t,"-transition")]=i)}return e}transitioned(e,t){const n=new Xr(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){const e=new Xr(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class qr{constructor(e,t,n,i,r){this.property=e,this.value=t,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),r,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(a))}}return r}}class Xr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const i=new Jr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Yr{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return _(this._values[e].value)}setValue(e,t){this._values[e]=new Gr(this._values[e].property,null===t?void 0:_(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const i=new Jr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}}class Kr{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}class Jr{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Zr{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const i=Rt[this.specification.type];return i?i(e,t,n):e}}class $r{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,i){return new Kr(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Kr(this,{kind:"constant",value:void 0},e.parameters);const i=Rt[this.specification.type];if(i){const r=i(e.value.value,t.value.value,n);return new Kr(this,{kind:"constant",value:r},e.parameters)}return e}evaluate(e,t,n,i,r,o){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,o)}}class eo extends $r{possiblyEvaluate(e,t,n,i){if(void 0===e.value)return new Kr(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i),o="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,t);return new Kr(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Kr(this,{kind:"constant",value:n},t)}return new Kr(this,e.expression,t)}evaluate(e,t,n,i,r,o){if("source"===e.kind){const a=e.evaluate(t,n,i,r,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,i),e.evaluate({zoom:Math.floor(t.zoom)},n,i),e.evaluate({zoom:Math.floor(t.zoom)+1},n,i),t):e.value}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class to{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){if(void 0!==e.value){if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new Hr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Hr(Math.floor(t.zoom),t)),e.expression.evaluate(new Hr(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class no{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}interpolate(){return!1}}class io{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const i=this.defaultPropertyValues[t]=new Gr(n,void 0),r=this.defaultTransitionablePropertyValues[t]=new Qr(n);this.defaultTransitioningPropertyValues[t]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=i.possiblyEvaluate({})}}}_r("DataDrivenProperty",$r),_r("DataConstantProperty",Zr),_r("CrossFadedDataDrivenProperty",eo),_r("CrossFadedProperty",to),_r("ColorRampProperty",no);const ro="-transition";class oo extends W{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Yr(t.layout)),t.paint)){this._transitionablePaint=new Wr(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jr(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(yr,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(ro)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(vr,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(e.endsWith(ro))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),x(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&Ar(this,e.call(fr,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:q,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Kr&&si(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const ao={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class so{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class lo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function co(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:e.map(e=>{const r=ao[e.type].BYTES_PER_ELEMENT,o=n=uo(n,Math.max(t,r)),a=e.components||1;return i=Math.max(i,r),n+=r*a,{name:e.name,type:e.type,components:a,offset:o}}),size:uo(n,Math.max(i,t)),alignment:t}}function uo(e,t){return Math.ceil(e/t)*t}class ho extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}ho.prototype.bytesPerElement=4,_r("StructArrayLayout2i4",ho);class po extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}po.prototype.bytesPerElement=6,_r("StructArrayLayout3i6",po);class fo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,e}}fo.prototype.bytesPerElement=8,_r("StructArrayLayout4i8",fo);class mo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,e}}mo.prototype.bytesPerElement=12,_r("StructArrayLayout2i4i12",mo);class go extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}go.prototype.bytesPerElement=8,_r("StructArrayLayout2i4ub8",go);class vo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}vo.prototype.bytesPerElement=8,_r("StructArrayLayout2f8",vo);class yo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,i,r,o,a,s,l,c)}emplace(e,t,n,i,r,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}yo.prototype.bytesPerElement=20,_r("StructArrayLayout10ui20",yo);class Ao extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,i,r,o,a,s,l,c,u,h)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}Ao.prototype.bytesPerElement=24,_r("StructArrayLayout4i4ui4i24",Ao);class bo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}bo.prototype.bytesPerElement=12,_r("StructArrayLayout3f12",bo);class xo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}xo.prototype.bytesPerElement=4,_r("StructArrayLayout1ul4",xo);class _o extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,o,a,s,l)}emplace(e,t,n,i,r,o,a,s,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}_o.prototype.bytesPerElement=20,_r("StructArrayLayout6i1ul2ui20",_o);class wo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,e}}wo.prototype.bytesPerElement=12,_r("StructArrayLayout2i2i2i12",wo);class Eo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r)}emplace(e,t,n,i,r,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,e}}Eo.prototype.bytesPerElement=16,_r("StructArrayLayout2f1f2i16",Eo);class Co extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=16*e,l=4*e,c=8*e;return this.uint8[s+0]=t,this.uint8[s+1]=n,this.float32[l+1]=i,this.float32[l+2]=r,this.int16[c+6]=o,this.int16[c+7]=a,e}}Co.prototype.bytesPerElement=16,_r("StructArrayLayout2ub2f2i16",Co);class So extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}So.prototype.bytesPerElement=6,_r("StructArrayLayout3ui6",So);class To extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v){const y=24*e,A=12*e,b=48*e;return this.int16[y+0]=t,this.int16[y+1]=n,this.uint16[y+2]=i,this.uint16[y+3]=r,this.uint32[A+2]=o,this.uint32[A+3]=a,this.uint32[A+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=c,this.uint16[y+12]=u,this.float32[A+7]=h,this.float32[A+8]=d,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[A+10]=g,this.int16[y+22]=v,e}}To.prototype.bytesPerElement=48,_r("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",To);class Io extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_,w,E,C,S,T){const I=this.length;return this.resize(I+1),this.emplace(I,e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_,w,E,C,S,T)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_,w,E,C,S,T,I){const M=32*e,k=16*e;return this.int16[M+0]=t,this.int16[M+1]=n,this.int16[M+2]=i,this.int16[M+3]=r,this.int16[M+4]=o,this.int16[M+5]=a,this.int16[M+6]=s,this.int16[M+7]=l,this.uint16[M+8]=c,this.uint16[M+9]=u,this.uint16[M+10]=h,this.uint16[M+11]=d,this.uint16[M+12]=p,this.uint16[M+13]=f,this.uint16[M+14]=m,this.uint16[M+15]=g,this.uint16[M+16]=v,this.uint16[M+17]=y,this.uint16[M+18]=A,this.uint16[M+19]=b,this.uint16[M+20]=x,this.uint16[M+21]=_,this.uint16[M+22]=w,this.uint32[k+12]=E,this.float32[k+13]=C,this.float32[k+14]=S,this.uint16[M+30]=T,this.uint16[M+31]=I,e}}Io.prototype.bytesPerElement=64,_r("StructArrayLayout8i15ui1ul2f2ui64",Io);class Mo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Mo.prototype.bytesPerElement=4,_r("StructArrayLayout1f4",Mo);class ko extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[6*e+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}ko.prototype.bytesPerElement=12,_r("StructArrayLayout1ui2f12",ko);class Ro extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=4*e;return this.uint32[2*e+0]=t,this.uint16[r+2]=n,this.uint16[r+3]=i,e}}Ro.prototype.bytesPerElement=8,_r("StructArrayLayout1ul2ui8",Ro);class Lo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}Lo.prototype.bytesPerElement=4,_r("StructArrayLayout2ui4",Lo);class Bo extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Bo.prototype.bytesPerElement=2,_r("StructArrayLayout1ui2",Bo);class Po extends lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,e}}Po.prototype.bytesPerElement=16,_r("StructArrayLayout4f16",Po);class Do extends so{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new a(this.anchorPointX,this.anchorPointY)}}Do.prototype.size=20;class Oo extends _o{get(e){return new Do(this,e)}}_r("CollisionBoxArray",Oo);class No extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}No.prototype.size=48;class Fo extends To{get(e){return new No(this,e)}}_r("PlacedSymbolArray",Fo);class zo extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}zo.prototype.size=64;class Uo extends Io{get(e){return new zo(this,e)}}_r("SymbolInstanceArray",Uo);class jo extends Mo{getoffsetX(e){return this.float32[1*e+0]}}_r("GlyphOffsetArray",jo);class Vo extends po{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}_r("SymbolLineVertexArray",Vo);class Ho extends so{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ho.prototype.size=12;class Go extends ko{get(e){return new Ho(this,e)}}_r("TextAnchorOffsetArray",Go);class Qo extends so{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qo.prototype.size=8;class Wo extends Ro{get(e){return new Qo(this,e)}}_r("FeatureIndexArray",Wo);class qo extends ho{}class Xo extends ho{}class Yo extends ho{}class Ko extends mo{}class Jo extends go{}class Zo extends vo{}class $o extends yo{}class ea extends Ao{}class ta extends bo{}class na extends xo{}class ia extends wo{}class ra extends Co{}class oa extends So{}class aa extends Lo{}const sa=co([{name:"a_pos",components:2,type:"Int16"}],4),{members:la}=sa;class ca{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,n,i){let r=this.segments[this.segments.length-1];return e>ca.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is ".concat(ca.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!r||r.vertexLength+e>ca.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,i){return new ca([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}function ua(e,t){return 256*(e=g(Math.floor(e),0,255))+g(Math.floor(t),0,255)}ca.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_r("SegmentVector",ca);const ha=co([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var da={exports:{}},pa={exports:{}};pa.exports=function(e,t){var n,i,r,o,a,s,l,c;for(i=e.length-(n=3&e.length),r=t,a=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};var fa=pa.exports,ma={exports:{}};ma.exports=function(e,t){for(var n,i=e.length,r=t^i,o=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};var ga=fa,va=ma.exports;da.exports=ga,da.exports.murmur3=ga,da.exports.murmur2=va;var ya=n(da.exports);class Aa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,i){this.ids.push(ba(e)),this.positions.push(t,n,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=ba(e);let n=0,i=this.ids.length-1;for(;n<i;){const e=n+i>>1;this.ids[e]>=t?i=e:n=e+1}const r=[];for(;this.ids[n]===t;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(e,t){const n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return xa(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){const t=new Aa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function ba(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ya(String(e))}function xa(e,t,n,i){for(;n<i;){const r=e[n+i>>1];let o=n-1,a=i+1;for(;;){do{o++}while(e[o]<r);do{a--}while(e[a]>r);if(o>=a)break;_a(e,o,a),_a(t,3*o,3*a),_a(t,3*o+1,3*a+1),_a(t,3*o+2,3*a+2)}a-n<i-a?(xa(e,t,n,a),n=a+1):(xa(e,t,a+1,i),i=a)}}function _a(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}_r("FeaturePositionMap",Aa);class wa{constructor(e,t){this.gl=e.gl,this.location=t}}class Ea extends wa{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Ca extends wa{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Sa extends wa{constructor(e,t){super(e,t),this.current=Xe.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Ta=new Float32Array(16);function Ia(e){return[ua(255*e.r,255*e.g),ua(255*e.b,255*e.a)]}class Ma{constructor(e,t,n){this.value=e,this.uniformNames=t.map(e=>"u_".concat(e)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Sa(e,t):new Ea(e,t)}}class ka{constructor(e,t){this.uniformNames=t.map(e=>"u_".concat(e)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,i){const r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&e.set(r)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new Ca(e,t):new Ea(e,t)}}class Ra{constructor(e,t,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(e,t,n,i,r){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Hr(0),t,{},i,[],r);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(e,t,r)}_setPaintValue(e,t,n){if("color"===this.type){const i=Ia(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class La{constructor(e,t,n,i,r,o){this.expression=e,this.uniformNames=t.map(e=>"u_".concat(e,"_t")),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,n,i,r){const o=this.expression.evaluate(new Hr(this.zoom),t,{},i,[],r),a=this.expression.evaluate(new Hr(this.zoom+1),t,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(e,t,r,o)}_setPaintValue(e,t,n,i){if("color"===this.type){const r=Ia(n),o=Ia(i);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=g(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,t,n){return new Ea(e,t)}}class Ba{constructor(e,t,n,i,r,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(e,t,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,i,r){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(e,t,n,i){if(!i||!n)return;const{min:r,mid:o,max:a}=n,s=i[r],l=i[o],c=i[a];if(s&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ha.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ha.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Pa{constructor(e,t,n){this.binders={},this._buffers=[];const i=[];for(const r in e.paint._values){if(!n(r))continue;const o=e.paint.get(r);if(!(o instanceof Kr&&si(o.property.specification)))continue;const a=Oa(r,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[r]=h?new ka(s.value,a):new Ma(s.value,a,l),i.push("/u_".concat(r));else if("source"===s.kind||h){const n=Na(r,l,"source");this.binders[r]=h?new Ba(s,l,c,t,n,e.id):new Ra(s,a,l,n),i.push("/a_".concat(r))}else{const e=Na(r,l,"composite");this.binders[r]=new La(s,a,l,c,t,e),i.push("/z_".concat(r))}}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Ra||t instanceof La?t.maxValue:0}populatePaintArrays(e,t,n,i,r){for(const o in this.binders){const a=this.binders[o];(a instanceof Ra||a instanceof La||a instanceof Ba)&&a.populatePaintArray(e,t,n,i,r)}}setConstantPatternPositions(e,t){for(const n in this.binders){const i=this.binders[n];i instanceof ka&&i.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,i,r){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Ra||l instanceof La||l instanceof Ba)&&!0===l.expression.isStateDependent){const c=i.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],r),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Ma||n instanceof ka)&&e.push(...n.uniformNames.map(e=>"#define HAS_UNIFORM_".concat(e)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ra||n instanceof La)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof Ba)for(let t=0;t<ha.members.length;t++)e.push(ha.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ma||n instanceof ka||n instanceof La)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof Ma||r instanceof ka||r instanceof La)for(const o of r.uniformNames)if(t[o]){const a=r.getBinding(e,t[o],o);n.push({name:o,property:i,binding:a})}}return n}setUniforms(e,t,n,i){for(const{name:r,property:o,binding:a}of t)this.binders[o].setUniform(a,i,n.get(o),r)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof Ba){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof Ra||n instanceof La)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Ra||n instanceof La||n instanceof Ba)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Ra||t instanceof La||t instanceof Ba)&&t.destroy()}}}class Da{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new Pa(i,t,n);this.needsUpload=!1,this._featureMap=new Aa,this._bufferOffset=0}populatePaintArrays(e,t,n,i,r,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,i,r,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(e,this._featureMap,t,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Oa(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function Na(e,t,n){const i={color:{source:vo,composite:Po},number:{source:Mo,composite:vo}},r=function(e){return{"line-pattern":{source:$o,composite:$o},"fill-pattern":{source:$o,composite:$o},"fill-extrusion-pattern":{source:$o,composite:$o}}[e]}(e);return r&&r[n]||i[t][n]}_r("ConstantBinder",Ma),_r("CrossFadedConstantBinder",ka),_r("SourceExpressionBinder",Ra),_r("CrossFadedCompositeBinder",Ba),_r("CompositeExpressionBinder",La),_r("ProgramConfiguration",Pa,{omit:["_buffers"]}),_r("ProgramConfigurationSet",Da);const Fa=8192,za=Math.pow(2,14)-1,Ua=-za-1;function ja(e){const t=Fa/e.extent,n=e.loadGeometry();for(let i=0;i<n.length;i++){const e=n[i];for(let n=0;n<e.length;n++){const i=e[n],r=Math.round(i.x*t),o=Math.round(i.y*t);i.x=g(r,Ua,za),i.y=g(o,Ua,za),(r<i.x||r>i.x+1||o<i.y||o>i.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Va(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ja(e):[]}}function Ha(e,t,n,i,r){e.emplaceBack(2*t+(i+1)/2,2*n+(r+1)/2)}class Ga{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Xo,this.indexArray=new oa,this.segments=new ca,this.programConfigurations=new Da(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){const i=this.layers[0],r=[];let o=null,a=!1;"circle"===i.type&&(o=i.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:s,id:l,index:c,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Va(s,e);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),t,n))continue;const i=a?o.evaluate(t,{},n):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:u,index:c,geometry:e?t.geometry:ja(s),patterns:{},sortKey:i};r.push(h)}a&&r.sort((e,t)=>e.sortKey-t.sortKey);for(const s of r){const{geometry:i,index:r,sourceLayerIndex:o}=s,a=e[r].feature;this.addFeature(s,i,r,n),t.featureIndex.insert(a,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,la),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,i){for(const r of t)for(const t of r){const n=t.x,i=t.y;if(n<0||n>=Fa||i<0||i>=Fa)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=r.vertexLength;Ha(this.layoutVertexArray,n,i,-1,-1),Ha(this.layoutVertexArray,n,i,1,-1),Ha(this.layoutVertexArray,n,i,1,1),Ha(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i)}}function Qa(e,t){for(let n=0;n<e.length;n++)if(es(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(es(e,t[n]))return!0;return!!Ya(e,t)}function Wa(e,t,n){return!!es(e,t)||!!Ja(t,e,n)}function qa(e,t){if(1===e.length)return $a(t,e[0]);for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<i.length;t++)if(es(e,i[t]))return!0}for(let n=0;n<e.length;n++)if($a(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ya(e,t[n]))return!0;return!1}function Xa(e,t,n){if(e.length>1){if(Ya(e,t))return!0;for(let i=0;i<t.length;i++)if(Ja(t[i],e,n))return!0}for(let i=0;i<e.length;i++)if(Ja(e[i],t,n))return!0;return!1}function Ya(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1];for(let e=0;e<t.length-1;e++)if(Ka(i,r,t[e],t[e+1]))return!0}return!1}function Ka(e,t,n,i){return C(e,n,i)!==C(t,n,i)&&C(e,t,n)!==C(e,t,i)}function Ja(e,t,n){const i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(let r=1;r<t.length;r++)if(Za(e,t[r-1],t[r])<i)return!0;return!1}function Za(e,t,n){const i=t.distSqr(n);if(0===i)return e.distSqr(t);const r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function $a(e,t){let n,i,r,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)i=n[e],r=n[a],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function es(e,t){let n=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){const o=e[i],a=e[r];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ts(e,t,n){const i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;const o=C(e,t,n[0]);return o!==C(e,t,n[1])||o!==C(e,t,n[2])||o!==C(e,t,n[3])}function ns(e,t,n){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function is(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function rs(e,t,n,i,r){if(!t[0]&&!t[1])return e;const o=a.convert(t)._mult(r);"viewport"===n&&o._rotate(-i);const s=[];for(let a=0;a<e.length;a++)s.push(e[a].sub(o));return s}let os,as;_r("CircleBucket",Ga,{omit:["layers"]});var ss={get paint(){return as=as||new io({"circle-radius":new $r(q.paint_circle["circle-radius"]),"circle-color":new $r(q.paint_circle["circle-color"]),"circle-blur":new $r(q.paint_circle["circle-blur"]),"circle-opacity":new $r(q.paint_circle["circle-opacity"]),"circle-translate":new Zr(q.paint_circle["circle-translate"]),"circle-translate-anchor":new Zr(q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zr(q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zr(q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $r(q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $r(q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $r(q.paint_circle["circle-stroke-opacity"])})},get layout(){return os=os||new io({"circle-sort-key":new $r(q.layout_circle["circle-sort-key"])})}},ls=1e-6,cs="undefined"!=typeof Float32Array?Float32Array:Array;function us(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hs(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],y=t[15],A=n[0],b=n[1],x=n[2],_=n[3];return e[0]=A*i+b*s+x*h+_*m,e[1]=A*r+b*l+x*d+_*g,e[2]=A*o+b*c+x*p+_*v,e[3]=A*a+b*u+x*f+_*y,e[4]=(A=n[4])*i+(b=n[5])*s+(x=n[6])*h+(_=n[7])*m,e[5]=A*r+b*l+x*d+_*g,e[6]=A*o+b*c+x*p+_*v,e[7]=A*a+b*u+x*f+_*y,e[8]=(A=n[8])*i+(b=n[9])*s+(x=n[10])*h+(_=n[11])*m,e[9]=A*r+b*l+x*d+_*g,e[10]=A*o+b*c+x*p+_*v,e[11]=A*a+b*u+x*f+_*y,e[12]=(A=n[12])*i+(b=n[13])*s+(x=n[14])*h+(_=n[15])*m,e[13]=A*r+b*l+x*d+_*g,e[14]=A*o+b*c+x*p+_*v,e[15]=A*a+b*u+x*f+_*y,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ds,ps=hs;function fs(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,e}ds=new cs(4),cs!=Float32Array&&(ds[0]=0,ds[1]=0,ds[2]=0,ds[3]=0);class ms extends oo{constructor(e){super(e,ss)}createBucket(e){return new Ga(e)}queryRadius(e){const t=e;return ns("circle-radius",this,t)+ns("circle-stroke-width",this,t)+is(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,i,r,o,a,s){const l=rs(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t){return e.map(e=>gs(e,t))}(l,s),d=u?c*a:c;for(const p of i)for(const e of p){const t=u?e:gs(e,s);let n=d;const i=fs([],[e.x,e.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/i[3]),Wa(h,t,n))return!0}return!1}}function gs(e,t){const n=fs([],[e.x,e.y,0,1],t);return new a(n[0]/n[3],n[1]/n[3])}class vs extends Ga{}let ys;_r("HeatmapBucket",vs,{omit:["layers"]});var As={get paint(){return ys=ys||new io({"heatmap-radius":new $r(q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $r(q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zr(q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new no(q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zr(q.paint_heatmap["heatmap-opacity"])})}};function bs(e,t,n,i){let{width:r,height:o}=t;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size. expected: ".concat(i.length," but got: ").concat(r*o*n))}else i=new Uint8Array(r*o*n);return e.width=r,e.height=o,e.data=i,e}function xs(e,t,n){let{width:i,height:r}=t;if(i===e.width&&r===e.height)return;const o=bs({},{width:i,height:r},n);_s(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=o.data}function _s(e,t,n,i,r,o){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<r.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((i.y+l)*t.width+i.x)*o;for(let e=0;e<r.width*o;e++)s[u+e]=a[c+e]}return t}class ws{constructor(e,t){bs(this,e,1,t)}resize(e){xs(this,e,1)}clone(){return new ws({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){_s(e,t,n,i,r,1)}}class Es{constructor(e,t){bs(this,e,4,t)}resize(e){xs(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Es({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){_s(e,t,n,i,r,4)}}function Cs(e){const t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new Es({width:n,height:i});if(Math.log(n)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(n));const o=(n,i,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);r.data[n+i+0]=Math.floor(255*a.r/a.a),r.data[n+i+1]=Math.floor(255*a.g/a.a),r.data[n+i+2]=Math.floor(255*a.b/a.a),r.data[n+i+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<i;++a,s+=4*n)for(let t=0,i=0;t<n;t++,i+=4){const r=t/(n-1),{start:l,end:c}=e.clips[a];o(s,i,l*(1-r)+c*r)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return r}_r("AlphaImage",ws),_r("RGBAImage",Es);const Ss="big-fb";class Ts extends oo{createBucket(e){return new vs(e)}constructor(e){super(e,As),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ss)&&this.heatmapFbos.delete(Ss)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Is;var Ms={get paint(){return Is=Is||new io({"hillshade-illumination-direction":new Zr(q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zr(q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zr(q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zr(q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zr(q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zr(q.paint_hillshade["hillshade-accent-color"])})}};class ks extends oo{constructor(e){super(e,Ms)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Rs=co([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ls}=Rs;function Bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=Ps(e,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c;if(i&&(o=function(e,t,n,i){const r=[];for(let o=0,a=t.length;o<a;o++){const n=Ps(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),r.push(Qs(n))}r.sort(js);for(let o=0;o<r.length;o++)n=Vs(r[o],n);return n}(e,t,o,n)),e.length>80*n){s=1/0,l=1/0;let t=-1/0,i=-1/0;for(let o=n;o<r;o+=n){const n=e[o],r=e[o+1];n<s&&(s=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}c=Math.max(t-s,i-l),c=0!==c?32767/c:0}return Os(o,a,n,s,l,c,0),a}function Ps(e,t,n,i,r){let o;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(let a=t;a<n;a+=i)o=tl(a/i|0,e[a],e[a+1],o);else for(let a=n-i;a>=t;a-=i)o=tl(a/i|0,e[a],e[a+1],o);return o&&Ys(o,o.next)&&(nl(o),o=o.next),o}function Ds(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Ys(i,i.next)&&0!==Xs(i.prev,i,i.next))i=i.next;else{if(nl(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Os(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Gs(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let o=null;for(t=0;r;){t++;let a=r,s=0;for(let e=0;e<n&&(s++,a=a.nextZ,a);e++);let l=n;for(;s>0||l>0&&a;)0!==s&&(0===l||!a||r.z<=a.z)?(i=r,r=r.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=a}o.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,o);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Fs(e,i,r,o):Ns(e))t.push(l.i,e.i,c.i),nl(e),e=c.next,s=c.next;else if((e=c)===s){a?1===a?Os(e=zs(Ds(e),t),t,n,i,r,o,2):2===a&&Us(e,t,n,i,r,o):Os(Ds(e),t,n,i,r,o,1);break}}}function Ns(e){const t=e.prev,n=e,i=e.next;if(Xs(t,n,i)>=0)return!1;const r=t.x,o=n.x,a=i.x,s=t.y,l=n.y,c=i.y,u=r<o?r<a?r:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=r>o?r>a?r:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Ws(r,s,o,l,a,c,f.x,f.y)&&Xs(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Fs(e,t,n,i){const r=e.prev,o=e,a=e.next;if(Xs(r,o,a)>=0)return!1;const s=r.x,l=o.x,c=a.x,u=r.y,h=o.y,d=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=Gs(p,f,t,n,i),y=Gs(m,g,t,n,i);let A=e.prevZ,b=e.nextZ;for(;A&&A.z>=v&&b&&b.z<=y;){if(A.x>=p&&A.x<=m&&A.y>=f&&A.y<=g&&A!==r&&A!==a&&Ws(s,u,l,h,c,d,A.x,A.y)&&Xs(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&Ws(s,u,l,h,c,d,b.x,b.y)&&Xs(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;A&&A.z>=v;){if(A.x>=p&&A.x<=m&&A.y>=f&&A.y<=g&&A!==r&&A!==a&&Ws(s,u,l,h,c,d,A.x,A.y)&&Xs(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&Ws(s,u,l,h,c,d,b.x,b.y)&&Xs(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function zs(e,t){let n=e;do{const i=n.prev,r=n.next.next;!Ys(i,r)&&Ks(i,n,n.next,r)&&$s(i,r)&&$s(r,i)&&(t.push(i.i,n.i,r.i),nl(n),nl(n.next),n=e=r),n=n.next}while(n!==e);return Ds(n)}function Us(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&qs(a,e)){let s=el(a,e);return a=Ds(a,a.next),s=Ds(s,s.next),Os(a,t,n,i,r,o,0),void Os(s,t,n,i,r,o,0)}e=e.next}a=a.next}while(a!==e)}function js(e,t){return e.x-t.x}function Vs(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a&&(a=e,o=n.x<n.next.x?n:n.next,e===i))return o}n=n.next}while(n!==t);if(!o)return null;const s=o,l=o.x,c=o.y;let u=1/0;n=o;do{if(i>=n.x&&n.x>=l&&i!==n.x&&Ws(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);$s(n,e)&&(t<u||t===u&&(n.x>o.x||n.x===o.x&&Hs(o,n)))&&(o=n,u=t)}n=n.next}while(n!==s);return o}(e,t);if(!n)return t;const i=el(n,e);return Ds(i,i.next),Ds(n,n.next)}function Hs(e,t){return Xs(e.prev,e,t.prev)<0&&Xs(t.next,e,e.next)<0}function Gs(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Qs(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ws(e,t,n,i,r,o,a,s){return(r-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function qs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ks(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&($s(e,t)&&$s(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Xs(e.prev,e,t.prev)||Xs(e,t.prev,t))||Ys(e,t)&&Xs(e.prev,e,e.next)>0&&Xs(t.prev,t,t.next)>0)}function Xs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ys(e,t){return e.x===t.x&&e.y===t.y}function Ks(e,t,n,i){const r=Zs(Xs(e,t,n)),o=Zs(Xs(e,t,i)),a=Zs(Xs(n,i,e)),s=Zs(Xs(n,i,t));return r!==o&&a!==s||!(0!==r||!Js(e,n,t))||!(0!==o||!Js(e,i,t))||!(0!==a||!Js(n,e,i))||!(0!==s||!Js(n,t,i))}function Js(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Zs(e){return e>0?1:e<0?-1:0}function $s(e,t){return Xs(e.prev,e,e.next)<0?Xs(e,t,e.next)>=0&&Xs(e,e.prev,t)>=0:Xs(e,t,e.prev)<0||Xs(e,e.next,t)<0}function el(e,t){const n=il(e.i,e.x,e.y),i=il(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function tl(e,t,n,i){const r=il(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function nl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function il(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function rl(e,t,n){const i=n.patternDependencies;let r=!1;for(const o of t){const t=o.paint.get("".concat(e,"-pattern"));t.isConstant()||(r=!0);const n=t.constantOr(null);n&&(r=!0,i[n.to]=!0,i[n.from]=!0)}return r}function ol(e,t,n,i,r){const o=r.patternDependencies;for(const a of t){const t=a.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:i-1},n,{},r.availableImages),s=t.evaluate({zoom:i},n,{},r.availableImages),l=t.evaluate({zoom:i+1},n,{},r.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:e,mid:s,max:l}}}return n}class al{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yo,this.indexArray=new oa,this.indexArray2=new aa,this.programConfigurations=new Da(e.layers,e.zoom),this.segments=new ca,this.segments2=new ca,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasPattern=rl("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),r=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Va(a,e);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),u,n))continue;const h=r?i.evaluate(u,{},n,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:ja(a),patterns:{},sortKey:h};o.push(d)}r&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const a of o){const{geometry:i,index:r,sourceLayerIndex:o}=a;if(this.hasPattern){const e=ol("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,i,r,n,{});t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ls),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,i,r){for(const o of bn(t,500)){let e=0;for(const s of o)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,i=[],r=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&r.push(i.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),i.push(s[0].x),i.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),i.push(s[n].x),i.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const a=Bs(i,r);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(n+a[o],n+a[o+1],n+a[o+2]);t.vertexLength+=e,t.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}}let sl,ll;_r("FillBucket",al,{omit:["layers","patternFeatures"]});var cl={get paint(){return ll=ll||new io({"fill-antialias":new Zr(q.paint_fill["fill-antialias"]),"fill-opacity":new $r(q.paint_fill["fill-opacity"]),"fill-color":new $r(q.paint_fill["fill-color"]),"fill-outline-color":new $r(q.paint_fill["fill-outline-color"]),"fill-translate":new Zr(q.paint_fill["fill-translate"]),"fill-translate-anchor":new Zr(q.paint_fill["fill-translate-anchor"]),"fill-pattern":new eo(q.paint_fill["fill-pattern"])})},get layout(){return sl=sl||new io({"fill-sort-key":new $r(q.layout_fill["fill-sort-key"])})}};class ul extends oo{constructor(e){super(e,cl)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new al(e)}queryRadius(){return is(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,i,r,o,a){return qa(rs(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)}isTileClipped(){return!0}}const hl=co([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),dl=co([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pl}=hl;var fl={},ml=r,gl=vl;function vl(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(yl,this,t)}function yl(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Al(e){for(var t,n,i=0,r=0,o=e.length,a=o-1;r<o;a=r++)i+=((n=e[a]).x-(t=e[r]).x)*(t.y+n.y);return i}vl.types=["Unknown","Point","LineString","Polygon"],vl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,o=0,a=0,s=[];e.pos<n;){if(r<=0){var l=e.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=e.readSVarint(),a+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new ml(o,a));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},vl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(i<=0){var u=e.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},vl.prototype.toGeoJSON=function(e,t,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=vl.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];u(l=h);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],o=0;o<t;o++){var a=Al(e[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[e[o]]):n.push(e[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)u(l[i][r])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var bl=gl,xl=_l;function _l(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(wl,this,t),this.length=this._features.length}function wl(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}_l.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new bl(this._pbf,t,this.extent,this._keys,this._values)};var El=xl;function Cl(e,t,n){if(3===e){var i=new El(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}fl.VectorTile=function(e,t){this.layers=e.readFields(Cl,{},t)},fl.VectorTileFeature=gl,fl.VectorTileLayer=xl;const Sl=fl.VectorTileFeature.types,Tl=Math.pow(2,13);function Il(e,t,n,i,r,o,a,s){e.emplaceBack(t,n,2*Math.floor(i*Tl)+a,r*Tl*2,o*Tl*2,Math.round(s))}class Ml{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ko,this.centroidVertexArray=new qo,this.indexArray=new oa,this.programConfigurations=new Da(e.layers,e.zoom),this.segments=new ca,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.features=[],this.hasPattern=rl("fill-extrusion",this.layers,t);for(const{feature:i,id:r,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Va(i,e);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),s,n))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:e?s.geometry:ja(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(ol("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,n,{}),t.featureIndex.insert(i,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,n){for(const i of this.features){const{geometry:e}=i;this.addFeature(i,e,i.index,t,n)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pl),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,dl.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,i,r){for(const o of bn(t,500)){const t={x:0,y:0,vertexCount:0};let n=0;for(const e of o)n+=e.length;let i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of o){if(0===e.length)continue;if(Rl(e))continue;let n=0;for(let r=0;r<e.length;r++){const o=e[r];if(r>=1){const a=e[r-1];if(!kl(o,a)){i.vertexLength+4>ca.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=o.sub(a)._perp()._unit(),r=a.dist(o);n+r>32768&&(n=0),Il(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,0,n),Il(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,1,n),t.x+=2*o.x,t.y+=2*o.y,t.vertexCount+=2,n+=r,Il(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,n),Il(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,n),t.x+=2*a.x,t.y+=2*a.y,t.vertexCount+=2;const s=i.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+n>ca.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(n,this.layoutVertexArray,this.indexArray)),"Polygon"!==Sl[e.type])continue;const r=[],a=[],s=i.vertexLength;for(const e of o)if(0!==e.length){e!==o[0]&&a.push(r.length/2);for(let n=0;n<e.length;n++){const i=e[n];Il(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),t.x+=i.x,t.y+=i.y,t.vertexCount+=1,r.push(i.x),r.push(i.y)}}const l=Bs(r,a);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);i.primitiveLength+=l.length/3,i.vertexLength+=n;for(let e=0;e<t.vertexCount;e++){const e=Math.floor(t.x/t.vertexCount),n=Math.floor(t.y/t.vertexCount);this.centroidVertexArray.emplaceBack(e,n)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}}function kl(e,t){return e.x===t.x&&(e.x<0||e.x>Fa)||e.y===t.y&&(e.y<0||e.y>Fa)}function Rl(e){return e.every(e=>e.x<0)||e.every(e=>e.x>Fa)||e.every(e=>e.y<0)||e.every(e=>e.y>Fa)}let Ll;_r("FillExtrusionBucket",Ml,{omit:["layers","features"]});var Bl={get paint(){return Ll=Ll||new io({"fill-extrusion-opacity":new Zr(q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $r(q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zr(q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zr(q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eo(q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $r(q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $r(q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zr(q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Pl extends oo{constructor(e){super(e,Bl)}createBucket(e){return new Ml(e)}queryRadius(){return is(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,n,i,r,o,s,l){const c=rs(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),d=function(e,t){const n=[];for(const i of e){const e=[i.x,i.y,0,1];fs(e,e,t),n.push(new a(e[0]/e[3],e[1]/e[3]))}return n}(c,l),p=function(e,t,n,i){const r=[],o=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,h=i[8]*n,d=i[9]*n,p=i[10]*n,f=i[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const r=n.x,o=n.y,m=i[0]*r+i[4]*o+i[12],g=i[1]*r+i[5]*o+i[13],v=i[2]*r+i[6]*o+i[14],y=i[3]*r+i[7]*o+i[15],A=v+c,b=y+u,x=m+h,_=g+d,w=v+p,E=y+f,C=new a((m+s)/b,(g+l)/b);C.z=A/b,e.push(C);const S=new a(x/E,_/E);S.z=w/E,t.push(S)}r.push(e),o.push(t)}return[r,o]}(i,h,u,l);return function(e,t,n){let i=1/0;qa(n,t)&&(i=Ol(n,t[0]));for(let r=0;r<t.length;r++){const o=t[r],a=e[r];for(let e=0;e<o.length-1;e++){const t=o[e],r=[t,o[e+1],a[e+1],a[e],t];Qa(n,r)&&(i=Math.min(i,Ol(n,r)))}}return i!==1/0&&i}(p[0],p[1],d)}}function Dl(e,t){return e.x*t.x+e.y*t.y}function Ol(e,t){if(1===e.length){let n=0;const i=t[n++];let r;for(;!r||i.equals(r);)if(r=t[n++],!r)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=r.sub(i),l=o.sub(i),c=a.sub(i),u=Dl(s,s),h=Dl(s,l),d=Dl(l,l),p=Dl(c,s),f=Dl(c,l),m=u*d-h*h,g=(d*p-h*f)/m,v=(u*f-h*p)/m,y=i.z*(1-g-v)+r.z*g+o.z*v;if(isFinite(y))return y}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const Nl=co([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Fl}=Nl,zl=co([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ul}=zl,jl=fl.VectorTileFeature.types,Vl=Math.cos(Math.PI/180*37.5),Hl=Math.pow(2,14)/.5;class Gl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Jo,this.layoutVertexArray2=new Zo,this.indexArray=new oa,this.programConfigurations=new Da(e.layers,e.zoom),this.segments=new ca,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasPattern=rl("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),r=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Va(a,e);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),t,n))continue;const u=r?i.evaluate(t,{},n):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:ja(a),patterns:{},sortKey:u};o.push(h)}r&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const a of o){const{geometry:i,index:r,sourceLayerIndex:o}=a;if(this.hasPattern){const e=ol("line",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,i,r,n,{});t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ul)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,i,r){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const u of t)this.addLine(u,e,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,i)}addLine(e,t,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===jl[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(r=1.05);const c=this.overscaling<=16?15*Fa/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),h&&(d=h),h=e[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const v=f.x*m.x+f.y*m.y,y=t.x*m.x+t.y*m.y,A=0!==y?1/y:1/0,b=2*Math.sqrt(2-2*y),x=y<Vl&&d&&p,_=f.x*m.y-f.y*m.x>0;if(x&&g>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const w=d&&p;let E=w?n:a?"butt":i;if(w&&"round"===E&&(A<o?E="miter":A<=2&&(E="fakeround")),"miter"===E&&A>r&&(E="bevel"),"bevel"===E&&(A>2&&(E="flipbevel"),A<r&&(E="miter")),d&&this.updateDistance(d,h),"miter"===E)t._mult(A),this.addCurrentVertex(h,t,0,0,u);else if("flipbevel"===E){if(A>100)t=m.mult(-1);else{const e=A*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(_?-1:1))}this.addCurrentVertex(h,t,0,0,u),this.addCurrentVertex(h,t.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(A*A-1),t=_?e:0,n=_?0:e;if(d&&this.addCurrentVertex(h,f,t,n,u),"fakeround"===E){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*e*e+(.848013+v*(.215638*v-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(_?-1:1);this.addHalfVertex(h,i.x,i.y,!1,_,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===E)this.addCurrentVertex(h,t,0,0,u);else if("square"===E){const e=d?1:-1;this.addCurrentVertex(h,t,e,e,u)}else"round"===E&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&g<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,r),this.addHalfVertex(e,a,s,o,!0,-i,r),this.distance>Hl/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,n,i,r,o))}addHalfVertex(e,t,n,i,r,o,a){let{x:s,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(Hl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),r?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Ql,Wl;_r("LineBucket",Gl,{omit:["layers","patternFeatures"]});var ql={get paint(){return Wl=Wl||new io({"line-opacity":new $r(q.paint_line["line-opacity"]),"line-color":new $r(q.paint_line["line-color"]),"line-translate":new Zr(q.paint_line["line-translate"]),"line-translate-anchor":new Zr(q.paint_line["line-translate-anchor"]),"line-width":new $r(q.paint_line["line-width"]),"line-gap-width":new $r(q.paint_line["line-gap-width"]),"line-offset":new $r(q.paint_line["line-offset"]),"line-blur":new $r(q.paint_line["line-blur"]),"line-dasharray":new to(q.paint_line["line-dasharray"]),"line-pattern":new eo(q.paint_line["line-pattern"]),"line-gradient":new no(q.paint_line["line-gradient"])})},get layout(){return Ql=Ql||new io({"line-cap":new Zr(q.layout_line["line-cap"]),"line-join":new $r(q.layout_line["line-join"]),"line-miter-limit":new Zr(q.layout_line["line-miter-limit"]),"line-round-limit":new Zr(q.layout_line["line-round-limit"]),"line-sort-key":new $r(q.layout_line["line-sort-key"])})}};class Xl extends $r{possiblyEvaluate(e,t){return t=new Hr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,i){return t=y({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,i)}}let Yl;class Kl extends oo{constructor(e){super(e,ql),this.gradientVersion=0,Yl||(Yl=new Xl(ql.paint.properties["line-width"].specification),Yl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof Et,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Yl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Gl(e)}queryRadius(e){const t=e,n=Jl(ns("line-width",this,t),ns("line-gap-width",this,t)),i=ns("line-offset",this,t);return n/2+Math.abs(i)+is(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,i,r,o,s){const l=rs(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),c=s/2*Jl(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(i=function(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=[];for(let e=0;e<r.length;e++){const n=r[e-1],i=r[e],s=r[e+1],l=0===e?new a(0,0):i.sub(n)._unit()._perp(),c=e===r.length-1?new a(0,0):s.sub(i)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),o.push(u._mult(t)._add(i))}n.push(o)}return n}(i,u*s)),function(e,t,n){for(let i=0;i<t.length;i++){const r=t[i];if(e.length>=3)for(let t=0;t<r.length;t++)if(es(e,r[t]))return!0;if(Xa(e,r,n))return!0}return!1}(l,i,c)}isTileClipped(){return!0}}function Jl(e,t){return t>0?t+2*e:e}const Zl=co([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$l=co([{name:"a_projected_pos",components:3,type:"Float32"}],4);co([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ec=co([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);co([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tc=co([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nc=co([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ic(e,t,n){return e.sections.forEach(e=>{e.text=function(e,t,n){const i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),Vr.applyArabicShaping&&(e=Vr.applyArabicShaping(e)),e}(e.text,t,n)}),e}co([{name:"triangle",components:3,type:"Uint16"}]),co([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),co([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),co([{type:"Float32",name:"offsetX"}]),co([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),co([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const rc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var oc=24,ac=cc,sc=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},lc=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m};function cc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}cc.Varint=0,cc.Fixed64=1,cc.Bytes=2,cc.Fixed32=5;var uc=4294967296,hc=1/uc,dc="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function pc(e){return e.type===cc.Bytes?e.readVarint()+e.pos:e.pos+1}function fc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function mc(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function gc(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function vc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function yc(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Ac(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function bc(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function xc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function _c(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function wc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ec(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Cc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Sc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Tc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}cc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,e(r,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Cc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Tc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Cc(this.buf,this.pos)+Cc(this.buf,this.pos+4)*uc;return this.pos+=8,e},readSFixed64:function(){var e=Cc(this.buf,this.pos)+Tc(this.buf,this.pos+4)*uc;return this.pos+=8,e},readFloat:function(){var e=sc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=sc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return fc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return fc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return fc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return fc(e,i,t);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return fc(e,i,t);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return fc(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&dc?function(e,t,n){return dc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",r=t;r<n;){var o,a,s,l=e[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[r+2],128==(192&(o=e[r+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[r+2],s=e[r+3],128==(192&(o=e[r+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==cc.Bytes)return e.push(this.readVarint(t));var n=pc(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==cc.Bytes)return e.push(this.readSVarint());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==cc.Bytes)return e.push(this.readBoolean());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==cc.Bytes)return e.push(this.readFloat());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==cc.Bytes)return e.push(this.readDouble());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==cc.Bytes)return e.push(this.readFixed32());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==cc.Bytes)return e.push(this.readSFixed32());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==cc.Bytes)return e.push(this.readFixed64());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==cc.Bytes)return e.push(this.readSFixed64());var t=pc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===cc.Varint)for(;this.buf[this.pos++]>127;);else if(t===cc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===cc.Fixed32)this.pos+=4;else{if(t!==cc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Sc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Sc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Sc(this.buf,-1&e,this.pos),Sc(this.buf,Math.floor(e*hc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Sc(this.buf,-1&e,this.pos),Sc(this.buf,Math.floor(e*hc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&mc(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),lc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),lc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&mc(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,cc.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,gc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,vc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,bc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,yc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Ac,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,xc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,_c,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,wc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Ec,t)},writeBytesField:function(e,t){this.writeTag(e,cc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,cc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,cc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,cc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,cc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,cc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,cc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,cc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,cc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,cc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ic=n(ac);const Mc=3;function kc(e,t,n){1===e&&n.readMessage(Rc,t)}function Rc(e,t,n){if(3===e){const{id:e,bitmap:i,width:r,height:o,left:a,top:s,advance:l}=n.readMessage(Lc,{});t.push({id:e,bitmap:new ws({width:r+2*Mc,height:o+2*Mc},i),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function Lc(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}const Bc=Mc;function Pc(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort((e,t)=>t.h-e.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let r=0,o=0;for(const a of e)for(let e=i.length-1;e>=0;e--){const t=i[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),r=Math.max(r,a.x+a.w),a.w===t.w&&a.h===t.h){const t=i.pop();e<i.length&&(i[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(i.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:r,h:o,fill:t/(r*o)||0}}const Dc=1;class Oc{constructor(e,t){let{pixelRatio:n,version:i,stretchX:r,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}=t;this.paddedRect=e,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=a,this.version=i,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+Dc,this.paddedRect.y+Dc]}get br(){return[this.paddedRect.x+this.paddedRect.w-Dc,this.paddedRect.y+this.paddedRect.h-Dc]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Dc)/this.pixelRatio,(this.paddedRect.h-2*Dc)/this.pixelRatio]}}class Nc{constructor(e,t){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(e,n,r),this.addImages(t,i,r);const{w:o,h:a}=Pc(r),s=new Es({width:o||1,height:a||1});for(const l in e){const t=e[l],i=n[l].paddedRect;Es.copy(t.data,s,{x:0,y:0},{x:i.x+Dc,y:i.y+Dc},t.data)}for(const l in t){const e=t[l],n=i[l].paddedRect,r=n.x+Dc,o=n.y+Dc,a=e.data.width,c=e.data.height;Es.copy(e.data,s,{x:0,y:0},{x:r,y:o},e.data),Es.copy(e.data,s,{x:0,y:c-1},{x:r,y:o-1},{width:a,height:1}),Es.copy(e.data,s,{x:0,y:0},{x:r,y:o+c},{width:a,height:1}),Es.copy(e.data,s,{x:a-1,y:0},{x:r-1,y:o},{width:1,height:c}),Es.copy(e.data,s,{x:0,y:0},{x:r+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(e,t,n){for(const i in e){const r=e[i],o={x:0,y:0,w:r.data.width+2*Dc,h:r.data.height+2*Dc};n.push(o),t[i]=new Oc(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,r]=e.tl;n.update(t.data,void 0,{x:i,y:r})}}var Fc;_r("ImagePosition",Oc),_r("ImageAtlas",Nc),e.ah=void 0,(Fc=e.ah||(e.ah={}))[Fc.none=0]="none",Fc[Fc.horizontal=1]="horizontal",Fc[Fc.vertical=2]="vertical",Fc[Fc.horizontalOnly=3]="horizontalOnly";const zc=-17;class Uc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Uc;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Uc;return t.imageName=e,t}}class jc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new jc;for(let i=0;i<e.sections.length;i++){const r=e.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n+1)||null,r=e.charCodeAt(n-1)||null;t+=i&&Nr(i)&&!rc[e[n+1]]||r&&Nr(r)&&!rc[e[n-1]]||!rc[e[n]]?e[n]:rc[e[n]]}return t}(this.text)}trim(){let e=0;for(let n=0;n<this.text.length&&Hc[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Hc[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new jc;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Uc.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let i=0;i<e.text.length;++i)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void E("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Uc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vc(t,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=jc.fromFeature(t,o);let v;d===e.ah.vertical&&g.verticalizePunctuation();const{processBidirectionalText:y,processStyledBidirectionalText:A}=Vr;if(y&&1===g.sections.length){v=[];const e=y(g.toString(),Jc(g,u,a,n,r,f));for(const t of e){const e=new jc;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);v.push(e)}}else if(A){v=[];const e=A(g.text,g.sectionIndex,Jc(g,u,a,n,r,f));for(const t of e){const e=new jc;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,v.push(e)}}else v=function(e,t){const n=[],i=e.text;let r=0;for(const o of t)n.push(e.substring(r,o)),r=o;return r<i.length&&n.push(e.substring(r,i.length)),n}(g,Jc(g,u,a,n,r,f));const b=[],x={positionedLines:b,text:g.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(t,n,i,r,o,a,s,l,c,u,h,d){let p=0,f=zc,m=0,g=0;const v="right"===l?1:"left"===l?0:.5;let y=0;for(const w of o){w.trim();const o=w.getMaxScale(),s=(o-1)*oc,l={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=l;const b=l.positionedGlyphs;let x=0;if(!w.length()){f+=a,++y;continue}for(let a=0;a<w.length();a++){const l=w.getSection(a),m=w.getSectionIndex(a),g=w.getCharCode(a);let v=0,y=null,_=null,E=null,C=oc;const S=!(c===e.ah.horizontal||!h&&!Or(g)||h&&(Hc[g]||(A=g,/(?:[\u0600-\u0604\u0606-\u060B\u060D-\u061A\u061C-\u061E\u0620-\u063F\u0641-\u064A\u0656-\u066F\u0671-\u06DC\u06DE-\u06FF\u0750-\u077F\u0870-\u0891\u0897-\u08E1\u08E3-\u08FF\uFB50-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFF\uFE70-\uFE74\uFE76-\uFEFC]|\uD803[\uDE60-\uDE7E\uDEC2-\uDEC7\uDED0-\uDED8\uDEFA-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1])/.test(String.fromCodePoint(A)))));if(l.imageName){const e=r[l.imageName];if(!e)continue;E=l.imageName,t.iconsInText=t.iconsInText||!0,_=e.paddedRect;const n=e.displaySize;l.scale=l.scale*oc/d,y={width:n[0],height:n[1],left:Dc,top:-Bc,advance:S?n[1]:n[0]},v=s+(oc-n[1]*l.scale),C=y.advance;const i=S?n[0]*l.scale-oc*o:n[1]*l.scale-oc*o;i>0&&i>x&&(x=i)}else{const e=i[l.fontStack],t=e&&e[g];if(t&&t.rect)_=t.rect,y=t.metrics;else{const e=n[l.fontStack],t=e&&e[g];if(!t)continue;y=t.metrics}v=(o-l.scale)*oc}S?(t.verticalizable=!0,b.push({glyph:g,imageName:E,x:p,y:f+v,vertical:S,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:y,rect:_}),p+=C*l.scale+u):(b.push({glyph:g,imageName:E,x:p,y:f+v,vertical:S,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:y,rect:_}),p+=y.advance*l.scale+u)}0!==b.length&&(m=Math.max(p-u,m),$c(b,0,b.length-1,v,x)),p=0;const _=a*o+x;l.lineOffset=Math.max(x,s),f+=_,g=Math.max(_,g),++y}var A;const b=f-zc,{horizontalAlign:x,verticalAlign:_}=Zc(s);(function(e,t,n,i,r,o,a,s,l){const c=(t-n)*r;let u=0;u=o!==a?-s*i-zc:(-i*l+.5)*a;for(const h of e)for(const e of h.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,v,x,_,m,g,a,b,o.length),t.top+=-_*b,t.bottom=t.top+b,t.left+=-x*m,t.right=t.left+m}(x,n,i,r,v,s,l,c,d,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&x}const Hc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gc={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Qc={40:!0};function Wc(e,t,n,i,r,o){if(t.imageName){const e=i[t.imageName];return e?e.displaySize[0]*t.scale*oc/o+r:0}{const i=n[t.fontStack],o=i&&i[e];return o?o.metrics.advance*t.scale+r:0}}function qc(e,t,n,i){const r=Math.pow(e-t,2);return i?e<t?r/2:2*r:r+Math.abs(n)*n}function Xc(e,t,n){let i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function Yc(e,t,n,i,r,o){let a=null,s=qc(t,n,r,o);for(const l of i){const e=qc(t-l.x,n,r,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Kc(e){return e?Kc(e.priorBreak).concat(e.index):[]}function Jc(e,t,n,i,r,o){if(!e)return[];const a=[],s=function(e,t,n,i,r,o){let a=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);a+=Wc(e.getCharCode(s),n,i,r,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,i,r,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<e.length();h++){const n=e.getSection(h),d=e.getCharCode(h);if(Hc[d]||(c+=Wc(d,n,i,r,t,o)),h<e.length()-1){const t=!((u=d)<11904)&&(!!Mr["CJK Compatibility Forms"](u)||!!Mr["CJK Compatibility"](u)||!!Mr["CJK Strokes"](u)||!!Mr["CJK Symbols and Punctuation"](u)||!!Mr["Enclosed CJK Letters and Months"](u)||!!Mr["Halfwidth and Fullwidth Forms"](u)||!!Mr["Ideographic Description Characters"](u)||!!Mr["Vertical Forms"](u)||Dr.test(String.fromCodePoint(u)));(Gc[d]||t||n.imageName||h!==e.length()-2&&Qc[e.getCharCode(h+1)])&&a.push(Yc(h+1,c,s,a,Xc(d,e.getCharCode(h+1),t&&l),!1))}}var u;return Kc(Yc(e.length(),c,s,a,0,!0))}function Zc(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function $c(e,t,n,i,r){if(!i&&!r)return;const o=e[n],a=(e[n].x+o.metrics.advance*o.scale)*i;for(let s=t;s<=n;s++)e[s].x-=a,e[s].y+=r}function eu(e,t,n){const{horizontalAlign:i,verticalAlign:r}=Zc(n),o=t[0]-e.displaySize[0]*i,a=t[1]-e.displaySize[1]*r;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function tu(e){var t,n;let i=e.left,r=e.top,o=e.right-i,a=e.bottom-r;const s=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(n=e.image.textFitHeight)&&void 0!==n?n:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<c||"proportional"===s){const e=Math.ceil(a*c);i*=e/o,o=e}}else if("proportional"===s&&"stretchOnly"===l&&0!==c&&o/a>c){const e=Math.ceil(o/c);r*=e/a,a=e}return{x1:i,y1:r,x2:i+o,y2:r+a}}function nu(e,t,n,i,r,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=r[0]+l-i[3],h=r[0]+c+i[1]):(p=r[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=r[1]+f-i[0],d=r[1]+m+i[2]):(u=r[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}const iu=255,ru=128,ou=iu*ru;function au(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Hr(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=n;let r=0;for(;r<t.length&&t[r]<=e;)r++;r=Math.max(0,r-1);let o=r;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[r],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Hr(a)),maxSize:n.evaluate(new Hr(s)),interpolationType:i}}}function su(e,t,n){let i="never";const r=e.get(t);return r?i=r:e.get(n)&&(i="always"),i}const lu=fl.VectorTileFeature.types,cu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uu(e,t,n,i,r,o,a,s,l,c,u,h,d){const p=s?Math.min(ou,Math.round(s[0])):0,f=s?Math.min(ou,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function hu(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function du(e){for(const t of e.sections)if(jr(t.text))return!0;return!1}class pu{constructor(e){this.layoutVertexArray=new ea,this.indexArray=new oa,this.programConfigurations=e,this.segments=new ca,this.dynamicLayoutVertexArray=new ta,this.opacityVertexArray=new na,this.hasVisibleVertices=!1,this.placedSymbolArray=new Fo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,$l.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,cu,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_r("SymbolBuffers",pu);class fu{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new ca,this.collisionVertexArray=new ra}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ec.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_r("CollisionBuffers",fu);class mu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(e=>e.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=us([]),this.placementViewportMatrix=us([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=au(this.zoom,n["text-size"]),this.iconSizeData=au(this.zoom,n["icon-size"]);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==su(i,"text-overlap","text-allow-overlap")||"never"!==su(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(t=>e.ah[t])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=t.sourceID}createArrays(){this.text=new pu(new Da(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new pu(new Da(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new jo,this.lineVertexArray=new Vo,this.symbolInstances=new Uo,this.textAnchorOffsets=new Go}calculateGlyphDependencies(e,t,n,i,r){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||i)&&r){const n=rc[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(t,n,i){const r=this.layers[0],o=r.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Je&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new Hr(this.zoom);for(const{feature:g,id:v,index:y,sourceLayerIndex:A}of t){const t=r._featureFilter.needGeometry,n=Va(g,t);if(!r._featureFilter.filter(m,n,i))continue;let s,l;if(t||(n.geometry=ja(g)),c){const e=r.getValueAndResolveTokens("text-field",n,i,f),t=Je.factory(e),o=this.hasRTLText=this.hasRTLText||du(t);(!o||"unavailable"===Vr.getRTLTextPluginStatus()||o&&Vr.isParsed())&&(s=ic(t,r,n))}if(u){const e=r.getValueAndResolveTokens("icon-image",n,i,f);l=e instanceof tt?e:tt.fromString(e)}if(!s&&!l)continue;const b=this.sortFeaturesByKey?h.evaluate(n,{},i):void 0;if(this.features.push({id:v,text:s,icon:l,index:y,sourceLayerIndex:A,geometry:n.geometry,properties:g.properties,type:lu[g.type],sortKey:b}),l&&(d[l.name]=!0),s){const t=a.evaluate(n,{},i).join(","),r="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ah.vertical)>=0;for(const e of s.sections)if(e.image)d[e.image.name]=!0;else{const n=kr(s.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},i=[];let r=0;function o(t){i.push(e[t]),r++}function a(e,t,r){const o=n[e];return delete n[e],n[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(e,n,r){const o=t[n];return delete t[n],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(e,t,n){const i=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(i.x,":").concat(i.y)}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,h),r=a(p,f,i[e].geometry);delete t[p],delete n[f],n[l(d,i[r].geometry,!0)]=r,i[e].geometry=null}else p in n?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=r-1,n[f]=r-1)}return i.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]);const r={};for(let o=e.segment+1;o<t.length;o++)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(let o=e.segment||0;o>=0;o--)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o>0&&(i+=t[o-1].dist(t[o]));for(let e=0;e<t.length;e++){const t=r[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,i,r,o,a,s,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,f,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,v=m.vertexLength,y=this.allowVerticalPlacement&&s===e.ah.vertical?Math.PI/2:0,A=a.text&&a.text.sections;for(let e=0;e<n.length;e++){const{tl:r,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:v,minFontScaleY:b,glyphOffset:x,isSDF:_,sectionIndex:w}=n[e],E=m.vertexLength,C=x[1];uu(f,l.x,l.y,r.x,C+r.y,u.x,u.y,i,_,h.x,h.y,v,b),uu(f,l.x,l.y,o.x,C+o.y,u.x+u.w,u.y,i,_,g.x,h.y,v,b),uu(f,l.x,l.y,s.x,C+s.y,u.x,u.y+u.h,i,_,h.x,g.y,v,b),uu(f,l.x,l.y,c.x,C+c.y,u.x+u.w,u.y+u.h,i,_,g.x,g.y,v,b),hu(t.dynamicLayoutVertexArray,l,y),p.emplaceBack(E,E+1,E+2),p.emplaceBack(E+1,E+2,E+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),e!==n.length-1&&w===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{},d,A&&A[w])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,v,c,u,l.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],s,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,i,r,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,n,i,r,o,s){const l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),c=l.vertexLength,u=r.layoutVertexArray,h=r.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,h,o,d,p,new a(e,t)),this._addCollisionDebugVertex(u,h,o,d,p,new a(n,t)),this._addCollisionDebugVertex(u,h,o,d,p,new a(n,i)),this._addCollisionDebugVertex(u,h,o,d,p,new a(e,i)),l.vertexLength+=4;const f=r.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,i){for(let r=e;r<t;r++){const e=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,i?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fu(ia,tc.members,aa),this.iconCollisionBox=new fu(ia,tc.members,aa);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,i,r,o,a,s,l){const c={};for(let u=t;u<n;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=i;u<r;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=o;u<a;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=s;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs;for(let r=n.vertexStartIndex;r<i;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),i=[],r=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);i.push(0|Math.round(t*e.anchorX+n*e.anchorY)),r.push(e.featureIndex)}return o.sort((e,t)=>i[e]-i[t]||r[t]-r[e]),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gu,vu;_r("SymbolBucket",mu,{omit:["layers","collisionBoxArray","features","compareText"]}),mu.MAX_GLYPHS=65535,mu.addDynamicAttributes=hu;var yu={get paint(){return vu=vu||new io({"icon-opacity":new $r(q.paint_symbol["icon-opacity"]),"icon-color":new $r(q.paint_symbol["icon-color"]),"icon-halo-color":new $r(q.paint_symbol["icon-halo-color"]),"icon-halo-width":new $r(q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $r(q.paint_symbol["icon-halo-blur"]),"icon-translate":new Zr(q.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zr(q.paint_symbol["icon-translate-anchor"]),"text-opacity":new $r(q.paint_symbol["text-opacity"]),"text-color":new $r(q.paint_symbol["text-color"],{runtimeType:pe,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new $r(q.paint_symbol["text-halo-color"]),"text-halo-width":new $r(q.paint_symbol["text-halo-width"]),"text-halo-blur":new $r(q.paint_symbol["text-halo-blur"]),"text-translate":new Zr(q.paint_symbol["text-translate"]),"text-translate-anchor":new Zr(q.paint_symbol["text-translate-anchor"])})},get layout(){return gu=gu||new io({"symbol-placement":new Zr(q.layout_symbol["symbol-placement"]),"symbol-spacing":new Zr(q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zr(q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $r(q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zr(q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zr(q.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zr(q.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zr(q.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zr(q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zr(q.layout_symbol["icon-rotation-alignment"]),"icon-size":new $r(q.layout_symbol["icon-size"]),"icon-text-fit":new Zr(q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zr(q.layout_symbol["icon-text-fit-padding"]),"icon-image":new $r(q.layout_symbol["icon-image"]),"icon-rotate":new $r(q.layout_symbol["icon-rotate"]),"icon-padding":new $r(q.layout_symbol["icon-padding"]),"icon-keep-upright":new Zr(q.layout_symbol["icon-keep-upright"]),"icon-offset":new $r(q.layout_symbol["icon-offset"]),"icon-anchor":new $r(q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zr(q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zr(q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zr(q.layout_symbol["text-rotation-alignment"]),"text-field":new $r(q.layout_symbol["text-field"]),"text-font":new $r(q.layout_symbol["text-font"]),"text-size":new $r(q.layout_symbol["text-size"]),"text-max-width":new $r(q.layout_symbol["text-max-width"]),"text-line-height":new Zr(q.layout_symbol["text-line-height"]),"text-letter-spacing":new $r(q.layout_symbol["text-letter-spacing"]),"text-justify":new $r(q.layout_symbol["text-justify"]),"text-radial-offset":new $r(q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zr(q.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new $r(q.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new $r(q.layout_symbol["text-anchor"]),"text-max-angle":new Zr(q.layout_symbol["text-max-angle"]),"text-writing-mode":new Zr(q.layout_symbol["text-writing-mode"]),"text-rotate":new $r(q.layout_symbol["text-rotate"]),"text-padding":new Zr(q.layout_symbol["text-padding"]),"text-keep-upright":new Zr(q.layout_symbol["text-keep-upright"]),"text-transform":new $r(q.layout_symbol["text-transform"]),"text-offset":new $r(q.layout_symbol["text-offset"]),"text-allow-overlap":new Zr(q.layout_symbol["text-allow-overlap"]),"text-overlap":new Zr(q.layout_symbol["text-overlap"]),"text-ignore-placement":new Zr(q.layout_symbol["text-ignore-placement"]),"text-optional":new Zr(q.layout_symbol["text-optional"])})}};class Au{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ce,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_r("FormatSectionOverride",Au,{omit:["defaultValue"]});class bu extends oo{constructor(e){super(e,yu)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,i){const r=this.layout.get(e).evaluate(t,{},n,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||bi(o.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(t,n)=>e&&n in e?String(e[n]):"")}(t.properties,r)}createBucket(e){return new mu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of yu.paint.overridableProperties){if(!bu.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Au(t),i=new Ai(n,t.property.specification);let r=null;r="constant"===t.value.kind||"source"===t.value.kind?new _i("source",i):new wi("composite",i,t.value.zoomStops),this.paint._values[e]=new Kr(t.property,r,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&bu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),i=yu.paint.properties[t];let r=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Je)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{r||(t instanceof at&&rt(t.value)===ve?o(t.value.sections):t instanceof Wt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return r}}let xu;var _u={get paint(){return xu=xu||new io({"background-color":new Zr(q.paint_background["background-color"]),"background-pattern":new to(q.paint_background["background-pattern"]),"background-opacity":new Zr(q.paint_background["background-opacity"])})}};class wu extends oo{constructor(e){super(e,_u)}}let Eu;var Cu={get paint(){return Eu=Eu||new io({"raster-opacity":new Zr(q.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zr(q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zr(q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zr(q.paint_raster["raster-brightness-max"]),"raster-saturation":new Zr(q.paint_raster["raster-saturation"]),"raster-contrast":new Zr(q.paint_raster["raster-contrast"]),"raster-resampling":new Zr(q.paint_raster["raster-resampling"]),"raster-fade-duration":new Zr(q.paint_raster["raster-fade-duration"])})}};class Su extends oo{constructor(e){super(e,Cu)}}class Tu extends oo{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Iu{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Mu=6371008.8;class ku{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ku(v(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return Mu*Math.acos(Math.min(r,1))}static convert(e){if(e instanceof ku)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new ku(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new ku(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ru=2*Math.PI*Mu;function Lu(e){return Ru*Math.cos(e*Math.PI/180)}function Bu(e){return(180+e)/360}function Pu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Du(e,t){return e/Lu(t)}function Ou(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class Nu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=ku.convert(e);return new Nu(Bu(n.lng),Pu(n.lat),Du(t,n.lat))}toLngLat(){return new ku(360*this.x-180,Ou(this.y))}toAltitude(){return this.z*Lu(Ou(this.y))}meterInMercatorCoordinateUnits(){return 1/Ru*(e=Ou(this.y),1/Math.cos(e*Math.PI/180));var e}}function Fu(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class zu{constructor(e,t,n){if(!function(e,t,n){return!(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,n))throw new Error("x=".concat(t,", y=").concat(n,", z=").concat(e," outside of bounds. 0<=x<").concat(Math.pow(2,e),", 0<=y<").concat(Math.pow(2,e)," 0<=z<=25 "));this.z=e,this.x=t,this.y=n,this.key=Vu(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const i=(o=this.y,a=this.z,s=Fu(256*(r=this.x),256*(o=Math.pow(2,a)-o-1),a),l=Fu(256*(r+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var r,o,a,s,l;const c=function(e,t,n){let i,r="";for(let o=e;o>0;o--)i=1<<o-1,r+=(t&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new a((e.x*t-this.x)*Fa,(e.y*t-this.y)*Fa)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Uu{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Vu(e,t.z,t.z,t.x,t.y)}}class ju{constructor(e,t,n,i,r){if(e<n)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(e,"; z = ").concat(n));this.overscaledZ=e,this.wrap=t,this.canonical=new zu(n,+i,+r),this.key=Vu(t,e,n,i,r)}clone(){return new ju(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const t=this.canonical.z-e;return e>this.canonical.z?new ju(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ju(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const n=this.canonical.z-e;return e>this.canonical.z?Vu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Vu(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new ju(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new ju(t,this.wrap,t,n,i),new ju(t,this.wrap,t,n+1,i),new ju(t,this.wrap,t,n,i+1),new ju(t,this.wrap,t,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ju(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ju(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Uu(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}getTilePoint(e){return this.canonical.getTilePoint(new Nu(e.x-this.wrap,e.y))}}function Vu(e,t,n,i,r){(e*=2)<0&&(e=-1*e-1);const o=1<<n;return(o*o*e+o*r+i).toString(36)+n.toString(36)+t.toString(36)}_r("CanonicalTileID",zu),_r("OverscaledTileID",ju,{omit:["posMatrix"]});class Hu{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void E('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".'));this.stride=t.height;const s=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=r,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<s;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(s,l)]=this.data[this._idx(s-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,s)]=this.data[this._idx(l,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<s;l++)for(let e=0;e<s;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const n=new Uint8Array(this.data.buffer),i=4*this._idx(e,t);return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,n){return e*this.redFactor+t*this.greenFactor+n*this.blueFactor-this.baseShift}getPixels(){return new Es({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,r=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let t=i;t<r;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+s,c+l)]}}_r("DEMData",Hu);class Gu{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(e," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[e]}}class Qu{constructor(e,t,n,i,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=i,this.properties=e.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Wu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new br(Fa,16,0),this.grid3D=new br(Fa,16,0),this.featureIndexArray=new Wo,this.promoteId=t}insert(e,t,n,i,r,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);const s=o?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const i=e[t];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<Fa&&n[1]<Fa&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fl.VectorTile(new Ic(this.rawTileData)).layers,this.sourceLayerCoder=new Gu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,n,i){this.loadVTLayers();const r=e.params||{},o=Fa/e.tileSize/e.scale,s=Mi(r.filter),l=e.queryGeometry,c=e.queryPadding*o,u=Xu(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=Xu(e.cameraQueryGeometry),p=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(t,n,i,r)=>function(e,t,n,i,r){for(const a of e)if(t<=a.x&&n<=a.y&&i>=a.x&&r>=a.y)return!0;const o=[new a(t,n),new a(t,r),new a(i,r),new a(i,n)];if(e.length>2)for(const a of o)if(es(e,a))return!0;for(let a=0;a<e.length-1;a++)if(ts(e[a],e[a+1],o))return!0;return!1}(e.cameraQueryGeometry,t-c,n-c,i+c,r+c));for(const a of p)h.push(a);h.sort(Yu);const f={};let m;for(let a=0;a<h.length;a++){const c=h[a];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,r.layers,r.availableImages,t,n,i,(t,n,i)=>(d||(d=ja(t)),n.queryIntersectsFeature(l,t,i,d,this.z,e.transform,o,e.pixelPosMatrix)))}return f}loadMatchingFeature(e,t,n,i,r,o,a,s,l,c,u){const h=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,h))return;const d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(i);if(r.needGeometry){const e=Va(p,!0);if(!r.filter(new Hr(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new Hr(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const t=h[m];if(o&&o.indexOf(t)<0)continue;const n=s[t];if(!n)continue;let r={};f&&c&&(r=c.getState(n.sourceLayer||"_geojsonTileLayer",f));const d=y({},l[t]);d.paint=qu(d.paint,n.paint,p,r,a),d.layout=qu(d.layout,n.layout,p,r,a);const g=!u||u(p,n,r);if(!g)continue;const v=new Qu(p,this.z,this.x,this.y,f);v.layer=d;let A=e[t];void 0===A&&(A=e[t]=[]),A.push({featureIndex:i,feature:v,intersectionZ:g})}}lookupSymbolFeatures(e,t,n,i,r,o,a,s){const l={};this.loadVTLayers();const c=Mi(r);for(const u of e)this.loadMatchingFeature(l,n,i,u,c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function qu(e,t,n,i,r){return b(e,(e,o)=>{const a=t instanceof Jr?t.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a})}function Xu(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return{minX:t,minY:n,maxX:i,maxY:r}}function Yu(e,t){return t-e}function Ku(e,t,n,i,r){const o=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new a(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new a(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=i&&u.x>=i||(s.x>=i?s=new a(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=i&&(u=new a(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=r&&u.y>=r||(s.y>=r?s=new a(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round():u.y>=r&&(u=new a(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round()),c&&s.equals(c[c.length-1])||(c=[s],o.push(c)),c.push(u)))))}}return o}_r("FeatureIndex",Wu,{omit:["rawTileData","sourceLayerCoder"]});class Ju extends a{constructor(e,t,n,i){super(e,t),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Ju(this.x,this.y,this.angle,this.segment)}}function Zu(e,t,n,i,r){if(void 0===t.segment||0===n)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=t.dist(n)}return!0}function $u(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function eh(e,t,n){return e?.6*t*n:0}function th(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function nh(e,t,n,i,r,o){const a=eh(n,r,o),s=th(n,i)*o;let l=0;const c=$u(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],i=e[u+1],r=n.dist(i);if(l+r>c){const o=(c-l)/r,h=Rt.number(n.x,i.x,o),d=Rt.number(n.y,i.y,o),p=new Ju(h,d,i.angleTo(n),u);return p._round(),!a||Zu(e,p,s,a,t)?p:void 0}l+=r}}function ih(e,t,n,i,r,o,a,s,l){const c=eh(i,o,a),u=th(i,r),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),rh(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,d,!1,l)}function rh(e,t,n,i,r,o,a,s,l){const c=o/2,u=$u(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;d+n<h+s;){d+=n;const g=(d-h)/s,v=Rt.number(t.x,a.x,g),y=Rt.number(t.y,a.y,g);if(v>=0&&v<l&&y>=0&&y<l&&d-c>=0&&d+c<=u){const t=new Ju(v,y,m,f);t._round(),i&&!Zu(e,t,o,i,r)||p.push(t)}}h+=s}return s||p.length||a||(p=rh(e,h/2,n,i,r,o,a,!0,l)),p}_r("Anchor",Ju);const oh=Dc;function ah(e,t,n,i){const r=[],o=e.image,s=o.pixelRatio,l=o.paddedRect.w-2*oh,c=o.paddedRect.h-2*oh;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const h=o.stretchX||[[0,l]],d=o.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=h.reduce(p,0),m=d.reduce(p,0),g=l-f,v=c-m;let y=0,A=f,b=0,x=m,_=0,w=g,E=0,C=v;if(o.content&&i){const t=o.content,n=t[2]-t[0],i=t[3]-t[1];(o.textFitWidth||o.textFitHeight)&&(u=tu(e)),y=sh(h,0,t[0]),b=sh(d,0,t[1]),A=sh(h,t[0],t[2]),x=sh(d,t[1],t[3]),_=t[0]-y,E=t[1]-b,w=n-A,C=i-x}const S=u.x1,T=u.y1,I=u.x2-S,M=u.y2-T,k=(e,i,r,l)=>{const c=ch(e.stretch-y,A,I,S),u=uh(e.fixed-_,w,e.stretch,f),h=ch(i.stretch-b,x,M,T),d=uh(i.fixed-E,C,i.stretch,m),p=ch(r.stretch-y,A,I,S),g=uh(r.fixed-_,w,r.stretch,f),v=ch(l.stretch-b,x,M,T),k=uh(l.fixed-E,C,l.stretch,m),R=new a(c,h),L=new a(p,h),B=new a(p,v),P=new a(c,v),D=new a(u/s,d/s),O=new a(g/s,k/s),N=t*Math.PI/180;if(N){const e=Math.sin(N),t=Math.cos(N),n=[t,-e,e,t];R._matMult(n),L._matMult(n),P._matMult(n),B._matMult(n)}const F=e.stretch+e.fixed,z=i.stretch+i.fixed;return{tl:R,tr:L,bl:P,br:B,tex:{x:o.paddedRect.x+oh+F,y:o.paddedRect.y+oh+z,w:r.stretch+r.fixed-F,h:l.stretch+l.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:O,minFontScaleX:w/s/I,minFontScaleY:C/s/M,isSDF:n}};if(i&&(o.stretchX||o.stretchY)){const e=lh(h,g,f),t=lh(d,v,m);for(let n=0;n<e.length-1;n++){const i=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)r.push(k(i,t[e],o,t[e+1]))}}else r.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return r}function sh(e,t,n){let i=0;for(const r of e)i+=Math.max(t,Math.min(n,r[1]))-Math.max(t,Math.min(n,r[0]));return i}function lh(e,t,n){const i=[{fixed:-oh,stretch:0}];for(const[r,o]of e){const e=i[i.length-1];i.push({fixed:r-e.stretch,stretch:e.stretch}),i.push({fixed:r-e.stretch,stretch:e.stretch+(o-r)})}return i.push({fixed:t+oh,stretch:n}),i}function ch(e,t,n,i){return e/t*n+i}function uh(e,t,n,i){return e-t*n/i}class hh{constructor(e,t,n,i,r,o,s,l,c,u){var h;if(this.boxStartIndex=e.length,c){let e=o.top,t=o.bottom;const n=o.collisionPadding;n&&(e-=n[1],t+=n[3]);let i=t-e;i>0&&(i=Math.max(10,i),this.circleDiameter=i)}else{const c=(null===(h=o.image)||void 0===h?void 0:h.content)&&(o.image.textFitWidth||o.image.textFitHeight)?tu(o):{x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};c.y1=c.y1*s-l[0],c.y2=c.y2*s+l[2],c.x1=c.x1*s-l[3],c.x2=c.x2*s+l[1];const d=o.collisionPadding;if(d&&(c.x1-=d[0]*s,c.y1-=d[1]*s,c.x2+=d[2]*s,c.y2+=d[3]*s),u){const e=new a(c.x1,c.y1),t=new a(c.x2,c.y1),n=new a(c.x1,c.y2),i=new a(c.x2,c.y2),r=u*Math.PI/180;e._rotate(r),t._rotate(r),n._rotate(r),i._rotate(r),c.x1=Math.min(e.x,t.x,n.x,i.x),c.x2=Math.max(e.x,t.x,n.x,i.x),c.y1=Math.min(e.y,t.y,n.y,i.y),c.y2=Math.max(e.y,t.y,n.y,i.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,n,i,r)}this.boxEndIndex=e.length}}class dh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}}function ph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,r=1/0,o=-1/0,s=-1/0;const l=e[0];for(let a=0;a<l.length;a++){const e=l[a];(!a||e.x<i)&&(i=e.x),(!a||e.y<r)&&(r=e.y),(!a||e.x>o)&&(o=e.x),(!a||e.y>s)&&(s=e.y)}const c=Math.min(o-i,s-r);let u=c/2;const h=new dh([],fh);if(0===c)return new a(i,r);for(let a=i;a<o;a+=c)for(let t=r;t<s;t+=c)h.push(new mh(a+u,t+u,u,e));let d=function(e){let t=0,n=0,i=0;const r=e[0];for(let o=0,a=r.length,s=a-1;o<a;s=o++){const e=r[o],a=r[s],l=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*l,i+=(e.y+a.y)*l,t+=3*l}return new mh(n/t,i/t,0,e)}(e),p=h.length;for(;h.length;){const i=h.pop();(i.d>d.d||!d.d)&&(d=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-d.d<=t||(u=i.h/2,h.push(new mh(i.p.x-u,i.p.y-u,u,e)),h.push(new mh(i.p.x+u,i.p.y-u,u,e)),h.push(new mh(i.p.x-u,i.p.y+u,u,e)),h.push(new mh(i.p.x+u,i.p.y+u,u,e)),p+=4)}return n&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(d.d))),d.p}function fh(e,t){return t.max-e.max}function mh(e,t,n,i){this.p=new a(e,t),this.h=n,this.d=function(e,t){let n=!1,i=1/0;for(let r=0;r<t.length;r++){const o=t[r];for(let t=0,r=o.length,a=r-1;t<r;a=t++){const r=o[t],s=o[a];r.y>e.y!=s.y>e.y&&e.x<(s.x-r.x)*(e.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,Za(e,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var gh;e.aq=void 0,(gh=e.aq||(e.aq={}))[gh.center=1]="center",gh[gh.left=2]="left",gh[gh.right=3]="right",gh[gh.top=4]="top",gh[gh.bottom=5]="bottom",gh[gh["top-left"]=6]="top-left",gh[gh["top-right"]=7]="top-right",gh[gh["bottom-left"]=8]="bottom-left",gh[gh["bottom-right"]=9]="bottom-right";const vh=7,yh=Number.POSITIVE_INFINITY;function Ah(e,t){return t[1]!==yh?function(e,t,n){let i=0,r=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-vh;break;case"bottom-right":case"bottom-left":case"bottom":r=-n+vh}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,r]}(e,t[0],t[1]):function(e,t){let n=0,i=0;t<0&&(t=0);const r=t/Math.SQRT2;switch(e){case"top-right":case"top-left":i=r-vh;break;case"bottom-right":case"bottom-left":i=-r+vh;break;case"bottom":i=-t+vh;break;case"top":i=t-vh}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}return[n,i]}(e,t[0])}function bh(e,t,n){var i;const r=e.layout,o=null===(i=r.get("text-variable-anchor-offset"))||void 0===i?void 0:i.evaluate(t,{},n);if(o){const e=o.values,t=[];for(let n=0;n<e.length;n+=2){const i=t[n]=e[n],r=e[n+1].map(e=>e*oc);i.startsWith("top")?r[1]-=vh:i.startsWith("bottom")&&(r[1]+=vh),t[n+1]=r}return new et(t)}const a=r.get("text-variable-anchor");if(a){let i;i=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[r.get("text-radial-offset").evaluate(t,{},n)*oc,yh]:r.get("text-offset").evaluate(t,{},n).map(e=>e*oc);const o=[];for(const e of a)o.push(e,Ah(e,i));return new et(o)}return null}function xh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _h(t,n,i,r,o,a,s,l,c,u,h){let d=a.textMaxSize.evaluate(n,{});void 0===d&&(d=s);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(n,{},h),m=Eh(i.horizontal),g=s/24,v=t.tilePixelRatio*g,y=t.tilePixelRatio*d/24,A=t.tilePixelRatio*l,b=t.tilePixelRatio*p.get("symbol-spacing"),x=p.get("text-padding")*t.tilePixelRatio,_=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=e.get("icon-padding").evaluate(t,{},n),o=r&&r.values;return[o[0]*i,o[1]*i,o[2]*i,o[3]*i]}(p,n,h,t.tilePixelRatio),w=p.get("text-max-angle")/180*Math.PI,C="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),S="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),T=p.get("symbol-placement"),I=b/2,M=p.get("icon-text-fit");let k;r&&"none"!==M&&(t.allowVerticalPlacement&&i.vertical&&(k=nu(r,i.vertical,M,p.get("icon-text-fit-padding"),f,g)),m&&(r=nu(r,m,M,p.get("icon-text-fit-padding"),f,g)));const R=(l,d)=>{d.x<0||d.x>=Fa||d.y<0||d.y>=Fa||function(t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_,w,C,S){const T=t.addToLineVertexArray(n,i);let I,M,k,R,L=0,B=0,P=0,D=0,O=-1,N=-1;const F={};let z=ya("");if(t.allowVerticalPlacement&&r.vertical){const e=l.layout.get("text-rotate").evaluate(x,{},C)+90;k=new hh(c,n,u,h,d,r.vertical,p,f,m,e),s&&(R=new hh(c,n,u,h,d,s,v,y,m,e))}if(o){const i=l.layout.get("icon-rotate").evaluate(x,{}),r="none"!==l.layout.get("icon-text-fit"),a=ah(o,i,w,r),p=s?ah(s,i,w,r):void 0;M=new hh(c,n,u,h,d,o,v,y,!1,i),L=4*a.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[ru*l.layout.get("icon-size").evaluate(x,{})],m[0]>ou&&E("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(iu,'. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[ru*_.compositeIconSizes[0].evaluate(x,{},C),ru*_.compositeIconSizes[1].evaluate(x,{},C)],(m[0]>ou||m[1]>ou)&&E("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(iu,'. Reduce your "icon-size".'))),t.addSymbols(t.icon,a,m,b,A,x,e.ah.none,n,T.lineStartIndex,T.lineLength,-1,C),O=t.icon.placedSymbolArray.length-1,p&&(B=4*p.length,t.addSymbols(t.icon,p,m,b,A,x,e.ah.vertical,n,T.lineStartIndex,T.lineLength,-1,C),N=t.icon.placedSymbolArray.length-1)}const U=Object.keys(r.horizontal);for(const E of U){const i=r.horizontal[E];if(!I){z=ya(i.text);const e=l.layout.get("text-rotate").evaluate(x,{},C);I=new hh(c,n,u,h,d,i,p,f,m,e)}const o=1===i.positionedLines.length;if(P+=wh(t,n,i,a,l,m,x,g,T,r.vertical?e.ah.horizontal:e.ah.horizontalOnly,o?U:[E],F,O,_,C),o)break}r.vertical&&(D+=wh(t,n,r.vertical,a,l,m,x,g,T,e.ah.vertical,["vertical"],F,N,_,C));const j=I?I.boxStartIndex:t.collisionBoxArray.length,V=I?I.boxEndIndex:t.collisionBoxArray.length,H=k?k.boxStartIndex:t.collisionBoxArray.length,G=k?k.boxEndIndex:t.collisionBoxArray.length,Q=M?M.boxStartIndex:t.collisionBoxArray.length,W=M?M.boxEndIndex:t.collisionBoxArray.length,q=R?R.boxStartIndex:t.collisionBoxArray.length,X=R?R.boxEndIndex:t.collisionBoxArray.length;let Y=-1;const K=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;Y=K(I,Y),Y=K(k,Y),Y=K(M,Y),Y=K(R,Y);const J=Y>-1?1:0;J&&(Y*=S/oc),t.glyphOffsetArray.length>=mu.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey);const Z=bh(l,x,C),[$,ee]=function(t,n){const i=t.length,r=null==n?void 0:n.values;if((null==r?void 0:r.length)>0)for(let o=0;o<r.length;o+=2){const n=r[o+1];t.emplaceBack(e.aq[r[o]],n[0],n[1])}return[i,t.length]}(t.textAnchorOffsets,Z);t.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,O,N,z,j,V,H,G,Q,W,q,X,u,P,D,L,B,J,0,p,Y,$,ee)}(t,d,l,i,r,o,k,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,v,[x,x,x,x],C,c,A,_,S,f,n,a,u,h,s)};if("line"===T)for(const e of Ku(n.geometry,0,0,Fa,Fa)){const n=ih(e,b,w,i.vertical||m,r,24,y,t.overscaling,Fa);for(const i of n)m&&Ch(t,m.text,I,i)||R(e,i)}else if("line-center"===T){for(const e of n.geometry)if(e.length>1){const t=nh(e,w,i.vertical||m,r,24,y);t&&R(e,t)}}else if("Polygon"===n.type)for(const e of bn(n.geometry,0)){const t=ph(e,16);R(e[0],new Ju(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry)R(e,new Ju(e[0].x,e[0].y,0));else if("Point"===n.type)for(const e of n.geometry)for(const t of e)R([t],new Ju(t.x,t.y,0))}function wh(e,t,n,i,r,o,s,l,c,u,h,d,p,f,m){const g=function(e,t,n,i,r,o,s,l){const c=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(const h of t.positionedLines)for(const e of h.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let o=Bc+1,d=!0,p=1,f=0;const m=(r||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=h.lineOffset/2-(e.imageName?-(oc-e.metrics.width*e.scale)/2:(e.scale-1)*oc)),e.imageName){const t=s[e.imageName];d=t.sdf,p=t.pixelRatio,o=Dc/p}const v=r?[e.x+g,e.y]:[0,0];let y=r?[0,0]:[e.x+g+n[0],e.y+n[1]-f],A=[0,0];m&&(A=y,y=[0,0]);const b=e.metrics.isDoubleResolution?2:1,x=(e.metrics.left-o)*e.scale-g+y[0],_=(-e.metrics.top-o)*e.scale+y[1],w=x+i.w/b*e.scale/p,E=_+i.h/b*e.scale/p,C=new a(x,_),S=new a(w,_),T=new a(x,E),I=new a(w,E);if(m){const t=new a(-g,g-zc),n=-Math.PI/2,i=oc/2-g,r=new a(5-zc-i,-(e.imageName?i:0)),o=new a(...A);C._rotateAround(n,t)._add(r)._add(o),S._rotateAround(n,t)._add(r)._add(o),T._rotateAround(n,t)._add(r)._add(o),I._rotateAround(n,t)._add(r)._add(o)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];C._matMult(n),S._matMult(n),T._matMult(n),I._matMult(n)}const M=new a(0,0),k=new a(0,0);u.push({tl:C,tr:S,bl:T,br:I,tex:i,writingMode:t.writingMode,glyphOffset:v,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:M,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,l,r,o,s,i,e.allowVerticalPlacement),v=e.textSizeData;let y=null;"source"===v.kind?(y=[ru*r.layout.get("text-size").evaluate(s,{})],y[0]>ou&&E("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(iu,'. Reduce your "text-size".'))):"composite"===v.kind&&(y=[ru*f.compositeTextSizes[0].evaluate(s,{},m),ru*f.compositeTextSizes[1].evaluate(s,{},m)],(y[0]>ou||y[1]>ou)&&E("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(iu,'. Reduce your "text-size".'))),e.addSymbols(e.text,g,y,l,o,s,u,t,c.lineStartIndex,c.lineLength,p,m);for(const a of h)d[a]=e.text.placedSymbolArray.length-1;return 4*g.length}function Eh(e){for(const t in e)return e[t];return null}function Ch(e,t,n,i){const r=e.compareText;if(t in r){const e=r[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<n)return!0}else r[t]=[];return r[t].push(i),!1}const Sh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Th{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error("Got v".concat(i," data when expected v1."));const r=Sh[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new Th(a,o,r,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=Sh.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Ih(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:a}=this,s=[0,r.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=n&&c>=t&&c<=i&&l.push(r[a])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=i&&l.push(r[d]),(0===c?e<=p:t<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?n>=p:i>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,a=[0,i.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)Lh(r[2*n],r[2*n+1],e,t)<=l&&s.push(i[n]);continue}const d=h+u>>1,p=r[2*d],f=r[2*d+1];Lh(p,f,e,t)<=l&&s.push(i[d]),(0===c?e-n<=p:t-n<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function Ih(e,t,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;Mh(e,t,a,i,r,o),Ih(e,t,n,i,a-1,1-o),Ih(e,t,n,a+1,r,1-o)}function Mh(e,t,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);Mh(e,t,n,Math.max(i,Math.floor(n-s*c/a+u)),Math.min(r,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=i,l=r;for(kh(e,t,i,n),t[2*r+o]>a&&kh(e,t,i,r);s<l;){for(kh(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*i+o]===a?kh(e,t,i,l):(l++,kh(e,t,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function kh(e,t,n,i){Rh(e,n,i),Rh(t,2*n,2*i),Rh(t,2*n+1,2*i+1)}function Rh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Lh(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}var Bh;e.bg=void 0,(Bh=e.bg||(e.bg={})).create="create",Bh.load="load",Bh.fullLoad="fullLoad";let Ph=null,Dh=[];const Oh=1e3/60,Nh="loadTime",Fh="fullLoadTime",zh={mark(e){performance.mark(e)},frame(e){const t=e;null!=Ph&&Dh.push(t-Ph),Ph=t},clearMetrics(){Ph=null,Dh=[],performance.clearMeasures(Nh),performance.clearMeasures(Fh);for(const t in e.bg)performance.clearMarks(e.bg[t])},getPerformanceMetrics(){performance.measure(Nh,e.bg.create,e.bg.load),performance.measure(Fh,e.bg.create,e.bg.fullLoad);const t=performance.getEntriesByName(Nh)[0].duration,n=performance.getEntriesByName(Fh)[0].duration,i=Dh.length,r=1/(Dh.reduce((e,t)=>e+t,0)/i/1e3),o=Dh.filter(e=>e>Oh).reduce((e,t)=>e+(t-Oh)/Oh,0);return{loadTime:t,fullLoadTime:n,fps:r,percentDroppedFrames:o/(i+o)*100,totalFrames:i}}};e.$=class extends fo{},e.A=cs,e.B=gr,e.C=function(e){if(null==T){const t=e.navigator?e.navigator.userAgent:null;T=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return T},e.D=Zr,e.E=W,e.F=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Iu(()=>this.process()),this.subscription=function(e,t,n){return e.addEventListener(t,n,!1),{unsubscribe:()=>{e.removeEventListener(t,n,!1)}}}(this.target,"message",e=>this.receive(e)),this.globalScope=S(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise((n,i)=>{const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[r]={resolve:n,reject:i},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[r];const t={id:r,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)},{once:!0});const o=[],a=Object.assign(Object.assign({},e),{id:r,sourceMapId:this.mapId,origin:location.origin,data:Sr(e.data,o)});this.target.postMessage(a,{transfer:o})})}receive(e){const t=e.data,n=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[n];const e=this.abortControllers[n];return delete this.abortControllers[n],void(e&&e.abort())}if(S(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,n){return t(this,void 0,void 0,function*(){if("<response>"===n.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(n.error?t.reject(Tr(n.error)):t.resolve(Tr(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(e,new Error("Could not find a registered handler for ".concat(n.type,", map ID: ").concat(this.mapId,", available handlers: ").concat(Object.keys(this.messageHandlers).join(", "))));const t=Tr(n.data),i=new AbortController;this.abortControllers[e]=i;try{const r=yield this.messageHandlers[n.type](n.sourceMapId,t,i);this.completeTask(e,null,r)}catch(t){this.completeTask(e,t)}})}completeTask(e,t,n){const i=[];delete this.abortControllers[e];const r={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Sr(t):null,data:Sr(n,i)};this.target.postMessage(r,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.G=N,e.H=function(){var e=new cs(16);return cs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.I=Oc,e.J=function(e,t,n){var i,r,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=i=t[0],e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=i*m+s*g+h*v+t[12],e[13]=r*m+l*g+d*v+t[13],e[14]=o*m+c*g+p*v+t[14],e[15]=a*m+u*g+f*v+t[15]),e},e.K=function(e,t,n){var i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.L=hs,e.M=function(e,t){const n={};for(let i=0;i<t.length;i++){const r=t[i];r in e&&(n[r]=e[r])}return n},e.N=ku,e.O=Bu,e.P=a,e.Q=Pu,e.R=Es,e.S=ju,e.T=Wr,e.U=d,e.V=p,e.W=k,e.X=Fa,e.Y=co,e.Z=Nu,e._=t,e.a=D,e.a$=function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=t[0],A=t[1],b=t[2],x=t[3],_=t[4],w=t[5],E=t[6],C=t[7],S=t[8],T=t[9],I=t[10],M=t[11],k=t[12],R=t[13],L=t[14],B=t[15];return Math.abs(n-y)<=ls*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-A)<=ls*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-b)<=ls*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-x)<=ls*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-_)<=ls*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-w)<=ls*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-E)<=ls*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-C)<=ls*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-S)<=ls*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(h-T)<=ls*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-I)<=ls*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(p-M)<=ls*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-k)<=ls*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(m-R)<=ls*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-L)<=ls*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(v-B)<=ls*Math.max(1,Math.abs(v),Math.abs(B))},e.a0=ca,e.a1=zu,e.a2=oe,e.a3=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const i of e){const e=window.document.createElement("source");j(i)||(t.crossOrigin="Anonymous"),e.src=i,t.appendChild(e)}})},e.a4=function(){return A++},e.a5=Oo,e.a6=mu,e.a7=Mi,e.a8=Va,e.a9=Qu,e.aA=function(e){if("custom"===e.type)return new Tu(e);switch(e.type){case"background":return new wu(e);case"circle":return new ms(e);case"fill":return new ul(e);case"fill-extrusion":return new Pl(e);case"heatmap":return new Ts(e);case"hillshade":return new ks(e);case"line":return new Kl(e);case"raster":return new Su(e);case"symbol":return new bu(e)}},e.aB=_,e.aC=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let n=[];try{if(!K(e.version,t.version))return[{command:"setStyle",args:[t]}];K(e.center,t.center)||n.push({command:"setCenter",args:[t.center]}),K(e.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),K(e.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),K(e.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),K(e.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),K(e.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),K(e.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),K(e.light,t.light)||n.push({command:"setLight",args:[t.light]}),K(e.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),K(e.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),K(e.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const i={},r=[];!function(e,t,n,i){let r;for(r in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(t,r)||$(r,n,i));for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?K(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&te(e,t,r)?J(n,{command:"setGeoJSONSourceData",args:[r,t[r].data]}):ee(r,t,n,i)):Z(r,t,n))}(e.sources,t.sources,r,i);const o=[];e.layers&&e.layers.forEach(e=>{"source"in e&&i[e.source]?n.push({command:"removeLayer",args:[e.id]}):o.push(e)}),n=n.concat(r),function(e,t,n){t=t||[];const i=(e=e||[]).map(ie),r=t.map(ie),o=e.reduce(re,{}),a=t.reduce(re,{}),s=i.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)?m++:(J(n,{command:"removeLayer",args:[c]}),s.splice(s.indexOf(c,m),1));for(let f=0,m=0;f<r.length;f++)c=r[r.length-1-f],s[s.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(J(n,{command:"removeLayer",args:[c]}),s.splice(s.lastIndexOf(c,s.length-m),1)):m++,d=s[s.length-f],J(n,{command:"addLayer",args:[a[c],d]}),s.splice(s.length-f,0,c),l[c]=!0);for(let f=0;f<r.length;f++)if(c=r[f],u=o[c],h=a[c],!l[c]&&!K(u,h))if(K(u.source,h.source)&&K(u["source-layer"],h["source-layer"])&&K(u.type,h.type)){for(p in ne(u.layout,h.layout,n,c,null,"setLayoutProperty"),ne(u.paint,h.paint,n,c,null,"setPaintProperty"),K(u.filter,h.filter)||J(n,{command:"setFilter",args:[c,h.filter]}),K(u.minzoom,h.minzoom)&&K(u.maxzoom,h.maxzoom)||J(n,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?ne(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):K(u[p],h[p])||J(n,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?ne(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):K(u[p],h[p])||J(n,{command:"setLayerProperty",args:[c,p,h[p]]}))}else J(n,{command:"removeLayer",args:[c]}),d=s[s.lastIndexOf(c)+1],J(n,{command:"addLayer",args:[h,d]})}(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:"setStyle",args:[t]}]}return n},e.aD=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.aE=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n},e.aF=b,e.aG=x,e.aH=class extends wa{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.aI=Ea,e.aJ=class extends wa{constructor(e,t){super(e,t),this.current=Ta}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.aK=Ca,e.aL=Sa,e.aM=Xe,e.aN=class extends wa{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.aO=class extends wa{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.aP=function(e,t,n,i,r,o,a){var s=1/(t-n),l=1/(i-r),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(a+o)*c,e[15]=1,e},e.aQ=ps,e.aR=class extends Eo{},e.aS=nc,e.aT=class extends So{},e.aU=Ss,e.aV=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.aW=Cs,e.aX=qo,e.aY=oa,e.aZ=class extends Bo{},e.a_=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.aa=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,n,i,r)=>{const o=i||r;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ab=function(e,t){const n=[];for(const i in e)i in t||n.push(i);return n},e.ac=g,e.ad=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=a*r+u*i,e[2]=s*r+h*i,e[3]=l*r+d*i,e[4]=c*r-o*i,e[5]=u*r-a*i,e[6]=h*r-s*i,e[7]=d*r-l*i,e},e.ae=function(e){var t=new cs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.af=fs,e.ag=function(e,t){let n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=e,s=r?g(Lt.interpolationFactor(r,t,o,a),0,1):0;"camera"===e.kind?i=Rt.number(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}},e.ai=function(e,t,n){let{uSize:i,uSizeT:r}=t,{lowerSize:o,upperSize:a}=n;return"source"===e.kind?o/ru:"composite"===e.kind?Rt.number(o/ru,a/ru,r):i},e.aj=hu,e.ak=function(e,t,n,i){const r=t.y-e.y,o=t.x-e.x,s=i.y-n.y,l=i.x-n.x,c=s*o-l*r;if(0===c)return null;const u=(l*(e.y-n.y)-s*(e.x-n.x))/c;return new a(e.x+u*o,e.y+u*r)},e.al=Ku,e.am=Qa,e.an=us,e.ao=function(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return[t,n,i,r]},e.ap=oc,e.ar=su,e.as=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=n*s-i*a,A=n*l-r*a,b=n*c-o*a,x=i*l-r*s,_=i*c-o*s,w=r*c-o*l,E=u*m-h*f,C=u*g-d*f,S=u*v-p*f,T=h*g-d*m,I=h*v-p*m,M=d*v-p*g,k=y*M-A*I+b*T+x*S-_*C+w*E;return k?(e[0]=(s*M-l*I+c*T)*(k=1/k),e[1]=(r*I-i*M-o*T)*k,e[2]=(m*w-g*_+v*x)*k,e[3]=(d*_-h*w-p*x)*k,e[4]=(l*S-a*M-c*C)*k,e[5]=(n*M-r*S+o*C)*k,e[6]=(g*b-f*w-v*A)*k,e[7]=(u*w-d*b+p*A)*k,e[8]=(a*I-s*S+c*E)*k,e[9]=(i*S-n*I-o*E)*k,e[10]=(f*_-m*b+v*y)*k,e[11]=(h*b-u*_-p*y)*k,e[12]=(s*C-a*T-l*E)*k,e[13]=(n*T-i*C+r*E)*k,e[14]=(m*A-f*x-g*y)*k,e[15]=(u*x-h*A+d*y)*k,e):null},e.at=xh,e.au=Zc,e.av=Th,e.aw=function(){const e={},t=q.$version;for(const n in q.$root){const i=q.$root[n];if(i.required){let r=null;r="version"===n?t:"array"===i.type?[]:{},null!=r&&(e[n]=r)}}return e},e.ax=Ir,e.ay=z,e.az=function(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Y(e[n],t[e[n].ref]));return e},e.b=I,e.b0=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.b1=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.b2=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.b3=v,e.b4=Uu,e.b5=Du,e.b6=function(e,t,n,i,r){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(o=1/(i-r)),e[14]=2*r*i*o):(e[10]=-1,e[14]=-2*i),e},e.b7=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=a*r+u*i,e[6]=s*r+h*i,e[7]=l*r+d*i,e[8]=c*r-o*i,e[9]=u*r-a*i,e[10]=h*r-s*i,e[11]=d*r-l*i,e},e.b8=f,e.b9=m,e.bA=ac,e.bB=function(e){return e.message===B},e.bC=xi,e.bD=Vr,e.ba=function(e){return e*Math.PI/180},e.bb=function(e,t){const{x:n,y:i}=Nu.fromLngLat(t);return!(e<0||e>25||i<0||i>=1||n<0||n>=1)},e.bc=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.bd=class extends po{},e.be=Mu,e.bf=zh,e.bh=F,e.bi=function(e,t){D.REGISTERED_PROTOCOLS[e]=t},e.bj=function(e){delete D.REGISTERED_PROTOCOLS[e]},e.bk=function(e,t){const n={};for(let r=0;r<e.length;r++){const i=t&&t[e[r].id]||Fi(e[r]);t&&(t[e[r].id]=i);let o=n[i];o||(o=n[i]=[]),o.push(e[r])}const i=[];for(const r in n)i.push(n[r]);return i},e.bl=_r,e.bm=Gu,e.bn=Wu,e.bo=Nc,e.bp=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=Fa/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const n=t.bucket.layers[0],i=n.layout,r=n._unevaluatedLayout._values,o={layoutIconSize:r["icon-size"].possiblyEvaluate(new Hr(t.bucket.zoom+1),t.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Hr(t.bucket.zoom+1),t.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Hr(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;o.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Hr(e),t.canonical),r["text-size"].possiblyEvaluate(new Hr(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;o.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Hr(e),t.canonical),r["icon-size"].possiblyEvaluate(new Hr(n),t.canonical)]}const a=i.get("text-line-height")*oc,s="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),l=i.get("text-keep-upright"),c=i.get("text-size");for(const u of t.bucket.features){const r=i.get("text-font").evaluate(u,{},t.canonical).join(","),h=c.evaluate(u,{},t.canonical),d=o.layoutTextSize.evaluate(u,{},t.canonical),p=o.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,v=[0,0];if(m){const o=m.toString(),c=i.get("text-letter-spacing").evaluate(u,{},t.canonical)*oc,p=Rr(o)?c:0,g=i.get("text-anchor").evaluate(u,{},t.canonical),y=bh(n,u,t.canonical);if(!y){const e=i.get("text-radial-offset").evaluate(u,{},t.canonical);v=e?Ah(g,[e*oc,yh]):i.get("text-offset").evaluate(u,{},t.canonical).map(e=>e*oc)}let A=s?"center":i.get("text-justify").evaluate(u,{},t.canonical);const b="point"===i.get("symbol-placement")?i.get("text-max-width").evaluate(u,{},t.canonical)*oc:1/0,x=()=>{t.bucket.allowVerticalPlacement&&kr(o)&&(f.vertical=Vc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,a,g,"left",p,v,e.ah.vertical,!0,d,h))};if(!s&&y){const n=new Set;if("auto"===A)for(let e=0;e<y.values.length;e+=2)n.add(xh(y.values[e]));else n.add(A);let i=!1;for(const o of n)if(!f.horizontal[o])if(i)f.horizontal[o]=f.horizontal[0];else{const n=Vc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,a,"center",o,p,v,e.ah.horizontal,!1,d,h);n&&(f.horizontal[o]=n,i=1===n.positionedLines.length)}x()}else{"auto"===A&&(A=xh(g));const n=Vc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,a,g,A,p,v,e.ah.horizontal,!1,d,h);n&&(f.horizontal[A]=n),x(),kr(o)&&s&&l&&(f.vertical=Vc(m,t.glyphMap,t.glyphPositions,t.imagePositions,r,b,a,g,A,p,v,e.ah.vertical,!1,d,h))}}let y=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=eu(t.imagePositions[u.icon.name],i.get("icon-offset").evaluate(u,{},t.canonical),i.get("icon-anchor").evaluate(u,{},t.canonical)),y=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=y:t.bucket.sdfIcons!==y&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const A=Eh(f.horizontal)||f.vertical;t.bucket.iconsInText=!!A&&A.iconsInText,(A||g)&&_h(t.bucket,u,f,g,t.imageMap,o,d,p,v,y,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.bq=Gl,e.br=al,e.bs=Ml,e.bt=fl,e.bu=Ic,e.bv=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.bw=function(e,n,i,r,o){return t(this,void 0,void 0,function*(){if(p())try{return yield k(e,n,i,r,o)}catch(e){}return function(e,t,n,i,r){const o=e.width,a=e.height;R&&L||(R=new OffscreenCanvas(o,a),L=R.getContext("2d",{willReadFrequently:!0})),R.width=o,R.height=a,L.drawImage(e,0,0,o,a);const s=L.getImageData(t,n,i,r);return L.clearRect(0,0,o,a),s.data}(e,n,i,r,o)})},e.bx=Hu,e.by=n,e.bz=r,e.c=P,e.d=e=>t(void 0,void 0,void 0,function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}}),e.e=y,e.f=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame(()=>{i.src=M})},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(r):M}),e.g=O,e.h=(e,t)=>U(y(e,{type:"json"}),t),e.i=S,e.j=Q,e.k=G,e.l=(e,t)=>U(y(e,{type:"arrayBuffer"}),t),e.m=U,e.n=function(e){return new Ic(e).readFields(kc,[])},e.o=ws,e.p=Pc,e.q=io,e.r=mr,e.s=j,e.t=Ar,e.u=fr,e.v=q,e.w=E,e.x=function(e){let[t,n,i]=e;return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(i),y:t*Math.sin(n)*Math.sin(i),z:t*Math.cos(i)}},e.y=Rt,e.z=Hr}),n("worker",["./shared"],function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t){this._layerConfigs[r.id]=r;const t=this._layers[r.id]=e.aA(r);t._featureFilter=e.a7(t.filter),this.keyCache[r.id]&&delete this.keyCache[r.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=e.bk(Object.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map(e=>this._layers[e.id]),n=t[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=r[o];a||(a=r[o]=[]),a.push(t)}}}class n{constructor(t){const n={},i=[];for(const e in t){const r=t[e],o=n[e]={};for(const e in r){const t=r[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(n),o[e]={rect:n,metrics:t.metrics}}}const{w:r,h:o}=e.p(i),a=new e.o({width:r||1,height:o||1});for(const s in t){const i=t[s];for(const t in i){const r=i[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const o=n[s][t].rect;e.o.copy(r.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},r.bitmap)}}this.image=a,this.positions=n}}e.bl("GlyphAtlas",n);class i{constructor(t){this.tileID=new e.S(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,i,o,a){return e._(this,void 0,void 0,function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a5;const s=new e.bm(Object.keys(t.layers).sort()),l=new e.bn(this.tileID,this.promoteId);l.bucketLayerIDs=[];const c={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},h=i.familiesBySource[this.source];for(const n in h){const i=t.layers[n];if(!i)continue;1===i.version&&e.w('Vector tile source "'.concat(this.source,'" layer "').concat(n,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const a=s.encode(n),d=[];for(let e=0;e<i.length;e++){const t=i.feature(e),r=l.getId(t,n);d.push({feature:t,id:r,index:e,sourceLayerIndex:a})}for(const t of h[n]){const n=t[0];n.source!==this.source&&e.w("layer.source = ".concat(n.source," does not equal this.source = ").concat(this.source)),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(r(t,this.zoom,o),(c[n.id]=n.createBucket({index:l.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(d,u,this.tileID.canonical),l.bucketLayerIDs.push(t.map(e=>e.id)))}}const d=e.aF(u.glyphDependencies,e=>Object.keys(e).map(Number));this.inFlightDependencies.forEach(e=>null==e?void 0:e.abort()),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(d).length){const e=new AbortController;this.inFlightDependencies.push(e),p=a.sendAsync({type:"GG",data:{stacks:d,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const f=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(f.length){const e=new AbortController;this.inFlightDependencies.push(e),m=a.sendAsync({type:"GI",data:{icons:f,source:this.source,tileID:this.tileID,type:"icons"}},e)}const g=Object.keys(u.patternDependencies);let v=Promise.resolve({});if(g.length){const e=new AbortController;this.inFlightDependencies.push(e),v=a.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[y,A,b]=yield Promise.all([p,m,v]),x=new n(y),_=new e.bo(A,b);for(const t in c){const n=c[t];n instanceof e.a6?(r(n.layers,this.zoom,o),e.bp({bucket:n,glyphMap:y,glyphPositions:x.positions,imageMap:A,imagePositions:_.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):n.hasPattern&&(n instanceof e.bq||n instanceof e.br||n instanceof e.bs)&&(r(n.layers,this.zoom,o),n.addFeatures(u,this.tileID.canonical,_.patternPositions))}return this.status="done",{buckets:Object.values(c).filter(e=>!e.isEmpty()),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:x.image,imageAtlas:_,glyphMap:this.returnDependencies?y:null,iconMap:this.returnDependencies?A:null,glyphPositions:this.returnDependencies?x.positions:null}})}}function r(t,n,i){const r=new e.z(n);for(const e of t)e.recalculate(r,i)}class o{constructor(e,t,n){this.actor=e,this.layerIndex=t,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const i=yield e.l(t.request,n);try{return{vectorTile:new e.bt.VectorTile(new e.bu(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(e){const r=new Uint8Array(i.data);let o="Unable to parse the tile at ".concat(t.request.url,", ");throw o+=31===r[0]&&139===r[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: ".concat(e.message),new Error(o)}})}loadTile(t){return e._(this,void 0,void 0,function*(){const n=t.uid,r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bv(t.request),o=new i(t);this.loading[n]=o;const a=new AbortController;o.abort=a;try{const i=yield this.loadVectorTile(t,a);if(delete this.loading[n],!i)return null;const s=i.rawData,l={};i.expires&&(l.expires=i.expires),i.cacheControl&&(l.cacheControl=i.cacheControl);const c={};if(r){const e=r.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}o.vectorTile=i.vectorTile;const u=o.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[n]=o,this.fetching[n]={rawTileData:s,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:s.slice(0)},t,l,c)}finally{delete this.fetching[n]}}catch(e){throw delete this.loading[n],o.status="done",this.loaded[n]=o,e}})}reloadTile(t){return e._(this,void 0,void 0,function*(){const n=t.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[n];if(i.showCollisionBoxes=t.showCollisionBoxes,"parsing"===i.status){const t=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);let r;if(this.fetching[n]){const{rawTileData:i,cacheControl:o,resourceTiming:a}=this.fetching[n];delete this.fetching[n],r=e.e({rawTileData:i.slice(0)},t,o,a)}else r=t;return r}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(t){return e._(this,void 0,void 0,function*(){const e=this.loading,n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort.abort(),delete e[n])})}removeTile(t){return e._(this,void 0,void 0,function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]})}}class a{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,function*(){const{uid:n,encoding:i,rawImageData:r,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=t,c=r.width+2,u=r.height+2,h=e.b(r)?new e.R({width:c,height:u},yield e.bw(r,-1,-1,c,u)):r,d=new e.bx(n,h,i,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[n]=d,d})}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}function s(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,i=0,r=0,o=e.length,a=o-1;r<o;a=r++){var s=(e[r][0]-e[a][0])*(e[a][1]+e[r][1]),l=n+s;i+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+i>=0!=!!t&&e.reverse()}var c=e.by(function e(t,n){var i,r=t&&t.type;if("FeatureCollection"===r)for(i=0;i<t.features.length;i++)e(t.features[i],n);else if("GeometryCollection"===r)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],n);else if("Feature"===r)e(t.geometry,n);else if("Polygon"===r)s(t.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<t.coordinates.length;i++)s(t.coordinates[i],n);return t});const u=e.bt.VectorTileFeature.prototype.toGeoJSON;var h={exports:{}},d=e.bz,p=e.bt.VectorTileFeature,f=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],i=[],r=0;r<n.length;r++)i.push(new d(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[t,i,n,r]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var v=e.bA,y=f;function A(e){var t=new v;return function(e,t){for(var n in e.layers)t.writeMessage(3,b,e.layers[n])}(e,t),t.finish()}function b(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,x,i);var r=i.keys;for(n=0;n<r.length;n++)t.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)t.writeMessage(4,S,o[n])}function x(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,_,e),t.writeVarintField(3,n.type),t.writeMessage(4,C,n)}function _(e,t){var n=e.feature,i=e.keys,r=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(i.push(s),o[s]=c=i.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(r.push(l),a[h]=d=r.length-1),t.writeVarint(d)}}}function w(e,t){return(t<<3)+(7&e)}function E(e){return e<<1^e>>31}function C(e,t){for(var n=e.loadGeometry(),i=e.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===i&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===i?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==i&&t.writeVarint(w(2,u-1));var d=l[h].x-r,p=l[h].y-o;t.writeVarint(E(d)),t.writeVarint(E(p)),r+=d,o+=p}3===i&&t.writeVarint(w(7,1))}}function S(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}h.exports=A,h.exports.fromVectorTileJs=A,h.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var i in e)n[i]=new y(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return A({layers:n})},h.exports.GeoJSONWrapper=y;var T=e.by(h.exports);const I={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},M=Math.fround||(k=new Float32Array(1),e=>(k[0]=+e,k[0]));var k;const R=3,L=5,B=6;class P{constructor(e){this.options=Object.assign(Object.create(I),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r="prepare ".concat(e.length," points");t&&console.time(r),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,i]=t.geometry.coordinates,r=M(N(n)),a=M(F(i));o.push(r,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(r);for(let s=i;s>=n;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const e=this.getClusters([n,i,180,o],t),a=this.getClusters([-180,i,r,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(N(n),F(o),N(r),F(i)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+L]>1?D(l,e,this.clusterProps):this.points[l[e+R]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(t*this.stride>=o.length)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;o[t+4]===e&&l.push(o[t+L]>1?D(o,t,this.clusterProps):this.points[o[t+R]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){const i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((t-s)/r,l,(t+1+s)/r,c),i.data,t,n,r,u),0===t&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.data,r,n,r,u),t===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?r+t.point_count<=i?r+=t.point_count:r=this._appendLeaves(e,t.cluster_id,n,i,r):r<i?r++:e.push(a),e.length===n)break}return r}_createTree(t){const n=new e.av(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,i,r,o){for(const a of e){const e=a*this.stride,s=t[e+L]>1;let l,c,u;if(s)l=O(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+R]];l=n.properties;const[i,r]=n.geometry.coordinates;c=N(i),u=F(r)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;d=s||this.options.generateId?t[e+R]:this.points[t[e+R]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,a=n/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const n=s[u],i=s[u+1],h=e.within(s[u],s[u+1],a),d=s[u+L];let p=d;for(const e of h){const n=e*c;s[n+2]>t&&(p+=s[n+L])}if(p>d&&p>=o){let e,o=n*d,a=i*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const i=n*c;if(s[i+2]<=t)continue;s[i+2]=t;const l=s[i+L];o+=s[i]*l,a+=s[i+1]*l,s[i+4]=m,r&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),r(e,this._map(s,i)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),r&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+L]>1){const i=this.clusterProps[e[t+B]];return n?Object.assign({},i):i}const i=this.points[e[t+R]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function D(e,t,n){return{type:"Feature",id:e[t+R],properties:O(e,t,n),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),z(e[t+1])]}};var i}function O(e,t,n){const i=e[t+L],r=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?Math.round(i/100)/10+"k":i,o=e[t+B],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+R],point_count:i,point_count_abbreviated:r})}function N(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function z(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function U(e,t,n,i){let r=i;const o=t+(n-t>>1);let a,s=n-t;const l=e[t],c=e[t+1],u=e[n],h=e[n+1];for(let d=t+3;d<n;d+=3){const t=j(e[d],e[d+1],l,c,u,h);if(t>r)a=d,r=t;else if(t===r){const e=Math.abs(d-o);e<s&&(a=d,s=e)}}r>i&&(a-t>3&&U(e,t,a,i),e[a+2]=r,n-a>3&&U(e,a,n,i))}function j(e,t,n,i,r,o){let a=r-n,s=o-i;if(0!==a||0!==s){const l=((e-n)*a+(t-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return a=e-n,s=t-i,a*a+s*s}function V(e,t,n,i){const r={id:null==e?null:e,type:t,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)H(r,n);else if("Polygon"===t)H(r,n[0]);else if("MultiLineString"===t)for(const o of n)H(r,o);else if("MultiPolygon"===t)for(const o of n)H(r,o[0]);return r}function H(e,t){for(let n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function G(e,t,n,i){if(!t.geometry)return;const r=t.geometry.coordinates;if(r&&0===r.length)return;const o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)Q(r,s);else if("MultiPoint"===o)for(const c of r)Q(c,s);else if("LineString"===o)W(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(const n of r)s=[],W(n,s,a,!1),e.push(V(l,"LineString",s,t.properties));return}q(r,s,a,!1)}else if("Polygon"===o)q(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const r of t.geometry.geometries)G(e,{id:l,geometry:r,properties:t.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of r){const t=[];q(e,t,a,!0),s.push(t)}}e.push(V(l,o,s,t.properties))}function Q(e,t){t.push(X(e[0]),Y(e[1]),0)}function W(e,t,n,i){let r,o,a=0;for(let l=0;l<e.length;l++){const n=X(e[l][0]),s=Y(e[l][1]);t.push(n,s,0),l>0&&(a+=i?(r*s-n*o)/2:Math.sqrt(Math.pow(n-r,2)+Math.pow(s-o,2))),r=n,o=s}const s=t.length-3;t[2]=1,U(t,0,s,n),t[s+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function q(e,t,n,i){for(let r=0;r<e.length;r++){const o=[];W(e[r],o,n,i),t.push(o)}}function X(e){return e/360+.5}function Y(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function K(e,t,n,i,r,o,a,s){if(i/=t,o>=(n/=t)&&a<i)return e;if(a<n||o>=i)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const o=0===r?c.minX:c.minY,a=0===r?c.maxX:c.maxY;if(o>=n&&a<i){l.push(c);continue}if(a<n||o>=i)continue;let u=[];if("Point"===t||"MultiPoint"===t)J(e,u,n,i,r);else if("LineString"===t)Z(e,u,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===t)ee(e,u,n,i,r,!1);else if("Polygon"===t)ee(e,u,n,i,r,!0);else if("MultiPolygon"===t)for(const s of e){const e=[];ee(s,e,n,i,r,!0),e.length&&u.push(e)}if(u.length){if(s.lineMetrics&&"LineString"===t){for(const e of u)l.push(V(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(V(c.id,t,u,c.tags))}}return l.length?l:null}function J(e,t,n,i,r){for(let o=0;o<e.length;o+=3){const a=e[o+r];a>=n&&a<=i&&te(t,e[o],e[o+1],e[o+2])}}function Z(e,t,n,i,r,o,a){let s=$(e);const l=0===r?ne:ie;let c,u,h=e.start;for(let g=0;g<e.length-3;g+=3){const d=e[g],p=e[g+1],f=e[g+2],m=e[g+3],v=e[g+4],y=0===r?d:p,A=0===r?m:v;let b=!1;a&&(c=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-v,2))),y<n?A>n&&(u=l(s,d,p,m,v,n),a&&(s.start=h+c*u)):y>i?A<i&&(u=l(s,d,p,m,v,i),a&&(s.start=h+c*u)):te(s,d,p,f),A<n&&y>=n&&(u=l(s,d,p,m,v,n),b=!0),A>i&&y<=i&&(u=l(s,d,p,m,v,i),b=!0),!o&&b&&(a&&(s.end=h+c*u),t.push(s),s=$(e)),a&&(h+=c)}let d=e.length-3;const p=e[d],f=e[d+1],m=0===r?p:f;m>=n&&m<=i&&te(s,p,f,e[d+2]),d=s.length-3,o&&d>=3&&(s[d]!==s[0]||s[d+1]!==s[1])&&te(s,s[0],s[1],s[2]),s.length&&t.push(s)}function $(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ee(e,t,n,i,r,o){for(const a of e)Z(a,t,n,i,r,o,!1)}function te(e,t,n,i){e.push(t,n,i)}function ne(e,t,n,i,r,o){const a=(o-t)/(i-t);return te(e,o,n+(r-n)*a,1),a}function ie(e,t,n,i,r,o){const a=(o-n)/(r-n);return te(e,t+(i-t)*a,o,1),a}function re(e,t){const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=r.type;let a;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=oe(r.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(const e of r.geometry)a.push(oe(e,t))}else if("MultiPolygon"===o){a=[];for(const e of r.geometry){const n=[];for(const i of e)n.push(oe(i,t));a.push(n)}}n.push(V(r.id,o,a,r.tags))}return n}function oe(e,t){const n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(let i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function ae(e,t){if(e.transformed)return e;const n=1<<e.z,i=e.x,r=e.y;for(const o of e.features){const e=o.geometry,a=o.type;if(o.geometry=[],1===a)for(let s=0;s<e.length;s+=2)o.geometry.push(se(e[s],e[s+1],t,n,i,r));else for(let s=0;s<e.length;s++){const a=[];for(let o=0;o<e[s].length;o+=2)a.push(se(e[s][o],e[s][o+1],t,n,i,r));o.geometry.push(a)}}return e.transformed=!0,e}function se(e,t,n,i,r,o){return[Math.round(n*(e*i-r)),Math.round(n*(t*i-o))]}function le(e,t,n,i,r){const o=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const s of e)ce(a,s,o,r);return a}function ce(e,t,n,i){const r=t.geometry,o=t.type,a=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===o||"MultiPoint"===o)for(let s=0;s<r.length;s+=3)a.push(r[s],r[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ue(a,r,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let s=0;s<r.length;s++)ue(a,r[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(let s=0;s<r.length;s++){const t=r[s];for(let i=0;i<t.length;i++)ue(a,t[i],e,n,!0,0===i)}if(a.length){let n=t.tags||null;if("LineString"===o&&i.lineMetrics){n={};for(const e in t.tags)n[e]=t.tags[e];n.mapbox_clip_start=r.start/r.size,n.mapbox_clip_end=r.end/r.size}const s={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:n};null!==t.id&&(s.id=t.id),e.features.push(s)}}function ue(e,t,n,i,r,o){const a=i*i;if(i>0&&t.size<(r?a:i))return void(n.numPoints+=t.length/3);const s=[];for(let l=0;l<t.length;l+=3)(0===i||t[l+2]>a)&&(n.numSimplified++,s.push(t[l],t[l+1])),n.numPoints++;r&&function(e,t){let n=0;for(let i=0,r=e.length,o=r-2;i<r;o=i,i+=2)n+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(n>0===t)for(let i=0,r=e.length;i<r/2;i+=2){const t=e[i],n=e[i+1];e[i]=e[r-2-i],e[i+1]=e[r-1-i],e[r-2-i]=t,e[r-1-i]=n}}(s,o),e.push(s)}const he={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class de{constructor(e,t){const n=(t=this.options=function(e,t){for(const n in t)e[n]=t[n];return e}(Object.create(he),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=function(e,t){const n=[];if("FeatureCollection"===e.type)for(let i=0;i<e.features.length;i++)G(n,e.features[i],t,i);else G(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(e,t){const n=t.buffer/t.extent;let i=e;const r=K(e,1,-1-n,n,0,-1,2,t),o=K(e,1,1-n,2+n,0,-1,2,t);return(r||o)&&(i=K(e,1,-n,1+n,0,-1,2,t)||[],r&&(i=re(r,1).concat(i)),o&&(i=i.concat(re(o,-1)))),i}(i,t),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,n,i,r,o,a){const s=[e,t,n,i],l=this.options,c=l.debug;for(;s.length;){i=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();const u=1<<t,h=pe(t,n,i);let d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=le(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e="z".concat(t);this.stats[e]=(this.stats[e]||0)+1,this.total++}if(d.source=e,null==r){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===r)continue;if(null!=r){const e=r-t;if(n!==o>>e||i!==a>>e)continue}}if(d.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let v=null,y=null,A=null,b=null,x=K(e,u,n-p,n+m,0,d.minX,d.maxX,l),_=K(e,u,n+f,n+g,0,d.minX,d.maxX,l);e=null,x&&(v=K(x,u,i-p,i+m,1,d.minY,d.maxY,l),y=K(x,u,i+f,i+g,1,d.minY,d.maxY,l),x=null),_&&(A=K(_,u,i-p,i+m,1,d.minY,d.maxY,l),b=K(_,u,i+f,i+g,1,d.minY,d.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(v||[],t+1,2*n,2*i),s.push(y||[],t+1,2*n,2*i+1),s.push(A||[],t+1,2*n+1,2*i),s.push(b||[],t+1,2*n+1,2*i+1)}}getTile(e,t,n){e=+e,t=+t,n=+n;const i=this.options,{extent:r,debug:o}=i;if(e<0||e>24)return null;const a=1<<e,s=pe(e,t=t+a&a-1,n);if(this.tiles[s])return ae(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);let l,c=e,u=t,h=n;for(;!l&&c>0;)c--,u>>=1,h>>=1,l=this.tiles[pe(c,u,h)];return l&&l.source?(o>1&&(console.log("found parent tile z%d-%d-%d",c,u,h),console.time("drilling down")),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ae(this.tiles[s],r):null):null}}function pe(e,t,n){return 32*((1<<e)*n+t)+e}function fe(e,t){return t?e.properties[t]:e.id}function me(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=fe(e,t);if("FeatureCollection"===e.type){const n=new Set;for(const i of e.features){const e=fe(i,t);if(null==e)return!1;if(n.has(e))return!1;n.add(e)}return!0}return!1}function ge(e,t){const n=new Map;if(null==e);else if("Feature"===e.type)n.set(fe(e,t),e);else for(const i of e.features)n.set(fe(i,t),i);return n}class ve extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const n=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return null;const r=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.X,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.X,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.P(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const i=[];for(const t of n)i.push(new e.P(t[0],t[1]));t.push(i)}return t}}toGeoJSON(e,t,n){return u.call(this,e,t,n)}}(this._features[t])}}(i.features);let o=T(r);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:r,rawData:o.buffer}})}loadData(t){return e._(this,void 0,void 0,function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bv(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest),this._geoJSONIndex=t.cluster?new P(function(t){let{superclusterOptions:n,clusterProperties:i}=t;if(!i||!n)return n;const r={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i);for(const c of l){const[t,n]=i[c],a=e.bC(n),s=e.bC("string"==typeof t?[t,["accumulated"],["get",c]]:t);r[c]=a.value,o[c]=s.value}return n.map=e=>{s.properties=e;const t={};for(const n of l)t[n]=r[n].evaluate(a,s);return t},n.reduce=(e,t)=>{s.properties=t;for(const n of l)a.accumulated=e[n],e[n]=o[n].evaluate(a,s)},n}(t)).load((yield this._pendingData).features):(r=yield this._pendingData,new de(r,t.geojsonVtOptions)),this.loaded={};const n={};if(i){const e=i.finish();e&&(n.resourceTiming={},n.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return n}catch(t){if(delete this._pendingRequest,e.bB(t))return{abandoned:!0};throw t}var r})}getData(){return e._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,n){return e._(this,void 0,void 0,function*(){let i=yield this.loadGeoJSON(t,n);if(delete this._pendingRequest,"object"!=typeof i)throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."));if(c(i,!0),t.filter){const n=e.bC(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));const r=i.features.filter(e=>n.value.evaluate({zoom:0},e));i={type:"FeatureCollection",features:r}}return i})}loadGeoJSON(t,n){return e._(this,void 0,void 0,function*(){const{promoteId:i}=t;if(t.request){const r=yield e.h(t.request,n);return this._dataUpdateable=me(r.data,i)?ge(r.data,i):void 0,r.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=me(e,i)?ge(e,i):void 0,e}catch(e){throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."))}if(!t.dataDiff)throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."));if(!this._dataUpdateable)throw new Error("Cannot update existing geojson data in ".concat(t.source));return function(e,t,n){var i,r,o,a;if(t.removeAll&&e.clear(),t.remove)for(const s of t.remove)e.delete(s);if(t.add)for(const s of t.add){const t=fe(s,n);null!=t&&e.set(t,s)}if(t.update)for(const s of t.update){let t=e.get(s.id);if(null==t)continue;const n=!s.removeAllProperties&&((null===(i=s.removeProperties)||void 0===i?void 0:i.length)>0||(null===(r=s.addOrUpdateProperties)||void 0===r?void 0:r.length)>0);if((s.newGeometry||s.removeAllProperties||n)&&(t=Object.assign({},t),e.set(s.id,t),n&&(t.properties=Object.assign({},t.properties))),s.newGeometry&&(t.geometry=s.newGeometry),s.removeAllProperties)t.properties={};else if((null===(o=s.removeProperties)||void 0===o?void 0:o.length)>0)for(const e of s.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(a=s.addOrUpdateProperties)||void 0===a?void 0:a.length)>0)for(const{key:e,value:i}of s.addOrUpdateProperties)t.properties[e]=i}}(this._dataUpdateable,t.dataDiff,i),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(t){return e._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class ye{constructor(t){this.self=t,this.actor=new e.F(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.bi,this.self.removeProtocol=e.bj,this.self.registerRTLTextPlugin=t=>{if(e.bD.isParsed())throw new Error("RTL text plugin already registered.");e.bD.setMethods(t)},this.actor.registerMessageHandler("LDT",(e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t)),this.actor.registerMessageHandler("RDT",(t,n)=>e._(this,void 0,void 0,function*(){this._getDEMWorkerSource(t,n.source).removeTile(n)})),this.actor.registerMessageHandler("GCEZ",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterExpansionZoom(n)})),this.actor.registerMessageHandler("GCC",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterChildren(n)})),this.actor.registerMessageHandler("GCL",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterLeaves(n)})),this.actor.registerMessageHandler("LD",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t)),this.actor.registerMessageHandler("GD",(e,t)=>this._getWorkerSource(e,t.type,t.source).getData()),this.actor.registerMessageHandler("LT",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t)),this.actor.registerMessageHandler("RT",(e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t)),this.actor.registerMessageHandler("AT",(e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t)),this.actor.registerMessageHandler("RMT",(e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t)),this.actor.registerMessageHandler("RS",(t,n)=>e._(this,void 0,void 0,function*(){if(!this.workerSources[t]||!this.workerSources[t][n.type]||!this.workerSources[t][n.type][n.source])return;const e=this.workerSources[t][n.type][n.source];delete this.workerSources[t][n.type][n.source],void 0!==e.removeSource&&e.removeSource(n)})),this.actor.registerMessageHandler("RM",t=>e._(this,void 0,void 0,function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})),this.actor.registerMessageHandler("SR",(t,n)=>e._(this,void 0,void 0,function*(){this.referrer=n})),this.actor.registerMessageHandler("SRPS",(e,t)=>this._syncRTLPluginState(e,t)),this.actor.registerMessageHandler("IS",(t,n)=>e._(this,void 0,void 0,function*(){this.self.importScripts(n)})),this.actor.registerMessageHandler("SI",(e,t)=>this._setImages(e,t)),this.actor.registerMessageHandler("UL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).update(n.layers,n.removedIds)})),this.actor.registerMessageHandler("SL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).replace(n)}))}_setImages(t,n){return e._(this,void 0,void 0,function*(){this.availableImages[t]=n;for(const e in this.workerSources[t]){const i=this.workerSources[t][e];for(const e in i)i[e].availableImages=n}})}_syncRTLPluginState(t,n){return e._(this,void 0,void 0,function*(){if(e.bD.isParsed())return e.bD.getState();if("loading"!==n.pluginStatus)return e.bD.setState(n),n;const t=n.pluginURL;if(this.self.importScripts(t),e.bD.isParsed()){const n={pluginStatus:"loaded",pluginURL:t};return e.bD.setState(n),n}throw e.bD.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from ".concat(t))})}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let n=this.layerIndexes[e];return n||(n=this.layerIndexes[e]=new t),n}_getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const i={sendAsync:(t,n)=>(t.targetMapId=e,this.actor.sendAsync(t,n))};switch(t){case"vector":this.workerSources[e][t][n]=new o(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][n]=new ve(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][n]=new this.externalWorkerSourceTypes[t](i,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][n]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new ye(self)),ye}),n("index",["exports","./shared"],function(e,t){var n="4.7.1";let i,r;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:e=>new Promise((n,i)=>{const r=requestAnimationFrame(n);e.signal.addEventListener("abort",()=>{cancelAnimationFrame(r),i(t.c())})}),getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n},resolveURL:e=>(i||(i=document.createElement("a")),i.href=e,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==r&&(r=matchMedia("(prefers-reduced-motion: reduce)")),r.matches)}};class a{static testProp(e){if(!a.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in a.docStyle)return e[t];return e[0]}static create(e,t,n){const i=window.document.createElement(e);return void 0!==t&&(i.className=t),n&&n.appendChild(i),i}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(e,t){e.style[a.transformProp]=t}static addEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in i?i:i.capture)}static removeEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in i?i:i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",a.suppressClickInternal,!0)},0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,n,i){const r=n.boundingClientRect;return new t.P((i.clientX-r.left)/n.x-e.clientLeft,(i.clientY-r.top)/n.y-e.clientTop)}static mousePos(e,t){const n=a.getScale(e);return a.getPoint(e,n,t)}static touchPos(e,t){const n=[],i=a.getScale(e);for(let r=0;r<t.length;r++)n.push(a.getPoint(e,i,t[r]));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);const s={supported:!1,testSupport:function(e){!u&&c&&(h?d(e):l=e)}};let l,c,u=!1,h=!1;function d(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c),e.isContextLost())return;s.supported=!0}catch(e){}e.deleteTexture(t),u=!0}var p;"undefined"!=typeof document&&(c=document.createElement("img"),c.onload=()=>{l&&d(l),l=null,h=!0},c.onerror=()=>{u=!0,l=null},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let n,i,r,o;e.resetRequestQueue=()=>{n=[],i=0,r=0,o={}},e.addThrottleControl=e=>{const t=r++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],l()},e.getImage=function(e,i){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((o,a)=>{s.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),n.push({abortController:i,requestParameters:e,supportImageRefresh:r,state:"queued",onError:e=>{a(e)},onSuccess:e=>{o(e)}}),l()})};const a=e=>t._(this,void 0,void 0,function*(){e.state="running";const{requestParameters:n,supportImageRefresh:r,onError:o,onSuccess:a,abortController:s}=e,u=!1===r&&!t.i(self)&&!t.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce((e,t)=>e&&"accept"===t,!0));i++;const h=u?c(n,s):t.m(n,s);try{const n=yield h;delete e.abortController,e.state="completed",n.data instanceof HTMLImageElement||t.b(n.data)?a(n):n.data&&a({data:yield(d=n.data,"function"==typeof createImageBitmap?t.d(d):t.f(d)),cacheControl:n.cacheControl,expires:n.expires})}catch(t){delete e.abortController,o(t)}finally{i--,l()}var d}),l=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=i;t<e&&n.length>0;t++){const e=n.shift();e.abortController.signal.aborted?t--:a(e)}},c=(e,n)=>new Promise((i,r)=>{const o=new Image,a=e.url,s=e.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!t.s(a))&&(o.crossOrigin="anonymous"),n.signal.addEventListener("abort",()=>{o.src="",r(t.c())}),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,i({data:o})},o.onerror=()=>{o.onerror=o.onload=null,n.signal.aborted||r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a})}(p||(p={})),p.resetRequestQueue();class f{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function m(e){var n=new t.A(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var g,v=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};g=new t.A(3),t.A!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);var y=function(e){var t=e[0],n=e[1];return t*t+n*n};function A(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const n=[];for(const{id:i,url:r}of e){const e="".concat(i).concat(r);-1===n.indexOf(e)&&(n.push(e),t.push({id:i,url:r}))}}return t}function b(e,t,n){const i=e.split("?");return i[0]+="".concat(t).concat(n),i.join("?")}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();class x{constructor(e,t,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,n,i){const{width:r,height:o}=e,a=!(this.size&&this.size[0]===r&&this.size[1]===o||i),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),a)this.size=[r,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,r,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:a}=i||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,a,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,a,r,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function _(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class w extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const e=n.spriteData;n.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),n.spriteData=null}return n}addImage(e,t){if(this.images[e])throw new Error("Image id ".concat(e," already exist, use updateImage instead"));this._validate(e,t)&&(this.images[e]=t)}_validate(e,n){let i=!0;const r=n.data||n.spriteData;return this._validateStretch(n.stretchX,r&&r.width)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,r&&r.height)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "content" value')))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let n=0;for(const i of e){if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const n=t.spriteData,i=n&&n.width||t.data.width,r=n&&n.height||t.data.height;return!(e[0]<0||i<e[0]||e[1]<0||r<e[1]||e[2]<0||i<e[2]||e[3]<0||r<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getImage(e);if(n&&(i.data.width!==t.data.width||i.data.height!==t.data.height))throw new Error("size mismatch between old image (".concat(i.data.width,"x").concat(i.data.height,") and new image (").concat(t.data.width,"x").concat(t.data.height,")."));t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((t,n)=>{let i=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(i=!1);this.isLoaded()||i?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})})}_getImagesForIds(e){const n={};for(const i of e){let e=this.getImage(i);e||(this.fire(new t.k("styleimagemissing",{id:i})),e=this.getImage(i)),e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w('Image "'.concat(i,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}return n}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.I(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new x(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.p(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,i=e.y+1,a=this.getImage(o).data,s=a.width,l=a.height;t.R.copy(a,r,{x:0,y:0},{x:n,y:i},{width:s,height:l}),t.R.copy(a,r,{x:0,y:l-1},{x:n,y:i-1},{width:s,height:1}),t.R.copy(a,r,{x:0,y:0},{x:n,y:i+l},{width:s,height:1}),t.R.copy(a,r,{x:s-1,y:0},{x:n-1,y:i},{width:1,height:l}),t.R.copy(a,r,{x:0,y:0},{x:n+s,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.getImage(n);e||t.w('Image with ID: "'.concat(n,'" was not found')),_(e)&&this.updateImage(n,e)}}}const E=1e20;function C(e,t,n,i,r,o,a,s,l){for(let c=t;c<t+i;c++)S(e,n*o+c,o,r,a,s,l);for(let c=n;c<n+r;c++)S(e,c*o+t,1,i,a,s,l)}function S(e,t,n,i,r,o,a){o[0]=0,a[0]=-E,a[1]=E,r[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){r[s]=e[t+s*n];const i=s*s;do{const e=o[l];c=(r[s]-r[e]+i-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=E}for(let s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;const i=o[l],c=s-i;e[t+s*n]=r[i]+c*c}}class T{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,function*(){const t=[];for(const r in e)for(const n of e[r])t.push(this._getAndCacheGlyphsPromise(r,n));const n=yield Promise.all(t),i={};for(const{stack:e,id:r,glyph:o}of n)i[e]||(i[e]={}),i[e][r]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return i})}_getAndCacheGlyphsPromise(e,n){return t._(this,void 0,void 0,function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=t.glyphs[n];if(void 0!==i)return{stack:e,id:n,glyph:i};if(i=this._tinySDF(t,e,n),i)return t.glyphs[n]=i,{stack:e,id:n,glyph:i};const r=Math.floor(n/256);if(256*r>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[r])return{stack:e,id:n,glyph:i};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[r]){const n=T.loadGlyphRange(e,r,this.url,this.requestManager);t.requests[r]=n}const o=yield t.requests[r];for(const e in o)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=o[+e]);return t.ranges[r]=!0,{stack:e,id:n,glyph:o[n]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&/(?:[\u3006\u3007\u3021-\u3029\u3038-\u303A\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE4\uDFF2-\uDFF6]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82C[\uDD70-\uDEFB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])|[\u1100-\u11FF\u302E\u302F\u3131-\u318E\u3200-\u321E\u3260-\u327E\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|(?:[\u3041-\u3096\u309D-\u309F]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]|\uD83C\uDE00)|(?:[\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67])/.test(String.fromCodePoint(e))}_tinySDF(e,n,i){const r=this.localIdeographFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(i))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),o=e.tinySDF=new T.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:r,fontWeight:t})}const a=o.draw(String.fromCharCode(i));return{id:i,bitmap:new t.o({width:a.width||60,height:a.height||60},a.data),metrics:{width:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:a.glyphAdvance/2||24,isDoubleResolution:!0}}}}T.loadGlyphRange=function(e,n,i,r){return t._(this,void 0,void 0,function*(){const o=256*n,a=o+255,s=r.transformRequest(i.replace("{fontstack}",e).replace("{range}","".concat(o,"-").concat(a)),"Glyphs"),l=yield t.l(s,new AbortController);if(!l||!l.data)throw new Error("Could not load glyph range. range: ".concat(n,", ").concat(o,"-").concat(a));const c={};for(const e of t.n(l.data))c[e.id]=e;return c})},T.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=i,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(e,"px ").concat(r),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,a+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:v}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const y=f.getImageData(m,m,s,l);v.fill(E,0,h),g.fill(0,0,h);for(let A=0;A<l;A++)for(let e=0;e<s;e++){const t=y.data[4*(A*s+e)+3]/255;if(0===t)continue;const n=(A+m)*c+e+m;if(1===t)v[n]=0,g[n]=E;else{const e=.5-t;v[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}C(v,0,0,c,u,c,this.f,this.v,this.z),C(g,m,m,s,l,c,this.f,this.v,this.z);for(let A=0;A<h;A++){const e=Math.sqrt(v[A])-Math.sqrt(g[A]);d[A]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class I{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,n){return t.x(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.y.number(e.x,n.x,i),y:t.y.number(e.y,n.y,i),z:t.y.number(e.z,n.z,i)}}}let M;class k extends t.E{constructor(e){super(),M=M||new t.q({anchor:new t.D(t.v.light.anchor),position:new I,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.T(M),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.r,e,n))for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.t(this,e.call(t.u,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}const R=new t.q({"sky-color":new t.D(t.v.sky["sky-color"]),"horizon-color":new t.D(t.v.sky["horizon-color"]),"fog-color":new t.D(t.v.sky["fog-color"]),"fog-ground-blend":new t.D(t.v.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.v.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.v.sky["atmosphere-blend"])});class L extends t.E{constructor(e){super(),this._transitionable=new t.T(R),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.z(0))}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.B,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1!==(null==i?void 0:i.validate)&&t.t(this,e.call(t.u,t.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class B{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const i=[];let r=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];r=s*n,s+=t,o=s*n,i.push({left:r,right:o,isDash:a,zeroLength:0===t})}return i}addRoundDash(e,t,n){const i=t/2;for(let r=-n;r<=n;r++){const t=this.width*(this.nextRow+n+r);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=r/n*(i+1);if(a.isDash){const e=i-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=i-Math.sqrt(u*u+d*d);this.data[t+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let a=e.length-1;a>=0;--a){const t=e[a],n=e[a+1];t.zeroLength?e.splice(a,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(a,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const i=this.width*this.nextRow;let r=0,o=e[r];for(let a=0;a<this.width;a++){a/o.right>1&&(o=e[++r]);const t=Math.abs(a-o.left),n=Math.abs(a-o.right),s=Math.min(t,n);this.data[i+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,n){const i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,r=this.getDashRanges(e,this.width,t);n?this.addRoundDash(r,t,i):this.addRegularDash(r)}const a={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const P="maplibre_preloaded_worker_pool";class D{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<D.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[P]}numActive(){return Object.keys(this.active).length}}const O=Math.floor(o.hardwareConcurrency/2);let N,F;function z(){return N||(N=new D),N}D.workerCount=t.C(globalThis)?Math.max(Math.min(O,3),1):1;class U{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const i=this.workerPool.acquire(n);for(let r=0;r<i.length;r++){const e=new t.F(i[r],n);e.name="Worker ".concat(r),this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const n=[];for(const i of this.actors)n.push(i.sendAsync({type:e,data:t}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach(e=>{e.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const n of this.actors)n.registerMessageHandler(e,t)}}function j(){return F||(F=new U(z(),t.G),F.registerMessageHandler("GR",(e,n,i)=>t.m(n,i))),F}function V(e,n){const i=t.H();return t.J(i,i,[1,1,0]),t.K(i,i,[.5*e.width,.5*e.height,1]),t.L(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function H(e,t,n,i,r,o){const a=function(e,t,n){if(e)for(const i of e){const e=t[i];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const i in t){const e=t[i];if(e.source===n&&"fill-extrusion"===e.type)return!0}return!1}(r&&r.layers,t,e.id),s=o.maxPitchScaleFactor(),l=e.tilesIn(i,s,a);l.sort(G);const c=[];for(const h of l)c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,n,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,r,o,s,V(e.transform,h.tileID))});const u=function(e){const t={},n={};for(const i of e){const e=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in e){const i=e[n],r=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of i)r[e.featureIndex]||(r[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const h in u)u[h].forEach(t=>{const n=t.feature,i=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i});return u}function G(e,t){const n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Q(e,n,i){return t._(this,void 0,void 0,function*(){let r=e;if(e.url?r=(yield t.h(n.transformRequest(e.url,"Source"),i)).data:yield o.frameAsync(i),!r)return null;const a=t.M(t.e(r,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in r&&r.vector_layers&&(a.vectorLayerIds=r.vector_layers.map(e=>e.id)),a})}class W{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}extend(e){const n=this._sw,i=this._ne;let r,o;if(e instanceof t.N)r=e,o=e;else{if(!(e instanceof W))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(W.convert(e)):this.extend(t.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.N.convert(e)):this;if(r=e._sw,o=e._ne,!r||!o)return this}return n||i?(n.lng=Math.min(r.lng,n.lng),n.lat=Math.min(r.lat,n.lat),i.lng=Math.max(o.lng,i.lng),i.lat=Math.max(o.lat,i.lat)):(this._sw=new t.N(r.lng,r.lat),this._ne=new t.N(o.lng,o.lat)),this}getCenter(){return new t.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.N(this.getWest(),this.getNorth())}getSouthEast(){return new t.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:i}=t.N.convert(e);let r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(e){return e instanceof W?e:e?new W(e):e}static fromLngLat(e){const n=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,i=n/Math.cos(Math.PI/180*e.lat);return new W(new t.N(e.lng-i,e.lat-n),new t.N(e.lng+i,e.lat+n))}adjustAntiMeridian(){const e=new t.N(this._sw.lng,this._sw.lat),n=new t.N(this._ne.lng,this._ne.lat);return new W(e,e.lng>n.lng?new t.N(n.lng+360,n.lat):n)}}class q{constructor(e,t,n){this.bounds=W.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.O(this.bounds.getWest())*n),r=Math.floor(t.Q(this.bounds.getNorth())*n),o=Math.ceil(t.O(this.bounds.getEast())*n),a=Math.ceil(t.Q(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a}}class X extends t.E{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.M(n,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Q(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise((t,n)=>{e.reloadPromise={resolve:t,reject:n}})}else e.actor=this.dispatcher.getActor(),i="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:i,data:n},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Y extends t.E{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},n),t.e(this,t.M(n,["url","scheme","tileSize"]))}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Q(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const n=yield p.getImage(this.map._requestManager.transformRequest(t,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const t=this.map.painter.context,i=t.gl,r=n.data;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new x(t,r,i.RGBA,{useMipmap:!0}),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class K extends Y{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return t._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const n=yield p.getImage(i,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){const i=n.data;this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const r=t.b(i)&&t.U()?i:yield this.readImageNow(i),o={type:this.type,uid:e.uid,source:this.id,rawImageData:r,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}readImageNow(e){return t._(this,void 0,void 0,function*(){if("undefined"!=typeof VideoFrame&&t.V()){const n=e.width+2,i=e.height+2;try{return new t.R({width:n,height:i},yield t.W(e,-1,-1,n,i))}catch(e){}}return o.getImageData(e,1)})}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.S(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.S(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.S(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class J extends t.E{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.X/this.tileSize;void 0!==n.clusterMaxZoom&&this.maxzoom<=n.clusterMaxZoom&&t.w('The maxzoom value "'.concat(this.maxzoom,'" is expected to be greater than the clusterMaxZoom value "').concat(n.clusterMaxZoom,'".')),this.workerOptions=t.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.X,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.X,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return t._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return t._(this,void 0,void 0,function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:n}})}_updateWorkerData(e){return t._(this,void 0,void 0,function*(){const n=t.e({type:this.type},this.workerOptions);e?n.dataDiff=e:"string"==typeof this._data?(n.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:n});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.k("dataabort",{dataType:"source"}));let i=null;e.resourceTiming&&e.resourceTiming[this.id]&&(i=e.resourceTiming[this.id].slice(0));const r={dataType:"source"};this._collectResourceTiming&&i&&i.length>0&&t.e(r,{resourceTiming:i}),this.fire(new t.k("data",Object.assign(Object.assign({},r),{sourceDataType:"metadata"}))),this.fire(new t.k("data",Object.assign(Object.assign({},r),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.k("dataabort",{dataType:"source"}));this.fire(new t.j(e))}})}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const i=yield this.actor.sendAsync({type:t,data:n},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(i,this.map.painter,"RT"===t)})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Z=t.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $ extends t.E{constructor(e,t,n,i){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t}load(e){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield p.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.j(e))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(t.Z.fromLngLat);this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const a=Math.max(r-n,o-i),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.a1(s,Math.floor((n+r)/2*l),Math.floor((i+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map(e=>this.tileID.getTilePoint(e)._round());return this._boundsArray=new t.$,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.X,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.X),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.X,t.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new x(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ee extends ${constructor(e,t,n,i){super(e,t,n,i),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a3(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.j(e))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.j(new t.a2("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new x(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class te extends ${constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new t.j(new t.a2("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.j(new t.a2("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.j(new t.a2("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.j(new t.a2("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.j(new t.a2("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return t._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new x(n,this.canvas,i.RGBA,{premultiply:!0});let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const ne={},ie=e=>{switch(e){case"geojson":return J;case"image":return $;case"raster":return Y;case"raster-dem":return K;case"vector":return X;case"video":return ee;case"canvas":return te}return ne[e]},re="RTLPluginLoaded";class oe extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=j()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(e=>{throw this.status="error",e})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=o.resolveURL(e),!t.url)throw new Error("requested url ".concat(e," is invalid"));if("unavailable"===t.status){if(!n)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()})}_requestImport(){return t._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.k(re))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let ae=null;function se(){return ae||(ae=new oe),ae}class le{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a4(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const i of e){const e=i.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)n[t.id]=i}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a6){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a6&&n.hasRTLText){this.hasRTLText=!0,se().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new x(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new x(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,i,r,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,n):{}}querySourceFeatures(e,n){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const r=i.loadVTLayers(),o=n&&n.sourceLayer?n.sourceLayer:"",a=r._geojsonTileLayer||r[o];if(!a)return;const s=t.a7(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<a.length;d++){const n=a.feature(d);if(s.needGeometry){const e=t.a8(n,!0);if(!s.filter(new t.z(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.z(this.tileID.overscaledZ),n))continue;const r=i.getId(n,o),p=new t.a9(n,l,c,u,r);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.aa(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const i=this.expirationTime-n;i?this.expirationTime=e+Math.max(i,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=o.now()+e}setDependencies(e,t){const n={};for(const i of t)n[i]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class ce{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:t,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout(()=>{this.remove(e,r)},n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const i of this.data[n])e(i.value)||t.push(i);for(const n of t)this.remove(n.value.tileID,n)}}class ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,i){const r=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},t.e(this.stateChanges[e][r],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])i[t]||(this.deletedStates[e][r][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,n){const i=String(n),r=t.e({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,n){const i={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const n in this.stateChanges[r])this.state[r][n]||(this.state[r][n]={}),t.e(this.state[r][n],this.stateChanges[r][n]),e[n]=this.state[r][n];i[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}i[r]=i[r]||{},t.e(i[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const t in e)e[t].setFeatureState(i,n)}}class he extends t.E{constructor(e,t,n){super(),this.id=e,this.dispatcher=n,this.on("data",e=>this._dataHandler(e)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((e,t,n,i)=>{const r=new(ie(t.type))(e,t,n,i);if(r.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(r.id));return r})(e,t,n,this),this._tiles={},this._cache=new ce(0,e=>this._unloadTile(e)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ue,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,i){return t._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,i)}catch(n){e.state="errored",404!==n.status?this._source.fire(new t.j(n,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(de).map(e=>e.key)}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort((e,n)=>{const i=e.tileID,r=n.tileID,o=new t.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),a=new t.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-r.overscaledZ||a.y-o.y||a.x-o.x}).map(e=>e.tileID.key):n.map(e=>e.tileID).sort(de).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,n){return t._(this,void 0,void 0,function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=n),yield this._loadTile(t,e,n))})}_tileLoaded(e,n,i){e.timeAdded=o.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const r=t[i];if(e.neighboringTiles&&e.neighboringTiles[r]){const t=this.getTileByID(r);n(e,t),n(t,e)}}function n(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){i[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),i=this._getLoadedTile(t);if(i)return i}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(n*i*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(e,t,n,i,r,a){const s={},l={},c=Object.keys(e),u=o.now();for(const o of c){const n=e[o],i=this._tiles[o];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=u)continue;const r=this.findLoadedParent(n,t),a=this.findLoadedSibling(n),c=r||a||null;c&&(this._addTile(c.tileID),s[c.tileID.key]=c.tileID),l[o]=n}this._retainLoadedChildren(l,i,n,e);for(const o in s)e[o]||(this._coveredTiles[o]=!0,e[o]=s[o]);if(a){const t={},n={};for(const e of r)this._tiles[e.key].hasData()?t[e.key]=e:n[e.key]=e;for(const i in n){const r=n[i].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(t[r[0].key]=e[r[0].key]=r[0],t[r[1].key]=e[r[1].key]=r[1],t[r[2].key]=e[r[2].key]=r[2],t[r[3].key]=e[r[3].key]=r[3],delete n[i])}for(const i in n){const r=n[i],o=this.findLoadedParent(r,this._source.minzoom),a=this.findLoadedSibling(r),s=o||a||null;if(s){t[s.tileID.key]=e[s.tileID.key]=s.tileID;for(const e in t)t[e].isChildOf(s.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,n){if(!this._sourceLoaded||this._paused)return;let i;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new t.S(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(i=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(i=i.filter(e=>this._source.hasTile(e)))):i=[];const r=e.coveringZoomLevel(this._source),o=Math.max(r-he.maxOverzooming,this._source.minzoom),a=Math.max(r+he.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of i)if(t.canonical.z>this._source.minzoom){const n=t.scaledTo(t.canonical.z-1);e[n.key]=n;const i=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[i.key]=i}i=i.concat(Object.values(e))}const s=0===i.length&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(i,r);pe(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,r,i,n);for(const t in l)this._tiles[t].clearFadeHold();const c=t.ab(this._tiles,l);for(const t of c){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var n;const i={},r={},o=Math.max(t-he.maxOverzooming,this._source.minzoom),a=Math.max(t+he.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);i[l.key]=l,e.hasData()||t<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,t,a,i);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){i[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(i[e[0].key]&&i[e[1].key]&&i[e[2].key]&&i[e[3].key])continue}let a=e.wasRequested();for(let t=l.overscaledZ-1;t>=o;--t){const o=l.scaledTo(t);if(r[o.key])break;if(r[o.key]=!0,e=this.getTile(o),!e&&a&&(e=this._addTile(o)),e){const t=e.hasData();if((t||!(null===(n=this.map)||void 0===n?void 0:n.cancelPendingTileRequestsWhileZooming)||a)&&(i[o.key]=o),a=e.wasRequested(),t)break}}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;i=e}for(const e of t)this._loadedParentTiles[e]=n}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,n=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const i=n;return n||(n=new le(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.k("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,i){const r=[],o=this.transform;if(!o)return r;const a=i?o.getCameraQueryGeometry(e):e,s=e.map(e=>o.pointCoordinate(e,this.terrain)),l=a.map(e=>o.pointCoordinate(e,this.terrain)),c=this.getIds();let u=1/0,h=1/0,d=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),h=Math.min(h,t.y),d=Math.max(d,t.x),p=Math.max(p,t.y);for(let f=0;f<c.length;f++){const e=this._tiles[c[f]];if(e.holdingForFade())continue;const i=e.tileID,a=Math.pow(2,o.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.X/e.tileSize/a,g=[i.getTilePoint(new t.Z(u,h)),i.getTilePoint(new t.Z(d,p))];if(g[0].x-m<t.X&&g[0].y-m<t.X&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map(e=>i.getTilePoint(e)),n=l.map(e=>i.getTilePoint(e));r.push({tile:e,tileID:i,queryGeometry:t,cameraQueryGeometry:n,scale:a})}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(const n of t)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(pe(this._source.type)){const e=o.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const i=this._tiles[e];i&&i.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter(n=>!n.hasDependency(e,t))}}function de(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function pe(e){return"raster"===e||"image"===e||"video"===e}he.maxOverzooming=10,he.maxUnderzooming=3;class fe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ac(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function me(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class ge{constructor(e,t,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}_insertBoxCell(e,t,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(e,t,n,i,r,o){this.circleCells[r].push(o)}_query(e,t,n,i,r,o,a){if(n<0||e>this.width||i<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return[{key:null,x1:e,y1:t,x2:n,y2:i}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],i=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-i,y1:n-i,x2:t+i,y2:n+i})}}else this._forEachCell(e,t,n,i,this._queryCell,s,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,n,i){return this._query(e,t,n,i,!1,null)}hitTest(e,t,n,i,r,o){return this._query(e,t,n,i,!0,r,o).length>0}hitTestCircle(e,t,n,i,r){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),c.length>0}_queryCell(e,t,n,i,r,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,d=this.boxKeys[a];if(e<=r[h+2]&&t<=r[h+3]&&n>=r[h+0]&&i>=r[h+1]&&(!s||s(d))&&(!c||!me(u,d.overlapMode))&&(o.push({key:d,x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]}),c))return!0}}const d=this.circleCells[r];if(null!==d){const r=this.circles;for(const a of d)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,d=this.circleKeys[a];if(this._circleAndRectCollide(r[h],r[h+1],r[h+2],e,t,n,i)&&(!s||s(d))&&(!c||!me(u,d.overlapMode))){const e=r[h],t=r[h+1],n=r[h+2];if(o.push({key:d,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,i,r,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,h=this.boxCells[r];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,i=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,i=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,n,i,r,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(r.call(this,e,t,n,i,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,i,r,o){const a=i-e,s=r-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,i,r,o,a){const s=(o-i)/2,l=Math.abs(e-(i+s));if(l>s+n)return!1;const c=(a-r)/2,u=Math.abs(t-(r+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}function ve(e,n,i,r,o){const a=t.H();return n?(t.K(a,a,[1/o,1/o,1]),i||t.ad(a,a,r.angle)):t.L(a,r.labelPlaneMatrix,e),a}function ye(e,n,i,r,o){if(n){const n=t.ae(e);return t.K(n,n,[o,o,1]),i||t.ad(n,n,-r.angle),n}return r.glCoordMatrix}function Ae(e,n,i,r){let o;r?(o=[e,n,r(e,n),1],t.af(o,o,i)):(o=[e,n,0,1],Pe(o,o,i));const a=o[3];return{point:new t.P(o[0]/a,o[1]/a),signedDistanceFromCamera:a,isOccluded:!1}}function be(e,t){return.5+e/t*.5}function xe(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function _e(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=r?e.textSizeData:e.iconSizeData,v=t.ag(g,i.transform.zoom),y=[256/i.width*2+1,256/i.height*2+1],A=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;A.clear();const b=e.lineVertexArray,x=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=i.transform.width/i.transform.height;let w=!1;for(let E=0;E<x.length;E++){const r=x.get(E);if(r.hidden||r.writingMode===t.ah.vertical&&!w){Be(r.numGlyphs,A);continue}w=!1;const C=Ae(r.anchorX,r.anchorY,n,m);if(!xe(C.point,y)){Be(r.numGlyphs,A);continue}const S=be(i.transform.cameraToCenterDistance,C.signedDistanceFromCamera),T=t.ai(g,v,r),I=s?T/S:T*S,M={getElevation:m,labelPlaneMatrix:o,lineVertexArray:b,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:u,tileAnchorPoint:new t.P(r.anchorX,r.anchorY),unwrappedTileID:h,width:d,height:p,translation:f},k=Ce(M,r,I,!1,l,n,a,e.glyphOffsetArray,A,_,c);w=k.useVertical,(k.notEnoughRoom||w||k.needsFlipping&&Ce(M,r,I,!0,l,n,a,e.glyphOffsetArray,A,_,c).notEnoughRoom)&&Be(r.numGlyphs,A)}r?e.text.dynamicLayoutVertexBuffer.updateData(A):e.icon.dynamicLayoutVertexBuffer.updateData(A)}function we(e,t,n,i,r,o,a,s){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,h=t.getoffsetX(o.glyphStartIndex),d=t.getoffsetX(l-1),p=Re(e*h,n,i,r,o.segment,c,u,s,a);if(!p)return null;const f=Re(e*d,n,i,r,o.segment,c,u,s,a);return f?s.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function Ee(e,n,i,r){return e===t.ah.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.ah.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function Ce(e,n,i,r,o,a,s,l,c,u,h){const d=i/24,p=n.lineOffsetX*d,f=n.lineOffsetY*d;let m;if(n.numGlyphs>1){const t=n.glyphStartIndex+n.numGlyphs,i=n.lineStartIndex,a=n.lineStartIndex+n.lineLength,c=we(d,l,p,f,r,n,h,e);if(!c)return{notEnoughRoom:!0};const g=Ae(c.first.point.x,c.first.point.y,s,e.getElevation).point,v=Ae(c.last.point.x,c.last.point.y,s,e.getElevation).point;if(o&&!r){const e=Ee(n.writingMode,g,v,u);if(e)return e}m=[c.first];for(let o=n.glyphStartIndex+1;o<t-1;o++)m.push(Re(d*l.getoffsetX(o),p,f,r,n.segment,i,a,e,h));m.push(c.last)}else{if(o&&!r){const i=Ae(e.tileAnchorPoint.x,e.tileAnchorPoint.y,a,e.getElevation).point,r=n.lineStartIndex+n.segment+1,o=new t.P(e.lineVertexArray.getx(r),e.lineVertexArray.gety(r)),s=Ae(o.x,o.y,a,e.getElevation),l=s.signedDistanceFromCamera>0?s.point:function(e,t,n,i,r,o){return Se(e,t,n,1,r,o)}(e.tileAnchorPoint,o,i,0,a,e),c=Ee(n.writingMode,i,l,u);if(c)return c}const i=Re(d*l.getoffsetX(n.glyphStartIndex),p,f,r,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,e,h);if(!i||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[i]}for(const g of m)t.aj(c,g.point,g.angle);return{}}function Se(e,t,n,i,r,o){const a=e.add(e.sub(t)._unit()),s=void 0!==r?Ae(a.x,a.y,r,o.getElevation).point:Ie(a.x,a.y,o).point,l=n.sub(s);return n.add(l._mult(i/l.mag()))}function Te(e,n,i){const r=n.projectionCache;if(r.projections[e])return r.projections[e];const o=new t.P(n.lineVertexArray.getx(e),n.lineVertexArray.gety(e)),a=Ie(o.x,o.y,n);if(a.signedDistanceFromCamera>0)return r.projections[e]=a.point,r.anyProjectionOccluded=r.anyProjectionOccluded||a.isOccluded,a.point;const s=e-i.direction;return function(e,t,n,i,r){return Se(e,t,n,i,void 0,r)}(0===i.distanceFromAnchor?n.tileAnchorPoint:new t.P(n.lineVertexArray.getx(s),n.lineVertexArray.gety(s)),o,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,n)}function Ie(e,t,n){const i=e+n.translation[0],r=t+n.translation[1];let o;return!n.pitchWithMap&&n.projection.useSpecialProjectionForSymbols?(o=n.projection.projectTileCoordinates(i,r,n.unwrappedTileID,n.getElevation),o.point.x=(.5*o.point.x+.5)*n.width,o.point.y=(.5*-o.point.y+.5)*n.height):(o=Ae(i,r,n.labelPlaneMatrix,n.getElevation),o.isOccluded=!1),o}function Me(e,t,n){return e._unit()._perp()._mult(t*n)}function ke(e,n,i,r,o,a,s,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=i.add(n);if(e+c.direction<r||e+c.direction>=o)return l.projectionCache.offsets[e]=u,u;const h=Te(e+c.direction,l,c),d=Me(h.sub(i),s,c.direction),p=i.add(d),f=h.add(d);return l.projectionCache.offsets[e]=t.ak(a,u,p,f)||u,l.projectionCache.offsets[e]}function Re(e,t,n,i,r,o,a,s,l){const c=i?e-t:e+t;let u=c>0?1:-1,h=0;i&&(u*=-1,h=Math.PI),u<0&&(h+=Math.PI);let d,p=u>0?o+r:o+r+1;s.projectionCache.cachedAnchorPoint?d=s.projectionCache.cachedAnchorPoint:(d=Ie(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=d);let f,m,g=d,v=d,y=0,A=0;const b=Math.abs(c),x=[];let _;for(;y+A<=b;){if(p+=u,p<o||p>=a)return null;y+=A,v=g,m=f;const e={absOffsetX:b,direction:u,distanceFromAnchor:y,previousVertex:v};if(g=Te(p,s,e),0===n)x.push(v),_=g.sub(v);else{let t;const i=g.sub(v);t=0===i.mag()?Me(Te(p+u,s,e).sub(g),n,u):Me(i,n,u),m||(m=v.add(t)),f=ke(p,t,g,o,a,m,n,s,e),x.push(m),_=f.sub(m)}A=_.mag()}const w=_._mult((b-y)/A)._add(m||v),E=h+Math.atan2(g.y-v.y,g.x-v.x);return x.push(w),{point:w,angle:l?E:0,path:x}}const Le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Be(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(Le,3*e)}}function Pe(e,t,n){const i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15],e}const De=100;class Oe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ge(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ge(e.width+200,e.height+200,25);this.transform=e,this.mapProjection=t,this.grid=n,this.ignoredGrid=i,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+De,this.screenBottomBoundary=e.height+De,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,i,r,o,a,s,l,c,u){const h=e.anchorPointX+s[0],d=e.anchorPointY+s[1],p=this.projectAndGetPerspectiveRatio(i,h,d,r,c),f=n*p.perspectiveRatio;let m;if(o||a)m=this._projectCollisionBox(e,f,i,r,o,a,s,p,c,u);else{const t=p.point.x+(u?u.x*f:0),n=p.point.y+(u?u.y*f:0);m={allPointsOccluded:!1,box:[t+e.x1*f,n+e.y1*f,t+e.x2*f,n+e.y2*f]}}const[g,v,y,A]=m.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?m.allPointsOccluded:this.mapProjection.isOccluded(h,d,r))||p.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(g,v,y,A)||"always"!==t&&this.grid.hitTest(g,v,y,A,t,l)?{box:[g,v,y,A],placeable:!1,offscreen:!1}:{box:[g,v,y,A],placeable:!0,offscreen:this.isOffscreen(g,v,y,A)}}placeCollisionCircles(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g){const v=[],y=new t.P(n.anchorX,n.anchorY),A=this.getPerspectiveRatio(a,y.x,y.y,s,g),b=(h?o/A:o*A)/t.ap,x={getElevation:g,labelPlaneMatrix:l,lineVertexArray:i,pitchWithMap:h,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:y,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:m},_=we(b,r,n.lineOffsetX*b,n.lineOffsetY*b,!1,n,!1,x);let w=!1,E=!1,C=!0;if(_){const n=.5*p*A+f,i=new t.P(-100,-100),r=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new fe,a=_.first,s=_.last;let l=[];for(let e=a.path.length-1;e>=1;e--)l.push(a.path[e]);for(let e=1;e<s.path.length;e++)l.push(s.path[e]);const h=2.5*n;if(c){const e=this.projectPathToScreenSpace(l,x,c);l=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let m=[];if(l.length>0){const e=l[0].clone(),n=l[0].clone();for(let t=1;t<l.length;t++)e.x=Math.min(e.x,l[t].x),e.y=Math.min(e.y,l[t].y),n.x=Math.max(n.x,l[t].x),n.y=Math.max(n.y,l[t].y);m=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[l]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.al([l],i.x,i.y,r.x,r.y)}for(const t of m){o.reset(t,.25*n);let i=0;i=o.length<=.5*n?1:Math.ceil(o.paddedLength/h)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),a=o.lerp(r),s=a.x+De,l=a.y+De;v.push(s,l,n,0);const c=s-n,h=l-n,p=s+n,f=l+n;if(C=C&&this.isOffscreen(c,h,p,f),E=E||this.isInsideGrid(c,h,p,f),"always"!==e&&this.grid.hitTestCircle(s,l,n,e,d)&&(w=!0,!u))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!u&&w||!E||A<this.perspectiveRatioCutoff?[]:v,offscreen:C,collisionDetected:w}}projectPathToScreenSpace(e,t,n){return e.map(e=>Ae(e.x,e.y,n,t.getElevation))}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,a=-1/0;for(const u of e){const e=new t.P(u.x+De,u.y+De);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.P(u.x1,u.y1),new t.P(u.x2,u.y1),new t.P(u.x2,u.y2),new t.P(u.x1,u.y2)];t.am(n,i)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(e,t,n,i,r,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,i,r,o){const a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t};for(let l=0;l<e.length;l+=4)a.insertCircle(s,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){let a;o?(a=[n,i,o(n,i),1],t.af(a,a,e)):(a=[n,i,0,1],Pe(a,a,e));const s=a[3];return{point:new t.P((a[0]/s+1)/2*this.transform.width+De,(-a[1]/s+1)/2*this.transform.height+De),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s*.5,isOccluded:!1,signedDistanceFromCamera:s}}getPerspectiveRatio(e,t,n,i,r){const o=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(t,n,i,r):Ae(t,n,e,r);return.5+this.transform.cameraToCenterDistance/o.signedDistanceFromCamera*.5}isOffscreen(e,t,n,i){return n<De||e>=this.screenRightBoundary||i<De||t>this.screenBottomBoundary}isInsideGrid(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.an([]);return t.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,i,r,o,a,s,l,c,u){let h=new t.P(1,0),d=new t.P(0,1);const p=new t.P(e.anchorPointX+s[0],e.anchorPointY+s[1]);if(a&&!o){const e=this.projectAndGetPerspectiveRatio(i,p.x+1,p.y,r,c).point.sub(l.point).unit(),n=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0),o=Math.sin(n),a=Math.cos(n);h=new t.P(a,o),d=new t.P(-o,a)}else if(!a&&o){const e=-this.transform.angle,n=Math.sin(e),i=Math.cos(e);h=new t.P(i,n),d=new t.P(-n,i)}let f=l.point,m=n;if(o){f=p;const e=this.transform.zoom-Math.floor(this.transform.zoom);m=Math.pow(2,-e),m*=this.mapProjection.getPitchedTextCorrection(this.transform,p,r),u||(m*=t.ac(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}u&&(f=f.add(h.mult(u.x*m)).add(d.mult(u.y*m)));const g=e.x1*m,v=e.x2*m,y=(g+v)/2,A=e.y1*m,b=e.y2*m,x=(A+b)/2,_=[{offsetX:g,offsetY:A},{offsetX:y,offsetY:A},{offsetX:v,offsetY:A},{offsetX:v,offsetY:x},{offsetX:v,offsetY:b},{offsetX:y,offsetY:b},{offsetX:g,offsetY:b},{offsetX:g,offsetY:x}];let w=[];for(const{offsetX:C,offsetY:S}of _)w.push(new t.P(f.x+h.x*C+d.x*S,f.y+h.y*C+d.y*S));let E=!1;if(o){const e=w.map(e=>this.projectAndGetPerspectiveRatio(i,e.x,e.y,r,c));E=e.some(e=>!e.isOccluded),w=e.map(e=>e.point)}else E=!0;return{box:t.ao(w),allPointsOccluded:!E}}}function Ne(e,n,i){return n*(t.X/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}class Fe{constructor(e,t,n,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class ze{constructor(e,t,n,i,r){this.text=new Fe(e?e.text:null,t,n,r),this.icon=new Fe(e?e.icon:null,t,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ue{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class je{constructor(){this.invProjMatrix=t.H(),this.viewportMatrix=t.H(),this.circles=[]}}class Ve{constructor(e,t,n,i,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class He{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Ge(e,n,i,r,o){const{horizontalAlign:a,verticalAlign:s}=t.au(e);return new t.P(-(a-.5)*n+r[0]*o,-(s-.5)*i+r[1]*o)}class Qe{constructor(e,t,n,i,r,o){this.transform=e.clone(),this.terrain=n,this.collisionIndex=new Oe(this.transform,t),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new He(r),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(n,i)=>t.getElevation(e,n,i):null}getBucketParts(e,n,i,r){const o=i.getBucket(n),a=i.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),h=i.tileSize/t.X,d=i.tileID.toUnwrapped(),p=this.transform.calculatePosMatrix(d),f="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),g=Ne(i,1,this.transform.zoom),v=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("text-translate"),c.get("text-translate-anchor")),y=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("icon-translate"),c.get("icon-translate-anchor")),A=ve(p,f,m,this.transform,g);let b=null;if(f){const e=ye(p,f,m,this.transform,g);b=t.L([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Ve(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const x={bucket:o,layout:l,translationText:v,translationIcon:y,posMatrix:p,unwrappedTileID:d,textLabelPlaneMatrix:A,labelToScreenMatrix:b,scale:u,textPixelRatio:h,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:x})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A){const b=t.aq[e.textAnchor],x=[e.textOffset0,e.textOffset1],_=Ge(b,i,r,x,o),w=this.collisionIndex.placeCollisionBox(n,d,l,c,u,s,a,g,h.predicate,A,_);if((!y||this.collisionIndex.placeCollisionBox(y,d,l,c,u,s,a,v,h.predicate,A,_).placeable)&&w.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:x,width:i,height:r,anchor:b,textBoxScale:o,prevAnchor:e},this.markUsedJustification(f,b,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:_,placedGlyphBoxes:w}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,translationText:a,translationIcon:s,posMatrix:l,unwrappedTileID:c,textLabelPlaneMatrix:u,labelToScreenMatrix:h,textPixelRatio:d,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,collisionGroup:g}=e.parameters,v=o.get("text-optional"),y=o.get("icon-optional"),A=t.ar(o,"text-overlap","text-allow-overlap"),b="always"===A,x=t.ar(o,"icon-overlap","icon-allow-overlap"),_="always"===x,w="map"===o.get("text-rotation-alignment"),E="map"===o.get("text-pitch-alignment"),C="none"!==o.get("icon-text-fit"),S="viewport-y"===o.get("symbol-z-order"),T=b&&(_||!r.hasIconData()||y),I=_&&(b||!r.hasTextData()||v);!r.collisionArrays&&f&&r.deserializeCollisionBoxes(f);const M=this._getTerrainElevationFunc(this.retainedQueryData[r.bucketInstanceId].tileID),k=(e,f,_)=>{var S,k;if(n[e.crossTileID])return;if(p)return void(this.placements[e.crossTileID]=new Ue(!1,!1,!1));let R=!1,L=!1,B=!0,P=null,D={box:null,placeable:!1,offscreen:null},O={box:null,placeable:!1,offscreen:null},N=null,F=null,z=null,U=0,j=0,V=0;f.textFeatureIndex?U=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(U=e.featureIndex),f.verticalTextFeatureIndex&&(j=f.verticalTextFeatureIndex);const H=f.textBox;if(H){const n=n=>{let i=t.ah.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},o=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&f.verticalTextBox){for(const e of r.writingModes)if(e===t.ah.vertical?(D=i(),O=D):D=n(),D&&D.placeable)break}else D=n()},u=e.textAnchorOffsetStartIndex,h=e.textAnchorOffsetEndIndex;if(h===u){const i=(t,n)=>{const i=this.collisionIndex.placeCollisionBox(t,A,d,l,c,E,w,a,g.predicate,M);return i&&i.placeable&&(this.markUsedOrientation(r,n,e),this.placedOrientations[e.crossTileID]=n),i};o(()=>i(H,t.ah.horizontal),()=>{const n=f.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?i(n,t.ah.vertical):{box:null,offscreen:null}}),n(D&&D.placeable)}else{let p=t.aq[null===(k=null===(S=this.prevPlacement)||void 0===S?void 0:S.variableOffsets[e.crossTileID])||void 0===k?void 0:k.anchor];const m=(n,o,f)=>{const m=n.x2-n.x1,v=n.y2-n.y1,y=e.textBoxScale,b=C&&"never"===x?o:null;let _=null,S="never"===A?1:2,T="never";p&&S++;for(let t=0;t<S;t++){for(let t=u;t<h;t++){const i=r.textAnchorOffsets.get(t);if(p&&i.textAnchor!==p)continue;const o=this.attemptAnchorPlacement(i,n,m,v,y,w,E,d,l,c,g,T,e,r,f,a,s,b,M);if(o&&(_=o.placedGlyphBoxes,_&&_.placeable))return R=!0,P=o.shift,_}p?p=null:T=A}return i&&!_&&(_={box:this.collisionIndex.placeCollisionBox(H,"always",d,l,c,E,w,a,g.predicate,M,new t.P(0,0)).box,offscreen:!1,placeable:!1}),_};o(()=>m(H,f.iconBox,t.ah.horizontal),()=>{const n=f.verticalTextBox;return r.allowVerticalPlacement&&(!D||!D.placeable)&&e.numVerticalGlyphVertices>0&&n?m(n,f.verticalIconBox,t.ah.vertical):{box:null,occluded:!0,offscreen:null}}),D&&(R=D.placeable,B=D.offscreen);const v=n(D&&D.placeable);if(!R&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,v))}}}if(N=D,R=N&&N.placeable,B=N&&N.offscreen,e.useRuntimeCollisionCircles){const n=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),s=t.ai(r.textSizeData,m,n),d=o.get("text-padding");F=this.collisionIndex.placeCollisionCircles(A,n,r.lineVertexArray,r.glyphOffsetArray,s,l,c,u,h,i,E,g.predicate,e.collisionCircleDiameter,d,a,M),F.circles.length&&F.collisionDetected&&!i&&t.w("Collisions detected, but collision boxes are not shown"),R=b||F.circles.length>0&&!F.collisionDetected,B=B&&F.offscreen}if(f.iconFeatureIndex&&(V=f.iconFeatureIndex),f.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,x,d,l,c,E,w,s,g.predicate,M,C&&P?P:void 0);O&&O.placeable&&f.verticalIconBox?(z=e(f.verticalIconBox),L=z.placeable):(z=e(f.iconBox),L=z.placeable),B=B&&z.offscreen}const G=v||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Q=y||0===e.numIconVertices;G||Q?Q?G||(L=L&&R):R=L&&R:L=R=L&&R;const W=L&&z.placeable;if(R&&N.placeable&&this.collisionIndex.insertCollisionBox(N.box,A,o.get("text-ignore-placement"),r.bucketInstanceId,O&&O.placeable&&j?j:U,g.ID),W&&this.collisionIndex.insertCollisionBox(z.box,x,o.get("icon-ignore-placement"),r.bucketInstanceId,V,g.ID),F&&R&&this.collisionIndex.insertCollisionCircles(F.circles,A,o.get("text-ignore-placement"),r.bucketInstanceId,U,g.ID),i&&this.storeCollisionData(r.bucketInstanceId,_,f,N,z,F),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Ue(R||T,L||I,B||r.justReloaded),n[e.crossTileID]=!0};if(S){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=r.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];k(r.symbolInstances.get(n),r.collisionArrays[n],n)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)k(r.symbolInstances.get(t),r.collisionArrays[t],t);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.as(e.invProjMatrix,l),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}storeCollisionData(e,t,n,i,r,o){if(n.textBox||n.iconBox){let o,a;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?a=o.get(t):(a={text:null,icon:null},o.set(t,a)),n.textBox&&(a.text=i.box),n.iconBox&&(a.icon=r.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new je);for(let e=0;e<o.circles.length;e+=4)t.circles.push(o.circles[e+0]),t.circles.push(o.circles[e+1]),t.circles.push(o.circles[e+2]),t.circles.push(o.collisionDetected?1:0)}}markUsedJustification(e,n,i,r){let o;o=r===t.ah.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.at(n)];const a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.ah.horizontal||n===t.ah.horizontalOnly?n:0,o=n===t.ah.vertical?n:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=r[s];t?(this.opacities[s]=new ze(t,i,e.text,e.icon),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new ze(null,i,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const s in r){const e=r[s];if(!this.opacities[s]){const t=new ze(e,i,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i.tileID,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],a=o.layout,s=new ze(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new ze(null,0,l&&(c||!e.hasIconData()||a.get("icon-optional")),c&&(l||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const m=(e,t,n)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n);e.hasVisibleVertices=e.hasVisibleVertices||n!==tt},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let v=0;v<e.symbolInstances.length;v++){const n=e.symbolInstances.get(v),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:o,crossTileID:a}=n;let l=this.opacities[a];i[a]?l=s:l||(l=f,this.opacities[a]=l),i[a]=!0;const c=n.numIconVertices>0,y=this.placedOrientations[n.crossTileID],A=y===t.ah.vertical,b=y===t.ah.horizontal||y===t.ah.horizontalOnly;if(r>0||o>0){const t=et(l.text);m(e.text,r,A?tt:t),m(e.text,o,b?tt:t);const i=l.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach(t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||A?1:0)}),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);const a=this.variableOffsets[n.crossTileID];a&&this.markUsedJustification(e,a.anchor,n,y);const s=this.placedOrientations[n.crossTileID];s&&(this.markUsedJustification(e,"left",n,s),this.markUsedOrientation(e,s,n))}if(c){const t=et(l.icon),i=!(p&&n.verticalPlacedIconSymbolIndex&&A);n.placedIconSymbolIndex>=0&&(m(e.icon,n.numIconVertices,i?t:tt),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=l.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,n.numVerticalIconVertices,i?tt:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const x=g&&g.has(v)?g.get(v):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[v];if(n){let i=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[a];e?(i=Ge(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&i._rotate(d?this.transform.angle:-this.transform.angle)):t=!1}if(n.textBox||n.verticalTextBox){let r;n.textBox&&(r=A),n.verticalTextBox&&(r=b),We(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||r,x.text,i.x,i.y)}}if(n.iconBox||n.verticalIconBox){const t=Boolean(!b&&n.verticalIconBox);let r;n.iconBox&&(r=t),n.verticalIconBox&&(r=!t),We(e.iconCollisionBox.collisionVertexArray,l.icon.placed,r,x.icon,p?i.x:0,p?i.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(e.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(e.text.layoutVertexArray.length,") / 4"));if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(e.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(e.icon.layoutVertexArray.length,") / 4"));if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function We(e,t,n,i,r,o){i&&0!==i.length||(i=[0,0,0,0]);const a=i[0]-De,s=i[1]-De,l=i[2]-De,c=i[3]-De;e.emplaceBack(t?1:0,n?1:0,r||0,o||0,a,s),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,s),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,c),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,a,c)}const qe=Math.pow(2,25),Xe=Math.pow(2,24),Ye=Math.pow(2,17),Ke=Math.pow(2,16),Je=Math.pow(2,9),Ze=Math.pow(2,8),$e=Math.pow(2,1);function et(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*qe+t*Xe+n*Ye+t*Ke+n*Je+t*Ze+n*$e+t}const tt=0;function nt(){return{isOccluded:(e,t,n)=>!1,getPitchedTextCorrection:(e,t,n)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(e,t,n,i){throw new Error("Not implemented.")},translatePosition:(e,t,n,i)=>function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!n[0]&&!n[1])return[0,0];const o=r?"map"===i?e.angle:0:"viewport"===i?-e.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}return[r?n[0]:Ne(t,n[0],e.zoom),r?n[1]:Ne(t,n[1],e.zoom)]}(e,t,n,i),getCircleRadiusCorrection:e=>1}}class it{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}class rt{constructor(e,t,n,i,r,o,a,s){this.placement=new Qe(e,nt(),t,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,t,n){const i=o.now(),r=()=>!this._forceFullPlacement&&o.now()-i>2;for(;this._currentPlacementIndex>=0;){const i=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new it(i)),this._inProgressLayer.continuePlacement(n[i.source],this.placement,this._showCollisionBoxes,i,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ot=512/t.X/2;class at{constructor(e,n,i){this.tileID=e,this.bucketInstanceId=i,this._symbolsByKey={};const r=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),i=e.key,o=r.get(i);o?o.push(e):r.set(i,[e])}for(const[o,a]of r){const e={positions:a.map(e=>({x:Math.floor(e.anchorX*ot),y:Math.floor(e.anchorY*ot)})),crossTileIDs:a.map(e=>e.crossTileID)};if(e.positions.length>128){const n=new t.av(e.positions.length,16,Uint16Array);for(const{x:t,y:i}of e.positions)n.add(t,i);n.finish(),delete e.positions,e.index=n}this._symbolsByKey[o]=e}}getScaledCoordinates(e,n){const{x:i,y:r,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=n.canonical,c=ot/Math.pow(2,l-o),u=(s*t.X+e.anchorY)*c,h=r*t.X*ot;return{x:Math.floor((a*t.X+e.anchorX)*c-i*t.X*ot),y:Math.floor(u-h)}}findMatches(e,t,n){const i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let r=0;r<e.length;r++){const o=e.get(r);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);if(a.index){const e=a.index.range(s.x-i,s.y-i,s.x+i,s.y+i).sort();for(const t of e){const e=a.crossTileIDs[t];if(!n[e]){n[e]=!0,o.crossTileID=e;break}}}else if(a.positions)for(let e=0;e<a.positions.length;e++){const t=a.positions[e],r=a.crossTileIDs[e];if(Math.abs(t.x-s.x)<=i&&Math.abs(t.y-s.y)<=i&&!n[r]){n[r]=!0,o.crossTileID=r;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(e=>{let{crossTileIDs:t}=e;return t})}}class st{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class lt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],i={};for(const n in e){const r=e[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),i[r.tileID.key]=r}this.indexes[n]=i}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const i=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in n){const o=n[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=n[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let r=0;r<t.symbolInstances.length;r++){const e=t.symbolInstances.get(r);e.crossTileID||(e.crossTileID=n.generate(),i[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new at(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.getCrossTileIDsLists())for(const t of n)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}class ct{constructor(){this.layerIndexes={},this.crossTileIDs=new st,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new lt);let r=!1;const o={};i.handleWrapJump(n);for(const a of t){const t=a.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(a.tileID,t,this.crossTileIDs)&&(r=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const ut=(e,n)=>t.t(e,n&&n.filter(e=>"source.canvas"!==e.identifier)),ht=t.aw();class dt extends t.E{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new U(z(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(e,t)=>this.getGlyphs(e,t)),this.dispatcher.registerMessageHandler("GI",(e,t)=>this.getImages(e,t)),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new T(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new B(256,512),this.crossTileSymbolIndex=new ct,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",t.ay()),se().on(re,this._rtlPluginLoaded),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const i in this._layers){const e=this._layers[i];e.source===n.id&&this._validateLayer(e)}})}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const r=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.h(r,this._loadStyleRequest).then(e=>{this._loadStyleRequest=null,this._load(e.data,n,i)}).catch(e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.j(e))})}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(e,n,i)}).catch(()=>{})}loadEmpty(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(ht,{validate:!1})}_load(e,n,i){var r;const o=n.transformStyle?n.transformStyle(i,e):e;if(!n.validate||!ut(this,t.u(o))){this._loaded=!0,this.stylesheet=o;for(const e in o.sources)this.addSource(e,o.sources[e],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new k(this.stylesheet.light),this.sky=new L(this.stylesheet.sky),this.map.setTerrain(null!==(r=this.stylesheet.terrain)&&void 0!==r?r:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}_createLayers(){const e=t.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(e=>e.id),this._layers={},this._serializedLayers=null;for(const n of e){const e=t.aA(n);e.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=e}}_loadSprite(e){let n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,n,i,r){return t._(this,void 0,void 0,function*(){const a=A(e),s=i>1?"@2x":"",l={},c={};for(const{id:e,url:i}of a){const o=n.transformRequest(b(i,s,".json"),"SpriteJSON");l[e]=t.h(o,r);const a=n.transformRequest(b(i,s,".png"),"SpriteImage");c[e]=p.getImage(a,r)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,n){return t._(this,void 0,void 0,function*(){const t={};for(const i in e){t[i]={};const r=o.getImageCanvasContext((yield n[i]).data),a=(yield e[i]).data;for(const e in a){const{width:n,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m}=a[e];t[i][e]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:n,height:o,x:s,y:l,context:r}}}}return t})}(l,c)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const n=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter(t=>!(t in e)):[];for(const e of n)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const r in e[t]){const n="default"===t?r:"".concat(t,":").concat(r);this._spritesImagesIds[t].push(n),n in this.imageManager.images?this.imageManager.updateImage(n,e[t][r],!1):this.imageManager.addImage(n,e[t][r]),i&&(this._changedImages[n]=!0)}}}).catch(e=>{this._spriteRequest=null,n=e,this.fire(new t.j(n))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"})),r&&r(n)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const i=e.sourceLayer;if(!i)return;const r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.j(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(r.id,'" as specified by style layer "').concat(e.id,'".'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._serializedAllLayers();if(!e||0===e.length)return Object.values(n?t.aB(i):i);const r=[];for(const o of e)if(i[o]){const e=n?t.aB(i[o]):i[o];r.push(e)}return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const n of t){const t=this._layers[n];"custom"!==t.type&&(e[n]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error("Invalid action ".concat(t));this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const r in i){const e=this.sourceCaches[r];!!i[r]!=!!e.used&&e.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:r}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,n&&this.fire(new t.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;this._checkLoaded();const r=this.serialize();if(e=n.transformStyle?n.transformStyle(r,e):e,(null===(i=n.validate)||void 0===i||i)&&ut(this,t.u(e)))return!1;(e=t.aB(e)).layers=t.az(e.layers);const o=t.aC(r,e),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw new Error("Unimplemented: ".concat(a.unimplemented.join(", "),"."));if(0===a.operations.length)return!1;for(const t of a.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],n=[];for(const i of e)switch(i.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":t.push(()=>this.addLayer.apply(this,i.args));break;case"removeLayer":t.push(()=>this.removeLayer.apply(this,i.args));break;case"setPaintProperty":t.push(()=>this.setPaintProperty.apply(this,i.args));break;case"setLayoutProperty":t.push(()=>this.setLayoutProperty.apply(this,i.args));break;case"setFilter":t.push(()=>this.setFilter.apply(this,i.args));break;case"addSource":t.push(()=>this.addSource.apply(this,i.args));break;case"removeSource":t.push(()=>this.removeSource.apply(this,i.args));break;case"setLayerZoomRange":t.push(()=>this.setLayerZoomRange.apply(this,i.args));break;case"setLight":t.push(()=>this.setLight.apply(this,i.args));break;case"setGeoJSONSourceData":t.push(()=>this.setGeoJSONSourceData.apply(this,i.args));break;case"setGlyphs":t.push(()=>this.setGlyphs.apply(this,i.args));break;case"setSprite":t.push(()=>this.setSprite.apply(this,i.args));break;case"setSky":t.push(()=>this.setSky.apply(this,i.args));break;case"setTerrain":t.push(()=>this.map.setTerrain.apply(this,i.args));break;case"setTransition":t.push(()=>{});break;default:n.push(i.command)}return{operations:t,unimplemented:n}}addImage(e,n){if(this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" already exists.'))));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" does not exist.'))));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error('Source "'.concat(e,'" already exists.'));if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.u.source,"sources.".concat(e),n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=this.sourceCaches[e]=new he(e,n,this.dispatcher);r.style=this,r.setEventedParent(this,()=>({isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:e})),r.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.j(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(i,'" is using it.'))));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID=".concat(e));const n=this.sourceCaches[e].getSource();if("geojson"!==n.type)throw new Error("geojsonSource.type is ".concat(n.type,", which is !== 'geojson"));n.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.j(new Error('Layer "'.concat(r,'" already exists on this map.'))));let o;if("custom"===e.type){if(ut(this,t.aD(e)))return;o=t.aA(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(r,e.source),e=t.aB(e),e=t.e(e,{source:r})),this._validate(t.u.layer,"layers.".concat(r),e,{arrayIndex:-1},i))return;o=t.aA(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}})}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.j(new Error('Cannot add layer "'.concat(r,'" before non-existing layer "').concat(n,'".'))));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.j(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.j(new Error('Cannot move layer "'.concat(e,'" before non-existing layer "').concat(n,'".')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.j(new Error('Cannot remove non-existing layer "'.concat(e,'".'))));n.setEventedParent(null);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.j(new Error('Cannot set the zoom range of non-existing layer "'.concat(e,'".'))))}setFilter(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.aE(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.u.filter,"layers.".concat(r.id,".filter"),n,null,i)||(r.filter=t.aB(n),this._updateLayer(r)))}else this.fire(new t.j(new Error('Cannot filter non-existing layer "'.concat(e,'".'))))}getFilter(e){return t.aB(this.getLayer(e).filter)}setLayoutProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.j(new Error('Cannot get style of non-existing layer "'.concat(e,'".'))))}setPaintProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.sourceCaches[i];if(void 0===o)return void this.fire(new t.j(new Error("The source '".concat(i,"' does not exist in the map's style."))));const a=o.getSource().type;"geojson"===a&&r?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.sourceCaches[i];if(void 0===r)return void this.fire(new t.j(new Error("The source '".concat(i,"' does not exist in the map's style."))));const o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(a,e.id,n):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.sourceCaches[n];if(void 0!==r)return"vector"!==r.getSource().type||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.aF(this.sourceCaches,e=>e.serialize()),n=this._serializeByIds(this._order,!0),i=this.map.getTerrain()||void 0,r=this.stylesheet;return t.aG({version:r.version,name:r.name,metadata:r.metadata,light:r.light,sky:r.sky,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,sources:e,layers:n,terrain:i},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},i=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(t(r)){n[r]=o;for(const t of e){const e=t[r];if(e)for(const t of e)i.push(t)}}}i.sort((e,t)=>t.intersectionZ-e.intersectionZ);const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(n[t.layer.id]<o)break;r.push(t),i.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)r.push(t.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.u.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.j(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=this._serializedAllLayers();for(const t in this.sourceCaches)n.layers&&!r[t]||o.push(H(this.sourceCaches[t],this._layers,a,e,n,i));return this.placement&&o.push(function(e,t,n,i,r,o,a){const s={},l=o.queryRenderedSymbols(i),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(G);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],i=n[e];i.sort((e,t)=>{const n=u.featureSortOrder;if(n){const i=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex});for(const e of i)t.push(e)}}for(const u in s)s[u].forEach(t=>{const i=t.feature,r=n[e[u].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r});return s}(this._layers,a,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.u.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this.sourceCaches[e];return i?function(e,t){const n=e.getRenderableIds().map(t=>e.getTileByID(t)),i=[],r={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;r[a]||(r[a]=!0,e.querySourceFeatures(i,t))}return i}(i,n):[]}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let r=!1;for(const o in e)if(!t.aE(e[o],i[o])){r=!0;break}if(!r)return;const a={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getSky();let r=!1;if(!e&&!i)return;if(e&&!i)r=!0;else if(!e&&i)r=!0;else for(const o in e)if(!t.aE(e[o],i[o])){r=!0;break}if(!r)return;const a={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(a)}_validate(e,n,i,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&ut(this,e.call(t.u,t.e({key:n,style:this.serialize(),value:i,styleSpec:t.v},r)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),se().off(re,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const o of this._order){const t=this._layers[o];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const n=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);a=a||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),e.zoom))&&(this.pauseablePlacement=new rt(e,this.map.terrain,this._order,r,t,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const o of this._order){const e=this._layers[o];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,n.icons),e})}getGlyphs(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.glyphManager.getGlyphs(n.stacks),t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,[""]),e})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.u.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const o=[{id:e,url:n}],a=[...A(this.stylesheet.sprite),...o];this._validate(t.u.sprite,"sprite",a,null,i)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,r))}removeSprite(e){this._checkLoaded();const n=A(this.stylesheet.sprite);if(n.find(t=>t.id===e)){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;n.splice(n.findIndex(t=>t.id===e),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error('Sprite "'.concat(e,"\" doesn't exists on this map."))))}getSprite(){return A(this.stylesheet.sprite)}setSprite(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.u.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,i):(this._unloadSprite(),i&&i(null)))}}var pt=t.Y([{name:"a_pos",type:"Int16",components:2}]);const ft={prelude:mt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:mt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:mt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),heatmapTexture:mt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:mt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:mt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:mt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:mt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:mt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:mt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:mt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:mt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:mt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:mt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:mt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:mt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:mt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function mt(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute ([\w]+) ([\w]+)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:e=e.replace(n,(e,t,n,i,r)=>(s[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"))),vertexSource:t=t.replace(n,(e,t,n,i,r)=>{const o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(r,";\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")}),staticAttributes:i,staticUniforms:a}}class gt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,i,r,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==i.length;for(let u=0;!c&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||c||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,n,i,r,o,a,s,l):(e.bindVertexArray.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind(),l&&l.bind())}freshBind(e,t,n,i,r,o,a,s){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,t.enableAttributes(u,e);for(const h of n)h.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),s&&s.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,r);for(const h of n)h.bind(),h.setVertexAttribPointers(u,e,r);o&&(o.bind(),o.setVertexAttribPointers(u,e,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,r)),s&&(s.bind(),s.setVertexAttribPointers(u,e,r)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vt=(e,n,i,r,o)=>({u_matrix:e,u_texture:0,u_ele_delta:n,u_fog_matrix:i,u_fog_color:r?r.properties.get("fog-color"):t.aM.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:r?r.calculateFogBlendOpacity(o):0,u_horizon_color:r?r.properties.get("horizon-color"):t.aM.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1});function yt(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const i=e[n].split(" ");t.push(i.pop())}return t}class At{constructor(e,n,i,r,o,a){const s=e.gl;this.program=s.createProgram();const l=yt(n.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=ft.prelude.staticUniforms?yt(ft.prelude.staticUniforms):[],d=n.staticUniforms?yt(n.staticUniforms):[],p=i?i.getBinderUniforms():[],f=h.concat(d).concat(p),m=[];for(const t of f)m.indexOf(t)<0&&m.push(t);const g=i?i.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;"),a&&g.push("#define TERRAIN3D;");const v=g.concat(ft.prelude.fragmentSource,n.fragmentSource).join("\n"),y=g.concat(ft.prelude.vertexSource,n.vertexSource).join("\n"),A=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(A,v),s.compileShader(A),!s.getShaderParameter(A,s.COMPILE_STATUS))throw new Error("Could not compile fragment shader: ".concat(s.getShaderInfoLog(A)));s.attachShader(this.program,A);const b=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(b,y),s.compileShader(b),!s.getShaderParameter(b,s.COMPILE_STATUS))throw new Error("Could not compile vertex shader: ".concat(s.getShaderInfoLog(b)));s.attachShader(this.program,b),this.attributes={};const x={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);if(s.linkProgram(this.program),!s.getProgramParameter(this.program,s.LINK_STATUS))throw new Error("Program failed to link: ".concat(s.getProgramInfoLog(this.program)));s.deleteShader(b),s.deleteShader(A);for(let t=0;t<m.length;t++){const e=m[t];if(e&&!x[e]){const t=s.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=r(e,x),this.terrainUniforms=((e,n)=>({u_depth:new t.aH(e,n.u_depth),u_terrain:new t.aH(e,n.u_terrain),u_terrain_dim:new t.aI(e,n.u_terrain_dim),u_terrain_matrix:new t.aJ(e,n.u_terrain_matrix),u_terrain_unpack:new t.aK(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.aI(e,n.u_terrain_exaggeration)}))(e,x),this.binderUniforms=i?i.getUniforms(e,x):[]}draw(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v){const y=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(r),e.setCullFace(o),s){e.activeTexture.set(y.TEXTURE2),y.bindTexture(y.TEXTURE_2D,s.depthTexture),e.activeTexture.set(y.TEXTURE3),y.bindTexture(y.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const b in this.fixedUniforms)this.fixedUniforms[b].set(a[b]);f&&f.setUniforms(e,this.binderUniforms,d,{zoom:p});let A=0;switch(t){case y.LINES:A=2;break;case y.TRIANGLES:A=3;break;case y.LINE_STRIP:A=1}for(const b of h.get()){const n=b.vaos||(b.vaos={});(n[l]||(n[l]=new gt)).bind(e,this,c,f?f.getPaintVertexBuffers():[],u,b.vertexOffset,m,g,v),y.drawElements(t,b.primitiveLength*A,y.UNSIGNED_SHORT,b.primitiveOffset*A*2)}}}function bt(e,t,n){const i=1/Ne(n,1,t.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const xt=(e,n,i,r)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(e,t){var n=Math.sin(t),i=Math.cos(t);e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-n.transform.angle),function(e,t,n){var i=t[0],r=t[1],o=t[2];e[0]=i*n[0]+r*n[3]+o*n[6],e[1]=i*n[1]+r*n[4]+o*n[7],e[2]=i*n[2]+r*n[5]+o*n[8]}(s,s,l);const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:r}},_t=(e,n,i,r,o,a,s)=>t.e(xt(e,n,i,r),bt(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),wt=e=>({u_matrix:e}),Et=(e,n,i,r)=>t.e(wt(e),bt(i,n,r)),Ct=(e,t)=>({u_matrix:e,u_world:t}),St=(e,n,i,r,o)=>t.e(Et(e,n,i,r),{u_world:o}),Tt=(e,t,n,i)=>{const r=e.transform;let o,a;if("map"===i.paint.get("circle-pitch-alignment")){const e=Ne(n,1,r.zoom);o=!0,a=[e,e]}else o=!1,a=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},It=(e,t,n)=>({u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}),Mt=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},kt=e=>({u_matrix:e}),Rt=(e,t,n,i)=>({u_matrix:e,u_extrude_scale:Ne(t,1,n),u_intensity:i}),Lt=(e,n,i,r)=>{const o=t.H();t.aP(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_color_ramp:r,u_opacity:n.paint.get("heatmap-opacity")}};function Bt(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.Z(0,r/i).toLngLat().lat,new t.Z(0,(r+1)/i).toLngLat().lat]}const Pt=(e,t,n,i)=>{const r=e.transform;return{u_matrix:zt(e,t,n,i),u_ratio:1/Ne(t,1,r.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Dt=(e,n,i,r,o)=>t.e(Pt(e,n,i,o),{u_image:0,u_image_height:r}),Ot=(e,t,n,i,r)=>{const o=e.transform,a=Ft(t,o);return{u_matrix:zt(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Ne(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Nt=(e,n,i,r,o,a)=>{const s=e.lineAtlas,l=Ft(n,e.transform),c="round"===i.layout.get("line-cap"),u=s.getDash(r.from,c),h=s.getDash(r.to,c),d=u.width*o.fromScale,p=h.width*o.toScale;return t.e(Pt(e,n,i,a),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function Ft(e,t){return 1/Ne(e,1,t.tileZoom)}function zt(e,t,n,i){return e.translatePosMatrix(i?i.posMatrix:t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ut=(e,t,n,i,r)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:jt(r.paint.get("raster-hue-rotate"))};var o,a};function jt(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const Vt=(e,t,n,i,r,o,a,s,l,c,u,h,d,p)=>{const f=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:f.width/f.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:c,u_is_text:+h,u_pitch_with_map:+i,u_is_along_line:r,u_is_variable_anchor:o,u_texsize:d,u_texture:0,u_translation:u,u_pitched_scale:p}},Ht=(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m)=>{const g=s.transform;return t.e(Vt(e,n,i,r,o,a,s,l,c,u,h,d,p,m),{u_gamma_scale:r?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:+f})},Gt=(e,n,i,r,o,a,s,l,c,u,h,d,p,f)=>t.e(Ht(e,n,i,r,o,a,s,l,c,u,h,!0,d,!0,f),{u_texsize_icon:p,u_texture_icon:1}),Qt=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Wt=(e,n,i,r,o,a)=>t.e(function(e,t,n,i){const r=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(i.tileID.canonical.x+i.tileID.wrap*l),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Ne(i,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(r,a,i,o),{u_matrix:e,u_opacity:n}),qt={fillExtrusion:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_lightpos:new t.aN(e,n.u_lightpos),u_lightintensity:new t.aI(e,n.u_lightintensity),u_lightcolor:new t.aN(e,n.u_lightcolor),u_vertical_gradient:new t.aI(e,n.u_vertical_gradient),u_opacity:new t.aI(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_lightpos:new t.aN(e,n.u_lightpos),u_lightintensity:new t.aI(e,n.u_lightintensity),u_lightcolor:new t.aN(e,n.u_lightcolor),u_vertical_gradient:new t.aI(e,n.u_vertical_gradient),u_height_factor:new t.aI(e,n.u_height_factor),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade),u_opacity:new t.aI(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world),u_image:new t.aH(e,n.u_image),u_texsize:new t.aO(e,n.u_texsize),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_scale_with_map:new t.aH(e,n.u_scale_with_map),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_extrude_scale:new t.aO(e,n.u_extrude_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_matrix:new t.aJ(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_pixel_extrude_scale:new t.aO(e,n.u_pixel_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_inv_matrix:new t.aJ(e,n.u_inv_matrix),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_viewport_size:new t.aO(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.aL(e,n.u_color),u_matrix:new t.aJ(e,n.u_matrix),u_overlay:new t.aH(e,n.u_overlay),u_overlay_scale:new t.aI(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.aI(e,n.u_extrude_scale),u_intensity:new t.aI(e,n.u_intensity),u_matrix:new t.aJ(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_world:new t.aO(e,n.u_world),u_image:new t.aH(e,n.u_image),u_color_ramp:new t.aH(e,n.u_color_ramp),u_opacity:new t.aI(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_latrange:new t.aO(e,n.u_latrange),u_light:new t.aO(e,n.u_light),u_shadow:new t.aL(e,n.u_shadow),u_highlight:new t.aL(e,n.u_highlight),u_accent:new t.aL(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_image:new t.aH(e,n.u_image),u_dimension:new t.aO(e,n.u_dimension),u_zoom:new t.aI(e,n.u_zoom),u_unpack:new t.aK(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_image:new t.aH(e,n.u_image),u_image_height:new t.aI(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texsize:new t.aO(e,n.u_texsize),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_image:new t.aH(e,n.u_image),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_scale:new t.aN(e,n.u_scale),u_fade:new t.aI(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ratio:new t.aI(e,n.u_ratio),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,n.u_units_to_pixels),u_patternscale_a:new t.aO(e,n.u_patternscale_a),u_patternscale_b:new t.aO(e,n.u_patternscale_b),u_sdfgamma:new t.aI(e,n.u_sdfgamma),u_image:new t.aH(e,n.u_image),u_tex_y_a:new t.aI(e,n.u_tex_y_a),u_tex_y_b:new t.aI(e,n.u_tex_y_b),u_mix:new t.aI(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_tl_parent:new t.aO(e,n.u_tl_parent),u_scale_parent:new t.aI(e,n.u_scale_parent),u_buffer_scale:new t.aI(e,n.u_buffer_scale),u_fade_t:new t.aI(e,n.u_fade_t),u_opacity:new t.aI(e,n.u_opacity),u_image0:new t.aH(e,n.u_image0),u_image1:new t.aH(e,n.u_image1),u_brightness_low:new t.aI(e,n.u_brightness_low),u_brightness_high:new t.aI(e,n.u_brightness_high),u_saturation_factor:new t.aI(e,n.u_saturation_factor),u_contrast_factor:new t.aI(e,n.u_contrast_factor),u_spin_weights:new t.aN(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texture:new t.aH(e,n.u_texture),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texture:new t.aH(e,n.u_texture),u_gamma_scale:new t.aI(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_is_halo:new t.aH(e,n.u_is_halo),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.aH(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,n.u_is_size_feature_constant),u_size_t:new t.aI(e,n.u_size_t),u_size:new t.aI(e,n.u_size),u_camera_to_center_distance:new t.aI(e,n.u_camera_to_center_distance),u_pitch:new t.aI(e,n.u_pitch),u_rotate_symbol:new t.aH(e,n.u_rotate_symbol),u_aspect_ratio:new t.aI(e,n.u_aspect_ratio),u_fade_change:new t.aI(e,n.u_fade_change),u_matrix:new t.aJ(e,n.u_matrix),u_label_plane_matrix:new t.aJ(e,n.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,n.u_coord_matrix),u_is_text:new t.aH(e,n.u_is_text),u_pitch_with_map:new t.aH(e,n.u_pitch_with_map),u_is_along_line:new t.aH(e,n.u_is_along_line),u_is_variable_anchor:new t.aH(e,n.u_is_variable_anchor),u_texsize:new t.aO(e,n.u_texsize),u_texsize_icon:new t.aO(e,n.u_texsize_icon),u_texture:new t.aH(e,n.u_texture),u_texture_icon:new t.aH(e,n.u_texture_icon),u_gamma_scale:new t.aI(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,n.u_device_pixel_ratio),u_is_halo:new t.aH(e,n.u_is_halo),u_translation:new t.aO(e,n.u_translation),u_pitched_scale:new t.aI(e,n.u_pitched_scale)}),background:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_opacity:new t.aI(e,n.u_opacity),u_color:new t.aL(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_opacity:new t.aI(e,n.u_opacity),u_image:new t.aH(e,n.u_image),u_pattern_tl_a:new t.aO(e,n.u_pattern_tl_a),u_pattern_br_a:new t.aO(e,n.u_pattern_br_a),u_pattern_tl_b:new t.aO(e,n.u_pattern_tl_b),u_pattern_br_b:new t.aO(e,n.u_pattern_br_b),u_texsize:new t.aO(e,n.u_texsize),u_mix:new t.aI(e,n.u_mix),u_pattern_size_a:new t.aO(e,n.u_pattern_size_a),u_pattern_size_b:new t.aO(e,n.u_pattern_size_b),u_scale_a:new t.aI(e,n.u_scale_a),u_scale_b:new t.aI(e,n.u_scale_b),u_pixel_coord_upper:new t.aO(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aI(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texture:new t.aH(e,n.u_texture),u_ele_delta:new t.aI(e,n.u_ele_delta),u_fog_matrix:new t.aJ(e,n.u_fog_matrix),u_fog_color:new t.aL(e,n.u_fog_color),u_fog_ground_blend:new t.aI(e,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.aI(e,n.u_fog_ground_blend_opacity),u_horizon_color:new t.aL(e,n.u_horizon_color),u_horizon_fog_blend:new t.aI(e,n.u_horizon_fog_blend)}),terrainDepth:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_ele_delta:new t.aI(e,n.u_ele_delta)}),terrainCoords:(e,n)=>({u_matrix:new t.aJ(e,n.u_matrix),u_texture:new t.aH(e,n.u_texture),u_terrain_coords_id:new t.aI(e,n.u_terrain_coords_id),u_ele_delta:new t.aI(e,n.u_ele_delta)}),sky:(e,n)=>({u_sky_color:new t.aL(e,n.u_sky_color),u_horizon_color:new t.aL(e,n.u_horizon_color),u_horizon:new t.aI(e,n.u_horizon),u_sky_horizon_blend:new t.aI(e,n.u_sky_horizon_blend)})};class Xt{constructor(e,t,n){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kt{constructor(e,t,n,i){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error("Length of new data is ".concat(e.length,", which doesn't match current length of ").concat(this.length));const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=t.attributes[r.name];void 0!==o&&e.vertexAttribPointer(o,r.components,e[Yt[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jt=new WeakMap;function Zt(e){var t;if(Jt.has(e))return Jt.get(e);{const n=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Jt.set(e,n),n}}class $t{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class en extends $t{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class tn extends $t{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class nn extends $t{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class rn extends $t{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class on extends $t{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class an extends $t{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class sn extends $t{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class ln extends $t{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class cn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class un extends $t{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class hn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class dn extends $t{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class pn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class fn extends $t{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class mn extends $t{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class gn extends $t{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class vn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class yn extends $t{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class An extends $t{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class bn extends $t{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class xn extends $t{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class _n extends $t{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class wn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class En extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Cn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Sn extends $t{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Tn extends $t{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class In extends $t{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const n=this.gl;Zt(n)?n.bindVertexArray(e):null===(t=n.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Mn extends $t{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class kn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Rn extends $t{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Ln extends $t{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Bn extends Ln{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Pn extends Ln{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dn extends Ln{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class On{constructor(e,t,n,i,r){this.context=e,this.width=t,this.height=n;const o=e.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Bn(e,a),i)this.depthAttachment=r?new Dn(e,a):new Pn(e,a);else if(r)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Nn{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Nn.Replace=[1,0],Nn.disabled=new Nn(Nn.Replace,t.aM.transparent,[!1,!1,!1,!1]),Nn.unblended=new Nn(Nn.Replace,t.aM.transparent,[!0,!0,!0,!0]),Nn.alphaBlended=new Nn([1,771],t.aM.transparent,[!0,!0,!0,!0]);class Fn{constructor(e){var t,n;if(this.gl=e,this.clearColor=new en(this),this.clearDepth=new tn(this),this.clearStencil=new nn(this),this.colorMask=new rn(this),this.depthMask=new on(this),this.stencilMask=new an(this),this.stencilFunc=new sn(this),this.stencilOp=new ln(this),this.stencilTest=new cn(this),this.depthRange=new un(this),this.depthTest=new hn(this),this.depthFunc=new dn(this),this.blend=new pn(this),this.blendFunc=new fn(this),this.blendColor=new mn(this),this.blendEquation=new gn(this),this.cullFace=new vn(this),this.cullFaceSide=new yn(this),this.frontFace=new An(this),this.program=new bn(this),this.activeTexture=new xn(this),this.viewport=new _n(this),this.bindFramebuffer=new wn(this),this.bindRenderbuffer=new En(this),this.bindTexture=new Cn(this),this.bindVertexBuffer=new Sn(this),this.bindElementBuffer=new Tn(this),this.bindVertexArray=new In(this),this.pixelStoreUnpack=new Mn(this),this.pixelStoreUnpackPremultiplyAlpha=new kn(this),this.pixelStoreUnpackFlipY=new Rn(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Zt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const i=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(n=e.RGB16F)&&void 0!==n?n:null==i?void 0:i.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Xt(this,e,t)}createVertexBuffer(e,t,n){return new Kt(this,e,t,n)}createRenderbuffer(e,t,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,n,i){return new On(this,e,t,n,i)}clear(e){let{color:t,depth:n,stencil:i}=e;const r=this.gl;let o=0;t&&(o|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(o|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(o)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.aE(e.blendFunction,Nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Zt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Zt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class zn{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}zn.ReadOnly=!1,zn.ReadWrite=!0,zn.disabled=new zn(519,zn.ReadOnly,[0,1]);const Un=7680;class jn{constructor(e,t,n,i,r,o){this.test=e,this.ref=t,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}jn.disabled=new jn({func:519,mask:0},0,0,Un,Un,Un);class Vn{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}let Hn;function Gn(e,n,i,r,o){const a=e.context,s=a.gl,l=e.useProgram("collisionBox"),c=[];let u=0,h=0;for(let y=0;y<r.length;y++){const p=r[y],f=n.getTile(p).getBucket(i);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;if(g.length>0){const n=t.H();t.aQ(n,f.placementInvProjMatrix,e.transform.glCoordMatrix),t.aQ(n,n,f.placementViewportMatrix),c.push({circleArray:g,circleOffset:h,transform:p.posMatrix,invTransform:n,coord:p}),u+=g.length/4,h=u}m&&l.draw(a,s.LINES,zn.disabled,jn.disabled,e.colorModeForRenderPass(),Vn.disabled,{u_matrix:p.posMatrix,u_pixel_extrude_scale:[1/(d=e.transform).width,1/d.height]},e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}var d;if(!o||!c.length)return;const p=e.useProgram("collisionCircle"),f=new t.aR;f.resize(4*u),f._trim();let m=0;for(const t of c)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];f.emplace(m++,i,r,o,a,0),f.emplace(m++,i,r,o,a,1),f.emplace(m++,i,r,o,a,2),f.emplace(m++,i,r,o,a,3)}(!Hn||Hn.length<2*u)&&(Hn=function(e){const n=2*e,i=new t.aT;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(u));const g=a.createIndexBuffer(Hn,!0),v=a.createVertexBuffer(f,t.aS.members,!0);for(const y of c){const n=It(y.transform,y.invTransform,e.transform);p.draw(a,s.TRIANGLES,zn.disabled,jn.disabled,e.colorModeForRenderPass(),Vn.disabled,n,e.style.map.terrain&&e.style.map.terrain.getTerrainData(y.coord),i.id,v,g,t.a0.simpleSegment(0,2*y.circleOffset,y.circleArray.length,y.circleArray.length/2),null,e.transform.zoom,null,null,null)}v.destroy(),g.destroy()}Vn.disabled=new Vn(!1,1029,2305),Vn.backCCW=new Vn(!0,1029,2305);const Qn=t.an(new Float32Array(16));function Wn(e,n,i,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.au(e);return new t.P((-(s-.5)*n/o+r[0])*a,(-(l-.5)*i/o+r[1])*a)}function qn(e,n,i,r,o,a){const s=n.tileAnchorPoint.add(new t.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let e=r.mult(a);i||(e=e.rotate(-o));const t=s.add(e);return Ae(t.x,t.y,n.labelPlaneMatrix,n.getElevation).point}if(i){const t=Ie(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(e),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(r.rotate(i))}return e.add(r)}function Xn(e,n,i,r,o,a,s,l,c,u,h,d,p,f){const m=e.text.placedSymbolArray,g=e.text.dynamicLayoutVertexArray,v=e.icon.dynamicLayoutVertexArray,y={};g.clear();for(let A=0;A<m.length;A++){const v=m.get(A),b=v.hidden||!v.crossTileID||e.allowVerticalPlacement&&!v.placedOrientation?null:r[v.crossTileID];if(b){const r=new t.P(v.anchorX,v.anchorY),m={getElevation:f,width:o.width,height:o.height,labelPlaneMatrix:a,lineVertexArray:null,pitchWithMap:i,projection:h,projectionCache:null,tileAnchorPoint:r,translation:d,unwrappedTileID:p},A=i?Ae(r.x,r.y,s,f):Ie(r.x,r.y,m),x=be(o.cameraToCenterDistance,A.signedDistanceFromCamera);let _=t.ai(e.textSizeData,c,v)*x/t.ap;i&&(_*=e.tilePixelRatio/l);const{width:w,height:E,anchor:C,textOffset:S,textBoxScale:T}=b,I=Wn(C,w,E,S,T,_),M=h.getPitchedTextCorrection(o,r.add(new t.P(d[0],d[1])),p),k=qn(A.point,m,n,I,o.angle,M),R=e.allowVerticalPlacement&&v.placedOrientation===t.ah.vertical?Math.PI/2:0;for(let e=0;e<v.numGlyphs;e++)t.aj(g,k,R);u&&v.associatedIconIndex>=0&&(y[v.associatedIconIndex]={shiftedAnchor:k,angle:R})}else Be(v.numGlyphs,g)}if(u){v.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)Be(i.numGlyphs,v);else{const n=y[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.aj(v,n.shiftedAnchor,n.angle);else Be(i.numGlyphs,v)}}e.icon.dynamicLayoutVertexBuffer.updateData(v)}e.text.dynamicLayoutVertexBuffer.updateData(g)}function Yn(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Kn(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g=nt(),v="map"===l,y="map"===c,A="viewport"!==l&&"point"!==i.layout.get("symbol-placement"),b=v&&!y&&!A,x=!y&&A,_=!i.layout.get("symbol-sort-key").isConstant();let w=!1;const E=e.depthModeForSublayer(0,zn.ReadOnly),C=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),S=[],T=g.getCircleRadiusCorrection(m);for(const I of r){const r=n.getTile(I),l=r.getBucket(i);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(i.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,E=y||0!==m.pitch,M=e.useProgram(Yn(d,o,l),h),k=t.ag(p,m.zoom),R=e.style.map.terrain&&e.style.map.terrain.getTerrainData(I);let L,B,P,D,O=[0,0],N=null;if(o)B=r.glyphAtlasTexture,P=f.LINEAR,L=r.glyphAtlasTexture.size,l.iconsInText&&(O=r.imageAtlasTexture.size,N=r.imageAtlasTexture,D=E||e.options.rotating||e.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;B=r.imageAtlasTexture,P=d||e.options.rotating||e.options.zooming||t||E?f.LINEAR:f.NEAREST,L=r.imageAtlasTexture.size}const F=Ne(r,1,e.transform.zoom),z=x?I.posMatrix:Qn,U=ve(z,y,v,e.transform,F),j=ye(z,y,v,e.transform,F),V=ye(I.posMatrix,y,v,e.transform,F),H=g.translatePosition(e.transform,r,a,s),G=C&&l.hasTextData(),Q="none"!==i.layout.get("icon-text-fit")&&G&&l.hasIconData();if(A){const t=e.style.map.terrain?(t,n)=>e.style.map.terrain.getElevation(I,t,n):null,n="map"===i.layout.get("text-rotation-alignment");_e(l,I.posMatrix,e,o,U,V,y,u,n,g,I.toUnwrapped(),m.width,m.height,H,t)}const W=I.posMatrix,q=o&&C||Q,X=A||q?Qn:U,Y=j,K=d&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let J;J=d?l.iconsInText?Gt(p.kind,k,b,y,A,q,e,W,X,Y,H,L,O,T):Ht(p.kind,k,b,y,A,q,e,W,X,Y,H,o,L,!0,T):Vt(p.kind,k,b,y,A,q,e,W,X,Y,H,o,L,T);const Z={program:M,buffers:c,uniformValues:J,atlasTexture:B,atlasTextureIcon:N,atlasInterpolation:P,atlasInterpolationIcon:D,isSDF:d,hasHalo:K};if(_&&l.canOverlap){w=!0;const e=c.segments.get();for(const n of e)S.push({segments:new t.a0([n]),sortKey:n.sortKey,state:Z,terrainData:R})}else S.push({segments:c.segments,sortKey:0,state:Z,terrainData:R})}w&&S.sort((e,t)=>e.sortKey-t.sortKey);for(const t of S){const n=t.state;if(p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,Jn(n.buffers,t.segments,i,e,n.program,E,h,d,r,t.terrainData)),r.u_is_halo=0}Jn(n.buffers,t.segments,i,e,n.program,E,h,d,n.uniformValues,t.terrainData)}}function Jn(e,t,n,i,r,o,a,s,l,c){const u=i.context;r.draw(u,u.gl.TRIANGLES,o,a,s,Vn.disabled,l,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,i.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Zn(e,n,i,r){const o=e.context,a=o.gl,s=jn.disabled,l=new Nn([a.ONE,a.ONE],t.aM.transparent,[!0,!0,!0,!0]),c=n.getBucket(i);if(!c)return;const u=r.key;let h=i.heatmapFbos.get(u);h||(h=ei(o,n.tileSize,n.tileSize),i.heatmapFbos.set(u,h)),o.bindFramebuffer.set(h.framebuffer),o.viewport.set([0,0,n.tileSize,n.tileSize]),o.clear({color:t.aM.transparent});const d=c.programConfigurations.get(i.id),p=e.useProgram("heatmap",d),f=e.style.map.terrain.getTerrainData(r);p.draw(o,a.TRIANGLES,zn.disabled,s,l,Vn.disabled,Rt(r.posMatrix,n,e.transform.zoom,i.paint.get("heatmap-intensity")),f,i.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,i.paint,e.transform.zoom,d)}function $n(e,t,n){const i=e.context,r=i.gl;i.setColorMode(e.colorModeForRenderPass());const o=ti(i,t),a=n.key,s=t.heatmapFbos.get(a);s&&(i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,zn.disabled,jn.disabled,e.colorModeForRenderPass(),Vn.disabled,Lt(e,t,0,1),null,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,e.transform.zoom),s.destroy(),t.heatmapFbos.delete(a))}function ei(e,t,n){var i,r;const o=e.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);const s=null!==(i=e.HALF_FLOAT)&&void 0!==i?i:o.UNSIGNED_BYTE,l=null!==(r=e.RGBA16F)&&void 0!==r?r:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t,n,0,o.RGBA,s,null);const c=e.createFramebuffer(t,n,!1,!1);return c.colorAttachment.set(a),c}function ti(e,t){return t.colorRampTexture||(t.colorRampTexture=new x(e,t.colorRamp,e.gl.RGBA)),t.colorRampTexture}function ni(e,t,n,i,r){if(!n||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let a=o[n.to.toString()],s=o[n.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){const e=r.getPaintProperty(t);a=o[e],s=o[e]}a&&s&&e.setConstantPatternPositions(a,s)}function ii(e,t,n,i,r,o,a){const s=e.context.gl,l="fill-pattern",c=n.paint.get(l),u=c&&c.constantOr(1),h=n.getCrossfadeParameters();let d,p,f,m,g;a?(p=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=s.LINES):(p=u?"fillPattern":"fill",d=s.TRIANGLES);const v=c.constantOr(null);for(const y of i){const i=t.getTile(y);if(u&&!i.patternsLoaded())continue;const c=i.getBucket(n);if(!c)continue;const A=c.programConfigurations.get(n.id),b=e.useProgram(p,A),x=e.style.map.terrain&&e.style.map.terrain.getTerrainData(y);u&&(e.context.activeTexture.set(s.TEXTURE0),i.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),A.updatePaintBuffers(h)),ni(A,l,v,i,n);const _=x?y:null,w=e.translatePosMatrix(_?_.posMatrix:y.posMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){m=c.indexBuffer2,g=c.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];f="fillOutlinePattern"===p&&u?St(w,e,h,i,t):Ct(w,t)}else m=c.indexBuffer,g=c.segments,f=u?Et(w,e,h,i):wt(w);b.draw(e.context,d,r,e.stencilModeForClipping(y),o,Vn.disabled,f,x,n.id,c.layoutVertexBuffer,m,g,n.paint,e.transform.zoom,A)}}function ri(e,t,n,i,r,o,a){const s=e.context,l=s.gl,c="fill-extrusion-pattern",u=n.paint.get(c),h=u.constantOr(1),d=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),f=u.constantOr(null);for(const m of i){const i=t.getTile(m),u=i.getBucket(n);if(!u)continue;const g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(m),v=u.programConfigurations.get(n.id),y=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",v);h&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(d)),ni(v,c,f,i,n);const A=e.translatePosMatrix(m.posMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),b=n.paint.get("fill-extrusion-vertical-gradient"),x=h?_t(A,e,b,p,m,d,i):xt(A,e,b,p);y.draw(s,s.gl.TRIANGLES,r,o,a,Vn.backCCW,x,g,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,n.paint,e.transform.zoom,v,e.style.map.terrain&&u.centroidVertexBuffer)}}function oi(e,t,n,i,r,o,a){const s=e.context,l=s.gl,c=n.fbo;if(!c)return;const u=e.useProgram("hillshade"),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,r,o,a,Vn.disabled,((e,t,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:i?i.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Bt(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,n,i,h?t:null),h,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function ai(e,n,i,r,o,a){const s=e.context,l=s.gl,c=n.dem;if(c&&c.data){const u=c.dim,h=c.stride,d=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){const e=n.demTexture;e.update(d,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new x(s,d,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let p=n.fbo;if(!p){const e=new x(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=n.fbo=s.createFramebuffer(u,u,!0,!1),p.colorAttachment.set(e.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,Vn.disabled,((e,n)=>{const i=n.stride,r=t.H();return t.aP(r,0,t.X,-t.X,0,0,1),t.J(r,r,[0,-t.X,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,c),null,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function si(e,n,i,r,a,s){const l=r.paint.get("raster-fade-duration");if(!s&&l>0){const r=o.now(),s=(r-e.timeAdded)/l,c=n?(r-n.timeAdded)/l:-1,u=i.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.ac(d?s:1-c,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const li=new t.aM(1,0,0,1),ci=new t.aM(0,1,0,1),ui=new t.aM(0,0,1,1),hi=new t.aM(1,0,1,1),di=new t.aM(0,1,1,1);function pi(e,t,n,i){mi(e,0,t+n/2,e.transform.width,n,i)}function fi(e,t,n,i){mi(e,t-n/2,0,n,e.transform.height,i)}function mi(e,t,n,i,r,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,n*e.pixelRatio,i*e.pixelRatio,r*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function gi(e,n,i){const r=e.context,o=r.gl,a=i.posMatrix,s=e.useProgram("debug"),l=zn.disabled,c=jn.disabled,u=e.colorModeForRenderPass(),h="$debug",d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i);r.activeTexture.set(o.TEXTURE0);const p=n.getTileByID(i.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(i).tileSize,g=512/Math.min(m,512)*(i.overscaledZ/e.transform.zoom)*.5;let v=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(v+=" => ".concat(i.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,"".concat(v," ").concat(f,"kB")),s.draw(r,o.TRIANGLES,l,c,Nn.alphaBlended,Vn.disabled,Mt(a,t.aM.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(r,o.LINE_STRIP,l,c,u,Vn.disabled,Mt(a,t.aM.red),d,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function vi(e,t,n){const i=e.context,r=i.gl,o=e.colorModeForRenderPass(),a=new zn(r.LEQUAL,zn.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh();i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]);for(const c of n){const n=e.renderToTexture.getTexture(c),u=t.getTerrainData(c.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture);const h=e.transform.calculatePosMatrix(c.tileID.toUnwrapped()),d=t.getMeshFrameDelta(e.transform.zoom),p=e.transform.calculateFogMatrix(c.tileID.toUnwrapped()),f=vt(h,d,p,e.style.sky,e.transform.pitch);s.draw(i,r.TRIANGLES,a,jn.disabled,o,Vn.backCCW,f,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class yi{constructor(e,t,n){this.vertexBuffer=e,this.indexBuffer=t,this.segments=n}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ai{constructor(e,n){this.context=new Fn(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=he.maxUnderzooming+he.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ct}resize(e,t,n){if(this.width=Math.floor(e*n),this.height=Math.floor(t*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const i of this.style._order)this.style._layers[i].resize()}setup(){const e=this.context,n=new t.aX;n.emplaceBack(0,0),n.emplaceBack(t.X,0),n.emplaceBack(0,t.X),n.emplaceBack(t.X,t.X),this.tileExtentBuffer=e.createVertexBuffer(n,pt.members),this.tileExtentSegments=t.a0.simpleSegment(0,0,4,2);const i=new t.aX;i.emplaceBack(0,0),i.emplaceBack(t.X,0),i.emplaceBack(0,t.X),i.emplaceBack(t.X,t.X),this.debugBuffer=e.createVertexBuffer(i,pt.members),this.debugSegments=t.a0.simpleSegment(0,0,4,5);const r=new t.$;r.emplaceBack(0,0,0,0),r.emplaceBack(t.X,0,t.X,0),r.emplaceBack(0,t.X,0,t.X),r.emplaceBack(t.X,t.X,t.X,t.X),this.rasterBoundsBuffer=e.createVertexBuffer(r,Z.members),this.rasterBoundsSegments=t.a0.simpleSegment(0,0,4,2);const o=new t.aX;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,pt.members),this.viewportSegments=t.a0.simpleSegment(0,0,4,2);const a=new t.aZ;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.aY;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const l=this.context.gl;this.stencilClearMode=new jn({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=t.H();t.aP(i,0,this.width,this.height,0,0,1),t.K(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,zn.disabled,this.stencilClearMode,Nn.disabled,Vn.disabled,kt(i),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const n=this.context,i=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(Nn.disabled),n.setDepthMode(zn.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of t){const e=this._tileClippingMaskIDs[o.key]=this.nextStencilID++,t=this.style.map.terrain&&this.style.map.terrain.getTerrainData(o);r.draw(n,i.TRIANGLES,zn.disabled,new jn({func:i.ALWAYS,mask:0},e,255,i.KEEP,i.KEEP,i.REPLACE),Nn.disabled,Vn.disabled,kt(o.posMatrix),t,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new jn({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new jn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),i=n[n.length-1].overscaledZ,r=n[0].overscaledZ-i+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const e={};for(let n=0;n<r;n++)e[n+i]=new jn({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[e,n]}return[{[i]:jn.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new Nn([e.CONSTANT_COLOR,e.ONE],new t.aM(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Nn.unblended:Nn.alphaBlended}depthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return zn.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new zn(n||this.context.gl.LEQUAL,t,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const i=this.style._order,r=this.style.sourceCaches,a={},s={},l={};for(const t in r){const e=r[t];e.used&&e.prepare(this.context),a[t]=e.getVisibleCoordinates(),s[t]=a[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of i){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=s[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,r[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.aM.black:t.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,n){const i=e.context,r=i.gl,o=((e,t,n)=>({u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:(t.height/2+t.getHorizon())*n,u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*n}))(n,e.style.map.transform,e.pixelRatio),a=new zn(r.LEQUAL,zn.ReadWrite,[0,1]),s=jn.disabled,l=e.colorModeForRenderPass(),c=e.useProgram("sky");if(!n.mesh){const e=new t.aX;e.emplaceBack(-1,-1),e.emplaceBack(1,-1),e.emplaceBack(1,1),e.emplaceBack(-1,1);const r=new t.aY;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),n.mesh=new yi(i.createVertexBuffer(e,pt.members),i.createIndexBuffer(r),t.a0.simpleSegment(0,0,e.length,r.length))}c.draw(i,r.TRIANGLES,a,s,l,Vn.disabled,o,void 0,"sky",n.mesh.vertexBuffer,n.mesh.indexBuffer,n.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[i[this.currentLayer]],t=r[e.source],n=a[e.source];this._renderTileClippingMasks(e,n),this.renderLayer(this,t,e,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const e=this.style._layers[i[this.currentLayer]],t=r[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const n=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,a[e.source]),this.renderLayer(this,t,e,n)}if(this.options.showTileBoundaries){const e=function(e,t){let n=null;const i=Object.values(e._layers).flatMap(n=>n.source&&!n.isHidden(t)?[e.sourceCaches[n.source]]:[]),r=i.filter(e=>"vector"===e.getSource().type),o=i.filter(e=>"vector"!==e.getSource().type),a=e=>{(!n||n.getSource().maxzoom<e.getSource().maxzoom)&&(n=e)};return r.forEach(e=>a(e)),n||o.forEach(e=>a(e)),n}(this.style,this.transform.zoom);e&&function(e,t,n){for(let i=0;i<n.length;i++)gi(e,t,n[i])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;pi(e,e.transform.height-(t.top||0),3,li),pi(e,t.bottom||0,3,ci),fi(e,t.left||0,3,ui),fi(e,e.transform.width-(t.right||0),3,hi);const n=e.transform.centerPoint;!function(e,t,n,i){mi(e,t-1,n-10,2,20,i),mi(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,di)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,i=this.transform.modelViewProjectionMatrix;let r=this.terrainFacilitator.dirty;r||(r=e?!t.a_(n,i):!t.a$(n,i)),r||(r=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),r&&(t.b0(n,i),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const i=e.context,r=i.gl,o=Nn.unblended,a=new zn(r.LEQUAL,zn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");i.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1});for(const t of l){const l=n.getTerrainData(t.tileID),u={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};c.draw(i,r.TRIANGLES,a,jn.disabled,o,Vn.backCCW,u,l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){const i=e.context,r=i.gl,o=Nn.unblended,a=new zn(r.LEQUAL,zn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");i.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const c=n.getTerrainData(t.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture);const h={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};u.draw(i,r.TRIANGLES,a,jn.disabled,o,Vn.backCCW,h,c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(t.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,n,i,r){if(!i.isHidden(this.transform.zoom)&&("background"===i.type||"custom"===i.type||(r||[]).length))switch(this.id=i.id,i.type){case"symbol":!function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const a=jn.disabled,s=e.colorModeForRenderPass();(i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,i,r,o,a,s,l,c){const u=n.transform,h=nt(),d="map"===o,p="map"===a;for(const f of e){const e=r.getTile(f),o=e.getBucket(i);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.ag(o.textSizeData,u.zoom),m=Ne(e,1,n.transform.zoom),g=ve(f.posMatrix,p,d,n.transform,m),v="none"!==i.layout.get("icon-text-fit")&&o.hasIconData();if(a){const t=Math.pow(2,u.zoom-e.tileID.overscaledZ),i=n.style.map.terrain?(e,t)=>n.style.map.terrain.getElevation(f,e,t):null,r=h.translatePosition(u,e,s,l);Xn(o,d,p,c,u,g,f.posMatrix,t,a,v,h,r,f.toUnwrapped(),i)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&Kn(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&Kn(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Gn(e,n,i,r,!0),Gn(e,n,i,r,!1))}(e,n,i,r,this.style.placement.variableOffsets);break;case"circle":!function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=!i.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,zn.ReadOnly),d=jn.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<r.length;m++){const o=r[m],a=n.getTile(o),s=a.getBucket(i);if(!s)continue;const c=s.programConfigurations.get(i.id),u=e.useProgram("circle",c),h=s.layoutVertexBuffer,d=s.indexBuffer,p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),g={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:d,uniformValues:Tt(e,o,a,i),terrainData:p};if(l){const e=s.segments.get();for(const n of e)f.push({segments:new t.a0([n]),sortKey:n.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort((e,t)=>e.sortKey-t.sortKey);for(const t of f){const{programConfiguration:n,program:r,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=t.state;r.draw(c,u.TRIANGLES,h,d,p,Vn.disabled,s,l,i.id,o,a,t.segments,i.paint,e.transform.zoom,n)}}(e,n,i,r);break;case"heatmap":!function(e,n,i,r){if(0===i.paint.get("heatmap-opacity"))return;const o=e.context;if(e.style.map.terrain){for(const t of r){const r=n.getTile(t);n.hasRenderableParent(t)||("offscreen"===e.renderPass?Zn(e,r,i,t):"translucent"===e.renderPass&&$n(e,i,t))}o.viewport.set([0,0,e.width,e.height])}else"offscreen"===e.renderPass?function(e,n,i,r){const o=e.context,a=o.gl,s=jn.disabled,l=new Nn([a.ONE,a.ONE],t.aM.transparent,[!0,!0,!0,!0]);(function(e,n,i){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,n.width/4,n.height/4]);let o=i.heatmapFbos.get(t.aU);o?(r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(o=ei(e,n.width/4,n.height/4),i.heatmapFbos.set(t.aU,o))})(o,e,i),o.clear({color:t.aM.transparent});for(let t=0;t<r.length;t++){const c=r[t];if(n.hasRenderableParent(c))continue;const u=n.getTile(c),h=u.getBucket(i);if(!h)continue;const d=h.programConfigurations.get(i.id),p=e.useProgram("heatmap",d),{zoom:f}=e.transform;p.draw(o,a.TRIANGLES,zn.disabled,s,l,Vn.disabled,Rt(c.posMatrix,u,f,i.paint.get("heatmap-intensity")),null,i.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,i.paint,e.transform.zoom,d)}o.viewport.set([0,0,e.width,e.height])}(e,n,i,r):"translucent"===e.renderPass&&function(e,n){const i=e.context,r=i.gl;i.setColorMode(e.colorModeForRenderPass());const o=n.heatmapFbos.get(t.aU);o&&(i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1),ti(i,n).bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,zn.disabled,jn.disabled,e.colorModeForRenderPass(),Vn.disabled,Lt(e,n,0,1),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom))}(e,i)}(e,n,i,r);break;case"line":!function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,zn.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),u=i.paint.get("line-pattern"),h=u.constantOr(1),d=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),f=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=e.context,g=m.gl;let v=!0;for(const y of r){const r=n.getTile(y);if(h&&!r.patternsLoaded())continue;const o=r.getBucket(i);if(!o)continue;const a=o.programConfigurations.get(i.id),A=e.context.program.get(),b=e.useProgram(f,a),_=v||b.program!==A,w=e.style.map.terrain&&e.style.map.terrain.getTerrainData(y),E=u.constantOr(null);if(E&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[E.to.toString()],n=e.patternPositions[E.from.toString()];t&&n&&a.setConstantPatternPositions(t,n)}const C=w?y:null,S=h?Ot(e,r,i,p,C):c?Nt(e,r,i,c,p,C):d?Dt(e,r,i,o.lineClipsArray.length,C):Pt(e,r,i,C);if(h)m.activeTexture.set(g.TEXTURE0),r.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),a.updatePaintBuffers(p);else if(c&&(_||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(d){const r=o.gradients[i.id];let a=r.texture;if(i.gradientVersion!==r.version){let s=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=y.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-y.canonical.z):1;s=t.ac(t.aV(o.maxLineLength/t.X*1024*r),256,m.maxTextureSize)}r.gradient=t.aW({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:r.gradient||void 0,clips:o.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new x(m,r.gradient,g.RGBA),r.version=i.gradientVersion,a=r.texture}m.activeTexture.set(g.TEXTURE0),a.bind(i.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}b.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(y),l,Vn.disabled,S,w,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,i.paint,e.transform.zoom,a,o.layoutVertexBuffer2),v=!1}}(e,n,i,r);break;case"fill":!function(e,n,i,r){const o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.aM.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?zn.ReadWrite:zn.ReadOnly);ii(e,n,i,r,t,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const t=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,zn.ReadOnly);ii(e,n,i,r,t,s,!0)}}(e,n,i,r);break;case"fill-extrusion":!function(e,t,n,i){const r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===e.renderPass){const o=new zn(e.context.gl.LEQUAL,zn.ReadWrite,e.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))ri(e,t,n,i,o,jn.disabled,Nn.disabled),ri(e,t,n,i,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const r=e.colorModeForRenderPass();ri(e,t,n,i,o,jn.disabled,r)}}}(e,n,i,r);break;case"hillshade":!function(e,t,n,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const r=e.context,o=e.depthModeForSublayer(0,zn.ReadOnly),a=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(i):[{},i];for(const c of l){const i=t.getTile(c);void 0!==i.needsHillshadePrepare&&i.needsHillshadePrepare&&"offscreen"===e.renderPass?ai(e,i,n,o,jn.disabled,a):"translucent"===e.renderPass&&oi(e,c,i,n,o,s[c.overscaledZ],a)}r.viewport.set([0,0,e.width,e.height])}(e,n,i,r);break;case"raster":!function(e,t,n,i){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const r=e.context,o=r.gl,a=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=a instanceof $?[{},i]:e.stencilConfigForOverlap(i),h=u[u.length-1].overscaledZ,d=!e.options.moving;for(const p of u){const i=e.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?zn.ReadWrite:zn.ReadOnly,o.LESS),u=t.getTile(p);u.registerFadeDuration(n.paint.get("raster-fade-duration"));const f=t.findLoadedParent(p,0),m=t.findLoadedSibling(p),g=si(u,f||m||null,t,n,e.transform,e.style.map.terrain);let v,y;const A="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),u.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),v=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),y=[u.tileID.canonical.x*v%1,u.tileID.canonical.y*v%1]):u.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),u.texture.useMipmap&&r.extTextureFilterAnisotropic&&e.transform.pitch>20&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax);const b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),x=b?p:null,_=x?x.posMatrix:e.transform.calculatePosMatrix(p.toUnwrapped(),d),w=Ut(_,y||[0,0],v||1,g,n);a instanceof $?s.draw(r,o.TRIANGLES,i,jn.disabled,l,Vn.disabled,w,b,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,i,c[p.overscaledZ],l,Vn.disabled,w,b,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}(e,n,i,r);break;case"background":!function(e,t,n,i){const r=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const a=e.context,s=a.gl,l=e.transform,c=l.tileSize,u=n.paint.get("background-pattern");if(e.isPatternMissing(u))return;const h=!u&&1===r.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==h)return;const d=jn.disabled,p=e.depthModeForSublayer(0,"opaque"===h?zn.ReadWrite:zn.ReadOnly),f=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=i||l.coveringTiles({tileSize:c,terrain:e.style.map.terrain});u&&(a.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const v=n.getCrossfadeParameters();for(const y of g){const t=i?y.posMatrix:e.transform.calculatePosMatrix(y.toUnwrapped()),l=u?Wt(t,o,e,u,{tileID:y,tileSize:c},v):Qt(t,o,r),h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(y);m.draw(a,s.TRIANGLES,p,d,f,Vn.disabled,l,h,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}(e,0,i,r);break;case"custom":!function(e,t,n){const i=e.context,r=n.implementation;if("offscreen"===e.renderPass){const t=r.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(r,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(jn.disabled);const t="3d"===r.renderingMode?new zn(e.context.gl.LEQUAL,zn.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,zn.ReadOnly);i.setDepthMode(t),r.render(i.gl,e.transform.customLayerMatrix(),{farZ:e.transform.farZ,nearZ:e.transform.nearZ,fov:e.transform._fov,modelViewProjectionMatrix:e.transform.modelViewProjectionMatrix,projectionMatrix:e.transform.projectionMatrix}),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}(e,0,i)}}translatePosMatrix(e,n,i,r,o){if(!i[0]&&!i[1])return e;const a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}const s=[o?i[0]:Ne(n,i[0],this.transform.zoom),o?i[1]:Ne(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.J(l,e,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t){this.cache=this.cache||{};const n=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new At(this.context,ft[e],t,qt[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new x(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}class bi{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,n,i){const r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{const o=1/(i=t.af([],i,e))[3]/n*r;return t.b1(i,i,[o,o,1/i[3],o])}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}([],function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*a-i*l,e[2]=i*s-r*a,e}([],v([],o[e[0]],o[e[1]]),v([],o[e[2]],o[e[1]]))),n=-((i=t)[0]*(r=o[e[1]])[0]+i[1]*r[1]+i[2]*r[2]);var i,r;return t.concat(n)});return new bi(o,a)}}class xi{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],n=m(this.min),i=m(this.max);for(let r=0;r<t.length;r++)n[r]=t[r]?this.min[r]:this.center[r],i[r]=t[r]?this.center[r]:this.max[r];return i[2]=this.max[2],new xi(n,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let r=0;r<e.planes.length;r++){const o=e.planes[r];let a=0;for(let e=0;e<n.length;e++)t.b2(o,n[e])>=0&&a++;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const o=e.points[r][t]-this.min[t];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[t]-this.min[t])return 0}return 1}}class _i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.y.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.y.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.y.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.y.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.ac((this.left+e-this.right)/2,0,e),r=t.ac((this.top+n-this.bottom)/2,0,n);return new t.P(i,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new _i(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const wi=85.051129;class Ei{constructor(e,n,i,r,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _i,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Ei(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.b3(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+o*s,e[1]=r*l+a*s,e[2]=i*-s+o*l,e[3]=r*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const n=[new t.b4(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.P(0,0)),r=this.pointCoordinate(new t.P(this.width,0)),o=this.pointCoordinate(new t.P(this.width,this.height)),a=this.pointCoordinate(new t.P(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.b4(u,e))}return n}coveringTiles(e){var n,i;let r=this.coveringZoomLevel(e);const o=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=t.Z.fromLngLat(this.center),l=Math.pow(2,r),c=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],h=bi.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,r);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=r);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=e=>({aabb:new xi([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],v=r,A=e.reparseOverscaled?o:r;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const r=m.pop(),o=r.x,a=r.y;let s=r.fullyVisible;if(!s){const e=r.aabb.intersects(h);if(0===e)continue;s=2===e}const l=e.terrain?c:u,f=r.aabb.distanceX(l),b=r.aabb.distanceY(l),x=Math.max(Math.abs(f),Math.abs(b));if(r.zoom===v||x>p+(1<<v-r.zoom)-2&&r.zoom>=d){const e=v-r.zoom,n=c[0]-.5-(o<<e),i=c[1]-.5-(a<<e);g.push({tileID:new t.S(r.zoom===v?A:r.zoom,r.wrap,r.zoom,o,a),distanceSq:y([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(n*n+i*i)})}else for(let c=0;c<4;c++){const l=(o<<1)+c%2,u=(a<<1)+(c>>1),h=r.zoom+1;let d=r.aabb.quadrant(c);if(e.terrain){const o=new t.S(h,r.wrap,h,l,u),a=e.terrain.getMinMaxElevation(o),s=null!==(n=a.minElevation)&&void 0!==n?n:this.elevation,c=null!==(i=a.maxElevation)&&void 0!==i?i:this.elevation;d=new xi([d.min[0],d.min[1],s],[d.max[0],d.max[1],c])}m.push({aabb:d,zoom:h,x:l,y:u,wrap:r.wrap,fullyVisible:s})}}return g.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const n=t.ac(e.lat,-85.051129,wi);return new t.P(t.O(e.lng)*this.worldSize,t.Q(n)*this.worldSize)}unproject(e){return new t.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const n=this.elevation,i=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,r=this.pointLocation(this.centerPoint,e),o=e.getElevationForLngLatZoom(r,this.tileZoom);if(!(this.elevation-o))return;const a=i+n-o,s=Math.cos(this._pitch)*this.cameraToCenterDistance/a/t.b5(1,r.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=o,this._center=r,this.zoom=l}setLocationAtPoint(e,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.Z(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),t.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return t.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(null!=t)return t}const i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.af(i,i,this.pixelMatrixInverse),t.af(r,r,this.pixelMatrixInverse);const o=i[3],a=r[3],s=i[1]/o,l=r[1]/a,c=i[2]/o,u=r[2]/a,h=c===u?0:(0-c)/(u-c);return new t.Z(t.y.number(i[0]/o,r[0]/a,h)/this.worldSize,t.y.number(s,l,h)/this.worldSize)}coordinatePoint(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const r=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.af(r,r,i),new t.P(r[0]/r[3],r[1]/r[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new W).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new W([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,wi])}calculateTileMatrix(e){const n=e.canonical,i=this.worldSize/this.zoomScale(n.z),r=n.x+Math.pow(2,n.z)*e.wrap,o=t.an(new Float64Array(16));return t.J(o,o,[r*i,n.y*i,0]),t.K(o,o,[i/t.X,i/t.X,1]),o}calculatePosMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];const o=this.calculateTileMatrix(e);return t.L(o,n?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,o),r[i]=new Float32Array(o),r[i]}calculateFogMatrix(e){const n=e.key,i=this._fogMatrixCache;if(i[n])return i[n];const r=this.calculateTileMatrix(e);return t.L(r,this.fogMatrix,r),i[n]=new Float32Array(r),i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,n){n=t.ac(+n,this.minZoom,this.maxZoom);const i={center:new t.N(e.lng,e.lat),zoom:n};let r=this.lngRange;if(!this._renderWorldCopies&&null===r){const e=180-1e-10;r=[-e,e]}const o=this.tileSize*this.zoomScale(i.zoom);let a=0,s=o,l=0,c=o,u=0,h=0;const{x:d,y:p}=this.size;if(this.latRange){const e=this.latRange;a=t.Q(e[1])*o,s=t.Q(e[0])*o,s-a<p&&(u=p/(s-a))}r&&(l=t.b3(t.O(r[0])*o,0,o),c=t.b3(t.O(r[1])*o,0,o),c<l&&(c+=o),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=this.project.call({worldSize:o},e);let g,v;const y=Math.max(h||0,u||0);if(y){const e=new t.P(h?(c+l)/2:f,u?(s+a)/2:m);return i.center=this.unproject.call({worldSize:o},e).wrap(),i.zoom+=this.scaleZoom(y),i}if(this.latRange){const e=p/2;m-e<a&&(v=a+e),m+e>s&&(v=s-e)}if(r){const e=(l+c)/2;let n=f;this._renderWorldCopies&&(n=t.b3(f,e-o/2,e+o/2));const i=d/2;n-i<l&&(g=l+i),n+i>c&&(g=c-i)}if(void 0!==g||void 0!==v){const e=new t.P(null!=g?g:f,null!=v?v:m);i.center=this.unproject.call({worldSize:o},e).wrap()}return i}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:n}=this.getConstrained(this.center,this.zoom);this.center=t,this.zoom=n,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.point.x,i=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b5(1,this.center.lat)*this.worldSize;let r=t.an(new Float64Array(16));t.K(r,r,[this.width/2,-this.height/2,1]),t.J(r,r,[1,-1,0]),this.labelPlaneMatrix=r,r=t.an(new Float64Array(16)),t.K(r,r,[1,-1,1]),t.J(r,r,[-1,-1,0]),t.K(r,r,[2/this.width,2/this.height,1]),this.glCoordMatrix=r;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),a=Math.min(this.elevation,this.minElevationForCurrentTile),s=o-a*this._pixelPerMeter/Math.cos(this._pitch),l=a<0?s:o,c=Math.PI/2+this._pitch,u=this._fov*(.5+e.y/this.height),h=Math.sin(u)*l/Math.sin(t.ac(Math.PI-c-u,.01,Math.PI-.01)),d=this.getHorizon(),p=2*Math.atan(d/this.cameraToCenterDistance)*(.5+e.y/(2*d)),f=Math.sin(p)*l/Math.sin(t.ac(Math.PI-c-p,.01,Math.PI-.01)),m=Math.min(h,f);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*m+l),this.nearZ=this.height/50,r=new Float64Array(16),t.b6(r,this._fov,this.width/this.height,this.nearZ,this.farZ),r[8]=2*-e.x/this.width,r[9]=2*e.y/this.height,this.projectionMatrix=t.ae(r),t.K(r,r,[1,-1,1]),t.J(r,r,[0,0,-this.cameraToCenterDistance]),t.b7(r,r,this._pitch),t.ad(r,r,this.angle),t.J(r,r,[-n,-i,0]),this.mercatorMatrix=t.K([],r,[this.worldSize,this.worldSize,this.worldSize]),t.K(r,r,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.L(new Float64Array(16),this.labelPlaneMatrix,r),t.J(r,r,[0,0,-this.elevation]),this.modelViewProjectionMatrix=r,this.invModelViewProjectionMatrix=t.as([],r),this.fogMatrix=new Float64Array(16),t.b6(this.fogMatrix,this._fov,this.width/this.height,o,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,t.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),t.b7(this.fogMatrix,this.fogMatrix,this._pitch),t.ad(this.fogMatrix,this.fogMatrix,this.angle),t.J(this.fogMatrix,this.fogMatrix,[-n,-i,0]),t.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=t.L(new Float64Array(16),this.labelPlaneMatrix,r);const g=this.width%2/2,v=this.height%2/2,y=Math.cos(this.angle),A=Math.sin(this.angle),b=n-Math.round(n)+y*g+A*v,x=i-Math.round(i)+y*v+A*g,_=new Float64Array(r);if(t.J(_,_,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedModelViewProjectionMatrix=_,r=t.as(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.af(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let i=n.x,r=n.y,o=n.x,a=n.y;for(const t of e)i=Math.min(i,t.x),r=Math.min(r,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new t.P(i,r),new t.P(o,r),new t.P(o,a),new t.P(i,a),new t.P(i,r)]}}lngLatToCameraDepth(e,n){const i=this.locationCoordinate(e),r=[i.x*this.worldSize,i.y*this.worldSize,n,1];return t.af(r,r,this.modelViewProjectionMatrix),r[2]/r[3]}}function Ci(e,t){var n=this;let i,r=!1,o=null,a=null;const s=()=>{o=null,r&&(e.apply(a,i),o=setTimeout(s,t),r=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return r=!0,a=n,i=t,o||s(),o}}class Si{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(e.length>=3&&!e.some(e=>isNaN(e))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let n=t;n.split("&").length>0&&(n=n.split("&")[0]),this._hashName&&(n="".concat(this._hashName,"=").concat(t));let i=window.location.hash.replace(n,"");i.startsWith("#&")?i=i.slice(0,1)+i.slice(2):"#"===i&&(i="");let r=window.location.href.replace(/(#.+)?$/,i);r=r.replace("&&","&"),window.history.replaceState(window.history.state,null,r)},this._updateHash=Ci(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(t.lng*r)/r,a=Math.round(t.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/".concat(Math.round(l))),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map(n=>{const i=n.split("=")[0];return i===e?(t=!0,"".concat(i,"=").concat(c)):n}).filter(e=>e);return t||n.push("".concat(e,"=").concat(c)),"#".concat(n.join("&"))}return"#".concat(c)}}const Ti={linearity:.3,easing:t.b8(0,0,.3,1)},Ii=t.e({deceleration:2500,maxSpeed:1400},Ti),Mi=t.e({deceleration:20,maxSpeed:1400},Ti),ki=t.e({deceleration:1e3,maxSpeed:360},Ti),Ri=t.e({deceleration:1e3,maxSpeed:90},Ti);class Li{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=o.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=Pi(n.pan.mag(),i,t.e({},Ii,e||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Bi(r,o)}if(n.zoom){const e=Pi(n.zoom,i,Mi);r.zoom=this._map.transform.zoom+e.amount,Bi(r,e)}if(n.bearing){const e=Pi(n.bearing,i,ki);r.bearing=this._map.transform.bearing+t.ac(e.amount,-179,179),Bi(r,e)}if(n.pitch){const e=Pi(n.pitch,i,Ri);r.pitch=this._map.transform.pitch+e.amount,Bi(r,e)}if(r.zoom||r.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(r,{noMoveStart:!0})}}function Bi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Pi(e,n,i){const{maxSpeed:r,linearity:o,deceleration:a}=i,s=t.ac(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class Di extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=a.mousePos(n.getCanvas(),i),s=n.unproject(o);super(e,t.e({point:o,lngLat:s,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class Oi extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,o=a.touchPos(n.getCanvasContainer(),r),s=o.map(e=>n.unproject(e)),l=o.reduce((e,t,n,i)=>e.add(t.div(i.length)),new t.P(0,0));super(e,{points:o,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class Ni extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class Fi{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ni(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Di(e.type,this._map,e))}mouseup(e){this._map.fire(new Di(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Di(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Di(e.type,this._map,e))}mouseover(e){this._map.fire(new Di(e.type,this._map,e))}mouseout(e){this._map.fire(new Di(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Oi(e.type,this._map,e))}touchmove(e){this._map.fire(new Oi(e.type,this._map,e))}touchend(e){this._map.fire(new Oi(e.type,this._map,e))}touchcancel(e){this._map.fire(new Oi(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Di(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Di(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ui{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}class ji{constructor(e,t){this._map=e,this._tr=new Ui(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(a.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=a.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const r=Math.min(i.x,n.x),o=Math.max(i.x,n.x),s=Math.min(i.y,n.y),l=Math.max(i.y,n.y);a.setTransform(this._box,"translate(".concat(r,"px,").concat(s,"px)")),this._box.style.width=o-r+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,r=n;if(this.reset(),a.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(i,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.k(e,{originalEvent:n}))}}function Vi(e,t){if(e.length!==t.length)throw new Error("The number of touches and points are not equal - touches ".concat(e.length,", points ").concat(t.length));const n={};for(let i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}class Hi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.P(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=Vi(i,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const i=Vi(n,t);for(const r in this.touches){const e=i[r];(!e||e.dist(this.touches[r])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Gi{constructor(e){this.singleTap=new Hi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const i=this.singleTap.touchend(e,t,n);if(i){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Qi{constructor(e){this._tr=new Ui(e),this._zoomIn=new Gi({numTouches:1,numTaps:2}),this._zoomOut=new Gi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const i=this._zoomIn.touchend(e,t,n),r=this._zoomOut.touchend(e,t,n),o=this._tr;return i?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wi{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const i=t.length?t[0]:t;return!this._moved&&i.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(n,i))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&a.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qi={0:1,2:2};class Xi{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=a.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const n=qi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton)}isValidEndEvent(e){return a.mouseButton(e)===this._eventButton}}class Yi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Ki=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}},Ji=e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:i=.8}=e;const r=new Xi({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new Wi({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:r,enable:t,assignEvents:Ki})},Zi=e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:i=-.5}=e;const r=new Xi({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new Wi({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:r,enable:t,assignEvents:Ki})};class $i{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active){if(!this._shouldBePrevented(n.length))return e.preventDefault(),this._calculateTransform(e,t,n);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&this._shouldBePrevented(n.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=Vi(i,n),o=new t.P(0,0),a=new t.P(0,0);let s=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,r[t]=e)}if(this._touches=r,this._shouldBePrevented(s)||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class er{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[i,r]=this._firstTwoTouches,o=tr(n,t,i),a=tr(n,t,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,o=tr(n,t,i),s=tr(n,t,r);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function tr(e,t,n){for(let i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function nr(e,t){return Math.log(e/t)/Math.LN2}class ir extends er{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(nr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:nr(this._distance,n),pinchAround:t}}}function rr(e,t){return 180*e.angleWith(t)/Math.PI}class or extends er{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,n){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rr(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=rr(e,this._startVector);return Math.abs(n)<t}}function ar(e){return Math.abs(e.y)>Math.abs(e.x)}class sr extends er{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,ar(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,r=t.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return ar(e)&&ar(t)&&o}}const lr={panStep:100,bearingStep:15,pitchStep:10};class cr{constructor(e){this._tr=new Ui(e);const t=lr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,i=0,r=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:a=>{const s=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:ur,zoom:t?Math.round(s.zoom)+t*(e.shiftKey?2:1):s.zoom,bearing:s.bearing+n*this._bearingStep,pitch:s.pitch+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:s.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ur(e){return e*(2-e)}const hr=4.000244140625;class dr{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Ui(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=o.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%hr==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=a.mousePos(this._map.getCanvas(),e),i=this._tr;this._around=n.y>i.transform.height/2-i.transform.getHorizon()?t.N.convert(this._aroundCenter?i.center:i.unproject(n)):t.N.convert(i.center),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>hr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,i=this._startZoom,r=this._easing;let a,s=!1;const l=o.now()-this._lastWheelEventTime;if("wheel"===this._type&&i&&r&&l){const e=Math.min(l/200,1),o=r(e);a=t.y.number(i,n,o),e<1?this._frameId||(this._frameId=!0):s=!0}else a=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.b9;if(this._prevEase){const e=this._prevEase,i=(o.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.b8(a,s,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class pr{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fr{constructor(e){this._tr=new Ui(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mr{constructor(){this._tap=new Gi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,n){if(!this._swipePoint)if(this._tapTime){const i=t[0],r=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(i)<30;r&&o?n.length>0&&(this._swipePoint=i,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(e,t,n)}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const i=this._tap.touchend(e,t,n);i&&(this._tapTime=e.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vr{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class yr{constructor(e,t,n,i){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ar{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=a.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),i=document.createElement("div");i.className="maplibregl-desktop-message",i.textContent=t,this._container.appendChild(i);const r=document.createElement("div");r.className="maplibregl-mobile-message",r.textContent=n,this._container.appendChild(r),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(a.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new t.k("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const br=e=>e.zoom||e.drag||e.pitch||e.rotate;class xr extends t.k{}function _r(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class wr{constructor(e,t){this.handleWindowEvent=e=>{this.handleEvent(e,"".concat(e.type,"Window"))},this.handleEvent=(e,t)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},r={},o={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?a.touchPos(this._map.getCanvas(),l):a.mousePos(this._map.getCanvas(),e);for(const{handlerName:a,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let s;this._blockedByActive(o,p,a)?d.reset():d[t||e.type]&&(s=d[t||e.type](e,c,l),this.mergeHandlerResult(i,r,s,a,n),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||d.isActive())&&(o[a]=d)}const u={};for(const a in this._previousActiveHandlers)o[a]||(u[a]=n);this._previousActiveHandlers=o,(Object.keys(u).length||_r(i))&&(this._changes.push([i,r,u]),this._triggerRenderFrame()),(Object.keys(o).length||_r(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=i;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Li(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[i,r,o]of this._listeners)a.addEventListener(i,r,i===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,t,n]of this._listeners)a.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Fi(t,e));const i=t.boxZoom=new ji(t,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const r=t.cooperativeGestures=new Ar(t,e.cooperativeGestures);this._add("cooperativeGestures",r),e.cooperativeGestures&&r.enable();const o=new Qi(t),s=new fr(t);t.doubleClickZoom=new pr(s,o),this._add("tapZoom",o),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&t.doubleClickZoom.enable();const l=new mr;this._add("tapDragZoom",l);const c=t.touchPitch=new sr(t);this._add("touchPitch",c),e.interactive&&e.touchPitch&&t.touchPitch.enable(e.touchPitch);const u=Ji(e),h=Zi(e);t.dragRotate=new vr(e,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]),e.interactive&&e.dragRotate&&t.dragRotate.enable();const d=(e=>{let{enable:t,clickTolerance:n}=e;const i=new Xi({checkCorrectEvent:e=>0===a.mouseButton(e)&&!e.ctrlKey});return new Wi({clickTolerance:n,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:i,enable:t,assignEvents:Ki})})(e),p=new $i(e,t);t.dragPan=new gr(n,d,p),this._add("mousePan",d),this._add("touchPan",p,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&t.dragPan.enable(e.dragPan);const f=new or,m=new ir;t.touchZoomRotate=new yr(n,m,f,l),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&t.touchZoomRotate.enable(e.touchZoomRotate);const g=t.scrollZoom=new dr(t,()=>this._triggerRenderFrame());this._add("scrollZoom",g,["mousePan"]),e.interactive&&e.scrollZoom&&t.scrollZoom.enable(e.scrollZoom);const v=t.keyboard=new cr(t);this._add("keyboard",v),e.interactive&&e.keyboard&&t.keyboard.enable(),this._add("blockableMapEvent",new zi(t))}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(br(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.e(e,i);const a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},i={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.e(n,o),t.e(i,a);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,t,n){const i=this._map,r=i._getTransformForUpdate(),o=i.terrain;if(!(_r(e)||o&&this._terrainMovement))return this._fireEvents(t,n,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:c,around:u,pinchAround:h}=e;void 0!==h&&(u=h),i._stop(!0),u=u||i.transform.centerPoint;const d=r.pointLocation(a?u.sub(a):u);l&&(r.bearing+=l),c&&(r.pitch+=c),s&&(r.zoom+=s),o?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?r.center=r.pointLocation(r.centerPoint.sub(a)):r.setLocationAtPoint(d,u):(this._terrainMovement=!0,this._map._elevationFreeze=!0,r.setLocationAtPoint(d,u)):r.setLocationAtPoint(d,u),i._applyUpdatedTransform(r),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}_fireEvents(e,n,i){const r=br(this._eventsInProgress),a=br(e),s={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(s["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!r&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in s)this._fireEvent(t,s[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||i,l["".concat(t,"end")]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=br(this._eventsInProgress),h=(r||a)&&!u;if(h&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();e.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(e)}if(i&&h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&o.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()):(n(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.k(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new xr("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Er extends t.E{constructor(e,t){super(),this._renderFrameCallback=()=>{const e=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new t.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,n,i){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.e({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,n,i){return this.easeTo(t.e({zoom:e},n),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,n,i){return this.easeTo(t.e({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=W.convert(e).adjustAntiMeridian();const n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}_cameraForBoxAndBearing(e,n,i,r){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const e=r.padding;r.padding={top:e,bottom:e,right:e,left:e}}r.padding=t.e(o,r.padding);const a=this.transform,s=a.padding,l=new W(e,n),c=a.project(l.getNorthWest()),u=a.project(l.getNorthEast()),h=a.project(l.getSouthEast()),d=a.project(l.getSouthWest()),p=t.ba(-i),f=c.rotate(p),m=u.rotate(p),g=h.rotate(p),v=d.rotate(p),y=new t.P(Math.max(f.x,m.x,v.x,g.x),Math.max(f.y,m.y,v.y,g.y)),A=new t.P(Math.min(f.x,m.x,v.x,g.x),Math.min(f.y,m.y,v.y,g.y)),b=y.sub(A),x=(a.width-(s.left+s.right+r.padding.left+r.padding.right))/b.x,_=(a.height-(s.top+s.bottom+r.padding.top+r.padding.bottom))/b.y;if(_<0||x<0)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const w=Math.min(a.scaleZoom(a.scale*Math.min(x,_)),r.maxZoom),E=t.P.convert(r.offset),C=new t.P((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(t.ba(i)),S=E.add(C).mult(a.scale/a.zoomScale(w));return{center:a.unproject(c.add(h).div(2).sub(S)),zoom:w,bearing:i}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(n)),i,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this._getTransformForUpdate();let r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.N.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this._applyUpdatedTransform(i),this.fire(new t.k("movestart",n)).fire(new t.k("move",n)),r&&this.fire(new t.k("zoomstart",n)).fire(new t.k("zoom",n)).fire(new t.k("zoomend",n)),o&&this.fire(new t.k("rotatestart",n)).fire(new t.k("rotate",n)).fire(new t.k("rotateend",n)),a&&this.fire(new t.k("pitchstart",n)).fire(new t.k("pitch",n)).fire(new t.k("pitchend",n)),this.fire(new t.k("moveend",n))}calculateCameraOptionsFromTo(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.Z.fromLngLat(e,n),a=t.Z.fromLngLat(i,r),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:a.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(e,n){var i;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.b9},e)).animate||!e.essential&&o.prefersReducedMotion)&&(e.duration=0);const r=this._getTransformForUpdate(),a=r.zoom,s=r.bearing,l=r.pitch,c=r.padding,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:r.padding,p=t.P.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),{center:g,zoom:v}=r.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:a);this._normalizeCenter(g,r);const y=r.project(m),A=r.project(g).sub(y),b=r.zoomScale(v-a);let x,_;e.around&&(x=t.N.convert(e.around),_=r.locationPoint(x));const w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||v!==a,this._rotating=this._rotating||s!==u,this._pitching=this._pitching||h!==l,this._padding=!r.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this.terrain&&this._prepareElevation(g),this._ease(i=>{if(this._zooming&&(r.zoom=t.y.number(a,v,i)),this._rotating&&(r.bearing=t.y.number(s,u,i)),this._pitching&&(r.pitch=t.y.number(l,h,i)),this._padding&&(r.interpolatePadding(c,d,i),f=r.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i),x)r.setLocationAtPoint(x,_);else{const e=r.zoomScale(r.zoom-a),t=v>a?Math.min(2,b):Math.max(.5,b),n=Math.pow(t,1-i),o=r.unproject(y.add(A.mult(i*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,f)}this._applyUpdatedTransform(r),this._fireMoveEvents(n)},t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,t)},e),this}_prepareEase(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||i.moving||this.fire(new t.k("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(n-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.elevation=t.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const t=e.getCameraPosition(),n=this.terrain.getElevationForLngLatZoom(t.lngLat,e.zoom);if(t.altitude<n){const i=this.calculateCameraOptionsFromTo(t.lngLat,n,e.center,e.elevation);return{pitch:i.pitch,zoom:i.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(this.terrain&&t.push(e=>this._elevateCameraIfInsideTerrain(e)),this.transformCameraUpdate&&t.push(e=>this.transformCameraUpdate(e)),!t.length)return;const n=e.clone();for(const i of t){const e=n.clone(),{center:t,zoom:r,pitch:o,bearing:a,elevation:s}=i(e);t&&(e.center=t),void 0!==r&&(e.zoom=r),void 0!==o&&(e.pitch=o),void 0!==a&&(e.bearing=a),void 0!==s&&(e.elevation=s),n.apply(e)}this.transform.apply(n)}_fireMoveEvents(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.k("zoomend",e)),r&&this.fire(new t.k("rotateend",e)),o&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}flyTo(e,n){var i;if(!e.essential&&o.prefersReducedMotion){const i=t.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.b9},e);const r=this._getTransformForUpdate(),a=r.zoom,s=r.bearing,l=r.pitch,c=r.padding,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:r.padding,p=t.P.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),{center:g,zoom:v}=r.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:a);this._normalizeCenter(g,r);const y=r.zoomScale(v-a),A=r.project(m),b=r.project(g).sub(A);let x=e.curve;const _=Math.max(r.width,r.height),w=_/y,E=b.mag();if("minZoom"in e){const n=t.ac(Math.min(e.minZoom,a,v),r.minZoom,r.maxZoom),i=_/r.zoomScale(n-a);x=Math.sqrt(i/E*2)}const C=x*x;function S(e){const t=(w*w-_*_+(e?-1:1)*C*C*E*E)/(2*(e?w:_)*C*E);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}const M=S(!1);let k=function(e){return I(M)/I(M+x*e)},R=function(e){return _*((I(M)*(T(t=M+x*e)/I(t))-T(M))/C)/E;var t},L=(S(!0)-M)/x;if(Math.abs(E)<1e-6||!isFinite(L)){if(Math.abs(_-w)<1e-6)return this.easeTo(e,n);const t=w<_?-1:1;L=Math.abs(Math.log(w/_))/x,R=()=>0,k=e=>Math.exp(t*x*e)}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=h!==l,this._padding=!r.isPaddingEqual(d),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(g),this._ease(i=>{const o=i*L,m=1/k(o);r.zoom=1===i?v:a+r.scaleZoom(m),this._rotating&&(r.bearing=t.y.number(s,u,i)),this._pitching&&(r.pitch=t.y.number(l,h,i)),this._padding&&(r.interpolatePadding(c,d,i),f=r.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i);const y=1===i?g:r.unproject(A.add(b.mult(R(o))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?y.wrap():y,f),this._applyUpdatedTransform(r),this._fireMoveEvents(n)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var n;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(n=this.handlers)||void 0===n||n.stop(!1),this}_ease(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=o.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=t.b3(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(e,t){if(!t.renderWorldCopies||t.lngRange)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const Cr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const i in t){const n=t[i];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter(e=>String(e).trim()),e.sort((e,t)=>e.length-t.length),e=e.filter((t,n)=>{for(let i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0});const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Tr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl");const t=a.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ir{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const i of n)if(i.id===e)return void(i.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Mr=t.Y([{name:"a_pos3d",type:"Int16",components:3}]);class kr extends t.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const i={};for(const r of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))i[r.key]=!0,this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),t.aP(r.posMatrix,0,t.X,0,t.X,0,1),this._tiles[r.key]=new le(r,this.tileSize));for(const t in this._tiles)i[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const n=this._tiles[t];(!e||n.tileID.equals(e)||n.tileID.isChildOf(e)||e.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const n={};for(const i of this._renderableTilesKeys){const r=this._tiles[i].tileID;if(r.canonical.equals(e.canonical)){const r=e.clone();r.posMatrix=new Float64Array(16),t.aP(r.posMatrix,0,t.X,0,t.X,0,1),n[i]=r}else if(r.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=r.canonical.z-e.canonical.z,s=r.canonical.x-(r.canonical.x>>a<<a),l=r.canonical.y-(r.canonical.y>>a<<a),c=t.X>>a;t.aP(o.posMatrix,0,c,0,c,0,1),t.J(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),n[i]=o}else if(e.canonical.isChildOf(r.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=e.canonical.z-r.canonical.z,s=e.canonical.x-(e.canonical.x>>a<<a),l=e.canonical.y-(e.canonical.y>>a<<a),c=t.X>>a;t.aP(o.posMatrix,0,t.X,0,t.X,0,1),t.J(o.posMatrix,o.posMatrix,[s*c,l*c,0]),t.K(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),n[i]=o}}return n}getSourceTile(e,t){const n=this.sourceCache._source;let i=e.overscaledZ-this.deltaZoom;if(i>n.maxzoom&&(i=n.maxzoom),i<n.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(i).key);let r=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!r||!r.dem)&&t)for(;i>=n.minzoom&&(!r||!r.dem);)r=this.sourceCache.getTileByID(e.scaledTo(i--).key);return r}tilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter(t=>t.timeAdded>=e)}}class Rr{constructor(e,t,n){this.painter=e,this.sourceCache=new kr(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;var o;if(!(n>=0&&n<r&&i>=0&&i<r))return 0;const a=this.getTerrainData(e),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;const l=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e}([],[n/r*t.X,i/r*t.X],a.u_terrain_matrix),c=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return s.get(u,h)*(1-d)*(1-p)+s.get(u+1,h)*d*(1-p)+s.get(u,h+1)*(1-d)*p+s.get(u+1,h+1)*d*p}getElevationForLngLatZoom(e,n){if(!t.bb(n,e.wrap()))return 0;const{tileID:i,mercatorX:r,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(i,r%t.X,o%t.X,t.X)}getElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;return this.getDEMElevation(e,n,i,r)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,n=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new x(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new x(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.an([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new x(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const i=n&&n+n.tileID.key+e.key;if(i&&!this._demMatrixCache[i]){const i=this.sourceCache.sourceCache._source.maxzoom;let r=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=i?r=e.canonical.z-i:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>r<<r),a=e.canonical.y-(e.canonical.y>>r<<r),s=t.bc(new Float64Array(16),[1/(t.X<<r),1/(t.X<<r),0]);t.J(s,s,[o*t.X,a*t.X,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:i?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const t=this.painter,n=t.width/devicePixelRatio,i=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new x(t.context,{width:n,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new x(t.context,{width:n,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(n,i,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,n,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)n[o+0]=255&e,n[o+1]=255&t,n[o+2]=e>>8<<4|t>>8,n[o+3]=0;const i=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),r=new x(e,i,e.gl.RGBA,{premultiply:!1});return r.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),i=this.painter.context,r=i.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(o,s-a-1,1,1,r.RGBA,r.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const l=n[0]+(n[2]>>4<<8),c=n[1]+((15&n[2])<<8),u=this.coordsIndex[255-n[3]],h=u&&this.sourceCache.getTileByID(u);if(!h)return null;const d=this._coordsTextureSize,p=(1<<h.tileID.canonical.z)*d;return new t.Z((h.tileID.canonical.x*d+l)/p+h.tileID.wrap,(h.tileID.canonical.y*d+c)/p,this.getElevation(h.tileID,l,c,d))}depthAtPoint(e){const t=new Uint8Array(4),n=this.painter.context,i=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,n=new t.bd,i=new t.aY,r=this.meshSize,o=t.X/r,a=r*r;for(let t=0;t<=r;t++)for(let e=0;e<=r;e++)n.emplaceBack(e*o,t*o,0);for(let t=0;t<a;t+=r+1)for(let e=0;e<r;e++)i.emplaceBack(e+t,r+e+t+1,r+e+t+2),i.emplaceBack(e+t,r+e+t+2,e+t+1);const s=n.length,l=s+2*(r+1);for(const h of[0,1])for(let e=0;e<=r;e++)for(const i of[0,1])n.emplaceBack(e*o,h*t.X,i);for(let t=0;t<2*r;t+=2)i.emplaceBack(l+t,l+t+1,l+t+3),i.emplaceBack(l+t,l+t+3,l+t+2),i.emplaceBack(s+t,s+t+3,s+t+1),i.emplaceBack(s+t,s+t+2,s+t+3);const c=n.length,u=c+2*(r+1);for(const h of[0,1])for(let e=0;e<=r;e++)for(const i of[0,1])n.emplaceBack(h*t.X,e*o,i);for(let t=0;t<2*r;t+=2)i.emplaceBack(c+t,c+t+1,c+t+3),i.emplaceBack(c+t,c+t+3,c+t+2),i.emplaceBack(u+t,u+t+3,u+t+1),i.emplaceBack(u+t,u+t+2,u+t+3);return this._mesh=new yi(e.createVertexBuffer(n,Mr.members),e.createIndexBuffer(i),t.a0.simpleSegment(0,0,n.length,i.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*t.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,t){var n;const{tileID:i}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(n=this.getMinMaxElevation(i).minElevation)&&void 0!==n?n:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=t.dem.min*this.exaggeration,n.maxElevation=t.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(e,n){const i=t.Z.fromLngLat(e.wrap()),r=(1<<n)*t.X,o=i.x*r,a=i.y*r,s=Math.floor(o/t.X),l=Math.floor(a/t.X);return{tileID:new t.S(n,0,n,s,l),mercatorX:o,mercatorY:a}}}class Lr{constructor(e,t,n){this._context=e,this._size=t,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new x(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(n.texture),{id:e,fbo:t,texture:n,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(t=>e.id!==t),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(e=>!e.inUse)}}const Br={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pr{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Lr(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(n=>!e._layers[n].isHidden(t)),this._coordsDescendingInv={};for(const n in e.sourceCaches){this._coordsDescendingInv[n]={};const t=e.sourceCaches[n].getVisibleCoordinates();for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e);for(const e in t)this._coordsDescendingInv[n][e]||(this._coordsDescendingInv[n][e]=[]),this._coordsDescendingInv[n][e].push(t[e])}}this._coordsDescendingInvStr={};for(const n of e._order){const t=e._layers[n],i=t.source;if(Br[t.type]&&!this._coordsDescendingInvStr[i]){this._coordsDescendingInvStr[i]={};for(const e in this._coordsDescendingInv[i])this._coordsDescendingInvStr[i][e]=this._coordsDescendingInv[i][e].map(e=>e.key).sort().join()}}for(const n of this._renderableTiles)for(const e in this._coordsDescendingInvStr){const t=this._coordsDescendingInvStr[e][n.tileID.key];t&&t!==n.rttCoords[e]&&(n.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const n=e.type,i=this.painter,r=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Br[n]&&(this._prevType&&Br[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(e.id),!r))return!0;if(Br[this._prevType]||Br[n]&&r){this._prevType=n;const e=this._stacks.length-1,r=this._stacks[e]||[];for(const n of this._renderableTiles){if(this.pool.isFull()&&(vi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(n),n.rtt[e]){const t=this.pool.getObjectForId(n.rtt[e].id);if(t.stamp===n.rtt[e].stamp){this.pool.useObject(t);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),n.rtt[e]={id:o.id,stamp:o.stamp},i.context.bindFramebuffer.set(o.fbo.framebuffer),i.context.clear({color:t.aM.transparent,stencil:0}),i.currentStencilSource=void 0;for(let e=0;e<r.length;e++){const t=i.style._layers[r[e]],a=t.source?this._coordsDescendingInv[t.source][n.tileID.key]:[n.tileID];i.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),i._renderTileClippingMasks(t,a),i.renderLayer(i,i.style.sourceCaches[t.source],t,a),t.source&&(n.rttCoords[t.source]=this._coordsDescendingInvStr[t.source][n.tileID.key])}}return vi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Br[n]}return!1}}const Dr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Or=n,Nr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Cr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Fr=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},zr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ur{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.moveMouse(e,a.mousePos(this.element,e))},this.mouseup=e=>{this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),a.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const r=e.dragRotate._mouseRotate.getClickTolerance(),o=e.dragRotate._mousePitch.getClickTolerance();this.element=n,this.mouseRotate=Ji({clickTolerance:r,enable:!0}),this.touchRotate=(e=>{let{enable:t,clickTolerance:n,bearingDegreesPerPixelMoved:i=.8}=e;const r=new Yi;return new Wi({clickTolerance:n,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:r,enable:t,assignEvents:Fr})})({clickTolerance:r,enable:!0}),this.map=e,i&&(this.mousePitch=Zi({clickTolerance:o,enable:!0}),this.touchPitch=(e=>{let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:i=-.5}=e;const r=new Yi;return new Wi({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:r,enable:t,assignEvents:Fr})})({clickTolerance:o,enable:!0})),a.addEventListener(n,"mousedown",this.mousedown),a.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(n,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),a.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),a.disableDrag()}moveMouse(e,t){const n=this.map,{bearingDelta:i}=this.mouseRotate.dragMove(e,t)||{};if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const{pitchDelta:i}=this.mousePitch.dragMove(e,t)||{};i&&n.setPitch(n.getPitch()+i)}}moveTouch(e,t){const n=this.map,{bearingDelta:i}=this.touchRotate.dragMove(e,t)||{};if(i&&n.setBearing(n.getBearing()+i),this.touchPitch){const{pitchDelta:i}=this.touchPitch.dragMove(e,t)||{};i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;a.removeEventListener(e,"mousedown",this.mousedown),a.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend),a.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend)}}let jr;function Vr(e,n,i){const r=new t.N(e.lng,e.lat);if(e=new t.N(e.lng,e.lat),n){const r=new t.N(e.lng-360,e.lat),o=new t.N(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(n);i.locationPoint(r).distSqr(n)<a?e=r:i.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e.lng!==r.lng&&i.locationPoint(e).y>i.height/2-i.getHorizon()?e:r}const Hr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gr(e,t,n){const i=e.classList;for(const r in Hr)i.remove("maplibregl-".concat(n,"-anchor-").concat(r));i.add("maplibregl-".concat(n,"-anchor-").concat(t))}class Qr extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},this._update=e=>{var t;if(!this._map)return;const n=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!n)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Vr(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(i="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX(".concat(this._map.getPitch(),"deg)")),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),a.setTransform(this._element,"".concat(Hr[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(r," ").concat(i)),o.frameAsync(new AbortController).then(()=>{this._updateOpacity(e&&"moveend"===e.type)}).catch(()=>{})},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.k("dragstart"))),this.fire(new t.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.k("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div");const n=a.createNS("http://www.w3.org/2000/svg","svg"),i=41,r=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","".concat(i,"px")),n.setAttributeNS(null,"width","".concat(r,"px")),n.setAttributeNS(null,"viewBox","0 0 ".concat(r," ").concat(i));const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=a.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=a.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=a.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const v=a.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(v),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(n),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),Gr(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,i=Math.abs(n)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n,i;if(!(null===(n=this._map)||void 0===n?void 0:n.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const r=this._map,o=r.terrain.depthAtPoint(this._pos),a=r.terrain.getElevationForLngLatZoom(this._lngLat,r.transform.tileZoom);if(r.transform.lngLatToCameraDepth(this._lngLat,a)-o<.006)return void(this._element.style.opacity=this._opacity);const s=-this._offset.y/r.transform._pixelPerMeter,l=Math.sin(r.getPitch()*Math.PI/180)*s,c=r.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),u=r.transform.lngLatToCameraDepth(this._lngLat,a+l)-c>.006;(null===(i=this._popup)||void 0===i?void 0:i.isOpen())&&u&&this._popup.remove(),this._element.style.opacity=u?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return void 0===e&&void 0===t&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const Wr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let qr=0,Xr=!1;const Yr={maxWidth:100,unit:"metric"};function Kr(e,t,n){const i=n&&n.maxWidth||100,r=e._container.clientHeight/2,o=e.unproject([0,r]),a=e.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?Jr(t,i,n/5280,e._getUIString("ScaleControl.Miles")):Jr(t,i,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Jr(t,i,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Jr(t,i,s/1e3,e._getUIString("ScaleControl.Kilometers")):Jr(t,i,s,e._getUIString("ScaleControl.Meters"))}function Jr(e,t,n,i){const r=function(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(r/n)+"px",e.innerHTML="".concat(r,"&nbsp;").concat(i)}const Zr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},$r=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function eo(e){if(e){if("number"==typeof e){const n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const n=t.P.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return eo(new t.P(0,0))}const to=n;e.AJAXError=t.bh,e.Evented=t.E,e.LngLat=t.N,e.MercatorCoordinate=t.Z,e.Point=t.P,e.addProtocol=t.bi,e.config=t.a,e.removeProtocol=t.bj,e.AttributionControl=Sr,e.BoxZoomHandler=ji,e.CanvasSource=te,e.CooperativeGesturesHandler=Ar,e.DoubleClickZoomHandler=pr,e.DragPanHandler=gr,e.DragRotateHandler=vr,e.EdgeInsets=_i,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=J,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new t.N(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.e({bearing:r},this.options.fitBoundsOptions),a=W.fromLngLat(n,i);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new t.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Xr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Qr({element:this._dotElement}),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.k("trackuserlocationend")),this.fire(new t.k("userlocationlostfocus")))})}},this.options=t.e({},Wr,e)}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==jr&&!e)return jr;if(void 0===window.navigator.permissions)return jr=!!window.navigator.geolocation,jr;try{const e=yield window.navigator.permissions.query({name:"geolocation"});jr="denied"!==e.state}catch(e){jr=!!window.navigator.geolocation}return jr}()})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,qr=0,Xr=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),n=e.getNorthEast(),i=t.distanceTo(n),r=Math.ceil(this._accuracy/(i/this._map._container.clientHeight)*2);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qr--,Xr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart")),this.fire(new t.k("userlocationfocus"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qr++,qr>1?(e={maximumAge:6e5,timeout:0},Xr=!0):(e=this.options.positionOptions,Xr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.Hash=Si,e.ImageSource=$,e.KeyboardHandler=cr,e.LngLatBounds=W,e.LogoControl=Tr,e.Map=class extends Er{constructor(e){t.bf.mark(t.bg.create);const n=Object.assign(Object.assign({},Nr),e);if(null!=n.minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ei(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ir,this._controls=[],this._mapId=t.a4(),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.k("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.k("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===n.preserveDrawingBuffer,this._antialias=!0===n.antialias,this._trackResize=!0===n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=!0===n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=!0===n.crossSourceCollisions,this._collectResourceTiming=!0===n.collectResourceTiming,this._locale=Object.assign(Object.assign({},Dr),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===n.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=p.addThrottleControl(()=>this.isMoving()),this._requestManager=new f(n.transformRequest),"string"==typeof n.container){if(this._container=document.getElementById(n.container),!this._container)throw new Error("Container '".concat(n.container,"' not found."))}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=Ci(e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw())},50);this._resizeObserver=new ResizeObserver(n=>{e?t(n):e=!0}),this._resizeObserver.observe(this._container)}this.handlers=new wr(this,n),this._hash=n.hash&&new Si("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Sr("boolean"==typeof n.attributionControl?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new Tr,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new t.k("".concat(e.dataType,"data"),e))}),this.on("dataloading",e=>{this.fire(new t.k("".concat(e.dataType,"dataloading"),e))}),this.on("dataabort",e=>{this.fire(new t.k("sourcedataabort",e))})}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,n,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,n,i)}resize(e){var n;const i=this._containerDimensions(),r=i[0],o=i[1],a=this._getClampedPixelRatio(r,o);if(this._resizeCanvas(r,o,a),this.painter.resize(r,o,a),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(r,o);this._resizeCanvas(r,o,t),this.painter.resize(r,o,t)}this.transform.resize(r,o),null===(n=this._requestedCameraState)||void 0===n||n.resize(r,o);const s=!this._moving;return s&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),s&&this.fire(new t.k("moveend",e)),this}_getClampedPixelRatio(e,t){const{0:n,1:i}=this._maxCanvasSize,r=this.getPixelRatio(),o=e*r,a=t*r;return Math.min(o>n?n/o:1,a>i?i/a:1)*r}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(W.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(t.N.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let i=!1;const r=r=>{const o=t.filter(e=>this.getLayer(e)),a=0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[];a.length?i||(i=!0,n.call(this,new Di(e,this,r.originalEvent,{features:a}))):i=!1};return{layers:t,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const r=r=>{const o=t.filter(e=>this.getLayer(e));(0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[]).length?i=!0:i&&(i=!1,n.call(this,new Di(e,this,r.originalEvent)))},o=t=>{i&&(i=!1,n.call(this,new Di(e,this,t.originalEvent)))};return{layers:t,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=e=>{const i=t.filter(e=>this.getLayer(e)),r=0!==i.length?this.queryRenderedFeatures(e.point,{layers:i}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layers:t,listener:n,delegates:{[e]:i}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t)}_removeDelegatedListener(e,t,n){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const i=this._delegatedListeners[e];for(let r=0;r<i.length;r++){const e=i[r];if(e.listener===n&&e.layers.length===t.length&&e.layers.every(e=>t.includes(e))){for(const t in e.delegates)this.off(t,e.delegates[t]);return void i.splice(r,1)}}}on(e,t,n){if(void 0===n)return super.on(e,t);const i=this._createDelegatedListener(e,"string"==typeof t?[t]:t,n);this._saveDelegatedListener(e,i);for(const r in i.delegates)this.on(r,i.delegates[r]);return this}once(e,t,n){var i=this;if(void 0===n)return super.once(e,t);const r="string"==typeof t?[t]:t,o=this._createDelegatedListener(e,r,n);for(const a in o.delegates){const t=o.delegates[a];o.delegates[a]=function(){i._removeDelegatedListener(e,r,n),t(...arguments)}}this._saveDelegatedListener(e,o);for(const a in o.delegates)this.once(a,o.delegates[a]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,n),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let i;const r=e instanceof t.P||Array.isArray(e),o=r?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(r?{}:e)||{},o instanceof t.P||"number"==typeof o[0])i=[t.P.convert(o)];else{const e=t.P.convert(o[0]),n=t.P.convert(o[1]);i=[e,new t.P(n.x,e.y),n,new t.P(e.x,n.y),e]}return this.style.queryRenderedFeatures(i,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(e,t));const n=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new dt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,n):this.style.loadJSON(e,t,n),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.transformRequest(e,"Style");t.h(i,new AbortController).then(e=>{this._updateDiff(e.data,n)}).catch(e=>{e&&this.fire(new t.j(e))})}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(i){t.w("Unable to perform style diff: ".concat(i.message||i.error||i,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.j(new Error("There is no source with ID '".concat(e,"'"))))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const n=this.style.sourceCaches[e.source];if(!n)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(e.source));null===this.terrain&&n.reload();for(const i in this.style._layers){const n=this.style._layers[i];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Rr(this.painter,n,e),this.painter.renderToTexture=new Pr(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:r=1,sdf:a=!1,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h}=i;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:i,height:o,data:d}=n,p=n;return this.style.addImage(e,{data:new t.R({width:i,height:o},new Uint8Array(d)),pixelRatio:r,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:i,height:d,data:p}=o.getImageData(n);this.style.addImage(e,{data:new t.R({width:i,height:d},p),pixelRatio:r,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:a,version:0})}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof HTMLImageElement||t.b(n)?o.getImageData(n):n,{width:a,height:s,data:l}=r;if(void 0===a||void 0===s)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==i.data.width||s!==i.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(n instanceof HTMLImageElement||t.b(n));return i.data.replace(l,c),this.style.updateImage(e,i),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return p.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,n,e=>{e||this._update(!0)}),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,e=>{e||this._update(!0)}),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e){return this._lazyInitEmptyStyle(),this.style.setSky(e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=a.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),i=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],i);const r=this._controlContainer=a.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{o[e]=a.create("div","maplibregl-ctrl-".concat(e," "),r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,n){this._canvas.width=Math.floor(n*e),this._canvas.height=Math.floor(n*t),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",n=>{t={requestedAttributes:e},n&&(t.statusMessage=n.statusMessage,t.type=n.type)},{once:!0});const n=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!n){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new Ai(n,this.transform),s.testSupport(n)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let i=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,r=o.now();this.style.zoomHistory.update(e,r);const a=new t.z(e,{now:r,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=a.crossFadingFactor();1===s&&s===this._crossFadingFactor||(i=!0,this._crossFadingFactor=s),this.style.update(a)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.bf.mark(t.bg.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||i)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const r=this._sourcesDirty||this._styleDirty||this._placementDirty;return r||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||r||(this._fullyLoaded=!0,t.bf.mark(t.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==n?void 0:n.loseContext)&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),t.bf.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then(e=>{t.bf.frame(e),this._frameRequest=null,this._render(e)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Or}getCameraTargetElevation(){return this.transform.elevation}},e.MapMouseEvent=Di,e.MapTouchEvent=Oi,e.MapWheelEvent=Ni,e.Marker=Qr,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e},this._setButtonTitle=(e,t)=>{const n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)},this.options=t.e({},zr,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),a.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),a.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=a.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ur(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=a.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},e.Popup=class extends t.E{constructor(e){super(),this.remove=()=>(this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var t;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=a.create("div","maplibregl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Vr(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._trackPointer&&!e)return;const n=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let i=this.options.anchor;const r=eo(this.options.offset);if(!i){const e=this._container.offsetWidth,t=this._container.offsetHeight;let o;o=n.y+r.bottom.y<t?["top"]:n.y>this._map.transform.height-t?["bottom"]:[],n.x<e/2?o.push("left"):n.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}let o=n.add(r[i]);this.options.subpixelPositioning||(o=o.round()),a.setTransform(this._container,"".concat(Hr[i]," translate(").concat(o.x,"px,").concat(o.y,"px)")),Gr(this._container,i,"popup")},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Zr),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let i;for(n.innerHTML=e;i=n.firstChild,i;)t.appendChild(i);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector($r);e&&e.focus()}},e.RasterDEMTileSource=K,e.RasterTileSource=Y,e.ScaleControl=class{constructor(e){this._onMove=()=>{Kr(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Kr(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Yr),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=dr,e.Style=dt,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=sr,e.TwoFingersTouchRotateHandler=or,e.TwoFingersTouchZoomHandler=ir,e.TwoFingersTouchZoomRotateHandler=yr,e.VectorTileSource=X,e.VideoSource=ee,e.addSourceType=(e,n)=>t._(void 0,void 0,void 0,function*(){if(ie(e))throw new Error('A source type called "'.concat(e,'" already exists.'));((e,t)=>{ne[e]=t})(e,n)}),e.clearPrewarmedResources=function(){const e=N;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(P),N=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return se().getRTLTextPluginStatus()},e.getVersion=function(){return to},e.getWorkerCount=function(){return D.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return j().broadcast("IS",e)},e.prewarm=function(){z().acquire(P)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return se().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){D.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}}),e}()},4067:(e,t,n)=>{"use strict";var i=n(4098),r=n(8198),o=n(9729),a=n(3350),s=n(4591),l=n(8544),c=Object.assign;e.exports=!c||n(5949)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=s(e),c=arguments.length,u=1,h=o.f,d=a.f;c>u;)for(var p,f=l(arguments[u++]),m=h?r(f).concat(h(f)):r(f),g=m.length,v=0;g>v;)p=m[v++],i&&!d.call(f,p)||(n[p]=f[p]);return n}:c},4098:(e,t,n)=>{e.exports=!n(5949)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function A(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=A.prototype=new y;b.constructor=A,m(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,r,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===o?"."+I(l,0):o,x(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),M(a,t,r,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+I(s=e[c],c);l+=M(s,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=M(s=s.value,t,r,u=o+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var i=[],r=0;return M(e,i,"","",function(e){return t.call(n,e,r++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},B={transition:null},P={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:B,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=A,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},4301:(e,t,n)=>{"use strict";var i=n(5478),r=n(9885),o=n(3193),a={};n(9993)(a,n(4027)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},4353:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4397:(e,t,n)=>{var i=n(8563)("keys"),r=n(1422);e.exports=function(e){return i[e]||(i[e]=r(e))}},4414:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=n(638),o=(i=r)&&i.__esModule?i:{default:i};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},4425:(e,t,n)=>{var i=n(9066),r=n(8321),o=n(8198);e.exports=n(4098)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},4591:(e,t,n)=>{var i=n(5429);e.exports=function(e){return Object(i(e))}},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4669:(e,t,n)=>{var i=n(7832);i(i.S+i.F,"Object",{assign:n(4067)})},4716:(e,t,n)=>{e.exports={default:n(6921),__esModule:!0}},4803:(e,t,n)=>{n(4669),e.exports=n(4353).Object.assign},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8587),r=n(8168);const o=["values","unit","step"],a=e=>{const t=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return t.sort((e,t)=>e.val-t.val),t.reduce((e,t)=>(0,r.A)({},e,{[t.key]:t.val}),{})};function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,l=(0,i.A)(e,o),c=a(t),u=Object.keys(c);function h(e){const i="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(i).concat(n,")")}function d(e){const i="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(i-s/100).concat(n,")")}function p(e,i){const r=u.indexOf(i);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof t[u[r]]?t[u[r]]:i)-s/100).concat(n,")")}return(0,r.A)({keys:u,values:c,up:h,down:d,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):h(e)},not:function(e){const t=u.indexOf(e);return 0===t?h(u[1]):t===u.length-1?d(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4943:(e,t,n)=>{var i=n(5761).document;e.exports=i&&i.documentElement},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,A=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case r:return t}}}function _(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||x(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===r},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===A||e.$$typeof===b||e.$$typeof===v)},t.typeOf=x},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i.A,private_createBreakpoints:()=>r.A,unstable_applyStyles:()=>o.A});var i=n(8280),r=n(4853),o=n(9703)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5080:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},5089:(e,t,n)=>{var i=n(5080);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},5173:(e,t,n)=>{e.exports=n(1497)()},5323:(e,t,n)=>{"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=n(1688),o=i(n(5043)),a=n(7321);n(5173),n(8620);var s=i(n(2213));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}var d=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=a.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(r.Router,{history:this.history,children:this.props.children})},t}(o.Component),p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=a.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(r.Router,{history:this.history,children:this.props.children})},t}(o.Component),f=function(e,t){return"function"==typeof e?e(t):e},m=function(e,t){return"string"==typeof e?a.createLocation(e,null,null,t):e},g=function(e){return e},v=o.forwardRef;void 0===v&&(v=g);var y=v(function(e,t){var n=e.innerRef,i=e.navigate,r=e.onClick,a=h(e,["innerRef","navigate","onClick"]),s=a.target,c=l({},a,{onClick:function(t){try{r&&r(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),i())}});return c.ref=g!==v&&t||n,o.createElement("a",c)}),A=v(function(e,t){var n=e.component,i=void 0===n?y:n,c=e.replace,u=e.to,d=e.innerRef,p=h(e,["component","replace","to","innerRef"]);return o.createElement(r.__RouterContext.Consumer,null,function(e){e||s(!1);var n=e.history,r=m(f(u,e.location),e.location),h=r?n.createHref(r):"",y=l({},p,{href:h,navigate:function(){var t=f(u,e.location),i=a.createPath(e.location)===a.createPath(m(t));(c||i?n.replace:n.push)(t)}});return g!==v?y.ref=t||d:y.innerRef=d,o.createElement(i,y)})}),b=function(e){return e},x=o.forwardRef;void 0===x&&(x=b);var _=x(function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,c=void 0===a?"active":a,u=e.activeStyle,d=e.className,p=e.exact,g=e.isActive,v=e.location,y=e.sensitive,_=e.strict,w=e.style,E=e.to,C=e.innerRef,S=h(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(r.__RouterContext.Consumer,null,function(e){e||s(!1);var n=v||e.location,a=m(f(E,n),n),h=a.pathname,T=h&&h.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),I=T?r.matchPath(n.pathname,{path:T,exact:p,sensitive:y,strict:_}):null,M=!!(g?g(I,n):I),k="function"==typeof d?d(M):d,R="function"==typeof w?w(M):w;M&&(k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(k,c),R=l({},R,u));var L=l({"aria-current":M&&i||null,className:k,style:R,to:a},S);return b!==x?L.ref=t||C:L.innerRef=C,o.createElement(A,L)})});Object.defineProperty(t,"W6",{enumerable:!0,get:function(){return r.useHistory}})},5419:(e,t,n)=>{e.exports=!n(4098)&&!n(5949)(function(){return 7!=Object.defineProperty(n(2721)("div"),"a",{get:function(){return 7}}).a})},5429:e=>{e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},5436:(e,t,n)=>{var i=n(1496),r=n(4591),o=n(4397)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},5471:(e,t,n)=>{n(7216);for(var i=n(5761),r=n(9993),o=n(859),a=n(4027)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},5478:(e,t,n)=>{var i=n(8321),r=n(4425),o=n(8721),a=n(4397)("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=n(2721)("iframe"),i=o.length;for(t.style.display="none",n(4943).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c[l][o[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=i(e),n=new s,s[l]=null,n[a]=e):n=c(),void 0===t?n:r(n,t)}},5540:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{A:()=>r})},5761:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},5900:e=>{"use strict";e.exports=JSON.parse('{"description":"The iconic font, CSS, and SVG framework","keywords":["font","awesome","fontawesome","icon","svg","bootstrap"],"homepage":"https://fontawesome.com","bugs":{"url":"https://github.com/FortAwesome/Font-Awesome/issues"},"author":"The Font Awesome Team (https://github.com/orgs/FortAwesome/people)","repository":{"type":"git","url":"https://github.com/FortAwesome/Font-Awesome"},"engines":{"node":">=6"},"dependencies":{"@fortawesome/fontawesome-common-types":"7.1.0"},"version":"7.1.0","name":"@fortawesome/fontawesome-svg-core","main":"index.js","module":"index.mjs","jsnext:main":"index.mjs","style":"styles.css","license":"MIT","types":"./index.d.ts","exports":{".":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","style":"./styles.css","default":"./index.js"},"./index":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./index.js":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./plugins":{"types":"./index.d.ts","module":"./plugins.mjs","import":"./plugins.mjs","default":"./plugins.mjs"},"./import.macro":"./import.macro.js","./import.macro.js":"./import.macro.js","./styles":"./styles.css","./styles.css":"./styles.css","./package.json":"./package.json"},"sideEffects":["./index.js","./index.mjs","./styles.css"]}')},5949:e=>{e.exports=function(e){try{return!!e()}catch(t){return!0}}},6247:(e,t,n)=>{e.exports={default:n(2079),__esModule:!0}},6271:(e,t,n)=>{var i=n(1084),r=n(8321),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(5089)(Function.call,n(8500).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},6429:(e,t,n)=>{n(2015),e.exports=n(4353).Object.setPrototypeOf},6535:(e,t,n)=>{var i=n(5761),r=n(4353),o=n(9799),a=n(7705),s=n(9066).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},6598:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var i={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},r=n(918),o=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,r.A)(function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()}),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,function(e,t,n){return f={name:t,styles:n,next:f},t})}return 1===i[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},d="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var i=n;if(void 0!==i.__emotion_styles)return i;switch(typeof n){case"boolean":return"";case"object":var r=n;if(1===r.anim)return f={name:r.name,styles:r.styles,next:f},r.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)f={name:s.name,styles:s.styles,next:f},s=s.next;return a.styles+";"}return function(e,t,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=p(e,t,n[r])+";";else for(var a in n){var s=n[a];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?i+=a+"{"+t[l]+"}":c(l)&&(i+=u(a)+":"+h(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&o)throw new Error(d);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var f=p(e,t,s);switch(a){case"animation":case"animationName":i+=u(a)+":"+f+";";break;default:i+=a+"{"+f+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(i+=u(a)+":"+h(a,s[m])+";")}}return i}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,r="";f=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,r+=p(n,t,o)):r+=o[0];for(var a=1;a<e.length;a++){if(r+=p(n,t,e[a]),i)r+=o[a]}m.lastIndex=0;for(var s,l="";null!==(s=m.exec(r));)l+="-"+s[1];var c=function(e){for(var t,n=0,i=0,r=e.length;r>=4;++i,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:c,styles:r,next:f}}},6731:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},6796:(e,t,n)=>{"use strict";var i,r=n(6929),o=(i=r)&&i.__esModule?i:{default:i};t.A=o.default},6819:()=>{},6835:(e,t,n)=>{"use strict";t.__esModule=!0;var i=a(n(1164)),r=a(n(7151)),o=a(n(6926));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,o.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},6921:(e,t,n)=>{n(20),n(5471),e.exports=n(7705).f("iterator")},6926:(e,t,n)=>{"use strict";t.__esModule=!0;var i=a(n(4716)),r=a(n(6247)),o="function"===typeof r.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof r.default&&"symbol"===o(i.default)?function(e){return"undefined"===typeof e?"undefined":o(e)}:function(e){return e&&"function"===typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":"undefined"===typeof e?"undefined":o(e)}},6929:(e,t,n)=>{"use strict";t.__esModule=!0;var i=h(n(4414)),r=h(n(9939)),o=h(n(6731)),a=h(n(1912)),s=h(n(6835)),l=n(5043),c=h(l),u=h(n(5173));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(){},p=function(e){function t(n,i){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n,i));return r.domRef=null,r.state={isHydrated:n.isHydrating,additionalNode:null,removeAdditionalNode:null},r}return(0,s.default)(t,e),t.removeNode=function(e){e&&e.parentNode.removeChild(e)},t.prototype.appendAdditionalElement=function(){for(var e=this.props,t=e.onError,n=e.onLoad,i=e.nonce,r=document.createElement("script"),o=0,a=this.domRef.attributes.length;o<a;o++){var s=this.domRef.attributes[o];"nonce"===s.nodeName?r.setAttribute(s.nodeName,i):r.setAttribute(s.nodeName,s.nodeValue)}return""===this.domRef.src&&this.domRef.innerHTML&&""!==this.domRef.innerHTML&&(r.innerHTML=this.domRef.innerHTML),r.addEventListener("load",n),r.addEventListener("error",t),this.domRef.parentNode.appendChild(r),r},t.prototype.componentDidMount=function(){this.state.isHydrated||this.setState({additionalNode:this.appendAdditionalElement(),removeAdditionalNode:null})},t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=t.src,i=t.dangerouslySetInnerHTML;n&&n===e.src||i&&i.__html===e.dangerouslySetInnerHTML.__html||this.setState({removeAdditionalNode:this.state.additionalNode,additionalNode:null})},t.prototype.componentWillUpdate=function(e,n){t.removeNode(n.removeAdditionalNode)},t.prototype.componentDidUpdate=function(){var e=this.state,t=e.additionalNode,n=e.removeAdditionalNode;null===t&&this.setState({additionalNode:this.appendAdditionalElement()}),null!==n&&this.setState({removeAdditionalNode:null})},t.prototype.componentWillUnmount=function(){t.removeNode(this.state.removeAdditionalNode),t.removeNode(this.state.additionalNode)},t.prototype.render=function(){var e=this;if(null!==this.state.additionalNode)return null;var t=this.props,n=(t.isHydrating,(0,r.default)(t,["isHydrating"]));return c.default.createElement("script",(0,i.default)({},n,{ref:function(t){return e.domRef=t}}))},t}(l.Component);p.propTypes={isHydrating:u.default.bool,async:u.default.oneOfType([u.default.bool,u.default.number]),crossOrigin:u.default.string,defer:u.default.bool,integrity:u.default.string,nonce:u.default.string,src:u.default.string,text:u.default.string,type:u.default.string,dangerouslySetInnerHTML:u.default.object,onError:u.default.func,onLoad:u.default.func},p.defaultProps={isHydrating:!1,onError:d,onLoad:d},t.default=p},7151:(e,t,n)=>{e.exports={default:n(614),__esModule:!0}},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>a,Yn:()=>o});var i=n(7598),r=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce((e,t)=>e&&e[t]?e[t]:null,e);if(null!=n)return n}return t.split(".").reduce((e,t)=>e&&null!=e[t]?e[t]:null,e)}function a(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return i="function"===typeof e?e(n):Array.isArray(e)?e[n]||r:o(e,n)||r,t&&(i=t(i,r,e)),i}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,r.NI)(e,c,e=>{let r=a(u,l,e);return e===r&&"string"===typeof e&&(r=a(u,l,"".concat(t).concat("default"===e?"":(0,i.A)(e)),e)),!1===n?r:{[n]:r}})};return c.propTypes={},c.filterProps=[t],c}},7216:(e,t,n)=>{"use strict";var i=n(2395),r=n(7323),o=n(859),a=n(1774);e.exports=n(3914)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,B(_);else{var t=i(u);null!==t&&P(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(S),S=-1),f=!0;var o=p;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&P(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,C=null,S=-1,T=5,I=-1;function M(){return!(t.unstable_now()-I<T)}function k(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?w():(E=!1,C=null)}}else E=!1}if("function"===typeof A)w=function(){A(k)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=k,w=function(){L.postMessage(null)}}else w=function(){v(k,0)};function B(e){C=e,E||(E=!0,w())}function P(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(g?(y(S),S=-1):g=!0,P(x,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,B(_))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7266:(e,t,n)=>{"use strict";var i=n(4994);t.X4=p,t.e$=f,t.tL=g,t.eM=function(e,t){const n=d(e),i=d(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},t.a=m;var r=i(n(457)),o=i(n(9214));function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function s(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map(e=>e+e)),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(s(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.default)(9,e));let i,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),i=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.default)(10,i))}else o=o.split(",");return o=o.map(e=>parseFloat(e)),{type:n,values:o,colorSpace:i}}const c=e=>{const t=l(e);return t.values.slice(0,3).map((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return-1!==t.indexOf("rgb")?i=i.map((e,t)=>t<3?parseInt(e,10):e):-1!==t.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),i=-1!==t.indexOf("color")?"".concat(n," ").concat(i.join(" ")):"".concat(i.join(", ")),"".concat(t,"(").concat(i,")")}function h(e){e=l(e);const{values:t}=e,n=t[0],i=t[1]/100,r=t[2]/100,o=i*Math.min(r,1-r),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return r-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),u({type:s,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(h(e)).values:e.values;return t=t.map(t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return d(e)>.5?f(e,t):m(e,t)}},7321:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createBrowserHistory:()=>E,createHashHistory:()=>k,createLocation:()=>g,createMemoryHistory:()=>L,createPath:()=>m,locationsAreEqual:()=>v,parsePath:()=>f});var i=n(8168);function r(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}const a=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&r(e),l=t&&r(t),c=s||l;if(e&&r(e)?a=i:i.length&&(a.pop(),a=a.concat(i)),!a.length)return"/";if(a.length){var u=a[a.length-1];n="."===u||".."===u||""===u}else n=!1;for(var h=0,d=a.length;d>=0;d--){var p=a[d];"."===p?o(a,d):".."===p?(o(a,d),h++):h&&(o(a,d),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var f=a.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,i){return e(t,n[i])});if("object"===typeof t||"object"===typeof n){var i=s(t),r=s(n);return i!==t||r!==n?e(i,r):Object.keys(Object.assign({},t,n)).every(function(i){return e(t[i],n[i])})}return!1};var c=n(3404);function u(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}function m(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function g(e,t,n,r){var o;"string"===typeof e?(o=f(e)).state=t:(void 0===(o=(0,i.A)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof i?i(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter(function(e){return e!==i})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach(function(e){return e.apply(void 0,n)})}}}var A=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var x="popstate",_="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function E(e){void 0===e&&(e={}),A||(0,c.A)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,h=void 0===l?b:l,f=o.keyLength,v=void 0===f?6:f,E=e.basename?p(u(e.basename)):"";function C(e){var t=e||{},n=t.key,i=t.state,r=window.location,o=r.pathname+r.search+r.hash;return E&&(o=d(o,E)),g(o,i,n)}function S(){return Math.random().toString(36).substr(2,v)}var T=y();function I(e){(0,i.A)(U,e),U.length=t.length,T.notifyListeners(U.location,U.action)}function M(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||L(C(e.state))}function k(){L(C(w()))}var R=!1;function L(e){if(R)R=!1,I();else{T.confirmTransitionTo(e,"POP",h,function(t){t?I({action:"POP",location:e}):function(e){var t=U.location,n=P.indexOf(t.key);-1===n&&(n=0);var i=P.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(R=!0,O(r))}(e)})}}var B=C(w()),P=[B.key];function D(e){return E+m(e)}function O(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?(window.addEventListener(x,M),r&&window.addEventListener(_,k)):0===N&&(window.removeEventListener(x,M),r&&window.removeEventListener(_,k))}var z=!1;var U={length:t.length,action:"POP",location:B,createHref:D,push:function(e,i){var r="PUSH",o=g(e,i,S(),U.location);T.confirmTransitionTo(o,r,h,function(e){if(e){var i=D(o),a=o.key,l=o.state;if(n)if(t.pushState({key:a,state:l},null,i),s)window.location.href=i;else{var c=P.indexOf(U.location.key),u=P.slice(0,c+1);u.push(o.key),P=u,I({action:r,location:o})}else window.location.href=i}})},replace:function(e,i){var r="REPLACE",o=g(e,i,S(),U.location);T.confirmTransitionTo(o,r,h,function(e){if(e){var i=D(o),a=o.key,l=o.state;if(n)if(t.replaceState({key:a,state:l},null,i),s)window.location.replace(i);else{var c=P.indexOf(U.location.key);-1!==c&&(P[c]=o.key),I({action:r,location:o})}else window.location.replace(i)}})},go:O,goBack:function(){O(-1)},goForward:function(){O(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=T.appendListener(e);return F(1),function(){F(-1),t()}}};return U}var C="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:u},slash:{encodePath:u,decodePath:u}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function I(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function M(e){window.location.replace(T(window.location.href)+"#"+e)}function k(e){void 0===e&&(e={}),A||(0,c.A)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,o=void 0===r?b:r,a=n.hashType,s=void 0===a?"slash":a,l=e.basename?p(u(e.basename)):"",h=S[s],f=h.encodePath,v=h.decodePath;function x(){var e=v(I());return l&&(e=d(e,l)),g(e)}var _=y();function w(e){(0,i.A)(U,e),U.length=t.length,_.notifyListeners(U.location,U.action)}var E=!1,k=null;function R(){var e,t,n=I(),i=f(n);if(n!==i)M(i);else{var r=x(),a=U.location;if(!E&&(t=r,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(k===m(r))return;k=null,function(e){if(E)E=!1,w();else{var t="POP";_.confirmTransitionTo(e,t,o,function(n){n?w({action:t,location:e}):function(e){var t=U.location,n=D.lastIndexOf(m(t));-1===n&&(n=0);var i=D.lastIndexOf(m(e));-1===i&&(i=0);var r=n-i;r&&(E=!0,O(r))}(e)})}}(r)}}var L=I(),B=f(L);L!==B&&M(B);var P=x(),D=[m(P)];function O(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?window.addEventListener(C,R):0===N&&window.removeEventListener(C,R)}var z=!1;var U={length:t.length,action:"POP",location:P,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+f(l+m(e))},push:function(e,t){var n="PUSH",i=g(e,void 0,void 0,U.location);_.confirmTransitionTo(i,n,o,function(e){if(e){var t=m(i),r=f(l+t);if(I()!==r){k=t,function(e){window.location.hash=e}(r);var o=D.lastIndexOf(m(U.location)),a=D.slice(0,o+1);a.push(t),D=a,w({action:n,location:i})}else w()}})},replace:function(e,t){var n="REPLACE",i=g(e,void 0,void 0,U.location);_.confirmTransitionTo(i,n,o,function(e){if(e){var t=m(i),r=f(l+t);I()!==r&&(k=t,M(r));var o=D.indexOf(m(U.location));-1!==o&&(D[o]=t),w({action:n,location:i})}})},go:O,goBack:function(){O(-1)},goForward:function(){O(1)},block:function(e){void 0===e&&(e=!1);var t=_.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=_.appendListener(e);return F(1),function(){F(-1),t()}}};return U}function R(e,t,n){return Math.min(Math.max(e,t),n)}function L(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,o=void 0===r?["/"]:r,a=t.initialIndex,s=void 0===a?0:a,l=t.keyLength,c=void 0===l?6:l,u=y();function h(e){(0,i.A)(b,e),b.length=b.entries.length,u.notifyListeners(b.location,b.action)}function d(){return Math.random().toString(36).substr(2,c)}var p=R(s,0,o.length-1),f=o.map(function(e){return g(e,void 0,"string"===typeof e?d():e.key||d())}),v=m;function A(e){var t=R(b.index+e,0,b.entries.length-1),i=b.entries[t];u.confirmTransitionTo(i,"POP",n,function(e){e?h({action:"POP",location:i,index:t}):h()})}var b={length:f.length,action:"POP",location:f[p],index:p,entries:f,createHref:v,push:function(e,t){var i="PUSH",r=g(e,t,d(),b.location);u.confirmTransitionTo(r,i,n,function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),h({action:i,location:r,index:t,entries:n})}})},replace:function(e,t){var i="REPLACE",r=g(e,t,d(),b.location);u.confirmTransitionTo(r,i,n,function(e){e&&(b.entries[b.index]=r,h({action:i,location:r}))})},go:A,goBack:function(){A(-1)},goForward:function(){A(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return b}},7323:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},7367:(e,t,n)=>{var i=n(1422)("meta"),r=n(1084),o=n(1496),a=n(9066).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(5949)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!o(e,i)&&u(e),e}}},7598:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(7868);function r(e){if("string"!==typeof e)throw new Error((0,i.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7681:(e,t,n)=>{"use strict";n(9005)},7705:(e,t,n)=>{t.f=n(4027)},7736:(e,t,n)=>{var i=n(3738).default,r=n(9045);e.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(8604),r=n(7162),o=n(3815);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce((e,t)=>(t.filterProps.forEach(n=>{e[n]=t}),e),{}),r=e=>Object.keys(e).reduce((t,n)=>i[n]?(0,o.A)(t,i[n](e)):t,{});return r.propTypes={},r.filterProps=t.reduce((e,t)=>e.concat(t.filterProps),[]),r};var s=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,r.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),A=c("borderLeftColor"),b=c("outline",l),x=c("outlineColor"),_=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,i.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,i._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};_.propTypes={},_.filterProps=["borderRadius"];a(u,h,d,p,f,m,g,v,y,A,_,b,x);const w=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,i.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,i._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};w.propTypes={},w.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,i.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,i._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};E.propTypes={},E.filterProps=["columnGap"];const C=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,i.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,i._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];a(w,E,C,(0,r.Ay)({prop:"gridColumn"}),(0,r.Ay)({prop:"gridRow"}),(0,r.Ay)({prop:"gridAutoFlow"}),(0,r.Ay)({prop:"gridAutoColumns"}),(0,r.Ay)({prop:"gridAutoRows"}),(0,r.Ay)({prop:"gridTemplateColumns"}),(0,r.Ay)({prop:"gridTemplateRows"}),(0,r.Ay)({prop:"gridTemplateAreas"}),(0,r.Ay)({prop:"gridArea"}));function S(e,t){return"grey"===t?t:e}a((0,r.Ay)({prop:"color",themeKey:"palette",transform:S}),(0,r.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,r.Ay)({prop:"backgroundColor",themeKey:"palette",transform:S}));function T(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const I=(0,r.Ay)({prop:"width",transform:T}),M=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,i;const r=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return r?"px"!==(null==(i=e.theme)||null==(i=i.breakpoints)?void 0:i.unit)?{maxWidth:"".concat(r).concat(e.theme.breakpoints.unit)}:{maxWidth:r}:{maxWidth:T(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};M.filterProps=["maxWidth"];const k=(0,r.Ay)({prop:"minWidth",transform:T}),R=(0,r.Ay)({prop:"height",transform:T}),L=(0,r.Ay)({prop:"maxHeight",transform:T}),B=(0,r.Ay)({prop:"minHeight",transform:T}),P=((0,r.Ay)({prop:"size",cssProperty:"width",transform:T}),(0,r.Ay)({prop:"size",cssProperty:"height",transform:T}),a(I,M,k,R,L,B,(0,r.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:i.Ms},pt:{style:i.Ms},pr:{style:i.Ms},pb:{style:i.Ms},pl:{style:i.Ms},px:{style:i.Ms},py:{style:i.Ms},padding:{style:i.Ms},paddingTop:{style:i.Ms},paddingRight:{style:i.Ms},paddingBottom:{style:i.Ms},paddingLeft:{style:i.Ms},paddingX:{style:i.Ms},paddingY:{style:i.Ms},paddingInline:{style:i.Ms},paddingInlineStart:{style:i.Ms},paddingInlineEnd:{style:i.Ms},paddingBlock:{style:i.Ms},paddingBlockStart:{style:i.Ms},paddingBlockEnd:{style:i.Ms},m:{style:i.Lc},mt:{style:i.Lc},mr:{style:i.Lc},mb:{style:i.Lc},ml:{style:i.Lc},mx:{style:i.Lc},my:{style:i.Lc},margin:{style:i.Lc},marginTop:{style:i.Lc},marginRight:{style:i.Lc},marginBottom:{style:i.Lc},marginLeft:{style:i.Lc},marginX:{style:i.Lc},marginY:{style:i.Lc},marginInline:{style:i.Lc},marginInlineStart:{style:i.Lc},marginInlineEnd:{style:i.Lc},marginBlock:{style:i.Lc},marginBlockStart:{style:i.Lc},marginBlockEnd:{style:i.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:w},rowGap:{style:C},columnGap:{style:E},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:T},maxWidth:{style:M},minWidth:{transform:T},height:{transform:T},maxHeight:{transform:T},minHeight:{transform:T},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},7800:(e,t,n)=>{var i=n(1774),r=n(1638).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(t){return a.slice()}}(e):r(i(e))}},7832:(e,t,n)=>{var i=n(5761),r=n(4353),o=n(5089),a=n(9993),s=n(1496),l="prototype",c=function(e,t,n){var u,h,d,p=e&c.F,f=e&c.G,m=e&c.S,g=e&c.P,v=e&c.B,y=e&c.W,A=f?r:r[t]||(r[t]={}),b=A[l],x=f?i:m?i[t]:(i[t]||{})[l];for(u in f&&(n=t),n)(h=!p&&x&&void 0!==x[u])&&s(A,u)||(d=h?x[u]:n[u],A[u]=f&&"function"!=typeof x[u]?n[u]:v&&h?o(d,i):y&&x[u]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[l]=e[l],t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((A.virtual||(A.virtual={}))[u]=d,e&c.R&&b&&!b[u]&&a(b,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},7868:(e,t,n)=>{"use strict";function i(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>i})},7918:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i.A});var i=n(7598)},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8052:(e,t,n)=>{"use strict";var i=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=g,rootShouldForwardProp:i=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,r.default)({},e,{theme:y((0,r.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.internal_processStyles)(e,e=>e.filter(e=>!(null!=e&&e.__mui_systemSx)));const{name:h,slot:p,skipVariantsResolver:m,skipSx:g,overridesResolver:x=A(v(p))}=c,_=(0,o.default)(c,d),w=h&&h.startsWith("Mui")||p?"components":"custom",E=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,C=g||!1;let S=f;"Root"===p||"root"===p?S=i:p?S=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(S=void 0);const T=(0,a.default)(e,(0,r.default)({shouldForwardProp:S,label:undefined},_)),I=e=>"function"===typeof e&&e.__emotion_real!==e||(0,s.isPlainObject)(e)?i=>{const o=y({theme:i.theme,defaultTheme:n,themeId:t});return b(e,(0,r.default)({},i,{theme:o}),o.modularCssLayers?w:void 0)}:e,M=function(i){let o=I(i);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];const c=s?s.map(I):[];h&&x&&c.push(e=>{const i=y((0,r.default)({},e,{defaultTheme:n,themeId:t}));if(!i.components||!i.components[h]||!i.components[h].styleOverrides)return null;const o=i.components[h].styleOverrides,a={};return Object.entries(o).forEach(t=>{let[n,o]=t;a[n]=b(o,(0,r.default)({},e,{theme:i}),i.modularCssLayers?"theme":void 0)}),x(e,a)}),h&&!E&&c.push(e=>{var i;const o=y((0,r.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(i=o.components)||null==(i=i[h])?void 0:i.variants},(0,r.default)({},e,{theme:o}),o.modularCssLayers?"theme":void 0)}),C||c.push(u);const d=c.length-s.length;if(Array.isArray(i)&&d>0){const e=new Array(d).fill("");o=[...i,...e],o.raw=[...i.raw,...e]}const p=T(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return T.withConfig&&(M.withConfig=T.withConfig),M}};var r=i(n(4634)),o=i(n(4893)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3174)),s=n(9482),l=(i(n(7918)),i(n(3382)),i(n(4989))),c=i(n(3234));const u=["ownerState"],h=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function m(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles="@layer ".concat(t,"{").concat(String(e.styles),"}")),e}const g=(0,l.default)(),v=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:n,themeId:i}=e;return r=n,0===Object.keys(r).length?t:n[i]||n;var r}function A(e){return e?(t,n)=>n[e]:null}function b(e,t,n){let{ownerState:i}=t,s=(0,o.default)(t,u);const l="function"===typeof e?e((0,r.default)({ownerState:i},s)):e;if(Array.isArray(l))return l.flatMap(e=>b(e,(0,r.default)({ownerState:i},s),n));if(l&&"object"===typeof l&&Array.isArray(l.variants)){const{variants:e=[]}=l;let t=(0,o.default)(l,h);return e.forEach(e=>{let o=!0;if("function"===typeof e.props?o=e.props((0,r.default)({ownerState:i},s,i)):Object.keys(e.props).forEach(t=>{(null==i?void 0:i[t])!==e.props[t]&&s[t]!==e.props[t]&&(o=!1)}),o){Array.isArray(t)||(t=[t]);const o="function"===typeof e.style?e.style((0,r.default)({ownerState:i},s,i)):e.style;t.push(n?m((0,a.internal_serializeStyles)(o),n):o)}}),t}return n?m((0,a.internal_serializeStyles)(l),n):l}},8123:(e,t,n)=>{var i=n(1141);e.exports=m,e.exports.parse=o,e.exports.compile=function(e,t){return c(o(e,t),t)},e.exports.tokensToFunction=c,e.exports.tokensToRegExp=f;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,i=[],o=0,s=0,l="",c=t&&t.delimiter||"/";null!=(n=r.exec(e));){var u=n[0],d=n[1],p=n.index;if(l+=e.slice(s,p),s=p+u.length,d)l+=d[1];else{var f=e[s],m=n[2],g=n[3],v=n[4],y=n[5],A=n[6],b=n[7];l&&(i.push(l),l="");var x=null!=m&&null!=f&&f!==m,_="+"===A||"*"===A,w="?"===A||"*"===A,E=m||c,C=v||y,S=m||("string"===typeof i[i.length-1]?i[i.length-1]:"");i.push({name:g||o++,prefix:m||"",delimiter:E,optional:w,repeat:_,partial:x,asterisk:!!b,pattern:C?h(C):b?".*":a(E,S)})}}return s<e.length&&(l+=e.substr(s)),l&&i.push(l),i}function a(e,t){return!t||t.indexOf(e)>-1?"[^"+u(e)+"]+?":u(t)+"|(?:(?!"+u(t)+")[^"+u(e)+"])+?"}function s(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function c(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",p(t)));return function(t,r){for(var o="",a=t||{},c=(r||{}).pretty?s:encodeURIComponent,u=0;u<e.length;u++){var h=e[u];if("string"!==typeof h){var d,p=a[h.name];if(null==p){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(i(p)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var f=0;f<p.length;f++){if(d=c(p[f]),!n[u].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===f?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?l(p):c(p),!n[u].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');o+=h.prefix+d}}else o+=h}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function h(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function p(e){return e&&e.sensitive?"":"i"}function f(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)a+=u(l);else{var c=u(l.prefix),h="(?:"+l.pattern+")";t.push(l),l.repeat&&(h+="(?:"+c+h+")*"),a+=h=l.optional?l.partial?c+"("+h+")?":"(?:"+c+"("+h+"))?":c+"("+h+")"}}var f=u(n.delimiter||"/"),m=a.slice(-f.length)===f;return r||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&m?"":"(?="+f+"|$)",d(new RegExp("^"+a,p(n)),t)}function m(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return d(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(m(e[r],t,n).source);return d(new RegExp("(?:"+i.join("|")+")",p(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},8139:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(null,arguments)}n.d(t,{A:()=>i})},8198:(e,t,n)=>{var i=n(8330),r=n(8721);e.exports=Object.keys||function(e){return i(e,r)}},8212:(e,t,n)=>{var i=n(8198),r=n(9729),o=n(3350);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(8168),r=n(8587),o=n(9172),a=n(4853);const s={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),h=n(9703);const d=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,r.A)(e,d),g=(0,a.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0===n.length?[1]:n).map(e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n}).join(" ")};return n.mui=!0,n}(p);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,i.A)({mode:"light"},n),spacing:v,shape:(0,i.A)({},s,f)},m);y.applyStyles=h.A;for(var A=arguments.length,b=new Array(A>1?A-1:0),x=1;x<A;x++)b[x-1]=arguments[x];return y=b.reduce((e,t)=>(0,o.A)(e,t),y),y.unstable_sxConfig=(0,i.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},8312:(e,t,n)=>{var i=n(8968),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},8321:(e,t,n)=>{var i=n(1084);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},8330:(e,t,n)=>{var i=n(1496),r=n(1774),o=n(3255)(!1),a=n(4397)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},8500:(e,t,n)=>{var i=n(3350),r=n(9885),o=n(1774),a=n(647),s=n(1496),l=n(5419),c=Object.getOwnPropertyDescriptor;t.f=n(4098)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(n){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},8544:(e,t,n)=>{var i=n(4008);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},8563:(e,t,n)=>{var i=n(4353),r=n(5761),o="__core-js_shared__",a=r[o]||(r[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(9799)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},8587:(e,t,n)=>{"use strict";function i(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}n.d(t,{A:()=>i})},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>A});var i=n(9751),r=n(7162),o=n(3815);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}(e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),i=a[t],r=s[n]||"";return Array.isArray(r)?r.map(e=>i+e):[i+r]}),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,i){var o;const a=null!=(o=(0,r.Yn)(e,t,!1))?o:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce((e,i)=>(e[i]=m(t,n),e),{})}(c(n),r),a=e[n];return(0,i.NI)(e,a,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map(i=>g(e,t,i,n)).reduce(o.A,{})}function y(e){return v(e,u)}function A(e){return v(e,h)}function b(e){return v(e,d)}y.propTypes={},y.filterProps=u,A.propTypes={},A.filterProps=h,b.propTypes={},b.filterProps=d},8620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=function(e,t){}},8628:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var i=e.name||"",r=(e.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):r===t})}return!0}},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(8168),r=n(8587),o=n(9172),a=n(7758);const s=["sx"],l=e=>{var t,n;const i={systemProps:{},otherProps:{}},r=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:a.A;return Object.keys(e).forEach(t=>{r[t]?i.systemProps[t]=e[t]:i.otherProps[t]=e[t]}),i};function c(e){const{sx:t}=e,n=(0,r.A)(e,s),{systemProps:a,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[a,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,i.A)({},a,e):a}:(0,i.A)({},a,t),(0,i.A)({},c,{sx:u})}},8721:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var i=n(7598),r=n(3815),o=n(7162),a=n(9751),s=n(7758);function l(){function e(e,t,n,r){const s={[e]:t,theme:n},l=r[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(d)return d(s);return(0,a.NI)(s,t,t=>{let n=(0,o.BO)(p,h,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,h,"".concat(e).concat("default"===t?"":(0,i.A)(t)),t)),!1===c?n:{[c]:n}})}return function t(n){var i;const{sx:o,theme:l={},nested:c}=n||{};if(!o)return null;const u=null!=(i=l.unstable_sxConfig)?i:s.A;function h(n){let i=n;if("function"===typeof n)i=n(l);else if("object"!==typeof n)return n;if(!i)return null;const o=(0,a.EU)(l.breakpoints),s=Object.keys(o);let h=o;return Object.keys(i).forEach(n=>{const o=(s=i[n],c=l,"function"===typeof s?s(c):s);var s,c;if(null!==o&&void 0!==o)if("object"===typeof o)if(u[n])h=(0,r.A)(h,e(n,o,l,u));else{const e=(0,a.NI)({theme:l},o,e=>({[n]:e}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce((e,t)=>e.concat(Object.keys(t)),[]),r=new Set(i);return t.every(e=>r.size===Object.keys(e).length)}(e,o)?h=(0,r.A)(h,e):h[n]=t({sx:o,theme:l,nested:!0})}else h=(0,r.A)(h,e(n,o,l,u))}),!c&&l.modularCssLayers?{"@layer sx":(0,a.vf)(s,h)}:(0,a.vf)(s,h)}return Array.isArray(o)?o.map(h):h(o)}}const c=l();c.filterProps=["sx"];const u=c},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8968:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},8987:(e,t,n)=>{n(6535)("asyncIterator")},9005:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,A=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case r:return t}}}function _(e){return x(e)===h}},9045:(e,t,n)=>{var i=n(3738).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9066:(e,t,n)=>{var i=n(8321),r=n(5419),o=n(647),a=Object.defineProperty;t.f=n(4098)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},9172:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>o});var i=n(8168),r=n(5043);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function a(e){if(r.isValidElement(e)||!o(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=a(e[n])}),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,i.A)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach(i=>{r.isValidElement(t[i])?l[i]=t[i]:o(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&o(e[i])?l[i]=s(e[i],t[i],n):n.clone?l[i]=o(t[i])?a(t[i]):t[i]:l[i]=t[i]}),l}},9214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},9369:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>h,c:()=>f,h:()=>d,w:()=>u});var i=n(5043),r=n(3803),o=n(1722),a=n(6598),s=n(9436),l=i.createContext("undefined"!==typeof HTMLElement?(0,r.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,i.forwardRef)(function(t,n){var r=(0,i.useContext)(l);return e(t,r,n)})},h=i.createContext({});var d={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var i in t)d.call(t,i)&&(n[i]=t[i]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return(0,o.SF)(t,n,i),(0,s.s)(function(){return(0,o.sk)(t,n,i)}),null},g=u(function(e,t,n){var r=e.css;"string"===typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var s=e[p],l=[r],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,a.J)(l,void 0,i.useContext(h));c+=t.key+"-"+u.name;var f={};for(var g in e)d.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),i.createElement(i.Fragment,null,i.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof s}),i.createElement(s,f))})},9436:(e,t,n)=>{"use strict";var i;n.d(t,{i:()=>s,s:()=>a});var r=n(5043),o=!!(i||(i=n.t(r,2))).useInsertionEffect&&(i||(i=n.t(r,2))).useInsertionEffect,a=o||function(e){return e()},s=o||r.useLayoutEffect},9482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i.A,isPlainObject:()=>i.Q});var i=n(9172)},9703:(e,t,n)=>{"use strict";function i(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const i=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[i]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>i})},9729:(e,t)=>{t.f=Object.getOwnPropertySymbols},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>a,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>r});var i=n(9172);const r={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function a(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const e=i.breakpoints||o;return t.reduce((i,r,o)=>(i[e.up(e.keys[o])]=n(t[o]),i),{})}if("object"===typeof t){const e=i.breakpoints||o;return Object.keys(t).reduce((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i},{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce((t,n)=>(t[e.up(n)]={},t),{}))||{}}function l(e,t){return e.reduce((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e},t)}function c(e){const t=s(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const a=[t,...r].reduce((e,t)=>(0,i.A)(e,t),{});return l(Object.keys(t),a)}function u(e){let{values:t,breakpoints:n,base:i}=e;const r=i||function(e,t){if("object"!==typeof e)return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((t,i)=>{i<e.length&&(n[t]=!0)}):i.forEach(t=>{null!=e[t]&&(n[t]=!0)}),n}(t,n),o=Object.keys(r);if(0===o.length)return t;let a;return o.reduce((e,n,i)=>(Array.isArray(t)?(e[n]=null!=t[i]?t[i]:t[a],a=i):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e),{})}},9799:e=>{e.exports=!0},9885:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9939:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}},9993:(e,t,n)=>{var i=n(9066),r=n(9885);e.exports=n(4098)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,n.d(o,a),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{453:"f1515190",879:"e7ca0632"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tour:";n.l=(i,r,o,a)=>{if(e[i])e[i].push(r);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[r];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,o,[a,s,l]=i,c=0;if(a.some(t=>0!==e[t])){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunktour=self.webpackChunktour||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>me,AddEquation:()=>P,AddOperation:()=>ue,AdditiveAnimationBlendMode:()=>$t,AdditiveBlending:()=>k,AgXToneMapping:()=>ve,AlphaFormat:()=>Ze,AlwaysCompare:()=>Fn,AlwaysDepth:()=>te,AlwaysStencilFunc:()=>kn,AmbientLight:()=>Qu,AnimationAction:()=>Dh,AnimationClip:()=>fu,AnimationLoader:()=>wu,AnimationMixer:()=>Nh,AnimationObjectGroup:()=>Ph,AnimationUtils:()=>tu,ArcCurve:()=>gl,ArrayCamera:()=>hh,ArrowHelper:()=>Ld,AttachedBindMode:()=>Ae,Audio:()=>Ah,AudioAnalyser:()=>Ch,AudioContext:()=>oh,AudioListener:()=>yh,AudioLoader:()=>ah,AxesHelper:()=>Bd,BackSide:()=>S,BasicDepthPacking:()=>rn,BasicShadowMap:()=>x,BatchedMesh:()=>Fs,Bone:()=>es,BooleanKeyframeTrack:()=>su,Box2:()=>$h,Box3:()=>Qi,Box3Helper:()=>Td,BoxGeometry:()=>ta,BoxHelper:()=>Sd,BufferAttribute:()=>Eo,BufferGeometry:()=>jo,BufferGeometryLoader:()=>Zu,ByteType:()=>je,Cache:()=>gu,Camera:()=>sa,CameraHelper:()=>wd,CanvasTexture:()=>dl,CapsuleGeometry:()=>Nl,CatmullRomCurve3:()=>_l,CineonToneMapping:()=>fe,CircleGeometry:()=>Fl,ClampToEdgeWrapping:()=>Ie,Clock:()=>dh,Color:()=>uo,ColorKeyframeTrack:()=>lu,ColorManagement:()=>Ei,CompressedArrayTexture:()=>ul,CompressedCubeTexture:()=>hl,CompressedTexture:()=>cl,CompressedTextureLoader:()=>Eu,ConeGeometry:()=>Ul,ConstantAlphaFactor:()=>Z,ConstantColorFactor:()=>K,Controls:()=>Dd,CubeCamera:()=>pa,CubeReflectionMapping:()=>_e,CubeRefractionMapping:()=>we,CubeTexture:()=>fa,CubeTextureLoader:()=>Su,CubeUVReflectionMapping:()=>Se,CubicBezierCurve:()=>Sl,CubicBezierCurve3:()=>Tl,CubicInterpolant:()=>iu,CullFaceBack:()=>y,CullFaceFront:()=>A,CullFaceFrontBack:()=>b,CullFaceNone:()=>v,Curve:()=>fl,CurvePath:()=>Pl,CustomBlending:()=>B,CustomToneMapping:()=>ge,CylinderGeometry:()=>zl,Cylindrical:()=>Kh,Data3DTexture:()=>zi,DataArrayTexture:()=>Ni,DataTexture:()=>ts,DataTextureLoader:()=>Tu,DataUtils:()=>bo,DecrementStencilOp:()=>An,DecrementWrapStencilOp:()=>xn,DefaultLoadingManager:()=>yu,DepthFormat:()=>it,DepthStencilFormat:()=>rt,DepthTexture:()=>pl,DetachedBindMode:()=>be,DirectionalLight:()=>Gu,DirectionalLightHelper:()=>bd,DiscreteInterpolant:()=>ou,DodecahedronGeometry:()=>Vl,DoubleSide:()=>T,DstAlphaFactor:()=>Q,DstColorFactor:()=>q,DynamicCopyUsage:()=>Wn,DynamicDrawUsage:()=>Un,DynamicReadUsage:()=>Hn,EdgesGeometry:()=>ql,EllipseCurve:()=>ml,EqualCompare:()=>Bn,EqualDepth:()=>re,EqualStencilFunc:()=>Cn,EquirectangularReflectionMapping:()=>Ee,EquirectangularRefractionMapping:()=>Ce,Euler:()=>Ir,EventDispatcher:()=>$n,ExtrudeGeometry:()=>wc,FileLoader:()=>_u,Float16BufferAttribute:()=>Lo,Float32BufferAttribute:()=>Bo,FloatType:()=>We,Fog:()=>ba,FogExp2:()=>Aa,FramebufferTexture:()=>ll,FrontSide:()=>C,Frustum:()=>bs,GLBufferAttribute:()=>Gh,GLSL1:()=>Xn,GLSL3:()=>Yn,GreaterCompare:()=>Dn,GreaterDepth:()=>ae,GreaterEqualCompare:()=>Nn,GreaterEqualDepth:()=>oe,GreaterEqualStencilFunc:()=>Mn,GreaterStencilFunc:()=>Tn,GridHelper:()=>md,Group:()=>ga,HalfFloatType:()=>qe,HemisphereLight:()=>ku,HemisphereLightHelper:()=>fd,IcosahedronGeometry:()=>Cc,ImageBitmapLoader:()=>ih,ImageLoader:()=>Cu,ImageUtils:()=>Ii,IncrementStencilOp:()=>yn,IncrementWrapStencilOp:()=>bn,InstancedBufferAttribute:()=>os,InstancedBufferGeometry:()=>Ju,InstancedInterleavedBuffer:()=>Hh,InstancedMesh:()=>ps,Int16BufferAttribute:()=>Io,Int32BufferAttribute:()=>ko,Int8BufferAttribute:()=>Co,IntType:()=>Ge,InterleavedBuffer:()=>_a,InterleavedBufferAttribute:()=>Ea,Interpolant:()=>nu,InterpolateDiscrete:()=>Wt,InterpolateLinear:()=>qt,InterpolateSmooth:()=>Xt,InvertStencilOp:()=>_n,KeepStencilOp:()=>gn,KeyframeTrack:()=>au,LOD:()=>Ha,LatheGeometry:()=>Ol,Layers:()=>Mr,LessCompare:()=>Ln,LessDepth:()=>ne,LessEqualCompare:()=>Pn,LessEqualDepth:()=>ie,LessEqualStencilFunc:()=>Sn,LessStencilFunc:()=>En,Light:()=>Mu,LightProbe:()=>Xu,Line:()=>qs,Line3:()=>nd,LineBasicMaterial:()=>zs,LineCurve:()=>Il,LineCurve3:()=>Ml,LineDashedMaterial:()=>Yc,LineLoop:()=>Zs,LineSegments:()=>Js,LinearFilter:()=>De,LinearInterpolant:()=>ru,LinearMipMapLinearFilter:()=>ze,LinearMipMapNearestFilter:()=>Ne,LinearMipmapLinearFilter:()=>Fe,LinearMipmapNearestFilter:()=>Oe,LinearSRGBColorSpace:()=>dn,LinearToneMapping:()=>de,LinearTransfer:()=>pn,Loader:()=>Au,LoaderUtils:()=>Ku,LoadingManager:()=>vu,LoopOnce:()=>Ht,LoopPingPong:()=>Qt,LoopRepeat:()=>Gt,LuminanceAlphaFormat:()=>nt,LuminanceFormat:()=>tt,MOUSE:()=>m,Material:()=>fo,MaterialLoader:()=>Yu,MathUtils:()=>ui,Matrix2:()=>Jh,Matrix3:()=>di,Matrix4:()=>yr,MaxEquation:()=>F,Mesh:()=>$o,MeshBasicMaterial:()=>mo,MeshDepthMaterial:()=>Wc,MeshDistanceMaterial:()=>qc,MeshLambertMaterial:()=>Qc,MeshMatcapMaterial:()=>Xc,MeshNormalMaterial:()=>Gc,MeshPhongMaterial:()=>Vc,MeshPhysicalMaterial:()=>jc,MeshStandardMaterial:()=>Uc,MeshToonMaterial:()=>Hc,MinEquation:()=>N,MirroredRepeatWrapping:()=>Me,MixOperation:()=>ce,MultiplyBlending:()=>L,MultiplyOperation:()=>le,NearestFilter:()=>ke,NearestMipMapLinearFilter:()=>Pe,NearestMipMapNearestFilter:()=>Le,NearestMipmapLinearFilter:()=>Be,NearestMipmapNearestFilter:()=>Re,NeutralToneMapping:()=>ye,NeverCompare:()=>Rn,NeverDepth:()=>ee,NeverStencilFunc:()=>wn,NoBlending:()=>I,NoColorSpace:()=>un,NoToneMapping:()=>he,NormalAnimationBlendMode:()=>Zt,NormalBlending:()=>M,NotEqualCompare:()=>On,NotEqualDepth:()=>se,NotEqualStencilFunc:()=>In,NumberKeyframeTrack:()=>cu,Object3D:()=>Qr,ObjectLoader:()=>$u,ObjectSpaceNormalMap:()=>cn,OctahedronGeometry:()=>Sc,OneFactor:()=>U,OneMinusConstantAlphaFactor:()=>$,OneMinusConstantColorFactor:()=>J,OneMinusDstAlphaFactor:()=>W,OneMinusDstColorFactor:()=>X,OneMinusSrcAlphaFactor:()=>G,OneMinusSrcColorFactor:()=>V,OrthographicCamera:()=>Vu,PCFShadowMap:()=>_,PCFSoftShadowMap:()=>w,PMREMGenerator:()=>cp,Path:()=>Dl,PerspectiveCamera:()=>ha,Plane:()=>vs,PlaneGeometry:()=>Tc,PlaneHelper:()=>Id,PointLight:()=>ju,PointLightHelper:()=>ud,Points:()=>rl,PointsMaterial:()=>$s,PolarGridHelper:()=>gd,PolyhedronGeometry:()=>jl,PositionalAudio:()=>Eh,PropertyBinding:()=>Bh,PropertyMixer:()=>Sh,QuadraticBezierCurve:()=>kl,QuadraticBezierCurve3:()=>Rl,Quaternion:()=>ji,QuaternionKeyframeTrack:()=>hu,QuaternionLinearInterpolant:()=>uu,RED_GREEN_RGTC2_Format:()=>jt,RED_RGTC1_Format:()=>zt,REVISION:()=>f,RGBADepthPacking:()=>on,RGBAFormat:()=>et,RGBAIntegerFormat:()=>ut,RGBA_ASTC_10x10_Format:()=>Bt,RGBA_ASTC_10x5_Format:()=>kt,RGBA_ASTC_10x6_Format:()=>Rt,RGBA_ASTC_10x8_Format:()=>Lt,RGBA_ASTC_12x10_Format:()=>Pt,RGBA_ASTC_12x12_Format:()=>Dt,RGBA_ASTC_4x4_Format:()=>_t,RGBA_ASTC_5x4_Format:()=>wt,RGBA_ASTC_5x5_Format:()=>Et,RGBA_ASTC_6x5_Format:()=>Ct,RGBA_ASTC_6x6_Format:()=>St,RGBA_ASTC_8x5_Format:()=>Tt,RGBA_ASTC_8x6_Format:()=>It,RGBA_ASTC_8x8_Format:()=>Mt,RGBA_BPTC_Format:()=>Ot,RGBA_ETC2_EAC_Format:()=>xt,RGBA_PVRTC_2BPPV1_Format:()=>yt,RGBA_PVRTC_4BPPV1_Format:()=>vt,RGBA_S3TC_DXT1_Format:()=>dt,RGBA_S3TC_DXT3_Format:()=>pt,RGBA_S3TC_DXT5_Format:()=>ft,RGBDepthPacking:()=>an,RGBFormat:()=>$e,RGBIntegerFormat:()=>ct,RGB_BPTC_SIGNED_Format:()=>Nt,RGB_BPTC_UNSIGNED_Format:()=>Ft,RGB_ETC1_Format:()=>At,RGB_ETC2_Format:()=>bt,RGB_PVRTC_2BPPV1_Format:()=>gt,RGB_PVRTC_4BPPV1_Format:()=>mt,RGB_S3TC_DXT1_Format:()=>ht,RGDepthPacking:()=>sn,RGFormat:()=>st,RGIntegerFormat:()=>lt,RawShaderMaterial:()=>zc,Ray:()=>vr,Raycaster:()=>Wh,RectAreaLight:()=>Wu,RedFormat:()=>ot,RedIntegerFormat:()=>at,ReinhardToneMapping:()=>pe,RenderTarget:()=>Di,RenderTarget3D:()=>Fh,RenderTargetArray:()=>zh,RepeatWrapping:()=>Te,ReplaceStencilOp:()=>vn,ReverseSubtractEquation:()=>O,RingGeometry:()=>Ic,SIGNED_RED_GREEN_RGTC2_Format:()=>Vt,SIGNED_RED_RGTC1_Format:()=>Ut,SRGBColorSpace:()=>hn,SRGBTransfer:()=>fn,Scene:()=>xa,ShaderChunk:()=>Ud,ShaderLib:()=>Vd,ShaderMaterial:()=>aa,ShadowMaterial:()=>Fc,Shape:()=>Xl,ShapeGeometry:()=>Mc,ShapePath:()=>Pd,ShapeUtils:()=>bc,ShortType:()=>Ve,Skeleton:()=>rs,SkeletonHelper:()=>ld,SkinnedMesh:()=>$a,Source:()=>ki,Sphere:()=>cr,SphereGeometry:()=>kc,Spherical:()=>Yh,SphericalHarmonics3:()=>qu,SplineCurve:()=>Ll,SpotLight:()=>Ou,SpotLightHelper:()=>rd,Sprite:()=>za,SpriteMaterial:()=>Ca,SrcAlphaFactor:()=>H,SrcAlphaSaturateFactor:()=>Y,SrcColorFactor:()=>j,StaticCopyUsage:()=>Qn,StaticDrawUsage:()=>zn,StaticReadUsage:()=>Vn,StereoCamera:()=>uh,StreamCopyUsage:()=>qn,StreamDrawUsage:()=>jn,StreamReadUsage:()=>Gn,StringKeyframeTrack:()=>du,SubtractEquation:()=>D,SubtractiveBlending:()=>R,TOUCH:()=>g,TangentSpaceNormalMap:()=>ln,TetrahedronGeometry:()=>Rc,Texture:()=>Bi,TextureLoader:()=>Iu,TextureUtils:()=>Nd,TimestampQuery:()=>Zn,TorusGeometry:()=>Lc,TorusKnotGeometry:()=>Bc,Triangle:()=>oo,TriangleFanDrawMode:()=>nn,TriangleStripDrawMode:()=>tn,TrianglesDrawMode:()=>en,TubeGeometry:()=>Pc,UVMapping:()=>xe,Uint16BufferAttribute:()=>Mo,Uint32BufferAttribute:()=>Ro,Uint8BufferAttribute:()=>So,Uint8ClampedBufferAttribute:()=>To,Uniform:()=>Uh,UniformsGroup:()=>Vh,UniformsLib:()=>jd,UniformsUtils:()=>oa,UnsignedByteType:()=>Ue,UnsignedInt248Type:()=>Ke,UnsignedInt5999Type:()=>Je,UnsignedIntType:()=>Qe,UnsignedShort4444Type:()=>Xe,UnsignedShort5551Type:()=>Ye,UnsignedShortType:()=>He,VSMShadowMap:()=>E,Vector2:()=>hi,Vector3:()=>Vi,Vector4:()=>Pi,VectorKeyframeTrack:()=>pu,VideoFrameTexture:()=>sl,VideoTexture:()=>al,WebGL3DRenderTarget:()=>Ui,WebGLArrayRenderTarget:()=>Fi,WebGLCoordinateSystem:()=>Kn,WebGLCubeRenderTarget:()=>ma,WebGLRenderTarget:()=>Oi,WebGLRenderer:()=>xm,WebGLUtils:()=>pm,WebGPUCoordinateSystem:()=>Jn,WebXRController:()=>ya,WireframeGeometry:()=>Dc,WrapAroundEnding:()=>Jt,ZeroCurvatureEnding:()=>Yt,ZeroFactor:()=>z,ZeroSlopeEnding:()=>Kt,ZeroStencilOp:()=>mn,createCanvasElement:()=>yi});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>l3,hasStandardBrowserEnv:()=>u3,hasStandardBrowserWebWorkerEnv:()=>h3,navigator:()=>c3,origin:()=>d3});var i=n(5043),r=n.t(i,2),o=n(4391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h={currentUser:null,user:null,meetingScheduled:!1,openLogin:!1,loading:!1,alert:{open:!1,severity:"info",message:""},profile:{open:!1,file:null,photoURL:""},images:[],details:{title:"",description:"",price:0},location:{lng:80,lat:25},pilgrims:[],priceFilter:50,addressFilter:null,filteredPilgrims:[]},d=(e,t)=>{switch(t.type){case"USER":return u(u({},e),{},{user:t.payload});case"SCHEDULE_MEETING":return u(u({},e),{},{meetingScheduled:!0});case"Update_location":return u(u({},e),{},{location:t.payload});case"UPDATE_IMAGES":return u(u({},e),{},{images:[...e.images,t.payload]});case"UPDATE_ALERT":return u(u({},e),{},{alert:t.payload});case"DELETE_IMAGE":return u(u({},e),{},{images:e.images.filter(e=>e!==t.payload)});case"UPDATE_DETAILS":return u(u({},e),{},{details:u(u({},e.details),t.payload)});case"UPDATE_USER":return localStorage.setItem("currentUser",JSON.stringify(t.payload)),u(u({},e),{},{currentUser:t.payload});case"UPDATE_PROFILE":return u(u({},e),{},{profile:t.payload});case"START_LOADING":return u(u({},e),{},{loading:!0});case"END_LOADING":return u(u({},e),{},{loading:!1});case"RESET_ROOM":return u(u({},e),{},{images:[],details:{title:"",description:"",price:0},location:{lng:80,lat:25}});case"OPEN_LOGIN":return u(u({},e),{},{openLogin:!0});case"CLOSE_LOGIN":return u(u({},e),{},{openLogin:!1});case"UPDATE_PILGRIMS":return u(u({},e),{},{pilgrims:t.payload,addressFilter:null,priceFilter:50,filteredPilgrims:t.payload});case"FILTER_PRICE":return u(u({},e),{},{priceFilter:t.payload,filteredPilgrims:p(e.pilgrims,e.addressFilter,t.payload)});case"FILTER_ADDRESS":return u(u({},e),{},{addressFilter:t.payload,filteredPilgrims:p(e.pilgrims,t.payload,e.priceFilter)});case"CLEAR_ADDRESS":return u(u({},e),{},{addressFilter:null,priceFilter:50,filteredPilgrims:e.pilgrims});case"UPDATE_PILGRIM":return u(u({},e),{},{pilgrim:t.payload});default:return e}},p=(e,t,n)=>{let i=e;if(t){const{lng:e,lat:n}=t;i=i.filter(t=>{const i=Math.abs(e-t.lng),r=Math.abs(n-t.lat);return i<=1&&r<=1})}return n<50&&(i=i.filter(e=>e.price<=n)),i},f="173",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},v=0,y=1,A=2,b=3,x=0,_=1,w=2,E=3,C=0,S=1,T=2,I=0,M=1,k=2,R=3,L=4,B=5,P=100,D=101,O=102,N=103,F=104,z=200,U=201,j=202,V=203,H=204,G=205,Q=206,W=207,q=208,X=209,Y=210,K=211,J=212,Z=213,$=214,ee=0,te=1,ne=2,ie=3,re=4,oe=5,ae=6,se=7,le=0,ce=1,ue=2,he=0,de=1,pe=2,fe=3,me=4,ge=5,ve=6,ye=7,Ae="attached",be="detached",xe=300,_e=301,we=302,Ee=303,Ce=304,Se=306,Te=1e3,Ie=1001,Me=1002,ke=1003,Re=1004,Le=1004,Be=1005,Pe=1005,De=1006,Oe=1007,Ne=1007,Fe=1008,ze=1008,Ue=1009,je=1010,Ve=1011,He=1012,Ge=1013,Qe=1014,We=1015,qe=1016,Xe=1017,Ye=1018,Ke=1020,Je=35902,Ze=1021,$e=1022,et=1023,tt=1024,nt=1025,it=1026,rt=1027,ot=1028,at=1029,st=1030,lt=1031,ct=1032,ut=1033,ht=33776,dt=33777,pt=33778,ft=33779,mt=35840,gt=35841,vt=35842,yt=35843,At=36196,bt=37492,xt=37496,_t=37808,wt=37809,Et=37810,Ct=37811,St=37812,Tt=37813,It=37814,Mt=37815,kt=37816,Rt=37817,Lt=37818,Bt=37819,Pt=37820,Dt=37821,Ot=36492,Nt=36494,Ft=36495,zt=36283,Ut=36284,jt=36285,Vt=36286,Ht=2200,Gt=2201,Qt=2202,Wt=2300,qt=2301,Xt=2302,Yt=2400,Kt=2401,Jt=2402,Zt=2500,$t=2501,en=0,tn=1,nn=2,rn=3200,on=3201,an=3202,sn=3203,ln=0,cn=1,un="",hn="srgb",dn="srgb-linear",pn="linear",fn="srgb",mn=0,gn=7680,vn=7681,yn=7682,An=7683,bn=34055,xn=34056,_n=5386,wn=512,En=513,Cn=514,Sn=515,Tn=516,In=517,Mn=518,kn=519,Rn=512,Ln=513,Bn=514,Pn=515,Dn=516,On=517,Nn=518,Fn=519,zn=35044,Un=35048,jn=35040,Vn=35045,Hn=35049,Gn=35041,Qn=35046,Wn=35050,qn=35042,Xn="100",Yn="300 es",Kn=2e3,Jn=2001,Zn={COMPUTE:"compute",RENDER:"render"};class $n{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ti=1234567;const ni=Math.PI/180,ii=180/Math.PI;function ri(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ei[255&e]+ei[e>>8&255]+ei[e>>16&255]+ei[e>>24&255]+"-"+ei[255&t]+ei[t>>8&255]+"-"+ei[t>>16&15|64]+ei[t>>24&255]+"-"+ei[63&n|128]+ei[n>>8&255]+"-"+ei[n>>16&255]+ei[n>>24&255]+ei[255&i]+ei[i>>8&255]+ei[i>>16&255]+ei[i>>24&255]).toLowerCase()}function oi(e,t,n){return Math.max(t,Math.min(n,e))}function ai(e,t){return(e%t+t)%t}function si(e,t,n){return(1-n)*e+n*t}function li(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ci(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const ui={DEG2RAD:ni,RAD2DEG:ii,generateUUID:ri,clamp:oi,euclideanModulo:ai,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:si,damp:function(e,t,n,i){return si(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(ai(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(ti=e);let t=ti+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ni},radToDeg:function(e){return e*ii},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+i)/2),u=a((t+i)/2),h=o((t-i)/2),d=a((t-i)/2),p=o((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ci,denormalize:li};class hi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;hi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=oi(this.x,e.x,t.x),this.y=oi(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=oi(this.x,e,t),this.y=oi(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(oi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class di{constructor(e,t,n,i,r,o,a,s,l){di.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,a,s,l)}set(e,t,n,i,r,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],A=i[7],b=i[2],x=i[5],_=i[8];return r[0]=o*f+a*v+s*b,r[3]=o*m+a*y+s*x,r[6]=o*g+a*A+s*_,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*x,r[7]=l*g+c*A+u*_,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*x,r[8]=h*g+d*A+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*r*c+n*a*s+i*r*l-i*o*s}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*r,d=l*r-o*s,p=t*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*o)*f,e[3]=h*f,e[4]=(c*t-i*s)*f,e[5]=(i*r-a*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(o*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(pi.makeScale(e,t)),this}rotate(e){return this.premultiply(pi.makeRotation(-e)),this}translate(e,t){return this.premultiply(pi.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const pi=new di;function fi(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const mi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function gi(e,t){return new mi[e](t)}function vi(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function yi(){const e=vi("canvas");return e.style.display="block",e}const Ai={};function bi(e){e in Ai||(Ai[e]=!0,console.warn(e))}const xi=(new di).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),_i=(new di).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function wi(){const e={enabled:!0,workingColorSpace:dn,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===fn&&(e.r=Ci(e.r),e.g=Ci(e.g),e.b=Ci(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===fn&&(e.r=Si(e.r),e.g=Si(e.g),e.b=Si(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===un?pn:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[dn]:{primaries:t,whitePoint:i,transfer:pn,toXYZ:xi,fromXYZ:_i,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:hn},outputColorSpaceConfig:{drawingBufferColorSpace:hn}},[hn]:{primaries:t,whitePoint:i,transfer:fn,toXYZ:xi,fromXYZ:_i,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:hn}}}),e}const Ei=wi();function Ci(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Si(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ti;class Ii{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ti&&(Ti=vi("canvas")),Ti.width=e.width,Ti.height=e.height;const n=Ti.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ti}return t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=vi("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Ci(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ci(t[e]/255)):t[e]=Ci(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Mi=0;class ki{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Mi++}),this.uuid=ri(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Ri(i[t].image)):e.push(Ri(i[t]))}else e=Ri(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Ri(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Ii.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Li=0;class Bi extends $n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ie,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ie,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:De,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fe,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:et,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ue,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Bi.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:un;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Li++}),this.uuid=ri(),this.name="",this.source=new ki(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new hi(0,0),this.repeat=new hi(1,1),this.center=new hi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new di,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Te:e.x=e.x-Math.floor(e.x);break;case Ie:e.x=e.x<0?0:1;break;case Me:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Te:e.y=e.y-Math.floor(e.y);break;case Ie:e.y=e.y<0?0:1;break;case Me:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}Bi.DEFAULT_IMAGE=null,Bi.DEFAULT_MAPPING=xe,Bi.DEFAULT_ANISOTROPY=1;class Pi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Pi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,A=(u+f)/4,b=(p+m)/4;return e>s&&e>v?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=A/n):s>v?s<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=y/i,r=b/i):v<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=A/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=oi(this.x,e.x,t.x),this.y=oi(this.y,e.y,t.y),this.z=oi(this.z,e.z,t.z),this.w=oi(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=oi(this.x,e,t),this.y=oi(this.y,e,t),this.z=oi(this.z,e,t),this.w=oi(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(oi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Di extends $n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Pi(0,0,e,t),this.scissorTest=!1,this.viewport=new Pi(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:De,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Bi(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new ki(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Oi extends Di{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Ni extends Bi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ke,this.minFilter=ke,this.wrapR=Ie,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fi extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ni(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class zi extends Bi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ke,this.minFilter=ke,this.wrapR=Ie,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ui extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new zi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ji{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==h||l!==d||c!==p){let e=1-a;const t=s*h+l*d+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=a*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Vi.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Gi.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Gi.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=2*(o*i-a*n),c=2*(a*t-r*i),u=2*(r*n-o*t);return this.x=t+s*l+o*u-a*c,this.y=n+s*c+a*l-r*u,this.z=i+s*u+r*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=oi(this.x,e.x,t.x),this.y=oi(this.y,e.y,t.y),this.z=oi(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=oi(this.x,e,t),this.y=oi(this.y,e,t),this.z=oi(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(oi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Hi.copy(this).projectOnVector(e),this.sub(Hi)}reflect(e){return this.sub(Hi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Hi=new Vi,Gi=new ji;class Qi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(qi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(qi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=qi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,qi):qi.fromBufferAttribute(i,t),qi.applyMatrix4(e.matrixWorld),this.expandByPoint(qi);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Xi.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Xi.copy(n.boundingBox)),Xi.applyMatrix4(e.matrixWorld),this.union(Xi)}const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,qi),qi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tr),nr.subVectors(this.max,tr),Yi.subVectors(e.a,tr),Ki.subVectors(e.b,tr),Ji.subVectors(e.c,tr),Zi.subVectors(Ki,Yi),$i.subVectors(Ji,Ki),er.subVectors(Yi,Ji);let t=[0,-Zi.z,Zi.y,0,-$i.z,$i.y,0,-er.z,er.y,Zi.z,0,-Zi.x,$i.z,0,-$i.x,er.z,0,-er.x,-Zi.y,Zi.x,0,-$i.y,$i.x,0,-er.y,er.x,0];return!!or(t,Yi,Ki,Ji,nr)&&(t=[1,0,0,0,1,0,0,0,1],!!or(t,Yi,Ki,Ji,nr)&&(ir.crossVectors(Zi,$i),t=[ir.x,ir.y,ir.z],or(t,Yi,Ki,Ji,nr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(qi).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Wi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wi)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wi=[new Vi,new Vi,new Vi,new Vi,new Vi,new Vi,new Vi,new Vi],qi=new Vi,Xi=new Qi,Yi=new Vi,Ki=new Vi,Ji=new Vi,Zi=new Vi,$i=new Vi,er=new Vi,tr=new Vi,nr=new Vi,ir=new Vi,rr=new Vi;function or(e,t,n,i,r){for(let o=0,a=e.length-3;o<=a;o+=3){rr.fromArray(e,o);const a=r.x*Math.abs(rr.x)+r.y*Math.abs(rr.y)+r.z*Math.abs(rr.z),s=t.dot(rr),l=n.dot(rr),c=i.dot(rr);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const ar=new Qi,sr=new Vi,lr=new Vi;class cr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ar.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;sr.subVectors(e,this.center);const t=sr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(sr,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(lr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(sr.copy(e.center).add(lr)),this.expandByPoint(sr.copy(e.center).sub(lr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ur=new Vi,hr=new Vi,dr=new Vi,pr=new Vi,fr=new Vi,mr=new Vi,gr=new Vi;class vr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ur)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ur.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ur.copy(this.origin).addScaledVector(this.direction,t),ur.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){hr.copy(e).add(t).multiplyScalar(.5),dr.copy(t).sub(e).normalize(),pr.copy(this.origin).sub(hr);const r=.5*e.distanceTo(t),o=-this.direction.dot(dr),a=pr.dot(this.direction),s=-pr.dot(dr),l=pr.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(hr).addScaledVector(dr,h),d}intersectSphere(e,t){ur.subVectors(e.center,this.origin);const n=ur.dot(this.direction),i=ur.dot(ur)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,ur)}intersectTriangle(e,t,n,i,r){fr.subVectors(t,e),mr.subVectors(n,e),gr.crossVectors(fr,mr);let o,a=this.direction.dot(gr);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}pr.subVectors(this.origin,e);const s=o*this.direction.dot(mr.crossVectors(pr,mr));if(s<0)return null;const l=o*this.direction.dot(fr.cross(pr));if(l<0)return null;if(s+l>a)return null;const c=-o*pr.dot(gr);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class yr{constructor(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m){yr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m)}set(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new yr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ar.setFromMatrixColumn(e,0).length(),r=1/Ar.setFromMatrixColumn(e,1).length(),o=1/Ar.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,n=o*u,i=a*c,r=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*s,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-o*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=o*c,t[9]=r-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,i=a*c,r=a*u;t[0]=s*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=s*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,i=a*s,r=a*l;t[0]=s*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*s,n=o*l,i=a*s,r=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xr,e,_r)}lookAt(e,t,n){const i=this.elements;return Cr.subVectors(e,t),0===Cr.lengthSq()&&(Cr.z=1),Cr.normalize(),wr.crossVectors(n,Cr),0===wr.lengthSq()&&(1===Math.abs(n.z)?Cr.x+=1e-4:Cr.z+=1e-4,Cr.normalize(),wr.crossVectors(n,Cr)),wr.normalize(),Er.crossVectors(Cr,wr),i[0]=wr.x,i[4]=Er.x,i[8]=Cr.x,i[1]=wr.y,i[5]=Er.y,i[9]=Cr.y,i[2]=wr.z,i[6]=Er.z,i[10]=Cr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],A=n[11],b=n[15],x=i[0],_=i[4],w=i[8],E=i[12],C=i[1],S=i[5],T=i[9],I=i[13],M=i[2],k=i[6],R=i[10],L=i[14],B=i[3],P=i[7],D=i[11],O=i[15];return r[0]=o*x+a*C+s*M+l*B,r[4]=o*_+a*S+s*k+l*P,r[8]=o*w+a*T+s*R+l*D,r[12]=o*E+a*I+s*L+l*O,r[1]=c*x+u*C+h*M+d*B,r[5]=c*_+u*S+h*k+d*P,r[9]=c*w+u*T+h*R+d*D,r[13]=c*E+u*I+h*L+d*O,r[2]=p*x+f*C+m*M+g*B,r[6]=p*_+f*S+m*k+g*P,r[10]=p*w+f*T+m*R+g*D,r[14]=p*E+f*I+m*L+g*O,r[3]=v*x+y*C+A*M+b*B,r[7]=v*_+y*S+A*k+b*P,r[11]=v*w+y*T+A*R+b*D,r[15]=v*E+y*I+A*L+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g,y=p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g,A=c*f*l-p*u*l+p*a*d-o*f*d-c*a*g+o*u*g,b=p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m,x=t*v+n*y+i*A+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/x;return e[0]=v*_,e[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*_,e[2]=(a*m*r-f*s*r+f*i*l-n*m*l-a*i*g+n*s*g)*_,e[3]=(u*s*r-a*h*r-u*i*l+n*h*l+a*i*d-n*s*d)*_,e[4]=y*_,e[5]=(c*m*r-p*h*r+p*i*d-t*m*d-c*i*g+t*h*g)*_,e[6]=(p*s*r-o*m*r-p*i*l+t*m*l+o*i*g-t*s*g)*_,e[7]=(o*h*r-c*s*r+c*i*l-t*h*l-o*i*d+t*s*d)*_,e[8]=A*_,e[9]=(p*u*r-c*f*r-p*n*d+t*f*d+c*n*g-t*u*g)*_,e[10]=(o*f*r-p*a*r+p*n*l-t*f*l-o*n*g+t*a*g)*_,e[11]=(c*a*r-o*u*r-c*n*l+t*u*l+o*n*d-t*a*d)*_,e[12]=b*_,e[13]=(c*f*i-p*u*i+p*n*h-t*f*h-c*n*m+t*u*m)*_,e[14]=(p*a*i-o*f*i-p*n*s+t*f*s+o*n*m-t*a*m)*_,e[15]=(o*u*i-c*a*i+c*n*s-t*u*s-o*n*h+t*a*h)*_,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,g=a*u,v=s*l,y=s*c,A=s*u,b=n.x,x=n.y,_=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+A)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-A)*x,i[5]=(1-(h+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*_,i[9]=(m-v)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ar.set(i[0],i[1],i[2]).length();const o=Ar.set(i[4],i[5],i[6]).length(),a=Ar.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],br.copy(this);const s=1/r,l=1/o,c=1/a;return br.elements[0]*=s,br.elements[1]*=s,br.elements[2]*=s,br.elements[4]*=l,br.elements[5]*=l,br.elements[6]*=l,br.elements[8]*=c,br.elements[9]*=c,br.elements[10]*=c,t.setFromRotationMatrix(br),n.x=r,n.y=o,n.z=a,this}makePerspective(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kn;const s=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),h=(n+i)/(n-i);let d,p;if(a===Kn)d=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(a!==Jn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-r),p=-o*r/(o-r)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kn;const s=this.elements,l=1/(t-e),c=1/(n-i),u=1/(o-r),h=(t+e)*l,d=(n+i)*c;let p,f;if(a===Kn)p=(o+r)*u,f=-2*u;else{if(a!==Jn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*u,f=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ar=new Vi,br=new yr,xr=new Vi(0,0,0),_r=new Vi(1,1,1),wr=new Vi,Er=new Vi,Cr=new Vi,Sr=new yr,Tr=new ji;class Ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ir.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],o=i[4],a=i[8],s=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-oi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(oi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-oi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(oi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Sr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Sr,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Tr.setFromEuler(this),this.setFromQuaternion(Tr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ir.DEFAULT_ORDER="XYZ";class Mr{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let kr=0;const Rr=new Vi,Lr=new ji,Br=new yr,Pr=new Vi,Dr=new Vi,Or=new Vi,Nr=new ji,Fr=new Vi(1,0,0),zr=new Vi(0,1,0),Ur=new Vi(0,0,1),jr={type:"added"},Vr={type:"removed"},Hr={type:"childadded",child:null},Gr={type:"childremoved",child:null};class Qr extends $n{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kr++}),this.uuid=ri(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qr.DEFAULT_UP.clone();const e=new Vi,t=new Ir,n=new ji,i=new Vi(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yr},normalMatrix:{value:new di}}),this.matrix=new yr,this.matrixWorld=new yr,this.matrixAutoUpdate=Qr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lr.setFromAxisAngle(e,t),this.quaternion.multiply(Lr),this}rotateOnWorldAxis(e,t){return Lr.setFromAxisAngle(e,t),this.quaternion.premultiply(Lr),this}rotateX(e){return this.rotateOnAxis(Fr,e)}rotateY(e){return this.rotateOnAxis(zr,e)}rotateZ(e){return this.rotateOnAxis(Ur,e)}translateOnAxis(e,t){return Rr.copy(e).applyQuaternion(this.quaternion),this.position.add(Rr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Fr,e)}translateY(e){return this.translateOnAxis(zr,e)}translateZ(e){return this.translateOnAxis(Ur,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Br.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Pr.copy(e):Pr.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Dr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Br.lookAt(Dr,Pr,this.up):Br.lookAt(Pr,Dr,this.up),this.quaternion.setFromRotationMatrix(Br),i&&(Br.extractRotation(i.matrixWorld),Lr.setFromRotationMatrix(Br),this.quaternion.premultiply(Lr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jr),Hr.child=e,this.dispatchEvent(Hr),Hr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Vr),Gr.child=e,this.dispatchEvent(Gr),Gr.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Br.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Br.multiply(e.parent.matrixWorld)),e.applyMatrix4(Br),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jr),Hr.child=e,this.dispatchEvent(Hr),Hr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dr,e,Or),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dr,Nr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Qr.DEFAULT_UP=new Vi(0,1,0),Qr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wr=new Vi,qr=new Vi,Xr=new Vi,Yr=new Vi,Kr=new Vi,Jr=new Vi,Zr=new Vi,$r=new Vi,eo=new Vi,to=new Vi,no=new Pi,io=new Pi,ro=new Pi;class oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vi;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Wr.subVectors(e,t),i.cross(Wr);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Wr.subVectors(i,t),qr.subVectors(n,t),Xr.subVectors(e,t);const o=Wr.dot(Wr),a=Wr.dot(qr),s=Wr.dot(Xr),l=qr.dot(qr),c=qr.dot(Xr),u=o*l-a*a;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,Yr)&&(Yr.x>=0&&Yr.y>=0&&Yr.x+Yr.y<=1)}static getInterpolation(e,t,n,i,r,o,a,s){return null===this.getBarycoord(e,t,n,i,Yr)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(r,Yr.x),s.addScaledVector(o,Yr.y),s.addScaledVector(a,Yr.z),s)}static getInterpolatedAttribute(e,t,n,i,r,o){return no.setScalar(0),io.setScalar(0),ro.setScalar(0),no.fromBufferAttribute(e,t),io.fromBufferAttribute(e,n),ro.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(no,r.x),o.addScaledVector(io,r.y),o.addScaledVector(ro,r.z),o}static isFrontFacing(e,t,n,i){return Wr.subVectors(n,t),qr.subVectors(e,t),Wr.cross(qr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wr.subVectors(this.c,this.b),qr.subVectors(this.a,this.b),.5*Wr.cross(qr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return oo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return oo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return oo.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return oo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return oo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,a;Kr.subVectors(i,n),Jr.subVectors(r,n),$r.subVectors(e,n);const s=Kr.dot($r),l=Jr.dot($r);if(s<=0&&l<=0)return t.copy(n);eo.subVectors(e,i);const c=Kr.dot(eo),u=Jr.dot(eo);if(c>=0&&u<=c)return t.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(Kr,o);to.subVectors(e,r);const d=Kr.dot(to),p=Jr.dot(to);if(p>=0&&d<=p)return t.copy(r);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Jr,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return Zr.subVectors(r,i),a=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(Zr,a);const g=1/(m+f+h);return o=f*g,a=h*g,t.copy(n).addScaledVector(Kr,o).addScaledVector(Jr,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ao={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},so={h:0,s:0,l:0},lo={h:0,s:0,l:0};function co(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class uo{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ei.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ei.workingColorSpace;return this.r=e,this.g=t,this.b=n,Ei.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ei.workingColorSpace;if(e=ai(e,1),t=oi(t,0,1),n=oi(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=co(r,i,e+1/3),this.g=co(r,i,e),this.b=co(r,i,e-1/3)}return Ei.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],a=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;const n=ao[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ci(e.r),this.g=Ci(e.g),this.b=Ci(e.b),this}copyLinearToSRGB(e){return this.r=Si(e.r),this.g=Si(e.g),this.b=Si(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;return Ei.fromWorkingColorSpace(ho.copy(this),e),65536*Math.round(oi(255*ho.r,0,255))+256*Math.round(oi(255*ho.g,0,255))+Math.round(oi(255*ho.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei.workingColorSpace;Ei.fromWorkingColorSpace(ho.copy(this),t);const n=ho.r,i=ho.g,r=ho.b,o=Math.max(n,i,r),a=Math.min(n,i,r);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(i-r)/e+(i<r?6:0);break;case i:s=(r-n)/e+2;break;case r:s=(n-i)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei.workingColorSpace;return Ei.fromWorkingColorSpace(ho.copy(this),t),e.r=ho.r,e.g=ho.g,e.b=ho.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;Ei.fromWorkingColorSpace(ho.copy(this),e);const t=ho.r,n=ho.g,i=ho.b;return e!==hn?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(so),this.setHSL(so.h+e,so.s+t,so.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(so),e.getHSL(lo);const n=si(so.h,lo.h,t),i=si(so.s,lo.s,t),r=si(so.l,lo.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ho=new uo;uo.NAMES=ao;let po=0;class fo extends $n{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:po++}),this.uuid=ri(),this.name="",this.type="Material",this.blending=M,this.side=C,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=H,this.blendDst=G,this.blendEquation=P,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new uo(0,0,0),this.blendAlpha=0,this.depthFunc=ie,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gn,this.stencilZFail=gn,this.stencilZPass=gn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==M&&(n.blending=this.blending),this.side!==C&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==H&&(n.blendSrc=this.blendSrc),this.blendDst!==G&&(n.blendDst=this.blendDst),this.blendEquation!==P&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ie&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kn&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gn&&(n.stencilFail=this.stencilFail),this.stencilZFail!==gn&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==gn&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class mo extends fo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new uo(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ir,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const go=vo();function vo(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:a,offsetTable:s}}function yo(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=oi(e,-65504,65504),go.floatView[0]=e;const t=go.uint32View[0],n=t>>23&511;return go.baseTable[n]+((8388607&t)>>go.shiftTable[n])}function Ao(e){const t=e>>10;return go.uint32View[0]=go.mantissaTable[go.offsetTable[t]+(1023&e)]+go.exponentTable[t],go.floatView[0]}const bo={toHalfFloat:yo,fromHalfFloat:Ao},xo=new Vi,_o=new hi;let wo=0;class Eo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:wo++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=zn,this.updateRanges=[],this.gpuType=We,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_o.fromBufferAttribute(this,t),_o.applyMatrix3(e),this.setXY(t,_o.x,_o.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)xo.fromBufferAttribute(this,t),xo.applyMatrix3(e),this.setXYZ(t,xo.x,xo.y,xo.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)xo.fromBufferAttribute(this,t),xo.applyMatrix4(e),this.setXYZ(t,xo.x,xo.y,xo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xo.fromBufferAttribute(this,t),xo.applyNormalMatrix(e),this.setXYZ(t,xo.x,xo.y,xo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xo.fromBufferAttribute(this,t),xo.transformDirection(e),this.setXYZ(t,xo.x,xo.y,xo.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=li(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ci(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=li(t,this.array)),t}setX(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=li(t,this.array)),t}setY(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=li(t,this.array)),t}setW(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array),r=ci(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==zn&&(e.usage=this.usage),e}}class Co extends Eo{constructor(e,t,n){super(new Int8Array(e),t,n)}}class So extends Eo{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class To extends Eo{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Io extends Eo{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Mo extends Eo{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ko extends Eo{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Ro extends Eo{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Lo extends Eo{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ao(this.array[e*this.itemSize]);return this.normalized&&(t=li(t,this.array)),t}setX(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize]=yo(t),this}getY(e){let t=Ao(this.array[e*this.itemSize+1]);return this.normalized&&(t=li(t,this.array)),t}setY(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+1]=yo(t),this}getZ(e){let t=Ao(this.array[e*this.itemSize+2]);return this.normalized&&(t=li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+2]=yo(t),this}getW(e){let t=Ao(this.array[e*this.itemSize+3]);return this.normalized&&(t=li(t,this.array)),t}setW(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+3]=yo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(n),this.array[e+2]=yo(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array),r=ci(r,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(n),this.array[e+2]=yo(i),this.array[e+3]=yo(r),this}}class Bo extends Eo{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Po=0;const Do=new yr,Oo=new Qr,No=new Vi,Fo=new Qi,zo=new Qi,Uo=new Vi;class jo extends $n{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Po++}),this.uuid=ri(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(fi(e)?Ro:Mo)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new di).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Do.makeRotationFromQuaternion(e),this.applyMatrix4(Do),this}rotateX(e){return Do.makeRotationX(e),this.applyMatrix4(Do),this}rotateY(e){return Do.makeRotationY(e),this.applyMatrix4(Do),this}rotateZ(e){return Do.makeRotationZ(e),this.applyMatrix4(Do),this}translate(e,t,n){return Do.makeTranslation(e,t,n),this.applyMatrix4(Do),this}scale(e,t,n){return Do.makeScale(e,t,n),this.applyMatrix4(Do),this}lookAt(e){return Oo.lookAt(e),Oo.updateMatrix(),this.applyMatrix4(Oo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(No).negate(),this.translate(No.x,No.y,No.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new Bo(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Vi(-1/0,-1/0,-1/0),new Vi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];Fo.setFromBufferAttribute(e),this.morphTargetsRelative?(Uo.addVectors(this.boundingBox.min,Fo.min),this.boundingBox.expandByPoint(Uo),Uo.addVectors(this.boundingBox.max,Fo.max),this.boundingBox.expandByPoint(Uo)):(this.boundingBox.expandByPoint(Fo.min),this.boundingBox.expandByPoint(Fo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Vi,1/0);if(e){const n=this.boundingSphere.center;if(Fo.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];zo.setFromBufferAttribute(n),this.morphTargetsRelative?(Uo.addVectors(Fo.min,zo.min),Fo.expandByPoint(Uo),Uo.addVectors(Fo.max,zo.max),Fo.expandByPoint(Uo)):(Fo.expandByPoint(zo.min),Fo.expandByPoint(zo.max))}Fo.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Uo.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Uo));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],a=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Uo.fromBufferAttribute(o,t),a&&(No.fromBufferAttribute(e,t),Uo.add(No)),i=Math.max(i,n.distanceToSquared(Uo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Eo(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],s=[];for(let w=0;w<n.count;w++)a[w]=new Vi,s[w]=new Vi;const l=new Vi,c=new Vi,u=new Vi,h=new hi,d=new hi,p=new hi,f=new Vi,m=new Vi;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,i),h.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(o),a[e].add(f),a[t].add(f),a[i].add(f),s[e].add(m),s[t].add(m),s[i].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let w=0,E=v.length;w<E;++w){const t=v[w],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)g(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const y=new Vi,A=new Vi,b=new Vi,x=new Vi;function _(e){b.fromBufferAttribute(i,e),x.copy(b);const t=a[e];y.copy(t),y.sub(b.multiplyScalar(b.dot(t))).normalize(),A.crossVectors(x,t);const n=A.dot(s[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let w=0,E=v.length;w<E;++w){const t=v[w],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)_(e.getX(i+0)),_(e.getX(i+1)),_(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Eo(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Vi,r=new Vi,o=new Vi,a=new Vi,s=new Vi,l=new Vi,c=new Vi,u=new Vi;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Uo.fromBufferAttribute(e,t),Uo.normalize(),e.setXYZ(t,Uo.x,Uo.y,Uo.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)o[s++]=n[a++]}return new Eo(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jo,n=this.index.array,i=this.attributes;for(const a in i){const r=e(i[a],n);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],o=r[a];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const i={};let r=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[s]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Vo=new yr,Ho=new vr,Go=new cr,Qo=new Vi,Wo=new Vi,qo=new Vi,Xo=new Vi,Yo=new Vi,Ko=new Vi,Jo=new Vi,Zo=new Vi;class $o extends Qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mo;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){Ko.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],s=r[n];0!==i&&(Yo.fromBufferAttribute(s,e),o?Ko.addScaledVector(Yo,i):Ko.addScaledVector(Yo.sub(t),i))}t.add(Ko)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Go.copy(n.boundingSphere),Go.applyMatrix4(r),Ho.copy(e.ray).recast(e.near),!1===Go.containsPoint(Ho.origin)){if(null===Ho.intersectSphere(Go,Qo))return;if(Ho.origin.distanceToSquared(Qo)>(e.far-e.near)**2)return}Vo.copy(r).invert(),Ho.copy(e.ray).applyMatrix4(Vo),null!==n.boundingBox&&!1===Ho.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Ho)}}_computeIntersections(e,t,n){let i;const r=this.geometry,o=this.material,a=r.index,s=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],s=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){i=ea(this,s,e,n,l,c,u,a.getX(o),a.getX(o+1),a.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);r<s;r+=3){i=ea(this,o,e,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],a=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){i=ea(this,a,e,n,l,c,u,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);r<a;r+=3){i=ea(this,o,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function ea(e,t,n,i,r,o,a,s,l,c){e.getVertexPosition(s,Wo),e.getVertexPosition(l,qo),e.getVertexPosition(c,Xo);const u=function(e,t,n,i,r,o,a,s){let l;if(l=t.side===S?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side===C,s),null===l)return null;Zo.copy(s),Zo.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Zo);return c<n.near||c>n.far?null:{distance:c,point:Zo.clone(),object:e}}(e,t,n,i,Wo,qo,Xo,Jo);if(u){const e=new Vi;oo.getBarycoord(Jo,Wo,qo,Xo,e),r&&(u.uv=oo.getInterpolatedAttribute(r,s,l,c,e,new hi)),o&&(u.uv1=oo.getInterpolatedAttribute(o,s,l,c,e,new hi)),a&&(u.normal=oo.getInterpolatedAttribute(a,s,l,c,e,new Vi),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c:c,normal:new Vi,materialIndex:0};oo.getNormal(Wo,qo,Xo,t.normal),u.face=t,u.barycoord=e}return u}class ta extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,i,r,o,p,f,m,g,v){const y=o/m,A=p/g,b=o/2,x=p/2,_=f/2,w=m+1,E=g+1;let C=0,S=0;const T=new Vi;for(let a=0;a<E;a++){const o=a*A-x;for(let s=0;s<w;s++){const h=s*y-b;T[e]=h*i,T[t]=o*r,T[n]=_,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-a/g),C+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+w*a,n=h+e+w*(a+1),i=h+(e+1)+w*(a+1),r=h+(e+1)+w*a;s.push(t,n,r),s.push(n,i,r),S+=6}a.addGroup(d,S,v),d+=S,h+=C}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Bo(l,3)),this.setAttribute("normal",new Bo(c,3)),this.setAttribute("uv",new Bo(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ta(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function na(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function ia(e){const t={};for(let n=0;n<e.length;n++){const i=na(e[n]);for(const e in i)t[e]=i[e]}return t}function ra(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Ei.workingColorSpace}const oa={clone:na,merge:ia};class aa extends fo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=na(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class sa extends Qr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yr,this.projectionMatrix=new yr,this.projectionMatrixInverse=new yr,this.coordinateSystem=Kn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const la=new Vi,ca=new hi,ua=new hi;class ha extends sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ii*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ni*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ii*Math.atan(Math.tan(.5*ni*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){la.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(la.x,la.y).multiplyScalar(-e/la.z),la.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(la.x,la.y).multiplyScalar(-e/la.z)}getViewSize(e,t){return this.getViewBounds(e,ca,ua),t.subVectors(ua,ca)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ni*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/a,i*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const da=-90;class pa extends Qr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ha(da,1,e,t);i.layers=this.layers,this.add(i);const r=new ha(da,1,e,t);r.layers=this.layers,this.add(r);const o=new ha(da,1,e,t);o.layers=this.layers,this.add(o);const a=new ha(da,1,e,t);a.layers=this.layers,this.add(a);const s=new ha(da,1,e,t);s.layers=this.layers,this.add(s);const l=new ha(da,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,o,a,s]=t;for(const l of t)this.remove(l);if(e===Kn)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==Jn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,s,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,a),e.setRenderTarget(n,3,i),e.render(t,s),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class fa extends Bi{constructor(e,t,n,i,r,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:_e,n,i,r,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ma extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new fa(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:De}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ta(5,5,5),a=new aa({name:"CubemapFromEquirect",uniforms:na(n),vertexShader:i,fragmentShader:r,side:S,blending:I});a.uniforms.tEquirect.value=t;const s=new $o(o,a),l=t.minFilter;t.minFilter===Fe&&(t.minFilter=De);return new pa(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)}}class ga extends Qr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const va={type:"move"};class ya{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ga,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ga,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ga,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vi),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),i=this._getHandJoint(l,o);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(va)))}return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new ga;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new uo(e),this.density=t}clone(){return new Aa(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ba{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new uo(e),this.near=t,this.far=n}clone(){return new ba(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class xa extends Qr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ir,this.environmentIntensity=1,this.environmentRotation=new Ir,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class _a{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=zn,this.updateRanges=[],this.version=0,this.uuid=ri()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ri()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ri()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wa=new Vi;class Ea{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.applyMatrix4(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.applyNormalMatrix(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.transformDirection(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=li(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ci(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=li(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=li(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=li(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=li(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),n=ci(n,this.array),i=ci(i,this.array),r=ci(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Eo(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ea(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ca extends fo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new uo(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sa;const Ta=new Vi,Ia=new Vi,Ma=new Vi,ka=new hi,Ra=new hi,La=new yr,Ba=new Vi,Pa=new Vi,Da=new Vi,Oa=new hi,Na=new hi,Fa=new hi;class za extends Qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ca;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Sa){Sa=new jo;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new _a(e,5);Sa.setIndex([0,1,2,0,2,3]),Sa.setAttribute("position",new Ea(t,3,0,!1)),Sa.setAttribute("uv",new Ea(t,2,3,!1))}this.geometry=Sa,this.material=e,this.center=new hi(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ia.setFromMatrixScale(this.matrixWorld),La.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ma.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ia.multiplyScalar(-Ma.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Ua(Ba.set(-.5,-.5,0),Ma,o,Ia,i,r),Ua(Pa.set(.5,-.5,0),Ma,o,Ia,i,r),Ua(Da.set(.5,.5,0),Ma,o,Ia,i,r),Oa.set(0,0),Na.set(1,0),Fa.set(1,1);let a=e.ray.intersectTriangle(Ba,Pa,Da,!1,Ta);if(null===a&&(Ua(Pa.set(-.5,.5,0),Ma,o,Ia,i,r),Na.set(0,1),a=e.ray.intersectTriangle(Ba,Da,Pa,!1,Ta),null===a))return;const s=e.ray.origin.distanceTo(Ta);s<e.near||s>e.far||t.push({distance:s,point:Ta.clone(),uv:oo.getInterpolation(Ta,Ba,Pa,Da,Oa,Na,Fa,new hi),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Ua(e,t,n,i,r,o){ka.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Ra.x=o*ka.x-r*ka.y,Ra.y=r*ka.x+o*ka.y):Ra.copy(ka),e.copy(t),e.x+=Ra.x,e.y+=Ra.y,e.applyMatrix4(La)}const ja=new Vi,Va=new Vi;class Ha extends Qr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ja.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(ja);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ja.setFromMatrixPosition(e.matrixWorld),Va.setFromMatrixPosition(this.matrixWorld);const n=ja.distanceTo(Va)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Ga=new Vi,Qa=new Pi,Wa=new Pi,qa=new Vi,Xa=new yr,Ya=new Vi,Ka=new cr,Ja=new yr,Za=new vr;class $a extends $o{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ae,this.bindMatrix=new yr,this.bindMatrixInverse=new yr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Qi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ya),this.boundingBox.expandByPoint(Ya)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new cr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ya),this.boundingSphere.expandByPoint(Ya)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ka.copy(this.boundingSphere),Ka.applyMatrix4(i),!1!==e.ray.intersectsSphere(Ka)&&(Ja.copy(i).invert(),Za.copy(e.ray).applyMatrix4(Ja),null!==this.boundingBox&&!1===Za.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Za)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pi,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Ae?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===be?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;Qa.fromBufferAttribute(i.attributes.skinIndex,e),Wa.fromBufferAttribute(i.attributes.skinWeight,e),Ga.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=Wa.getComponent(r);if(0!==e){const i=Qa.getComponent(r);Xa.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(qa.copy(Ga).applyMatrix4(Xa),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class es extends Qr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ts extends Bi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:ke,arguments.length>9&&void 0!==arguments[9]?arguments[9]:ke,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ns=new yr,is=new yr;class rs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=ri(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new yr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new yr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const i=e[r]?e[r].matrixWorld:is;ns.multiplyMatrices(i,t[r]),ns.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new rs(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ts(t,e,e,et,We);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new es),this.bones.push(r),this.boneInverses.push((new yr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class os extends Eo{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const as=new yr,ss=new yr,ls=[],cs=new Qi,us=new yr,hs=new $o,ds=new cr;class ps extends $o{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new os(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,us)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Qi),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,as),cs.copy(e.boundingBox).applyMatrix4(as),this.boundingBox.union(cs)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new cr),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,as),ds.copy(e.boundingSphere).applyMatrix4(as),this.boundingSphere.union(ds)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=e*(n.length+1)+1;for(let o=0;o<n.length;o++)n[o]=i[r+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(hs.geometry=this.geometry,hs.material=this.material,void 0!==hs.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ds.copy(this.boundingSphere),ds.applyMatrix4(n),!1!==e.ray.intersectsSphere(ds)))for(let r=0;r<i;r++){this.getMatrixAt(r,as),ss.multiplyMatrices(n,as),hs.matrixWorld=ss,hs.raycast(e,ls);for(let e=0,n=ls.length;e<n;e++){const n=ls[e];n.instanceId=r,n.object=this,t.push(n)}ls.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new os(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new ts(new Float32Array(i*this.count),i,this.count,ot,We));const r=this.morphTexture.source.data.data;let o=0;for(let l=0;l<n.length;l++)o+=n[l];const a=this.geometry.morphTargetsRelative?1:1-o,s=i*e;r[s]=a,r.set(n,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const fs=new Vi,ms=new Vi,gs=new di;class vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=fs.subVectors(n,t).cross(ms.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(fs),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||gs.getNormalMatrix(e),i=this.coplanarPoint(fs).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ys=new cr,As=new Vi;class bs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vs,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vs,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new vs,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new vs;this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn;const n=this.planes,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],A=i[15];if(n[0].setComponents(s-r,h-l,m-d,A-g).normalize(),n[1].setComponents(s+r,h+l,m+d,A+g).normalize(),n[2].setComponents(s+o,h+c,m+p,A+v).normalize(),n[3].setComponents(s-o,h-c,m-p,A-v).normalize(),n[4].setComponents(s-a,h-u,m-f,A-y).normalize(),t===Kn)n[5].setComponents(s+a,h+u,m+f,A+y).normalize();else{if(t!==Jn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ys.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ys.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ys)}intersectsSprite(e){return ys.center.set(0,0,0),ys.radius=.7071067811865476,ys.applyMatrix4(e.matrixWorld),this.intersectsSphere(ys)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(As.x=i.normal.x>0?e.max.x:e.min.x,As.y=i.normal.y>0?e.max.y:e.min.y,As.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(As)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function xs(e,t){return e-t}function _s(e,t){return e.z-t.z}function ws(e,t){return t.z-e.z}class Es{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const a=r[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=i}reset(){this.list.length=0,this.index=0}}const Cs=new yr,Ss=new uo(1,1,1),Ts=new bs,Is=new Qi,Ms=new cr,ks=new Vi,Rs=new Vi,Ls=new Vi,Bs=new Es,Ps=new $o,Ds=[];function Os(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let o=0;o<r;o++)for(let r=0;r<i;r++)t.setComponent(o+n,r,e.getComponent(o,r))}else t.array.set(e.array,n*i);t.needsUpdate=!0}function Ns(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)t[i]=e[i]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class Fs extends $o{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,i=arguments.length>3?arguments[3]:void 0;super(new jo,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new ts(t,e,e,et,We);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new ts(t,e,e,at,Qe);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new ts(t,e,e,et,We);n.colorSpace=Ei.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in e.attributes){const r=e.getAttribute(i),{array:o,itemSize:a,normalized:s}=r,l=new o.constructor(n*a),c=new Eo(l,a,s);t.setAttribute(i,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Eo(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Qi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Cs),this.getBoundingBoxAt(i,Is).applyMatrix4(Cs),e.union(Is)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new cr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Cs),this.getBoundingSphereAt(i,Ms).applyMatrix4(Cs),e.union(Ms)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(xs),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const i=this._matricesTexture;Cs.identity().toArray(i.image.data,16*n),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(Ss.toArray(r.image.data,4*n),r.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const o=e.getIndex();if(null!==o&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?o.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(xs),a=this._availableGeometryIds.shift(),r[a]=i):(a=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(a,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,a}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const s=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),i=n.getAttribute(c);Os(e,i,s);const r=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=s+t;for(let t=0;t<r;t++)i.setComponent(e,t,0)}i.needsUpdate=!0,i.addUpdateRange(s*r,l*r)}if(i){const e=a.indexStart,n=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let t=0;t<o.count;t++)r.setX(e+t,s+o.getX(t));for(let t=o.count,i=n;t<i;t++)r.setX(e+t,s);r.needsUpdate=!0,r.addUpdateRange(e,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,null!==t.boundingBox&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,null!==t.boundingSphere&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),r=this.geometry;for(let o=0,a=n.length;o<a;o++){const a=i[o],s=n[a];if(!1!==s.active){if(null!==r.index){if(s.indexStart!==t){const{indexStart:n,vertexStart:i,reservedIndexCount:o}=s,a=r.index,l=a.array,c=e-i;for(let e=n;e<n+o;e++)l[e]=l[e]+c;a.array.copyWithin(t,n,n+o),a.addUpdateRange(t,o),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=s,i=r.attributes;for(const r in i){const o=i[r],{array:a,itemSize:s}=o;a.copyWithin(e*s,t*s,(t+n)*s),o.addUpdateRange(e*s,n*s)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=r.index?s.indexStart:s.vertexStart,this._nextIndexStart=r.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingBox){const e=new Qi,t=n.index,r=n.attributes.position;for(let n=i.start,o=i.start+i.count;n<o;n++){let i=n;t&&(i=t.getX(i)),e.expandByPoint(ks.fromBufferAttribute(r,i))}i.boundingBox=e}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingSphere){const t=new cr;this.getBoundingBoxAt(e,Is),Is.getCenter(t.center);const r=n.index,o=n.attributes.position;let a=0;for(let e=i.start,n=i.start+i.count;e<n;e++){let n=e;r&&(n=r.getX(n)),ks.fromBufferAttribute(o,n),a=Math.max(a,t.center.distanceToSquared(ks))}t.radius=Math.sqrt(a),i.boundingSphere=t}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(xs);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const i=new Int32Array(e),r=new Int32Array(e);Ns(this._multiDrawCounts,i),Ns(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,s=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ns(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ns(a.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),Ns(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new jo,this._initializeGeometry(i));const r=this.geometry;i.index&&Ns(i.index.array,r.index.array);for(const o in i.attributes)Ns(i.attributes[o].array,r.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,o=this.geometry;Ps.material=this.material,Ps.geometry.index=o.index,Ps.geometry.attributes=o.attributes,null===Ps.geometry.boundingBox&&(Ps.geometry.boundingBox=new Qi),null===Ps.geometry.boundingSphere&&(Ps.geometry.boundingSphere=new cr);for(let a=0,s=n.length;a<s;a++){if(!n[a].visible||!n[a].active)continue;const o=n[a].geometryIndex,s=i[o];Ps.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,Ps.matrixWorld).premultiply(r),this.getBoundingBoxAt(o,Ps.geometry.boundingBox),this.getBoundingSphereAt(o,Ps.geometry.boundingSphere),Ps.raycast(e,Ds);for(let e=0,n=Ds.length;e<n;e++){const n=Ds[e];n.object=this,n.batchId=a,t.push(n)}Ds.length=0}Ps.material=null,Ps.geometry.index=null,Ps.geometry.attributes={},Ps.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>u(u({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>u({},e)),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=null===o?1:o.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;h&&(Cs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Ts.setFromProjectionMatrix(Cs,e.coordinateSystem));let f=0;if(this.sortObjects){Cs.copy(this.matrixWorld).invert(),ks.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Cs),Rs.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Cs);for(let n=0,i=s.length;n<i;n++)if(s[n].visible&&s[n].active){const e=s[n].geometryIndex;this.getMatrixAt(n,Cs),this.getBoundingSphereAt(e,Ms).applyMatrix4(Cs);let t=!1;if(h&&(t=!Ts.intersectsSphere(Ms)),!t){const t=u[e],i=Ls.subVectors(Ms.center,ks).dot(Rs);Bs.push(t.start,t.count,i,n)}}const e=Bs.list,t=this.customSort;null===t?e.sort(r.transparent?ws:_s):t.call(this,e,n);for(let n=0,i=e.length;n<i;n++){const t=e[n];l[f]=t.start*a,c[f]=t.count,p[f]=t.index,f++}Bs.reset()}else for(let m=0,g=s.length;m<g;m++)if(s[m].visible&&s[m].active){const e=s[m].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(m,Cs),this.getBoundingSphereAt(e,Ms).applyMatrix4(Cs),t=!Ts.intersectsSphere(Ms)),!t){const t=u[e];l[f]=t.start*a,c[f]=t.count,p[f]=m,f++}}d.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,o){this.onBeforeRender(e,null,i,r,o)}}class zs extends fo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new uo(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Us=new Vi,js=new Vi,Vs=new yr,Hs=new vr,Gs=new cr,Qs=new Vi,Ws=new Vi;class qs extends Qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zs;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Us.fromBufferAttribute(t,e-1),js.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Us.distanceTo(js);e.setAttribute("lineDistance",new Bo(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gs.copy(n.boundingSphere),Gs.applyMatrix4(i),Gs.radius+=r,!1===e.ray.intersectsSphere(Gs))return;Vs.copy(i).invert(),Hs.copy(e.ray).applyMatrix4(Vs);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=c.getX(r),i=c.getX(r+1),o=Xs(this,e,Hs,s,n,i,r);o&&t.push(o)}if(this.isLineLoop){const r=c.getX(i-1),o=c.getX(n),a=Xs(this,e,Hs,s,r,o,i-1);a&&t.push(a)}}else{const n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=Xs(this,e,Hs,s,r,r+1,r);n&&t.push(n)}if(this.isLineLoop){const r=Xs(this,e,Hs,s,i-1,n,i-1);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Xs(e,t,n,i,r,o,a){const s=e.geometry.attributes.position;Us.fromBufferAttribute(s,r),js.fromBufferAttribute(s,o);if(n.distanceSqToSegment(Us,js,Qs,Ws)>i)return;Qs.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(Qs);return l<t.near||l>t.far?void 0:{distance:l,point:Ws.clone().applyMatrix4(e.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:e}}const Ys=new Vi,Ks=new Vi;class Js extends qs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Ys.fromBufferAttribute(t,e),Ks.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Ys.distanceTo(Ks);e.setAttribute("lineDistance",new Bo(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Zs extends qs{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $s extends fo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new uo(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const el=new yr,tl=new vr,nl=new cr,il=new Vi;class rl extends Qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $s;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),nl.copy(n.boundingSphere),nl.applyMatrix4(i),nl.radius+=r,!1===e.ray.intersectsSphere(nl))return;el.copy(i).invert(),tl.copy(e.ray).applyMatrix4(el);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);n<r;n++){const r=l.getX(n);il.fromBufferAttribute(c,r),ol(il,r,s,i,e,t,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);n<r;n++)il.fromBufferAttribute(c,n),ol(il,n,s,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function ol(e,t,n,i,r,o,a){const s=tl.distanceSqToPoint(e);if(s<n){const n=new Vi;tl.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class al extends Bi{constructor(e,t,n,i,r,o,a,s,l){super(e,t,n,i,r,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:De,this.magFilter=void 0!==r?r:De,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sl extends al{constructor(e,t,n,i,r,o,a,s){super({},e,t,n,i,r,o,a,s),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class ll extends Bi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ke,this.minFilter=ke,this.generateMipmaps=!1,this.needsUpdate=!0}}class cl extends Bi{constructor(e,t,n,i,r,o,a,s,l,c,u,h){super(null,o,a,s,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ul extends cl{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ie,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hl extends cl{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,_e),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class dl extends Bi{constructor(e,t,n,i,r,o,a,s,l){super(e,t,n,i,r,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class pl extends Bi{constructor(e,t,n,i,r,o,a,s,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:it;if(c!==it&&c!==rt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===it&&(n=Qe),void 0===n&&c===rt&&(n=Ke),super(null,i,r,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ke,this.minFilter=void 0!==s?s:ke,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class fl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let a,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),a=this.getPoint(r),s=t||(o.isVector2?new hi:new Vi);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Vi,i=[],r=[],o=[],a=new Vi,s=new yr;for(let d=0;d<=e;d++){const t=d/e;i[d]=this.getTangentAt(t,new Vi)}r[0]=new Vi,o[0]=new Vi;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(oi(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(s.makeRotationAxis(a,e))}o[d].crossVectors(i[d],r[d])}if(!0===t){let t=Math.acos(oi(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ml extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=r?0:n),!0!==this.aClockwise||r||(i===n?i=-n:i-=n);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),s=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,i=s-this.aY;a=n*e-i*t+this.aX,s=n*t+i*e+this.aY}return t.set(a,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gl extends ml{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function vl(){let e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+s)+(i-n)/s;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}const yl=new Vi,Al=new vl,bl=new vl,xl=new vl;class _l extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let o,a,s=Math.floor(r),l=r-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===l&&s===i-1&&(s=i-2,l=1),this.closed||s>0?o=n[(s-1)%i]:(yl.subVectors(n[0],n[1]).add(n[0]),o=yl);const c=n[s%i],u=n[(s+1)%i];if(this.closed||s+2<i?a=n[(s+2)%i]:(yl.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=yl),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Al.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,t,n,i),bl.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,t,n,i),xl.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(Al.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),bl.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),xl.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return t.set(Al.calc(l),bl.calc(l),xl.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vi).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function wl(e,t,n,i,r){const o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function El(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Cl(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Sl extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new hi,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new hi;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(Cl(e,n.x,i.x,r.x,o.x),Cl(e,n.y,i.y,r.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Tl extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vi,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Vi;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(Cl(e,n.x,i.x,r.x,o.x),Cl(e,n.y,i.y,r.y,o.y),Cl(e,n.z,i.z,r.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Il extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ml extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kl extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new hi;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=this.v0,i=this.v1,r=this.v2;return t.set(El(e,n.x,i.x,r.x),El(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rl extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vi;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi,n=this.v0,i=this.v1,r=this.v2;return t.set(El(e,n.x,i.x,r.x),El(e,n.y,i.y,r.y),El(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ll extends fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi,n=this.points,i=(n.length-1)*e,r=Math.floor(i),o=i-r,a=n[0===r?r:r-1],s=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(wl(o,a.x,s.x,l.x,c.x),wl(o,a.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new hi).fromArray(n))}return this}}var Bl=Object.freeze({__proto__:null,ArcCurve:gl,CatmullRomCurve3:_l,CubicBezierCurve:Sl,CubicBezierCurve3:Tl,EllipseCurve:ml,LineCurve:Il,LineCurve3:Ml,QuadraticBezierCurve:kl,QuadraticBezierCurve3:Rl,SplineCurve:Ll});class Pl extends fl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Bl[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,o=this.curves[r],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Bl[n.type]).fromJSON(n))}return this}}class Dl extends Pl{constructor(e){super(),this.type="Path",this.currentPoint=new hi,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Il(this.currentPoint.clone(),new hi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new kl(this.currentPoint.clone(),new hi(e,t),new hi(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const a=new Sl(this.currentPoint.clone(),new hi(e,t),new hi(n,i),new hi(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Ll(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,o,a,s),this}absellipse(e,t,n,i,r,o,a,s){const l=new ml(e,t,n,i,r,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ol extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new hi(0,-.5),new hi(.5,0),new hi(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=oi(i,0,2*Math.PI);const r=[],o=[],a=[],s=[],l=[],c=1/t,u=new Vi,h=new hi,d=new Vi,p=new Vi,f=new Vi;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),s.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){const r=n+v*c*i,d=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*p,o.push(u.x,u.y,u.z),h.x=v/t,h.y=n/(e.length-1),a.push(h.x,h.y);const i=s[3*n+0]*d,r=s[3*n+1],c=s[3*n+0]*p;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,o=n+e.length,a=n+e.length+1,s=n+1;r.push(i,o,s),r.push(a,s,o)}this.setIndex(r),this.setAttribute("position",new Bo(o,3)),this.setAttribute("uv",new Bo(a,2)),this.setAttribute("normal",new Bo(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ol(e.points,e.segments,e.phiStart,e.phiLength)}}class Nl extends Ol{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new Dl;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Nl(e.radius,e.length,e.capSegments,e.radialSegments)}}class Fl extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],o=[],a=[],s=[],l=new Vi,c=new hi;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Bo(o,3)),this.setAttribute("normal",new Bo(a,3)),this.setAttribute("uv",new Bo(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zl extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const r=p,o=new hi,f=new Vi;let v=0;const y=!0===n?e:t,A=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*A,0),h.push(0,A,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i*s+a,n=Math.cos(t),r=Math.sin(t);f.x=y*r,f.y=m*A,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,A,0),o.x=.5*n+.5,o.y=.5*r*A+.5,d.push(o.x,o.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new Vi,v=new Vi;let y=0;const A=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*s+a,l=Math.sin(r),f=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),o.set(l,A,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const o=f[i][n],a=f[i+1][n],s=f[i+1][n+1],l=f[i][n+1];(e>0||0!==i)&&(c.push(o,a,l),y+=3),(t>0||i!==r-1)&&(c.push(a,s,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Bo(u,3)),this.setAttribute("normal",new Bo(h,3)),this.setAttribute("uv",new Bo(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ul extends zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ul(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jl extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],o=[];function a(e,t,n,i){const r=i+1,o=[];for(let a=0;a<=r;a++){o[a]=[];const i=e.clone().lerp(n,a/r),s=t.clone().lerp(n,a/r),l=r-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===r?i:i.clone().lerp(s,e/l)}for(let a=0;a<r;a++)for(let e=0;e<2*(r-a)-1;e++){const t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new Vi,i=new Vi,r=new Vi;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),a(n,i,r,e)}(i),function(e){const t=new Vi;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Vi;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=u(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;o.push(n,1-i)}(function(){const e=new Vi,t=new Vi,n=new Vi,i=new Vi,a=new hi,s=new hi,l=new hi;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(a,d+0,e,p),c(s,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Bo(r,3)),this.setAttribute("normal",new Bo(r.slice(),3)),this.setAttribute("uv",new Bo(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jl(e.vertices,e.indices,e.radius,e.details)}}class Vl extends jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vl(e.radius,e.detail)}}const Hl=new Vi,Gl=new Vi,Ql=new Vi,Wl=new oo;class ql extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(ni*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=Wl;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),Wl.getNormal(Ql),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(s.x*i),",").concat(Math.round(s.y*i),",").concat(Math.round(s.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],o=Wl[c[e]],a=Wl[c[t]],s="".concat(n,"_").concat(i),p="".concat(i,"_").concat(n);p in h&&h[p]?(Ql.dot(h[p].normal)<=r&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[p]=null):s in h||(h[s]={index0:l[e],index1:l[t],normal:Ql.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];Hl.fromBufferAttribute(a,t),Gl.fromBufferAttribute(a,n),d.push(Hl.x,Hl.y,Hl.z),d.push(Gl.x,Gl.y,Gl.z)}this.setAttribute("position",new Bo(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Xl extends Dl{constructor(e){super(e),this.uuid=ri(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Dl).fromJSON(n))}return this}}const Yl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=Kl(e,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,p;if(i&&(o=function(e,t,n,i){const r=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*i,l=o<a-1?t[o+1]*i:e.length,c=Kl(e,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(sc(c));for(r.sort(ic),o=0;o<r.length;o++)n=rc(r[o],n);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-s,u-l),p=0!==p?32767/p:0}return Zl(o,a,n,s,l,p,0),a};function Kl(e,t,n,i,r){let o,a;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=vc(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=vc(o,e[o],e[o+1],a);return a&&hc(a,a.next)&&(yc(a),a=a.next),a}function Jl(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!hc(i,i.next)&&0!==uc(i.prev,i,i.next))i=i.next;else{if(yc(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Zl(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=ac(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ,i);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?ec(e,i,r,o):$l(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),yc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Zl(e=tc(Jl(e),t,n),t,n,i,r,o,2):2===a&&nc(e,t,n,i,r,o):Zl(Jl(e),t,n,i,r,o,1);break}}function $l(e){const t=e.prev,n=e,i=e.next;if(uc(t,n,i)>=0)return!1;const r=t.x,o=n.x,a=i.x,s=t.y,l=n.y,c=i.y,u=r<o?r<a?r:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=r>o?r>a?r:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&lc(r,s,o,l,a,c,f.x,f.y)&&uc(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function ec(e,t,n,i){const r=e.prev,o=e,a=e.next;if(uc(r,o,a)>=0)return!1;const s=r.x,l=o.x,c=a.x,u=r.y,h=o.y,d=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=ac(p,f,t,n,i),y=ac(m,g,t,n,i);let A=e.prevZ,b=e.nextZ;for(;A&&A.z>=v&&b&&b.z<=y;){if(A.x>=p&&A.x<=m&&A.y>=f&&A.y<=g&&A!==r&&A!==a&&lc(s,u,l,h,c,d,A.x,A.y)&&uc(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&lc(s,u,l,h,c,d,b.x,b.y)&&uc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;A&&A.z>=v;){if(A.x>=p&&A.x<=m&&A.y>=f&&A.y<=g&&A!==r&&A!==a&&lc(s,u,l,h,c,d,A.x,A.y)&&uc(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&lc(s,u,l,h,c,d,b.x,b.y)&&uc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function tc(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!hc(r,o)&&dc(r,i,i.next,o)&&mc(r,o)&&mc(o,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),yc(i),yc(i.next),i=e=o),i=i.next}while(i!==e);return Jl(i)}function nc(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&cc(a,e)){let s=gc(a,e);return a=Jl(a,a.next),s=Jl(s,s.next),Zl(a,t,n,i,r,o,0),void Zl(s,t,n,i,r,o,0)}e=e.next}a=a.next}while(a!==e)}function ic(e,t){return e.x-t.x}function rc(e,t){const n=function(e,t){let n,i=t,r=-1/0;const o=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=o&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===o))return n}i=i.next}while(i!==t);if(!n)return null;const s=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{o>=i.x&&i.x>=l&&o!==i.x&&lc(a<c?o:r,a,l,c,a<c?r:o,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(o-i.x),mc(i,e)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&oc(n,i)))&&(n=i,h=u)),i=i.next}while(i!==s);return n}(e,t);if(!n)return t;const i=gc(n,e);return Jl(i,i.next),Jl(n,n.next)}function oc(e,t){return uc(e.prev,e,t.prev)<0&&uc(t.next,e,e.next)<0}function ac(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function sc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function lc(e,t,n,i,r,o,a,s){return(r-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function cc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&dc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(mc(e,t)&&mc(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(uc(e.prev,e,t.prev)||uc(e,t.prev,t))||hc(e,t)&&uc(e.prev,e,e.next)>0&&uc(t.prev,t,t.next)>0)}function uc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function hc(e,t){return e.x===t.x&&e.y===t.y}function dc(e,t,n,i){const r=fc(uc(e,t,n)),o=fc(uc(e,t,i)),a=fc(uc(n,i,e)),s=fc(uc(n,i,t));return r!==o&&a!==s||(!(0!==r||!pc(e,n,t))||(!(0!==o||!pc(e,i,t))||(!(0!==a||!pc(n,e,i))||!(0!==s||!pc(n,t,i)))))}function pc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function fc(e){return e>0?1:e<0?-1:0}function mc(e,t){return uc(e.prev,e,e.next)<0?uc(e,t,e.next)>=0&&uc(e,e.prev,t)>=0:uc(e,t,e.prev)<0||uc(e,e.next,t)<0}function gc(e,t){const n=new Ac(e.i,e.x,e.y),i=new Ac(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vc(e,t,n,i){const r=new Ac(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ac(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bc{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return bc.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];xc(e),_c(n,e);let o=e.length;t.forEach(xc);for(let s=0;s<t.length;s++)i.push(o),o+=t[s].length,_c(n,t[s]);const a=Yl(n,i);for(let s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}}function xc(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function _c(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class wc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xl([new hi(.5,.5),new hi(-.5,.5),new hi(-.5,-.5),new hi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ec;let g,v,y,A,b,x=!1;f&&(g=f.getSpacedPoints(s),x=!0,c=!1,v=f.computeFrenetFrames(s,!1),y=new Vi,A=new Vi,b=new Vi),c||(p=0,u=0,h=0,d=0);const _=e.extractPoints(a);let w=_.shape;const E=_.holes;if(!bc.isClockWise(w)){w=w.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];bc.isClockWise(t)&&(E[e]=t.reverse())}}const C=bc.triangulateShape(w,E),S=w;for(let t=0,n=E.length;t<n;t++){const e=E[t];w=w.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const I=w.length,M=C.length;function k(e,t,n){let i,r,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-s/h,f=t.y+a/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(a*c-s*l);i=p+a*m-e.x,r=f+s*m-e.y;const g=i*i+r*r;if(g<=2)return new hi(i,r);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new hi(i/o,r/o)}const R=[];for(let t=0,n=S.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[t]=k(S[t],S[i],S[r]);const L=[];let B,P=R.concat();for(let t=0,n=E.length;t<n;t++){const e=E[t];B=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),B[t]=k(e[t],e[i],e[r]);L.push(B),P=P.concat(B)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=S.length;t<r;t++){const e=T(S[t],R[t],i);N(e.x,e.y,-n)}for(let t=0,r=E.length;t<r;t++){const e=E[t];B=L[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],B[t],i);N(r.x,r.y,-n)}}}const D=h+d;for(let t=0;t<I;t++){const e=c?T(w[t],P[t],D):w[t];x?(A.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(A).add(y),N(b.x,b.y,b.z)):N(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<I;e++){const n=c?T(w[e],P[e],D):w[e];x?(A.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(A).add(y),N(b.x,b.y,b.z)):N(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=S.length;t<r;t++){const e=T(S[t],R[t],i);N(e.x,e.y,l+n)}for(let t=0,r=E.length;t<r;t++){const e=E[t];B=L[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],B[t],i);x?N(r.x,r.y+g[s-1].y,g[s-1].x+n):N(r.x,r.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=I*e,o=I*(e+1);z(t+i+n,t+r+n,t+r+o,t+i+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,r){U(e),U(t),U(r);const o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function z(e,t,r,o){U(e),U(t),U(o),U(t),U(r),U(o);const a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function j(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=I*e;for(let n=0;n<M;n++){const e=C[n];F(e[2]+t,e[1]+t,e[0]+t)}e=s+2*p,t=I*e;for(let n=0;n<M;n++){const e=C[n];F(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<M;e++){const t=C[e];F(t[2],t[1],t[0])}for(let e=0;e<M;e++){const t=C[e];F(t[0]+I*s,t[1]+I*s,t[2]+I*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;O(S,t),t+=S.length;for(let n=0,i=E.length;n<i;n++){const e=E[n];O(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Bo(i,3)),this.setAttribute("uv",new Bo(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Bl[i.type]).fromJSON(i)),new wc(n,e.options)}}const Ec={generateTopUV:function(e,t,n,i,r){const o=t[3*n],a=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new hi(o,a),new hi(s,l),new hi(c,u)]},generateSideWallUV:function(e,t,n,i,r,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new hi(a,1-l),new hi(c,1-h),new hi(d,1-f),new hi(m,1-v)]:[new hi(s,1-l),new hi(u,1-h),new hi(p,1-f),new hi(g,1-v)]}};class Cc extends jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cc(e.radius,e.detail)}}class Sc extends jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sc(e.radius,e.detail)}}class Tc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,a=Math.floor(n),s=Math.floor(i),l=a+1,c=s+1,u=e/a,h=t/s,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;d.push(t,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new Bo(p,3)),this.setAttribute("normal",new Bo(f,3)),this.setAttribute("uv",new Bo(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tc(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ic extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/i,d=new Vi,p=new hi;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*o;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Bo(s,3)),this.setAttribute("normal",new Bo(l,3)),this.setAttribute("uv",new Bo(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ic(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Mc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xl([new hi(0,.5),new hi(-.5,-.5),new hi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===bc.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===bc.isClockWise(e)&&(u[t]=e.reverse())}const h=bc.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,i=h.length;t<i;t++){const e=h[t],i=e[0]+a,r=e[1]+a,o=e[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Bo(i,3)),this.setAttribute("normal",new Bo(r,3)),this.setAttribute("uv",new Bo(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new Mc(n,e.curveSegments)}}class kc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Vi,h=new Vi,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===o?y=.5/t:g===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*r)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(i+s*r)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&d.push(t,i,a),(g!==n-1||s<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new Bo(p,3)),this.setAttribute("normal",new Bo(f,3)),this.setAttribute("uv",new Bo(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Rc extends jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rc(e.radius,e.detail)}}class Lc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],s=[],l=[],c=new Vi,u=new Vi,h=new Vi;for(let d=0;d<=n;d++)for(let o=0;o<=i;o++){const p=o/i*r,f=d/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=i;e++){const t=(i+1)*d+e-1,n=(i+1)*(d-1)+e-1,r=(i+1)*(d-1)+e,a=(i+1)*d+e;o.push(t,n,a),o.push(n,r,a)}this.setIndex(o),this.setAttribute("position",new Bo(a,3)),this.setAttribute("normal",new Bo(s,3)),this.setAttribute("uv",new Bo(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Bc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],l=[],c=[],u=new Vi,h=new Vi,d=new Vi,p=new Vi,f=new Vi,m=new Vi,g=new Vi;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;v(a,r,o,e,d),v(a+.01,r,o,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,o=-t*Math.cos(r),a=t*Math.sin(r);u.x=d.x+(o*g.x+a*f.x),u.y=d.y+(o*g.y+a*f.y),u.z=d.z+(o*g.z+a*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,o=(i+1)*(y-1)+e;a.push(t,n,o),a.push(n,r,o)}function v(e,t,n,i,r){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Bo(s,3)),this.setAttribute("normal",new Bo(l,3)),this.setAttribute("uv",new Bo(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Pc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rl(new Vi(-1,-1,0),new Vi(-1,1,0),new Vi(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Vi,s=new Vi,l=new hi;let c=new Vi;const u=[],h=[],d=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=o.normals[r],d=o.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+r*d.x,s.y=o*l.y+r*d.y,s.z=o*l.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,a=(i+1)*(e-1)+t;p.push(n,r,a),p.push(r,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Bo(u,3)),this.setAttribute("normal",new Bo(h,3)),this.setAttribute("uv",new Bo(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Pc((new Bl[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Dc extends jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Vi,r=new Vi;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=a.getX(e+l),c=a.getX(e+(l+1)%3);i.fromBufferAttribute(o,s),r.fromBufferAttribute(o,c),!0===Oc(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;i.fromBufferAttribute(o,a),r.fromBufferAttribute(o,l),!0===Oc(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Bo(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Oc(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var Nc=Object.freeze({__proto__:null,BoxGeometry:ta,CapsuleGeometry:Nl,CircleGeometry:Fl,ConeGeometry:Ul,CylinderGeometry:zl,DodecahedronGeometry:Vl,EdgesGeometry:ql,ExtrudeGeometry:wc,IcosahedronGeometry:Cc,LatheGeometry:Ol,OctahedronGeometry:Sc,PlaneGeometry:Tc,PolyhedronGeometry:jl,RingGeometry:Ic,ShapeGeometry:Mc,SphereGeometry:kc,TetrahedronGeometry:Rc,TorusGeometry:Lc,TorusKnotGeometry:Bc,TubeGeometry:Pc,WireframeGeometry:Dc});class Fc extends fo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new uo(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zc extends aa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Uc extends fo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new uo(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ir,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jc extends Uc{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new hi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new uo(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new uo(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new uo(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Vc extends fo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new uo(16777215),this.specular=new uo(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ir,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hc extends fo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new uo(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Gc extends fo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Qc extends fo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new uo(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ir,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wc extends fo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qc extends fo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Xc extends fo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new uo(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ln,this.normalScale=new hi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yc extends zs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Kc(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Jc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zc(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function $c(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r}function eu(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)}const tu={convertArray:Kc,isTypedArray:Jc,getKeyframeOrder:Zc,sortedArray:$c,flattenJSON:eu,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),s=[],c=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*r;if(!(a<n||a>=i)){s.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==s.length&&(e.times=Kc(s,e.times.constructor),e.values=Kc(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,o=t/i;for(let a=0;a<r;++a){const t=n.tracks[a],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=s,n=l-s;d=t.values.slice(e,n)}else if(o>=t.times[h]){const e=h*l+s,n=e+l-s;d=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=s,i=l-s;e.evaluate(o),d=e.resultBuffer.slice(n,i)}if("quaternion"===i){(new ji).fromArray(d).normalize().conjugate().toArray(d)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)ji.multiplyQuaternionsFlat(r.values,t,d,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=d[n]}}}return e.blendMode=$t,e}};class nu{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iu extends nu{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yt,endingEnd:Yt}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Kt:r=e,a=2*t-n;break;case Jt:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Kt:o=e,s=2*n-t;break;case Jt:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,A=d*m-d*f;for(let b=0;b!==a;++b)r[b]=g*o[c+b]+v*o[l+b]+y*o[s+b]+A*o[u+b];return r}}class ru extends nu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(i-t),u=1-c;for(let h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}class ou extends nu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class au{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Kc(t,this.TimeBufferType),this.values=Kc(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Kc(e.times,Array),values:Kc(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ou(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ru(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iu(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Wt:t=this.InterpolantFactoryMethodDiscrete;break;case qt:t=this.InterpolantFactoryMethodLinear;break;case Xt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wt;case this.InterpolantFactoryMethodLinear:return qt;case this.InterpolantFactoryMethodSmooth:return Xt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==i&&Jc(i))for(let a=0,s=i.length;a!==s;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Xt,r=e.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[o+a]){r=!0;break}}}if(r){if(a!==o){e[o]=e[a];const i=a*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,a=0;a!==n;++a)t[i+a]=t[e+a];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}au.prototype.TimeBufferType=Float32Array,au.prototype.ValueBufferType=Float32Array,au.prototype.DefaultInterpolation=qt;class su extends au{constructor(e,t,n){super(e,t,n)}}su.prototype.ValueTypeName="bool",su.prototype.ValueBufferType=Array,su.prototype.DefaultInterpolation=Wt,su.prototype.InterpolantFactoryMethodLinear=void 0,su.prototype.InterpolantFactoryMethodSmooth=void 0;class lu extends au{}lu.prototype.ValueTypeName="color";class cu extends au{}cu.prototype.ValueTypeName="number";class uu extends nu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)ji.slerpFlat(r,0,o,l-a,o,l,s);return r}}class hu extends au{InterpolantFactoryMethodLinear(e){return new uu(this.times,this.values,this.getValueSize(),e)}}hu.prototype.ValueTypeName="quaternion",hu.prototype.InterpolantFactoryMethodSmooth=void 0;class du extends au{constructor(e,t,n){super(e,t,n)}}du.prototype.ValueTypeName="string",du.prototype.ValueBufferType=Array,du.prototype.DefaultInterpolation=Wt,du.prototype.InterpolantFactoryMethodLinear=void 0,du.prototype.InterpolantFactoryMethodSmooth=void 0;class pu extends au{}pu.prototype.ValueTypeName="vector";class fu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zt;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ri(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(mu(n[o]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(au.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,o=[];for(let a=0;a<r;a++){let e=[],s=[];e.push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);const l=Zc(e);e=$c(e,1,l),s=$c(s,1,l),i||0!==e[0]||(e.push(r),s.push(s[0])),o.push(new cu(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],a=[];eu(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],o=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new cu(".morphTargetInfluence["+r+"]",t,o))}s=t.length*o}else{const r=".bones["+t[c].name+"]";n(pu,r+".position",e,"pos",i),n(hu,r+".quaternion",e,"rot",i),n(pu,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,s,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cu;case"vector":case"vector2":case"vector3":case"vector4":return pu;case"color":return lu;case"quaternion":return hu;case"bool":case"boolean":return su;case"string":return du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];eu(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const gu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class vu{constructor(e,t,n){const i=this;let r,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const yu=new vu;class Au{constructor(e){this.manager=void 0!==e?e:yu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Au.DEFAULT_MATERIAL_NAME="__DEFAULT";const bu={};class xu extends Error{constructor(e,t){super(e),this.response=t}}class _u extends Au{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=gu.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==bu[e])return void bu[e].push({onLoad:t,onProgress:n,onError:i});bu[e]=[],bu[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=bu[e],i=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=r?parseInt(r):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{s+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new xu('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,a));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{gu.add(e,t);const n=bu[e];delete bu[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=bu[e];if(void 0===n)throw this.manager.itemError(e),t;delete bu[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class wu extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new _u(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(QJ){i?i(QJ):console.error(QJ),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=fu.parse(e[n]);t.push(i)}return t}}class Eu extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=[],a=new cl,s=new _u(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let l=0;function c(c){s.load(e[c],function(e){const n=r.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=De),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else s.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=De),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a}}class Cu extends Au{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=gu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=vi("img");function s(){c(),gu.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Su extends Au{constructor(e){super(e)}load(e,t,n,i){const r=new fa;r.colorSpace=hn;const o=new Cu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)s(l);return r}}class Tu extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new ts,a=new _u(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(e){let n;try{n=r.parse(e)}catch(a){if(void 0===i)return void console.error(a);i(a)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ie,o.wrapT=void 0!==n.wrapT?n.wrapT:Ie,o.magFilter=void 0!==n.magFilter?n.magFilter:De,o.minFilter=void 0!==n.minFilter?n.minFilter:De,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Fe),1===n.mipmapCount&&(o.minFilter=De),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)},n,i),o}}class Iu extends Au{constructor(e){super(e)}load(e,t,n,i){const r=new Bi,o=new Cu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class Mu extends Qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new uo(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class ku extends Mu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new uo(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ru=new yr,Lu=new Vi,Bu=new Vi;class Pu{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new hi(512,512),this.map=null,this.mapPass=null,this.matrix=new yr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bs,this._frameExtents=new hi(1,1),this._viewportCount=1,this._viewports=[new Pi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Lu.setFromMatrixPosition(e.matrixWorld),t.position.copy(Lu),Bu.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Bu),t.updateMatrixWorld(),Ru.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ru),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Ru)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Du extends Pu{constructor(){super(new ha(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ii*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ou extends Mu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.target=new Qr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new Du}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Nu=new yr,Fu=new Vi,zu=new Vi;class Uu extends Pu{constructor(){super(new ha(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new hi(4,2),this._viewportCount=6,this._viewports=[new Pi(2,1,1,1),new Pi(0,1,1,1),new Pi(3,1,1,1),new Pi(1,1,1,1),new Pi(3,0,1,1),new Pi(1,0,1,1)],this._cubeDirections=[new Vi(1,0,0),new Vi(-1,0,0),new Vi(0,0,1),new Vi(0,0,-1),new Vi(0,1,0),new Vi(0,-1,0)],this._cubeUps=[new Vi(0,1,0),new Vi(0,1,0),new Vi(0,1,0),new Vi(0,1,0),new Vi(0,0,1),new Vi(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Fu.setFromMatrixPosition(e.matrixWorld),n.position.copy(Fu),zu.copy(n.position),zu.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(zu),n.updateMatrixWorld(),i.makeTranslation(-Fu.x,-Fu.y,-Fu.z),Nu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nu)}}class ju extends Mu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Uu}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Vu extends sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Hu extends Pu{constructor(){super(new Vu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Gu extends Mu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.target=new Qr,this.shadow=new Hu}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Qu extends Mu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Wu extends Mu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class qu{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vi)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Xu extends Mu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qu;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Yu extends Au{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,o=new _u(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(QJ){i?i(QJ):console.error(QJ),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new uo).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(i.dispersion=e.dispersion),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new uo).setHex(t.value);break;case"v2":i.uniforms[r].value=(new hi).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new Vi).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new Pi).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new di).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new yr).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new hi).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new hi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Yu.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:Fc,SpriteMaterial:Ca,RawShaderMaterial:zc,ShaderMaterial:aa,PointsMaterial:$s,MeshPhysicalMaterial:jc,MeshStandardMaterial:Uc,MeshPhongMaterial:Vc,MeshToonMaterial:Hc,MeshNormalMaterial:Gc,MeshLambertMaterial:Qc,MeshDepthMaterial:Wc,MeshDistanceMaterial:qc,MeshBasicMaterial:mo,MeshMatcapMaterial:Xc,LineDashedMaterial:Yc,LineBasicMaterial:zs,Material:fo}[e]}}class Ku{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(QJ){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Ju extends jo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Zu extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new _u(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(QJ){i?i(QJ):console.error(QJ),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],o=new Uint32Array(r).buffer;return n[t]=o,o}(e,r.buffer),a=gi(r.type,o),s=new _a(a,r.stride);return s.uuid=r.uuid,t[i]=s,s}const r=e.isInstancedBufferGeometry?new Ju:new jo,o=e.data.index;if(void 0!==o){const e=gi(o.type,o.array);r.setIndex(new Eo(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Ea(r,t.itemSize,t.offset,t.normalized)}else{const e=gi(t.type,t.array);n=new(t.isInstancedBufferAttribute?os:Eo)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),r.setAttribute(u,n)}const s=e.data.morphAttributes;if(s)for(const u in s){const t=s[u],n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];let a;if(o.isInterleavedBufferAttribute){const t=i(e.data,o.data);a=new Ea(t,o.itemSize,o.offset,o.normalized)}else{const e=gi(o.type,o.array);a=new Eo(e,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Vi;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new cr(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class $u extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=""===this.path?Ku.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new _u(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){let o=null;try{o=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(o,t)},n,i)}async loadAsync(e,t){const n=""===this.path?Ku.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new _u(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),o=JSON.parse(r),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){void 0!==t&&t(l)}),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,s,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a,o,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new Xl).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,o=e.length;r<o;r++){const t=(new rs).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Zu;for(let r=0,o=e.length;r<o;r++){let o;const a=e[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:a.type in Nc?o=Nc[a.type].fromJSON(a,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new Yu;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=fu.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:gi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new vu(t);r=new Cu(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=o(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ts(n.data,n.width,n.height)))}i[n.uuid]=new ki(e)}else{const e=o(n.url);i[n.uuid]=new ki(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:gi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new Cu(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],o=i.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new ts(i.data,i.width,i.height)))}n[i.uuid]=new ki(e)}else{const e=await r(i.url);n[i.uuid]=new ki(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=t[o.image],s=a.data;let l;Array.isArray(s)?(l=new fa,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new ts:new Bi,s&&(l.needsUpdate=!0)),l.source=a,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,eh)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],th),l.wrapT=n(o.wrap[1],th)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,nh)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,nh)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),i[o.uuid]=l}return i}parseObject(e,t,n,i,r){let o,a,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":o=new xa,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new uo(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new ba(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Aa(e.fog.color,e.fog.density)),""!==e.fog.name&&(o.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&o.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(o.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ha(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Vu(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Qu(e.color,e.intensity);break;case"DirectionalLight":o=new Gu(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new ju(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Wu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ou(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new ku(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Xu).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=c(e.material),o=new $a(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=c(e.material),o=new $o(a,s);break;case"InstancedMesh":a=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;o=new ps(a,s,t),o.instanceMatrix=new os(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new os(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":a=l(e.geometry),s=c(e.material),o=new Fs(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s),o.geometry=a,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(e=>{const t=new Qi;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new cr;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new Ha;break;case"Line":o=new qs(l(e.geometry),c(e.material));break;case"LineLoop":o=new Zs(l(e.geometry),c(e.material));break;case"LineSegments":o=new Js(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new rl(l(e.geometry),c(e.material));break;case"Sprite":o=new za(c(e.material));break;case"Group":o=new ga;break;case"Bone":o=new es;break;default:o=new Qr}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(o.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);t.target=void 0!==i?i:new Qr}})}}const eh={UVMapping:xe,CubeReflectionMapping:_e,CubeRefractionMapping:we,EquirectangularReflectionMapping:Ee,EquirectangularRefractionMapping:Ce,CubeUVReflectionMapping:Se},th={RepeatWrapping:Te,ClampToEdgeWrapping:Ie,MirroredRepeatWrapping:Me},nh={NearestFilter:ke,NearestMipmapNearestFilter:Re,NearestMipmapLinearFilter:Be,LinearFilter:De,LinearMipmapNearestFilter:Oe,LinearMipmapLinearFilter:Fe};class ih extends Au{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=gu.get(e);if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then(n=>{t&&t(n),r.manager.itemEnd(e)}).catch(e=>{i&&i(e)}):(setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const s=fetch(e,a).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return gu.add(e,n),t&&t(n),r.manager.itemEnd(e),n}).catch(function(t){i&&i(t),gu.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});gu.add(e,s),r.manager.itemStart(e)}}let rh;class oh{static getContext(){return void 0===rh&&(rh=new(window.AudioContext||window.webkitAudioContext)),rh}static setContext(e){rh=e}}class ah extends Au{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new _u(this.manager);function a(t){i?i(t):console.error(t),r.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(e){try{const n=e.slice(0);oh.getContext().decodeAudioData(n,function(e){t(e)}).catch(a)}catch(QJ){a(QJ)}},n,i)}}const sh=new yr,lh=new yr,ch=new yr;class uh{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ha,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ha,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ch.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(ni*t.fov*.5)/t.zoom;let o,a;lh.elements[12]=-n,sh.elements[12]=n,o=-r*t.aspect+i,a=r*t.aspect+i,ch.elements[0]=2*t.near/(a-o),ch.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(ch),o=-r*t.aspect-i,a=r*t.aspect-i,ch.elements[0]=2*t.near/(a-o),ch.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(ch)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(lh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sh)}}class hh extends ha{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class dh{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ph(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ph();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ph(){return performance.now()}const fh=new Vi,mh=new ji,gh=new Vi,vh=new Vi;class yh extends Qr{constructor(){super(),this.type="AudioListener",this.context=oh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new dh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fh,mh,gh),vh.set(0,0,-1).applyQuaternion(mh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fh.x,e),t.positionY.linearRampToValueAtTime(fh.y,e),t.positionZ.linearRampToValueAtTime(fh.z,e),t.forwardX.linearRampToValueAtTime(vh.x,e),t.forwardY.linearRampToValueAtTime(vh.y,e),t.forwardZ.linearRampToValueAtTime(vh.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(fh.x,fh.y,fh.z),t.setOrientation(vh.x,vh.y,vh.z,n.x,n.y,n.z)}}class Ah extends Qr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const bh=new Vi,xh=new ji,_h=new Vi,wh=new Vi;class Eh extends Ah{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(bh,xh,_h),wh.set(0,0,1).applyQuaternion(xh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bh.x,e),t.positionY.linearRampToValueAtTime(bh.y,e),t.positionZ.linearRampToValueAtTime(bh.z,e),t.orientationX.linearRampToValueAtTime(wh.x,e),t.orientationY.linearRampToValueAtTime(wh.y,e),t.orientationZ.linearRampToValueAtTime(wh.z,e)}else t.setPosition(bh.x,bh.y,bh.z),t.setOrientation(wh.x,wh.y,wh.z)}}class Ch{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Sh{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){ji.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const o=this._workIndex*r;ji.multiplyQuaternionsFlat(e,o,e,t,e,n),ji.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*o+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}}const Th="\\[\\]\\.:\\/",Ih=new RegExp("["+Th+"]","g"),Mh="[^"+Th+"]",kh="[^"+Th.replace("\\.","")+"]",Rh=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Mh)+/(WCOD+)?/.source.replace("WCOD",kh)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Mh)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Mh)+"$"),Lh=["material","materials","bones","map"];class Bh{constructor(e,t,n){this.path=t,this.parsedPath=n||Bh.parseTrackName(t),this.node=Bh.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Bh.Composite(e,t,n):new Bh(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ih,"")}static parseTrackName(e){const t=Rh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Lh.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Bh.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?a=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bh.Composite=class{constructor(e,t,n){const i=n||Bh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Bh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Bh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Bh.prototype.GetterByBindingType=[Bh.prototype._getValue_direct,Bh.prototype._getValue_array,Bh.prototype._getValue_arrayElement,Bh.prototype._getValue_toArray],Bh.prototype.SetterByBindingTypeAndVersioning=[[Bh.prototype._setValue_direct,Bh.prototype._setValue_direct_setNeedsUpdate,Bh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bh.prototype._setValue_array,Bh.prototype._setValue_array_setNeedsUpdate,Bh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bh.prototype._setValue_arrayElement,Bh.prototype._setValue_arrayElement_setNeedsUpdate,Bh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bh.prototype._setValue_fromArray,Bh.prototype._setValue_fromArray_setNeedsUpdate,Bh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ph{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ri(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)r[e].push(new Bh(u,n[e],i[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new Bh(u,n[e],i[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=r){const o=r++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[l]=i,t[o]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<r){const a=--r,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--o,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new Bh(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class Dh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,o=r.length,a=new Array(o),s={endingStart:Yt,endingEnd:Yt};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Gt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===$t)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=n===Qt;if(0===e)return-1===r?i:o&&1===(1&r)?t-i:i;if(n===Ht){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Kt,i.endingEnd=Kt):(i.endingStart=e?this.zeroSlopeAtStart?Kt:Yt:Jt,i.endingEnd=t?this.zeroSlopeAtEnd?Kt:Yt:Jt)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}const Oh=new Float32Array(1);class Nh extends $n{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new Sh(Bh.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,r),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ru(new Float32Array(2),new Float32Array(2),1,Oh),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let o="string"===typeof e?fu.findByName(i,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Zt),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Dh(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?fu.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Fh extends Di{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTarget3D=!0,this.depth=n,this.texture=new zi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class zh extends Di{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Ni(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Uh{constructor(e){this.value=e}clone(){return new Uh(void 0===this.value.clone?this.value:this.value.clone())}}let jh=0;class Vh extends $n{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jh++}),this.name="",this.usage=zn,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Hh extends _a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gh{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Qh=new yr;class Wh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new vr(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Mr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Qh.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Qh),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Xh(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(qh),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)Xh(e[i],this,n,t);return n.sort(qh),n}}function qh(e,t){return e.distance-t.distance}function Xh(e,t,n,i){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(r=!1)}if(!0===r&&!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Xh(i[e],t,n,!0)}}class Yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=oi(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(oi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Kh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class Jh{constructor(e,t,n,i){Jh.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const Zh=new hi;class $h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hi(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hi(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Zh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zh).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ed=new Vi,td=new Vi;class nd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ed.subVectors(e,this.start),td.subVectors(this.end,this.start);const n=td.dot(td);let i=td.dot(ed)/n;return t&&(i=oi(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const id=new Vi;class rd extends Qr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new jo,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const e=o/s*Math.PI*2,t=a/s*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Bo(i,3));const r=new zs({fog:!1,toneMapped:!1});this.cone=new Js(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),id.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(id),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const od=new Vi,ad=new yr,sd=new yr;class ld extends Js{constructor(e){const t=cd(e),n=new jo,i=[],r=[],o=new uo(0,0,1),a=new uo(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Bo(i,3)),n.setAttribute("color",new Bo(r,3));super(n,new zs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");sd.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(ad.multiplyMatrices(sd,e.matrixWorld),od.setFromMatrixPosition(ad),i.setXYZ(o,od.x,od.y,od.z),ad.multiplyMatrices(sd,e.parent.matrixWorld),od.setFromMatrixPosition(ad),i.setXYZ(o+1,od.x,od.y,od.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cd(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,cd(e.children[n]));return t}class ud extends $o{constructor(e,t,n){super(new kc(t,4,2),new mo({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hd=new Vi,dd=new uo,pd=new uo;class fd extends Qr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Sc(t);i.rotateY(.5*Math.PI),this.material=new mo({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Eo(o,3)),this.add(new $o(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");dd.copy(this.light.color),pd.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?dd:pd;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(hd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class md extends Js{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new uo(n),i=new uo(i);const r=t/2,o=e/t,a=e/2,s=[],l=[];for(let u=0,h=0,d=-a;u<=t;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const e=u===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new jo;c.setAttribute("position",new Bo(s,3)),c.setAttribute("color",new Bo(l,3));super(c,new zs({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class gd extends Js{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new uo(r),o=new uo(o);const a=[],s=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:o,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l;a.push(r,0,o),s.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l,a.push(r,0,o),s.push(t.r,t.g,t.b)}}const l=new jo;l.setAttribute("position",new Bo(a,3)),l.setAttribute("color",new Bo(s,3));super(l,new zs({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const vd=new Vi,yd=new Vi,Ad=new Vi;class bd extends Qr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new jo;i.setAttribute("position",new Bo([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new zs({fog:!1,toneMapped:!1});this.lightPlane=new qs(i,r),this.add(this.lightPlane),i=new jo,i.setAttribute("position",new Bo([0,0,0,0,0,1],3)),this.targetLine=new qs(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),vd.setFromMatrixPosition(this.light.matrixWorld),yd.setFromMatrixPosition(this.light.target.matrixWorld),Ad.subVectors(yd,vd),this.lightPlane.lookAt(yd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yd),this.targetLine.scale.z=Ad.length()}}const xd=new Vi,_d=new sa;class wd extends Js{constructor(e){const t=new jo,n=new zs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={};function a(e,t){s(e),s(t)}function s(e){i.push(0,0,0),r.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Bo(i,3)),t.setAttribute("color",new Bo(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new uo(16755200),c=new uo(16711680),u=new uo(43775),h=new uo(16777215),d=new uo(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,i,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;_d.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const n=this.camera.coordinateSystem===Kn?-1:0;Ed("c",t,e,_d,0,0,n),Ed("t",t,e,_d,0,0,1),Ed("n1",t,e,_d,-1,-1,n),Ed("n2",t,e,_d,1,-1,n),Ed("n3",t,e,_d,-1,1,n),Ed("n4",t,e,_d,1,1,n),Ed("f1",t,e,_d,-1,-1,1),Ed("f2",t,e,_d,1,-1,1),Ed("f3",t,e,_d,-1,1,1),Ed("f4",t,e,_d,1,1,1),Ed("u1",t,e,_d,.7,1.1,n),Ed("u2",t,e,_d,-.7,1.1,n),Ed("u3",t,e,_d,0,2,n),Ed("cf1",t,e,_d,-1,0,1),Ed("cf2",t,e,_d,1,0,1),Ed("cf3",t,e,_d,0,-1,1),Ed("cf4",t,e,_d,0,1,1),Ed("cn1",t,e,_d,-1,0,n),Ed("cn2",t,e,_d,1,0,n),Ed("cn3",t,e,_d,0,-1,n),Ed("cn4",t,e,_d,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ed(e,t,n,i,r,o,a){xd.set(r,o,a).unproject(i);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],xd.x,xd.y,xd.z)}}const Cd=new Qi;class Sd extends Js{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new jo;r.setIndex(new Eo(n,1)),r.setAttribute("position",new Eo(i,3)),super(r,new zs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Cd.setFromObject(this.object),Cd.isEmpty())return;const t=Cd.min,n=Cd.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Td extends Js{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new jo;i.setIndex(new Eo(n,1)),i.setAttribute("position",new Bo([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new zs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Id extends qs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new jo;i.setAttribute("position",new Bo([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new zs({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new jo;r.setAttribute("position",new Bo([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new $o(r,new mo({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Md=new Vi;let kd,Rd;class Ld extends Qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vi(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vi(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===kd&&(kd=new jo,kd.setAttribute("position",new Bo([0,0,0,0,1,0],3)),Rd=new zl(0,.5,1,5,1),Rd.translate(0,-.5,0)),this.position.copy(t),this.line=new qs(kd,new zs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $o(Rd,new mo({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Md.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Md,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Bd extends Js{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new jo;n.setAttribute("position",new Bo(t,3)),n.setAttribute("color",new Bo([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new zs({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new uo,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Pd{constructor(){this.type="ShapePath",this.color=new uo,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Dl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const n=bc.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,o,a;const s=[];if(1===i.length)return o=i[0],a=new Xl,a.curves=o.curves,s.push(a),s;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=i.length;m<g;m++)o=i[m],h=o.getPoints(),r=n(h),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new Xl,p:h},u[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Xl;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<u.length;r++)t(a.p,u[r].p)&&(i!==r&&n++,s?(s=!1,c[r].push(a)):e=!0);s&&c[i].push(a)}}n>0&&!1===e&&(p=c)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,s.push(a),d=p[m];for(let e=0,t=d.length;e<t;e++)a.holes.push(d[e].h)}return s}}class Dd extends $n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Od(e,t,n,i){const r=function(e){switch(e){case Ue:case je:return{byteLength:1,components:1};case He:case Ve:case qe:return{byteLength:2,components:1};case Xe:case Ye:return{byteLength:2,components:4};case Qe:case Ge:case We:return{byteLength:4,components:1};case Je:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(i);switch(n){case Ze:case tt:return e*t;case nt:return e*t*2;case ot:case at:return e*t/r.components*r.byteLength;case st:case lt:return e*t*2/r.components*r.byteLength;case $e:return e*t*3/r.components*r.byteLength;case et:case ut:return e*t*4/r.components*r.byteLength;case ht:case dt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case pt:case ft:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case gt:case yt:return Math.max(e,16)*Math.max(t,8)/4;case mt:case vt:return Math.max(e,8)*Math.max(t,8)/2;case At:case bt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case xt:case _t:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case wt:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Et:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Ct:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case St:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Tt:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case It:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Mt:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case kt:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Rt:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Lt:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Bt:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Pt:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Dt:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Ot:case Nt:case Ft:return Math.ceil(e/4)*Math.ceil(t/4)*16;case zt:case Ut:return Math.ceil(e/4)*Math.ceil(t/4)*8;case jt:case Vt:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}const Nd={contain:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:Od};function Fd(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function zd(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,o=i.byteLength,a=e.createBuffer();let s;if(e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if(i instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,o=n.updateRanges;if(e.bindBuffer(i,t),0===o.length)e.bufferSubData(i,0,r);else{o.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<o.length;e++){const n=o[t],i=o[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,o[t]=i)}o.length=t+1;for(let n=0,a=o.length;n<a;n++){const t=o[n];e.bufferSubData(i,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:f}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=f);const Ud={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},jd={common:{diffuse:{value:new uo(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new di},alphaMap:{value:null},alphaMapTransform:{value:new di},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new di}},envmap:{envMap:{value:null},envMapRotation:{value:new di},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new di}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new di}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new di},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new di},normalScale:{value:new hi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new di},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new di}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new di}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new di}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new uo(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new uo(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new di},alphaTest:{value:0},uvTransform:{value:new di}},sprite:{diffuse:{value:new uo(16777215)},opacity:{value:1},center:{value:new hi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new di},alphaMap:{value:null},alphaMapTransform:{value:new di},alphaTest:{value:0}}},Vd={basic:{uniforms:ia([jd.common,jd.specularmap,jd.envmap,jd.aomap,jd.lightmap,jd.fog]),vertexShader:Ud.meshbasic_vert,fragmentShader:Ud.meshbasic_frag},lambert:{uniforms:ia([jd.common,jd.specularmap,jd.envmap,jd.aomap,jd.lightmap,jd.emissivemap,jd.bumpmap,jd.normalmap,jd.displacementmap,jd.fog,jd.lights,{emissive:{value:new uo(0)}}]),vertexShader:Ud.meshlambert_vert,fragmentShader:Ud.meshlambert_frag},phong:{uniforms:ia([jd.common,jd.specularmap,jd.envmap,jd.aomap,jd.lightmap,jd.emissivemap,jd.bumpmap,jd.normalmap,jd.displacementmap,jd.fog,jd.lights,{emissive:{value:new uo(0)},specular:{value:new uo(1118481)},shininess:{value:30}}]),vertexShader:Ud.meshphong_vert,fragmentShader:Ud.meshphong_frag},standard:{uniforms:ia([jd.common,jd.envmap,jd.aomap,jd.lightmap,jd.emissivemap,jd.bumpmap,jd.normalmap,jd.displacementmap,jd.roughnessmap,jd.metalnessmap,jd.fog,jd.lights,{emissive:{value:new uo(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ud.meshphysical_vert,fragmentShader:Ud.meshphysical_frag},toon:{uniforms:ia([jd.common,jd.aomap,jd.lightmap,jd.emissivemap,jd.bumpmap,jd.normalmap,jd.displacementmap,jd.gradientmap,jd.fog,jd.lights,{emissive:{value:new uo(0)}}]),vertexShader:Ud.meshtoon_vert,fragmentShader:Ud.meshtoon_frag},matcap:{uniforms:ia([jd.common,jd.bumpmap,jd.normalmap,jd.displacementmap,jd.fog,{matcap:{value:null}}]),vertexShader:Ud.meshmatcap_vert,fragmentShader:Ud.meshmatcap_frag},points:{uniforms:ia([jd.points,jd.fog]),vertexShader:Ud.points_vert,fragmentShader:Ud.points_frag},dashed:{uniforms:ia([jd.common,jd.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ud.linedashed_vert,fragmentShader:Ud.linedashed_frag},depth:{uniforms:ia([jd.common,jd.displacementmap]),vertexShader:Ud.depth_vert,fragmentShader:Ud.depth_frag},normal:{uniforms:ia([jd.common,jd.bumpmap,jd.normalmap,jd.displacementmap,{opacity:{value:1}}]),vertexShader:Ud.meshnormal_vert,fragmentShader:Ud.meshnormal_frag},sprite:{uniforms:ia([jd.sprite,jd.fog]),vertexShader:Ud.sprite_vert,fragmentShader:Ud.sprite_frag},background:{uniforms:{uvTransform:{value:new di},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ud.background_vert,fragmentShader:Ud.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new di}},vertexShader:Ud.backgroundCube_vert,fragmentShader:Ud.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ud.cube_vert,fragmentShader:Ud.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ud.equirect_vert,fragmentShader:Ud.equirect_frag},distanceRGBA:{uniforms:ia([jd.common,jd.displacementmap,{referencePosition:{value:new Vi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ud.distanceRGBA_vert,fragmentShader:Ud.distanceRGBA_frag},shadow:{uniforms:ia([jd.lights,jd.fog,{color:{value:new uo(0)},opacity:{value:1}}]),vertexShader:Ud.shadow_vert,fragmentShader:Ud.shadow_frag}};Vd.physical={uniforms:ia([Vd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new di},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new di},clearcoatNormalScale:{value:new hi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new di},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new di},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new di},sheen:{value:0},sheenColor:{value:new uo(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new di},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new di},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new di},transmissionSamplerSize:{value:new hi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new di},attenuationDistance:{value:0},attenuationColor:{value:new uo(0)},specularColor:{value:new uo(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new di},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new di},anisotropyVector:{value:new hi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new di}}]),vertexShader:Ud.meshphysical_vert,fragmentShader:Ud.meshphysical_frag};const Hd={r:0,b:0,g:0},Gd=new Ir,Qd=new yr;function Wd(e,t,n,i,r,o,a){const s=new uo(0);let l,c,u=!0===o?0:1,h=null,d=0,p=null;function f(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function m(t,n){t.getRGB(Hd,ra(e)),i.buffers.color.setClear(Hd.r,Hd.g,Hd.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let n=!1;const r=f(t);null===r?m(s,u):r&&r.isColor&&(m(r,1),n=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&i.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const i=f(n);i&&(i.isCubeTexture||i.mapping===Se)?(void 0===c&&(c=new $o(new ta(1e4,1e4,1e4),new aa({name:"BackgroundCubeMaterial",uniforms:na(Vd.backgroundCube.uniforms),vertexShader:Vd.backgroundCube.vertexShader,fragmentShader:Vd.backgroundCube.fragmentShader,side:S,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Gd.copy(n.backgroundRotation),Gd.x*=-1,Gd.y*=-1,Gd.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Gd.y*=-1,Gd.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Qd.makeRotationFromEuler(Gd)),c.material.toneMapped=Ei.getTransfer(i.colorSpace)!==fn,h===i&&d===i.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=i,d=i.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new $o(new Tc(2,2),new aa({name:"BackgroundMaterial",uniforms:na(Vd.background.uniforms),vertexShader:Vd.background.vertexShader,fragmentShader:Vd.background.fragmentShader,side:C,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Ei.getTransfer(i.colorSpace)!==fn,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),h===i&&d===i.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=i,d=i.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function qd(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=c(null);let o=r,a=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],i=[],r=[];for(let o=0;o<n;o++)t[o]=0,i[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const i=o.newAttributes,r=o.enabledAttributes,a=o.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){const t=o.newAttributes,n=o.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function f(t,n,i,r,o,a,s){!0===s?e.vertexAttribIPointer(t,n,i,o,a):e.vertexAttribPointer(t,n,i,r,o,a)}function m(){g(),a=!0,o!==r&&(o=r,s(o.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,m,g){let v=!1;const y=function(t,n,r){const o=!0===r.wireframe;let a=i[t.id];void 0===a&&(a={},i[t.id]=a);let s=a[n.id];void 0===s&&(s={},a[n.id]=s);let l=s[o];void 0===l&&(l=c(e.createVertexArray()),s[o]=l);return l}(m,l,r);o!==y&&(o=y,s(o.object)),v=function(e,t,n,i){const r=o.attributes,a=t.attributes;let s=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){const t=r[o];let n=a[o];if(void 0===n&&("instanceMatrix"===o&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return o.attributesNum!==s||o.index!==i}(n,m,l,g),v&&function(e,t,n,i){const r={},a=t.attributes;let s=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){let t=a[o];void 0===t&&("instanceMatrix"===o&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[o]=n,s++}}o.attributes=r,o.attributesNum=s,o.index=i}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||a)&&(a=!1,function(n,i,r,o){u();const a=o.attributes,s=r.getAttributes(),l=i.defaultAttributeValues;for(const c in s){const i=s[c];if(i.location>=0){let r=a[c];if(void 0===r&&("instanceMatrix"===c&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const a=r.normalized,s=r.itemSize,l=t.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||r.gpuType===Ge;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,g=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)d(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,u,a,l*p,(g+s/i.locationSize*e)*p,m)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)d(i.location+e,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,u,a,s*p,s/i.locationSize*e*p,m)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,r,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function Xd(e,t,n){let i;function r(t,r,o){0!==o&&(e.drawArraysInstanced(i,t,r,o),n.update(r,i,o))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,o);let a=0;for(let t=0;t<o;t++)a+=r[t];n.update(a,i,1)},this.renderMultiDrawInstances=function(e,o,a,s){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],o[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,o,0,s,0,a);let t=0;for(let e=0;e<a;e++)t+=o[e]*s[e];n.update(t,i,1)}}}function Yd(e,t,n,i){let r;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,textureFormatReadable:function(t){return t===et||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===qe&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Ue&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==We&&!r)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Kd(e){const t=this;let n=null,i=0,r=!1,o=!1;const a=new vs,s=new di,l={value:null,needsUpdate:!1};function c(e,n,i,r){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const t=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(r,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!r||null===h||0===h.length||o&&!p)o?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=o?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(h,s,t,u);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Jd(e){let t=new WeakMap;function n(e,t){return t===Ee?e.mapping=_e:t===Ce&&(e.mapping=we),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===Ee||o===Ce){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const a=new ma(o.height);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const Zd=[.125,.215,.35,.446,.526,.582],$d=20,ep=new Vu,tp=new uo;let np=null,ip=0,rp=0,op=!1;const ap=(1+Math.sqrt(5))/2,sp=1/ap,lp=[new Vi(-ap,sp,0),new Vi(ap,sp,0),new Vi(-sp,0,ap),new Vi(sp,0,ap),new Vi(0,ap,-sp),new Vi(0,ap,sp),new Vi(-1,1,-1),new Vi(1,1,-1),new Vi(-1,1,1),new Vi(1,1,1)];class cp{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;np=this._renderer.getRenderTarget(),ip=this._renderer.getActiveCubeFace(),rp=this._renderer.getActiveMipmapLevel(),op=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=pp(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dp(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(np,ip,rp),this._renderer.xr.enabled=op,e.scissorTest=!1,hp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_e||e.mapping===we?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),np=this._renderer.getRenderTarget(),ip=this._renderer.getActiveCubeFace(),rp=this._renderer.getActiveMipmapLevel(),op=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:De,minFilter:De,generateMipmaps:!1,type:qe,format:et,colorSpace:dn,depthBuffer:!1},i=up(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=up(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const o=e-4+1+Zd.length;for(let a=0;a<o;a++){const o=Math.pow(2,r);n.push(o);let s=1/o;a>e-4?s=Zd[a-e+4-1]:0===a&&(s=0),i.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),A=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*p*e),y.set(h,m*p*e);const r=[e,e,e,e,e,e];A.set(r,g*p*e)}const b=new jo;b.setAttribute("position",new Eo(v,f)),b.setAttribute("uv",new Eo(y,m)),b.setAttribute("faceIndex",new Eo(A,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array($d),r=new Vi(0,1,0),o=new aa({name:"SphericalGaussianBlur",defines:{n:$d,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:I,depthTest:!1,depthWrite:!1});return o}(i,e,t)}return i}_compileMaterial(e){const t=new $o(this._lodPlanes[0],e);this._renderer.compile(t,ep)}_sceneToCubeUV(e,t,n,i){const r=new ha(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(tp),s.toneMapping=he,s.autoClear=!1;const u=new mo({name:"PMREM.Background",side:S,depthWrite:!1,depthTest:!1}),h=new $o(new ta,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(tp),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,o[f],0),r.lookAt(a[f],0,0)):1===t?(r.up.set(0,0,o[f]),r.lookAt(0,a[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,a[f]));const n=this._cubeSize;hp(i,t*n,f>2?n:0,n,n),s.setRenderTarget(i),d&&s.render(h,r),s.render(e,r)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===_e||e.mapping===we;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=pp()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dp());const r=i?this._cubemapMaterial:this._equirectMaterial,o=new $o(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;hp(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,ep)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=lp[(i-r-1)%lp.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new $o(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):$d;f>$d&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat($d));const m=[];let g=0;for(let A=0;A<$d;++A){const e=A/p,t=Math.exp(-e*e/2);m.push(t),0===A?g+=t:A<f&&(g+=2*t)}for(let A=0;A<m.length;A++)m[A]=m[A]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[i];hp(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,ep)}}function up(e,t,n){const i=new Oi(e,t,n);return i.texture.mapping=Se,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hp(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function dp(){return new aa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:I,depthTest:!1,depthWrite:!1})}function pp(){return new aa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:I,depthTest:!1,depthWrite:!1})}function fp(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,a=o===Ee||o===Ce,s=o===_e||o===we;if(a||s){let o=t.get(r);const l=void 0!==o?o.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new cp(e)),o=a?n.fromEquirectangular(r,o):n.fromCubemap(r,o),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),o.texture;if(void 0!==o)return o.texture;{const l=r.image;return a&&l&&l.height>0||s&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new cp(e)),o=a?n.fromEquirectangular(r):n.fromCubemap(r),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),r.addEventListener("dispose",i),o.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function mp(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&bi("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function gp(e,t,n,i){const r={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete r[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{if(void 0===r)return;{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const s=new(fi(n)?Ro:Mo)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const r in i)t.update(i[r],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function vp(e,t,n){let i,r,o;function a(t,a,s){0!==s&&(e.drawElementsInstanced(i,a,r,t*o,s),n.update(a,i,s))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(i,a,r,t*o),n.update(a,i,1)},this.renderInstances=a,this.renderMultiDraw=function(e,o,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,o,0,r,e,0,a);let s=0;for(let t=0;t<a;t++)s+=o[t];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/o,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(i,s,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*c[e];n.update(t,i,1)}}}function yp(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Ap(e,t,n){const i=new WeakMap,r=new Pi;return{update:function(o,a,s){const l=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let h=i.get(a);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,f=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let A=a.attributes.position.count*y,b=1;A>t.maxTextureSize&&(b=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const x=new Float32Array(A*b*4*u),_=new Ni(x,A,b,u);_.type=We,_.needsUpdate=!0;const w=4*y;for(let C=0;C<u;C++){const S=m[C],T=g[C],I=v[C],M=A*b*4*C;for(let k=0;k<S.count;k++){const R=k*w;!0===d&&(r.fromBufferAttribute(S,k),x[M+R+0]=r.x,x[M+R+1]=r.y,x[M+R+2]=r.z,x[M+R+3]=0),!0===p&&(r.fromBufferAttribute(T,k),x[M+R+4]=r.x,x[M+R+5]=r.y,x[M+R+6]=r.z,x[M+R+7]=0),!0===f&&(r.fromBufferAttribute(I,k),x[M+R+8]=r.x,x[M+R+9]=r.y,x[M+R+10]=r.z,x[M+R+11]=4===I.itemSize?r.w:1)}}function E(){_.dispose(),i.delete(a),a.removeEventListener("dispose",E)}h={count:u,texture:_,size:new hi(A,b)},i.set(a,h),a.addEventListener("dispose",E)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)s.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let L=0;for(let P=0;P<l.length;P++)L+=l[P];const B=a.morphTargetsRelative?1:1-L;s.getUniforms().setValue(e,"morphTargetBaseInfluence",B),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}class bp{constructor(e,t,n){if(this.renderer=e,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=n,this.extensions=t,this.available=this.extensions.has("OCULUS_multiview"),this.available){const e=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(e.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var i=0;i<this.maxNumViews;i++)this.mat4[i]=new yr,this.mat3[i]=new di}}getCameraArray(e){return e.isArrayCamera?e.cameras:(this.cameraArray[0]=e,this.cameraArray)}updateCameraProjectionMatricesUniform(e,t){for(var n=this.getCameraArray(e),i=0;i<n.length;i++)this.mat4[i].copy(n[i].projectionMatrix);t.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(e,t){for(var n=this.getCameraArray(e),i=0;i<n.length;i++)this.mat4[i].copy(n[i].matrixWorldInverse);t.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(e,t,n){for(var i=this.getCameraArray(t),r=0;r<i.length;r++)this.mat4[r].multiplyMatrices(i[r].matrixWorldInverse,e.matrixWorld),this.mat3[r].getNormalMatrix(this.mat4[r]);n.setValue(this.gl,"modelViewMatrices",this.mat4),n.setValue(this.gl,"normalMatrices",this.mat3)}}function xp(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=i.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),r.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c},dispose:function(){r=new WeakMap}}}const _p=new Bi,wp=new pl(1,1),Ep=new Ni,Cp=new zi,Sp=new fa,Tp=[],Ip=[],Mp=new Float32Array(16),kp=new Float32Array(9),Rp=new Float32Array(4);function Lp(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=Tp[r];if(void 0===o&&(o=new Float32Array(r),Tp[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function Bp(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Pp(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Dp(e,t){let n=Ip[t];void 0===n&&(n=new Int32Array(t),Ip[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Op(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Np(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bp(n,t))return;e.uniform2fv(this.addr,t),Pp(n,t)}}function Fp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Bp(n,t))return;e.uniform3fv(this.addr,t),Pp(n,t)}}function zp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bp(n,t))return;e.uniform4fv(this.addr,t),Pp(n,t)}}function Up(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bp(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Pp(n,t)}else{if(Bp(n,i))return;Rp.set(i),e.uniformMatrix2fv(this.addr,!1,Rp),Pp(n,i)}}function jp(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bp(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Pp(n,t)}else{if(Bp(n,i))return;kp.set(i),e.uniformMatrix3fv(this.addr,!1,kp),Pp(n,i)}}function Vp(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bp(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Pp(n,t)}else{if(Bp(n,i))return;Mp.set(i),e.uniformMatrix4fv(this.addr,!1,Mp),Pp(n,i)}}function Hp(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Gp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bp(n,t))return;e.uniform2iv(this.addr,t),Pp(n,t)}}function Qp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Bp(n,t))return;e.uniform3iv(this.addr,t),Pp(n,t)}}function Wp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bp(n,t))return;e.uniform4iv(this.addr,t),Pp(n,t)}}function qp(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Xp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bp(n,t))return;e.uniform2uiv(this.addr,t),Pp(n,t)}}function Yp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Bp(n,t))return;e.uniform3uiv(this.addr,t),Pp(n,t)}}function Kp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bp(n,t))return;e.uniform4uiv(this.addr,t),Pp(n,t)}}function Jp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let o;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(wp.compareFunction=Pn,o=wp):o=_p,n.setTexture2D(t||o,r)}function Zp(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Cp,r)}function $p(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Sp,r)}function ef(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Ep,r)}function tf(e,t){e.uniform1fv(this.addr,t)}function nf(e,t){const n=Lp(t,this.size,2);e.uniform2fv(this.addr,n)}function rf(e,t){const n=Lp(t,this.size,3);e.uniform3fv(this.addr,n)}function of(e,t){const n=Lp(t,this.size,4);e.uniform4fv(this.addr,n)}function af(e,t){const n=Lp(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sf(e,t){const n=Lp(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function lf(e,t){const n=Lp(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function cf(e,t){e.uniform1iv(this.addr,t)}function uf(e,t){e.uniform2iv(this.addr,t)}function hf(e,t){e.uniform3iv(this.addr,t)}function df(e,t){e.uniform4iv(this.addr,t)}function pf(e,t){e.uniform1uiv(this.addr,t)}function ff(e,t){e.uniform2uiv(this.addr,t)}function mf(e,t){e.uniform3uiv(this.addr,t)}function gf(e,t){e.uniform4uiv(this.addr,t)}function vf(e,t,n){const i=this.cache,r=t.length,o=Dp(n,r);Bp(i,o)||(e.uniform1iv(this.addr,o),Pp(i,o));for(let a=0;a!==r;++a)n.setTexture2D(t[a]||_p,o[a])}function yf(e,t,n){const i=this.cache,r=t.length,o=Dp(n,r);Bp(i,o)||(e.uniform1iv(this.addr,o),Pp(i,o));for(let a=0;a!==r;++a)n.setTexture3D(t[a]||Cp,o[a])}function Af(e,t,n){const i=this.cache,r=t.length,o=Dp(n,r);Bp(i,o)||(e.uniform1iv(this.addr,o),Pp(i,o));for(let a=0;a!==r;++a)n.setTextureCube(t[a]||Sp,o[a])}function bf(e,t,n){const i=this.cache,r=t.length,o=Dp(n,r);Bp(i,o)||(e.uniform1iv(this.addr,o),Pp(i,o));for(let a=0;a!==r;++a)n.setTexture2DArray(t[a]||Ep,o[a])}class xf{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Op;case 35664:return Np;case 35665:return Fp;case 35666:return zp;case 35674:return Up;case 35675:return jp;case 35676:return Vp;case 5124:case 35670:return Hp;case 35667:case 35671:return Gp;case 35668:case 35672:return Qp;case 35669:case 35673:return Wp;case 5125:return qp;case 36294:return Xp;case 36295:return Yp;case 36296:return Kp;case 35678:case 36198:case 36298:case 36306:case 35682:return Jp;case 35679:case 36299:case 36307:return Zp;case 35680:case 36300:case 36308:case 36293:return $p;case 36289:case 36303:case 36311:case 36292:return ef}}(t.type)}}class _f{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return tf;case 35664:return nf;case 35665:return rf;case 35666:return of;case 35674:return af;case 35675:return sf;case 35676:return lf;case 5124:case 35670:return cf;case 35667:case 35671:return uf;case 35668:case 35672:return hf;case 35669:case 35673:return df;case 5125:return pf;case 36294:return ff;case 36295:return mf;case 36296:return gf;case 35678:case 36198:case 36298:case 36306:case 35682:return vf;case 35679:case 36299:case 36307:return yf;case 35680:case 36300:case 36308:case 36293:return Af;case 36289:case 36303:case 36311:case 36292:return bf}}(t.type)}}class wf{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}}}const Ef=/(\w+)(\])?(\[|\.)?/g;function Cf(e,t){e.seq.push(t),e.map[t.id]=t}function Sf(e,t,n){const i=e.name,r=i.length;for(Ef.lastIndex=0;;){const o=Ef.exec(i),a=Ef.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Cf(n,void 0===c?new xf(s,e,t):new _f(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new wf(s),Cf(n,e)),n=e}}}class Tf{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Sf(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function If(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let Mf=0;const kf=new di;function Rf(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=r;a<o;a++){const e=a+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[a]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Lf(e,t){const n=function(e){Ei._getMatrix(kf,Ei.workingColorSpace,e);const t="mat3( ".concat(kf.elements.map(e=>e.toFixed(4))," )");switch(Ei.getTransfer(e)){case pn:return[t,"LinearTransferOETF"];case fn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function Bf(e,t){let n;switch(t){case de:n="Linear";break;case pe:n="Reinhard";break;case fe:n="Cineon";break;case me:n="ACESFilmic";break;case ve:n="AgX";break;case ye:n="Neutral";break;case ge:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Pf=new Vi;function Df(){Ei.getLuminanceCoefficients(Pf);const e=Pf.x.toFixed(4),t=Pf.y.toFixed(4),n=Pf.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function Of(e){return""!==e}function Nf(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ff(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const zf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uf(e){return e.replace(zf,Vf)}const jf=new Map;function Vf(e,t){let n=Ud[t];if(void 0===n){const e=jf.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Ud[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Uf(n)}const Hf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gf(e){return e.replace(Hf,Qf)}function Qf(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Wf(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function qf(e,t,n,i){const r=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===_?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===w?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===E&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case _e:case we:t="ENVMAP_TYPE_CUBE";break;case Se:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===we&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case le:t="ENVMAP_BLENDING_MULTIPLY";break;case ce:t="ENVMAP_BLENDING_MIX";break;case ue:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Of).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";const A=n.numMultiviewViews;n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Of).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Of).join("\n"),v.length>0&&(v+="\n")):(g=[Wf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Of).join("\n"),v=[Wf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==he?"#define TONE_MAPPING":"",n.toneMapping!==he?Ud.tonemapping_pars_fragment:"",n.toneMapping!==he?Bf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ud.colorspace_pars_fragment,Lf("linearToOutputTexel",n.outputColorSpace),Df(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Of).join("\n")),a=Uf(a),a=Nf(a,n),a=Ff(a,n),s=Uf(s),s=Nf(s,n),s=Ff(s,n),a=Gf(a),s=Gf(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Yn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Yn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v,A>0&&(g=["#extension GL_OVR_multiview : require","layout(num_views = "+A+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n")+"\n"+g,g=g.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+A+"];","uniform mat4 projectionMatrices["+A+"];","uniform mat4 viewMatrices["+A+"];","uniform mat3 normalMatrices["+A+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),v=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join("\n")+"\n"+v,v=v.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+A+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n"))));const b=y+g+a,x=y+v+s,C=If(r,r.VERTEX_SHADER,b),S=If(r,r.FRAGMENT_SHADER,x);function T(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(C).trim(),o=r.getShaderInfoLog(S).trim();let a=!0,s=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(a=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,C,S);else{const e=Rf(r,C,"vertex"),i=Rf(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+i)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==o||(s=!1);s&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:o,prefix:v}})}r.deleteShader(C),r.deleteShader(S),I=new Tf(r,m),M=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let a=1;i.type===e.FLOAT_MAT2&&(a=2),i.type===e.FLOAT_MAT3&&(a=3),i.type===e.FLOAT_MAT4&&(a=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(r,m)}let I,M;r.attachShader(m,C),r.attachShader(m,S),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===I&&T(this),I},this.getAttributes=function(){return void 0===M&&T(this),M};let k=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===k&&(k=r.getProgramParameter(m,37297)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Mf++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=C,this.fragmentShader=S,this.numMultiviewViews=A,this}let Xf=0;class Yf{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Kf(e),t.set(e,n)),n}}class Kf{constructor(e){this.id=Xf++,this.code=e,this.usedTimes=0}}function Jf(e,t,n,i,r,o,a){const s=new Mr,l=new Yf,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(o,s,u,g,v){const y=g.fog,A=v.geometry,b=o.isMeshStandardMaterial?g.environment:null,x=(o.isMeshStandardMaterial?n:t).get(o.envMap||b),_=x&&x.mapping===Se?x.image.height:null,w=f[o.type];null!==o.precision&&(p=r.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const E=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,C=void 0!==E?E.length:0;let I,k,R,L,B=0;if(void 0!==A.morphAttributes.position&&(B=1),void 0!==A.morphAttributes.normal&&(B=2),void 0!==A.morphAttributes.color&&(B=3),w){const e=Vd[w];I=e.vertexShader,k=e.fragmentShader}else I=o.vertexShader,k=o.fragmentShader,l.update(o),R=l.getVertexShaderID(o),L=l.getFragmentShaderID(o);const P=e.getRenderTarget(),D=e.state.buffers.depth.getReversed(),O=P&&P.isWebGLMultiviewRenderTarget?P.numViews:0,N=!0===v.isInstancedMesh,F=!0===v.isBatchedMesh,z=!!o.map,U=!!o.matcap,j=!!x,V=!!o.aoMap,H=!!o.lightMap,G=!!o.bumpMap,Q=!!o.normalMap,W=!!o.displacementMap,q=!!o.emissiveMap,X=!!o.metalnessMap,Y=!!o.roughnessMap,K=o.anisotropy>0,J=o.clearcoat>0,Z=o.dispersion>0,$=o.iridescence>0,ee=o.sheen>0,te=o.transmission>0,ne=K&&!!o.anisotropyMap,ie=J&&!!o.clearcoatMap,re=J&&!!o.clearcoatNormalMap,oe=J&&!!o.clearcoatRoughnessMap,ae=$&&!!o.iridescenceMap,se=$&&!!o.iridescenceThicknessMap,le=ee&&!!o.sheenColorMap,ce=ee&&!!o.sheenRoughnessMap,ue=!!o.specularMap,de=!!o.specularColorMap,pe=!!o.specularIntensityMap,fe=te&&!!o.transmissionMap,me=te&&!!o.thicknessMap,ge=!!o.gradientMap,ve=!!o.alphaMap,ye=o.alphaTest>0,Ae=!!o.alphaHash,be=!!o.extensions;let xe=he;o.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(xe=e.toneMapping));const _e={shaderID:w,shaderType:o.type,shaderName:o.name,vertexShader:I,fragmentShader:k,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:L,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,batching:F,batchingColor:F&&null!==v._colorsTexture,instancing:N,instancingColor:N&&null!==v.instanceColor,instancingMorph:N&&null!==v.morphTexture,supportsVertexTextures:d,numMultiviewViews:O,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:dn,alphaToCoverage:!!o.alphaToCoverage,map:z,matcap:U,envMap:j,envMapMode:j&&x.mapping,envMapCubeUVHeight:_,aoMap:V,lightMap:H,bumpMap:G,normalMap:Q,displacementMap:d&&W,emissiveMap:q,normalMapObjectSpace:Q&&o.normalMapType===cn,normalMapTangentSpace:Q&&o.normalMapType===ln,metalnessMap:X,roughnessMap:Y,anisotropy:K,anisotropyMap:ne,clearcoat:J,clearcoatMap:ie,clearcoatNormalMap:re,clearcoatRoughnessMap:oe,dispersion:Z,iridescence:$,iridescenceMap:ae,iridescenceThicknessMap:se,sheen:ee,sheenColorMap:le,sheenRoughnessMap:ce,specularMap:ue,specularColorMap:de,specularIntensityMap:pe,transmission:te,transmissionMap:fe,thicknessMap:me,gradientMap:ge,opaque:!1===o.transparent&&o.blending===M&&!1===o.alphaToCoverage,alphaMap:ve,alphaTest:ye,alphaHash:Ae,combine:o.combine,mapUv:z&&m(o.map.channel),aoMapUv:V&&m(o.aoMap.channel),lightMapUv:H&&m(o.lightMap.channel),bumpMapUv:G&&m(o.bumpMap.channel),normalMapUv:Q&&m(o.normalMap.channel),displacementMapUv:W&&m(o.displacementMap.channel),emissiveMapUv:q&&m(o.emissiveMap.channel),metalnessMapUv:X&&m(o.metalnessMap.channel),roughnessMapUv:Y&&m(o.roughnessMap.channel),anisotropyMapUv:ne&&m(o.anisotropyMap.channel),clearcoatMapUv:ie&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:re&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:oe&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ae&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:se&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:le&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:ce&&m(o.sheenRoughnessMap.channel),specularMapUv:ue&&m(o.specularMap.channel),specularColorMapUv:de&&m(o.specularColorMap.channel),specularIntensityMapUv:pe&&m(o.specularIntensityMap.channel),transmissionMapUv:fe&&m(o.transmissionMap.channel),thicknessMapUv:me&&m(o.thicknessMap.channel),alphaMapUv:ve&&m(o.alphaMap.channel),vertexTangents:!!A.attributes.tangent&&(Q||K),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!A.attributes.uv&&(z||ve),fog:!!y,useFog:!0===o.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:D,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:C,morphTextureStride:B,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:xe,decodeVideoTexture:z&&!0===o.map.isVideoTexture&&Ei.getTransfer(o.map.colorSpace)===fn,decodeVideoTextureEmissive:q&&!0===o.emissiveMap.isVideoTexture&&Ei.getTransfer(o.emissiveMap.colorSpace)===fn,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===T,flipSided:o.side===S,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:be&&!0===o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(be&&!0===o.extensions.multiDraw||F)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return _e.vertexUv1s=c.has(1),_e.vertexUv2s=c.has(2),_e.vertexUv3s=c.has(3),c.clear(),_e},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);t.batchingColor&&s.enable(21);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.reverseDepthBuffer&&s.enable(4);t.skinning&&s.enable(5);t.morphTargets&&s.enable(6);t.morphNormals&&s.enable(7);t.morphColors&&s.enable(8);t.premultipliedAlpha&&s.enable(9);t.shadowMapEnabled&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.decodeVideoTextureEmissive&&s.enable(20);t.alphaToCoverage&&s.enable(21);t.numMultiviewViews&&s.enable(21);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Vd[t];n=oa.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new qf(e,n,t,o),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Zf(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function $f(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function em(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function tm(){const e=[];let t=0;const n=[],i=[],r=[];function o(n,i,r,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||$f),i.length>1&&i.sort(t||em),r.length>1&&r.sort(t||em)}}}function nm(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new tm,e.set(t,[r])):n>=i.length?(r=new tm,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function im(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Vi,color:new uo};break;case"SpotLight":n={position:new Vi,direction:new Vi,color:new uo,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vi,color:new uo,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vi,skyColor:new uo,groundColor:new uo};break;case"RectAreaLight":n={color:new uo,position:new Vi,halfWidth:new Vi,halfHeight:new Vi}}return e[t.id]=n,n}}}let rm=0;function om(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function am(e){const t=new im,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hi};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hi,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)i.probe.push(new Vi);const r=new Vi,o=new yr,a=new yr;return{setup:function(r){let o=0,a=0,s=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0;r.sort(om);for(let e=0,b=r.length;e<b;e++){const A=r[e],b=A.color,x=A.intensity,_=A.distance,w=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)o+=b.r*x,a+=b.g*x,s+=b.b*x;else if(A.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(A.sh.coefficients[e],x);y++}else if(A.isDirectionalLight){const e=t.get(A);if(e.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){const e=A.shadow,t=n.get(A);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[l]=t,i.directionalShadowMap[l]=w,i.directionalShadowMatrix[l]=A.shadow.matrix,p++}i.directional[l]=e,l++}else if(A.isSpotLight){const e=t.get(A);e.position.setFromMatrixPosition(A.matrixWorld),e.color.copy(b).multiplyScalar(x),e.distance=_,e.coneCos=Math.cos(A.angle),e.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),e.decay=A.decay,i.spot[u]=e;const r=A.shadow;if(A.map&&(i.spotLightMap[g]=A.map,g++,r.updateMatrices(A),A.castShadow&&v++),i.spotLightMatrix[u]=r.matrix,A.castShadow){const e=n.get(A);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[u]=e,i.spotShadowMap[u]=w,m++}u++}else if(A.isRectAreaLight){const e=t.get(A);e.color.copy(b).multiplyScalar(x),e.halfWidth.set(.5*A.width,0,0),e.halfHeight.set(0,.5*A.height,0),i.rectArea[h]=e,h++}else if(A.isPointLight){const e=t.get(A);if(e.color.copy(A.color).multiplyScalar(A.intensity),e.distance=A.distance,e.decay=A.decay,A.castShadow){const e=A.shadow,t=n.get(A);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=w,i.pointShadowMatrix[c]=A.shadow.matrix,f++}i.point[c]=e,c++}else if(A.isHemisphereLight){const e=t.get(A);e.skyColor.copy(A.color).multiplyScalar(x),e.groundColor.copy(A.groundColor).multiplyScalar(x),i.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=jd.LTC_FLOAT_1,i.rectAreaLTC2=jd.LTC_FLOAT_2):(i.rectAreaLTC1=jd.LTC_HALF_1,i.rectAreaLTC2=jd.LTC_HALF_2)),i.ambient[0]=o,i.ambient[1]=a,i.ambient[2]=s;const A=i.hash;A.directionalLength===l&&A.pointLength===c&&A.spotLength===u&&A.rectAreaLength===h&&A.hemiLength===d&&A.numDirectionalShadows===p&&A.numPointShadows===f&&A.numSpotShadows===m&&A.numSpotMaps===g&&A.numLightProbes===y||(i.directional.length=l,i.spot.length=u,i.rectArea.length=h,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=m,i.spotShadowMap.length=m,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=f,i.spotLightMatrix.length=m+g-v,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=v,i.numLightProbes=y,A.directionalLength=l,A.pointLength=c,A.spotLength=u,A.rectAreaLength=h,A.hemiLength=d,A.numDirectionalShadows=p,A.numPointShadows=f,A.numSpotShadows=m,A.numSpotMaps=g,A.numLightProbes=y,i.version=rm++)},setupView:function(e,t){let n=0,s=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(t.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=i.point[s];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function sm(e){const t=new am(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function lm(e){let t=new WeakMap;return{get:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(n);let o;return void 0===r?(o=new sm(e),t.set(n,[o])):i>=r.length?(o=new sm(e),r.push(o)):o=r[i],o},dispose:function(){t=new WeakMap}}}function cm(e,t,n){let i=new bs;const r=new hi,o=new hi,a=new Pi,s=new Wc({depthPacking:on}),l=new qc,c={},u=n.maxTextureSize,h={[C]:S,[S]:C,[T]:T},d=new aa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new hi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new jo;f.setAttribute("position",new Eo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new $o(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_;let v=this.type;function y(n,i){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Oi(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,p,m,null)}function A(t,n,i,r){let o=null;const a=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=o.clone(),i[t]=r,n.addEventListener("dispose",x)),o=r}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=r===E?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=i}return o}function b(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===E)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=A(n,h,a,s);n.onBeforeShadow(e,n,r,o,i,t,u),e.renderBufferDirect(o,null,i,t,n,u),n.onAfterShadow(e,n,r,o,i,t,u)}}}else if(l.visible){const t=A(n,l,a,s);n.onBeforeShadow(e,n,r,o,i,t,null),e.renderBufferDirect(o,null,i,t,n,null),n.onAfterShadow(e,n,r,o,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,o,a,s)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(I),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=v!==E&&this.type===E,f=v===E&&this.type!==E;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),o.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/h.x),r.x=o.x*h.x,c.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/h.y),r.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===p||!0===f){const e=this.type!==E?{minFilter:ke,magFilter:ke}:{};null!==c.map&&c.map.dispose(),c.map=new Oi(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),c.updateMatrices(l,e),i=c.getFrustum(),b(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===E&&y(c,s),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const um={[ee]:te,[ne]:ae,[re]:se,[ie]:oe,[te]:ee,[ae]:ne,[se]:re,[oe]:ie};function hm(e,t){const n=new function(){let t=!1;const n=new Pi;let i=null;const r=new Pi(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,o=null,a=null;return{setReversed:function(e){if(i!==e){const e=t.get("EXT_clip_control");i?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const n=a;a=null,this.setClear(n)}i=e},getReversed:function(){return i},setTest:function(t){t?Ce(e.DEPTH_TEST):Se(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){if(i&&(t=um[t]),o!==t){switch(t){case ee:e.depthFunc(e.NEVER);break;case te:e.depthFunc(e.ALWAYS);break;case ne:e.depthFunc(e.LESS);break;case ie:e.depthFunc(e.LEQUAL);break;case re:e.depthFunc(e.EQUAL);break;case oe:e.depthFunc(e.GEQUAL);break;case ae:e.depthFunc(e.GREATER);break;case se:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}o=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(i&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,r=null,o=null,a=null,i=!1}}},r=new function(){let t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?Ce(e.STENCIL_TEST):Se(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&l===i||(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}},o=new WeakMap,a=new WeakMap;let s={},l={},c=new WeakMap,u=[],h=null,d=!1,p=null,f=null,m=null,g=null,b=null,x=null,_=null,w=new uo(0,0,0),E=0,C=!1,le=null,ce=null,ue=null,he=null,de=null;const pe=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let fe=!1,me=0;const ge=e.getParameter(e.VERSION);-1!==ge.indexOf("WebGL")?(me=parseFloat(/^WebGL (\d)/.exec(ge)[1]),fe=me>=1):-1!==ge.indexOf("OpenGL ES")&&(me=parseFloat(/^OpenGL ES (\d)/.exec(ge)[1]),fe=me>=2);let ve=null,ye={};const Ae=e.getParameter(e.SCISSOR_BOX),be=e.getParameter(e.VIEWPORT),xe=(new Pi).fromArray(Ae),_e=(new Pi).fromArray(be);function we(t,n,i,r){const o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}const Ee={};function Ce(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function Se(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}Ee[e.TEXTURE_2D]=we(e.TEXTURE_2D,e.TEXTURE_2D,1),Ee[e.TEXTURE_CUBE_MAP]=we(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[e.TEXTURE_2D_ARRAY]=we(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),Ee[e.TEXTURE_3D]=we(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),Ce(e.DEPTH_TEST),i.setFunc(ie),ke(!1),Re(y),Ce(e.CULL_FACE),Me(I);const Te={[P]:e.FUNC_ADD,[D]:e.FUNC_SUBTRACT,[O]:e.FUNC_REVERSE_SUBTRACT};Te[N]=e.MIN,Te[F]=e.MAX;const Ie={[z]:e.ZERO,[U]:e.ONE,[j]:e.SRC_COLOR,[H]:e.SRC_ALPHA,[Y]:e.SRC_ALPHA_SATURATE,[q]:e.DST_COLOR,[Q]:e.DST_ALPHA,[V]:e.ONE_MINUS_SRC_COLOR,[G]:e.ONE_MINUS_SRC_ALPHA,[X]:e.ONE_MINUS_DST_COLOR,[W]:e.ONE_MINUS_DST_ALPHA,[K]:e.CONSTANT_COLOR,[J]:e.ONE_MINUS_CONSTANT_COLOR,[Z]:e.CONSTANT_ALPHA,[$]:e.ONE_MINUS_CONSTANT_ALPHA};function Me(t,n,i,r,o,a,s,l,c,u){if(t!==I){if(!1===d&&(Ce(e.BLEND),d=!0),t===B)o=o||n,a=a||i,s=s||r,n===f&&o===b||(e.blendEquationSeparate(Te[n],Te[o]),f=n,b=o),i===m&&r===g&&a===x&&s===_||(e.blendFuncSeparate(Ie[i],Ie[r],Ie[a],Ie[s]),m=i,g=r,x=a,_=s),!1!==l.equals(w)&&c===E||(e.blendColor(l.r,l.g,l.b,c),w.copy(l),E=c),p=t,C=!1;else if(t!==p||u!==C){if(f===P&&b===P||(e.blendEquation(e.FUNC_ADD),f=P,b=P),u)switch(t){case M:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case k:e.blendFunc(e.ONE,e.ONE);break;case R:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case L:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case M:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case k:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case R:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case L:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,x=null,_=null,w.set(0,0,0),E=0,p=t,C=u}}else!0===d&&(Se(e.BLEND),d=!1)}function ke(t){le!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),le=t)}function Re(t){t!==v?(Ce(e.CULL_FACE),t!==ce&&(t===y?e.cullFace(e.BACK):t===A?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Se(e.CULL_FACE),ce=t}function Le(t,n,i){t?(Ce(e.POLYGON_OFFSET_FILL),he===n&&de===i||(e.polygonOffset(n,i),he=n,de=i)):Se(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:Ce,disable:Se,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=u,r=!1;if(t){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const o=t.textures;if(i.length!==o.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=o.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=o.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:Me,setMaterial:function(t,o){t.side===T?Se(e.CULL_FACE):Ce(e.CULL_FACE);let a=t.side===S;o&&(a=!a),ke(a),t.blending===M&&!1===t.transparent?Me(I):Me(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);const s=t.stencilWrite;r.setTest(s),s&&(r.setMask(t.stencilWriteMask),r.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),r.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Le(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Ce(e.SAMPLE_ALPHA_TO_COVERAGE):Se(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ke,setCullFace:Re,setLineWidth:function(t){t!==ue&&(fe&&e.lineWidth(t),ue=t)},setPolygonOffset:Le,setScissorTest:function(t){t?Ce(e.SCISSOR_TEST):Se(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+pe-1),ve!==t&&(e.activeTexture(t),ve=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===ve?e.TEXTURE0+pe-1:ve);let r=ye[i];void 0===r&&(r={type:void 0,texture:void 0},ye[i]=r),r.type===t&&r.texture===n||(ve!==i&&(e.activeTexture(i),ve=i),e.bindTexture(t,n||Ee[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=ye[ve];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=a.get(n);void 0===i&&(i=new WeakMap,a.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=a.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===xe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),xe.copy(t))},viewport:function(t){!1===_e.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),_e.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},ve=null,ye={},l={},c=new WeakMap,u=[],h=null,d=!1,p=null,f=null,m=null,g=null,b=null,x=null,_=null,w=new uo(0,0,0),E=0,C=!1,le=null,ce=null,ue=null,he=null,de=null,xe.set(0,0,e.canvas.width,e.canvas.height),_e.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),r.reset()}}}function dm(e,t,n,i,r,o,a){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=t.has("OCULUS_multiview")?t.get("OCULUS_multiview"):null,u=new hi,h=new WeakMap;let d;const p=new WeakMap;let f=[],m=!1,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(q){}function v(e,t){return g?new OffscreenCanvas(e,t):vi("canvas")}function y(e,t,n){let i=1;const r=W(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),o=Math.floor(i*r.height);void 0===d&&(d=v(n,o));const a=t?v(n,o):d;a.width=n,a.height=o;return a.getContext("2d").drawImage(e,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function A(e){return e.generateMipmaps}function b(t){e.generateMipmap(t)}function x(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function _(n,i,r,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=i;if(i===e.RED&&(r===e.FLOAT&&(s=e.R32F),r===e.HALF_FLOAT&&(s=e.R16F),r===e.UNSIGNED_BYTE&&(s=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.R8UI),r===e.UNSIGNED_SHORT&&(s=e.R16UI),r===e.UNSIGNED_INT&&(s=e.R32UI),r===e.BYTE&&(s=e.R8I),r===e.SHORT&&(s=e.R16I),r===e.INT&&(s=e.R32I)),i===e.RG&&(r===e.FLOAT&&(s=e.RG32F),r===e.HALF_FLOAT&&(s=e.RG16F),r===e.UNSIGNED_BYTE&&(s=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RG8UI),r===e.UNSIGNED_SHORT&&(s=e.RG16UI),r===e.UNSIGNED_INT&&(s=e.RG32UI),r===e.BYTE&&(s=e.RG8I),r===e.SHORT&&(s=e.RG16I),r===e.INT&&(s=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGB8UI),r===e.UNSIGNED_SHORT&&(s=e.RGB16UI),r===e.UNSIGNED_INT&&(s=e.RGB32UI),r===e.BYTE&&(s=e.RGB8I),r===e.SHORT&&(s=e.RGB16I),r===e.INT&&(s=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),r===e.UNSIGNED_INT&&(s=e.RGBA32UI),r===e.BYTE&&(s=e.RGBA8I),r===e.SHORT&&(s=e.RGBA16I),r===e.INT&&(s=e.RGBA32I)),i===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),i===e.RGBA){const t=a?pn:Ei.getTransfer(o);r===e.FLOAT&&(s=e.RGBA32F),r===e.HALF_FLOAT&&(s=e.RGBA16F),r===e.UNSIGNED_BYTE&&(s=t===fn?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function w(t,n){let i;return t?null===n||n===Qe||n===Ke?i=e.DEPTH24_STENCIL8:n===We?i=e.DEPTH32F_STENCIL8:n===He&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Qe||n===Ke?i=e.DEPTH_COMPONENT24:n===We?i=e.DEPTH_COMPONENT32F:n===He&&(i=e.DEPTH_COMPONENT16),i}function E(e,t){return!0===A(e)||e.isFramebufferTexture&&e.minFilter!==ke&&e.minFilter!==De?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){const t=e.target;t.removeEventListener("dispose",C),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=p.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&T(e),0===Object.keys(r).length&&p.delete(n)}i.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=i.get(t);t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let t=0;t<n.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[i][t]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let o=0,s=r.length;o<s;o++){const t=i.get(r[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),i.remove(r[o])}i.remove(t)}(n)}function T(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete p.get(r)[n.__cacheKey],a.memory.textures--}let I=0;function M(t,r){const o=i.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(O(o,t,r))return}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}function k(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?O(o,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)}const R={[Te]:e.REPEAT,[Ie]:e.CLAMP_TO_EDGE,[Me]:e.MIRRORED_REPEAT},L={[ke]:e.NEAREST,[Re]:e.NEAREST_MIPMAP_NEAREST,[Be]:e.NEAREST_MIPMAP_LINEAR,[De]:e.LINEAR,[Oe]:e.LINEAR_MIPMAP_NEAREST,[Fe]:e.LINEAR_MIPMAP_LINEAR},B={[Rn]:e.NEVER,[Fn]:e.ALWAYS,[Ln]:e.LESS,[Pn]:e.LEQUAL,[Bn]:e.EQUAL,[Nn]:e.GEQUAL,[Dn]:e.GREATER,[On]:e.NOTEQUAL};function P(n,o){if(o.type!==We||!1!==t.has("OES_texture_float_linear")||o.magFilter!==De&&o.magFilter!==Oe&&o.magFilter!==Be&&o.magFilter!==Fe&&o.minFilter!==De&&o.minFilter!==Oe&&o.minFilter!==Be&&o.minFilter!==Fe||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,R[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,R[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,L[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,L[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,B[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===ke)return;if(o.minFilter!==Be&&o.minFilter!==Fe)return;if(o.type===We&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||i.get(o).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy}}}function D(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));const r=n.source;let o=p.get(r);void 0===o&&(o={},p.set(r,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),o[s].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&T(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return i}function O(t,a,s){if(m)return a.isPendingDeferredUpload||(a.isPendingDeferredUpload=!0,f.push({textureProperties:t,texture:a,slot:s})),!1;let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=D(t,a),u=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=i.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Ei.getPrimaries(Ei.workingColorSpace),i=a.colorSpace===un?null:Ei.getPrimaries(a.colorSpace),d=a.colorSpace===un||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=y(a.image,!1,r.maxTextureSize);p=Q(a,p);const f=o.convert(a.format,a.colorSpace),m=o.convert(a.type);let g,v=_(a.internalFormat,f,m,a.colorSpace,a.isVideoTexture);P(l,a);const x=a.mipmaps,C=!0!==a.isVideoTexture,S=void 0===h.__version||!0===c,T=u.dataReady,I=E(a,p);if(a.isDepthTexture)v=w(a.format===rt,a.type),S&&(C?n.texStorage2D(e.TEXTURE_2D,1,v,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,v,p.width,p.height,0,f,m,null));else if(a.isDataTexture)if(x.length>0){C&&S&&n.texStorage2D(e.TEXTURE_2D,I,v,x[0].width,x[0].height);for(let t=0,i=x.length;t<i;t++)g=x[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,f,m,g.data):n.texImage2D(e.TEXTURE_2D,t,v,g.width,g.height,0,f,m,g.data);a.generateMipmaps=!1}else C?(S&&n.texStorage2D(e.TEXTURE_2D,I,v,p.width,p.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,f,m,p.data)):n.texImage2D(e.TEXTURE_2D,0,v,p.width,p.height,0,f,m,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,I,v,x[0].width,x[0].height,p.depth);for(let t=0,i=x.length;t<i;t++)if(g=x[t],a.format!==et)if(null!==f)if(C){if(T)if(a.layerUpdates.size>0){const i=Od(g.width,g.height,a.format,a.type);for(const r of a.layerUpdates){const o=g.data.subarray(r*i/g.data.BYTES_PER_ELEMENT,(r+1)*i/g.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,g.width,g.height,1,f,o)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,g.width,g.height,p.depth,f,g.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,v,g.width,g.height,p.depth,0,g.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,g.width,g.height,p.depth,f,m,g.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,v,g.width,g.height,p.depth,0,f,m,g.data)}else{C&&S&&n.texStorage2D(e.TEXTURE_2D,I,v,x[0].width,x[0].height);for(let t=0,i=x.length;t<i;t++)g=x[t],a.format!==et?null!==f?C?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,f,g.data):n.compressedTexImage2D(e.TEXTURE_2D,t,v,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,f,m,g.data):n.texImage2D(e.TEXTURE_2D,t,v,g.width,g.height,0,f,m,g.data)}else if(a.isDataArrayTexture)if(C){if(S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,I,v,p.width,p.height,p.depth),T)if(a.layerUpdates.size>0){const t=Od(p.width,p.height,a.format,a.type);for(const i of a.layerUpdates){const r=p.data.subarray(i*t/p.data.BYTES_PER_ELEMENT,(i+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,f,m,r)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,m,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,v,p.width,p.height,p.depth,0,f,m,p.data);else if(a.isData3DTexture)C?(S&&n.texStorage3D(e.TEXTURE_3D,I,v,p.width,p.height,p.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,m,p.data)):n.texImage3D(e.TEXTURE_3D,0,v,p.width,p.height,p.depth,0,f,m,p.data);else if(a.isFramebufferTexture){if(S)if(C)n.texStorage2D(e.TEXTURE_2D,I,v,p.width,p.height);else{let t=p.width,i=p.height;for(let r=0;r<I;r++)n.texImage2D(e.TEXTURE_2D,r,v,t,i,0,f,m,null),t>>=1,i>>=1}}else if(x.length>0){if(C&&S){const t=W(x[0]);n.texStorage2D(e.TEXTURE_2D,I,v,t.width,t.height)}for(let t=0,i=x.length;t<i;t++)g=x[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,m,g):n.texImage2D(e.TEXTURE_2D,t,v,f,m,g);a.generateMipmaps=!1}else if(C){if(S){const t=W(p);n.texStorage2D(e.TEXTURE_2D,I,v,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,m,p)}else n.texImage2D(e.TEXTURE_2D,0,v,f,m,p);A(a)&&b(l),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}return t.__version=a.version,!0}function N(t,r,a,l,u,h){const d=o.convert(a.format,a.colorSpace),p=o.convert(a.type),f=_(a.internalFormat,d,p,a.colorSpace),m=i.get(r),g=i.get(a);if(g.__renderTarget=r,!m.__hasExternalTextures){const t=Math.max(1,r.width>>h),i=Math.max(1,r.height>>h);!0===r.isWebGLMultiviewRenderTarget?n.texStorage3D(e.TEXTURE_2D_ARRAY,0,f,r.width,r.height,r.numViews):u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,h,f,t,i,r.depth,0,d,p,null):n.texImage2D(u,h,f,t,i,0,d,p,null)}n.bindFramebuffer(e.FRAMEBUFFER,t);const v=G(r);!0===r.isWebGLMultiviewRenderTarget?v?c.framebufferTextureMultisampleMultiviewOVR(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,g.__webglTexture,0,H(r),0,r.numViews):c.framebufferTextureMultiviewOVR(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,g.__webglTexture,0,0,r.numViews):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(v?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,u,g.__webglTexture,0,H(r)):e.framebufferTexture2D(e.FRAMEBUFFER,l,u,g.__webglTexture,h)),n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),!0===n.isWebGLMultiviewRenderTarget){const t=G(n),r=n.numViews,o=n.depthTexture;let a=e.DEPTH_COMPONENT24,s=e.DEPTH_ATTACHMENT;o&&o.isDepthTexture&&(o.type===We?a=e.DEPTH_COMPONENT32F:o.type===Ke&&(a=e.DEPTH24_STENCIL8,s=e.DEPTH_STENCIL_ATTACHMENT));let l=i.get(n.depthTexture).__webglTexture;void 0===l&&(l=e.createTexture(),e.bindTexture(e.TEXTURE_2D_ARRAY,l),e.texStorage3D(e.TEXTURE_2D_ARRAY,1,a,n.width,n.height,r)),t?c.framebufferTextureMultisampleMultiviewOVR(e.FRAMEBUFFER,s,l,0,H(n),0,r):c.framebufferTextureMultiviewOVR(e.FRAMEBUFFER,s,l,0,0,r)}else if(n.depthBuffer){const i=n.depthTexture,o=i&&i.isDepthTexture?i.type:null,a=w(n.stencilBuffer,o),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=H(n);G(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const a=t[i],l=o.convert(a.format,a.colorSpace),c=o.convert(a.type),u=_(a.internalFormat,l,c,a.colorSpace),h=H(n);r&&!1===G(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):G(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function z(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const o=i.get(r.depthTexture);o.__renderTarget=r,o.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),1!=r.depthTexture.image.depth?k(r.depthTexture,0):M(r.depthTexture,0);const a=o.__webglTexture,l=H(r);if(!0===r.isWebGLMultiviewRenderTarget){const t=G(r),n=r.numViews;if(r.depthTexture.format===it)t?c.framebufferTextureMultisampleMultiviewOVR(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,a,0,l,0,n):c.framebufferTextureMultiviewOVR(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,a,0,0,n);else{if(r.depthTexture.format!==rt)throw new Error("Unknown depthTexture format");t?c.framebufferTextureMultisampleMultiviewOVR(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,a,0,l,0,n):c.framebufferTextureMultiviewOVR(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,a,0,0,n)}}else if(r.depthTexture.format===it)G(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==rt)throw new Error("Unknown depthTexture format");G(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function U(t){const r=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");z(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=e.createRenderbuffer(),F(r.__webglDepthbuffer[i],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=r.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,o)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),F(r.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const j=[],V=[];function H(e){return Math.min(r.maxSamples,e.samples)}function G(e){const n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Q(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==dn&&n!==un&&(Ei.getTransfer(n)===fn?i===et&&r===Ue||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function W(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(u.width=e.naturalWidth||e.width,u.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(u.width=e.displayWidth,u.height=e.displayHeight):(u.width=e.width,u.height=e.height),u}this.allocateTextureUnit=function(){const e=I;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),I+=1,e},this.resetTextureUnits=function(){I=0},this.setTexture2D=M,this.setTexture2DArray=k,this.setTexture3D=function(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?O(o,t,r):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,a){const s=i.get(t);t.version>0&&s.__version!==t.version?function(t,a,s){if(6!==a.image.length)return;const l=D(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=i.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Ei.getPrimaries(Ei.workingColorSpace),i=a.colorSpace===un?null:Ei.getPrimaries(a.colorSpace),h=a.colorSpace===un||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?a.image[e].image:a.image[e]:y(a.image[e],!0,r.maxCubemapSize),f[e]=Q(a,f[e]);const m=f[0],g=o.convert(a.format,a.colorSpace),v=o.convert(a.type),x=_(a.internalFormat,g,v,a.colorSpace),w=!0!==a.isVideoTexture,C=void 0===u.__version||!0===l,S=c.dataReady;let T,I=E(a,m);if(P(e.TEXTURE_CUBE_MAP,a),d){w&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,I,x,m.width,m.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let i=0;i<T.length;i++){const r=T[i];a.format!==et?null!==g?w?S&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,g,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,x,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):w?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,g,v,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,x,r.width,r.height,0,g,v,r.data)}}}else{if(T=a.mipmaps,w&&C){T.length>0&&I++;const t=W(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,I,x,t.width,t.height)}for(let t=0;t<6;t++)if(p){w?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,g,v,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,x,f[t].width,f[t].height,0,g,v,f[t].data);for(let i=0;i<T.length;i++){const r=T[i].image[t].image;w?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,g,v,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,x,r.width,r.height,0,g,v,r.data)}}else{w?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,g,v,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,x,g,v,f[t]);for(let i=0;i<T.length;i++){const r=T[i];w?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,g,v,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,x,g,v,r.image[t])}}}A(a)&&b(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(s,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,r){const o=i.get(t);void 0!==n&&N(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&U(t)},this.uploadTexture=O,this.setupRenderTarget=function(t){const r=t.texture,s=i.get(t),l=i.get(r);t.addEventListener("dispose",S);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,a.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=c.length;t<n;t++){const n=i.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===G(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const r=o.convert(i.format,i.colorSpace),a=o.convert(i.type),l=_(i.internalFormat,r,a,i.colorSpace,!0===t.isXRRenderTarget),u=H(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),F(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)N(s.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else N(s.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);A(r)&&b(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let r=0,o=c.length;r<o;r++){const o=c[r],a=i.get(o);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),P(e.TEXTURE_2D,o),N(s.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),A(o)&&b(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),!0===t.isWebGLMultiviewRenderTarget&&(i=e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),P(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)N(s.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else N(s.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);A(r)&&b(i),n.unbindTexture()}(t.depthBuffer||!0===t.isWebGLMultiviewRenderTarget)&&this.setupDepthRenderbuffer(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let r=0,o=t.length;r<o;r++){const o=t[r];if(A(o)){const t=x(e),r=i.get(o).__webglTexture;n.bindTexture(t,r),b(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===G(t)){const r=t.textures,o=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),h=r.length>1;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),!0===l&&(j.length=0,V.length=0,j.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(j.push(c),V.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,V)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,j))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthTexture=z,this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=N,this.useMultisampledRTT=G,this.runDeferredUploads=function(){const e=m;m=!1;for(const t of f)O(t.textureProperties,t.texture,t.slot),t.texture.isPendingDeferredUpload=!1;f=[],m=e},this.setDeferTextureUploads=function(e){m=e}}function pm(e,t){return{convert:function(n){let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;const o=Ei.getTransfer(r);if(n===Ue)return e.UNSIGNED_BYTE;if(n===Xe)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ye)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Je)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===je)return e.BYTE;if(n===Ve)return e.SHORT;if(n===He)return e.UNSIGNED_SHORT;if(n===Ge)return e.INT;if(n===Qe)return e.UNSIGNED_INT;if(n===We)return e.FLOAT;if(n===qe)return e.HALF_FLOAT;if(n===Ze)return e.ALPHA;if(n===$e)return e.RGB;if(n===et)return e.RGBA;if(n===tt)return e.LUMINANCE;if(n===nt)return e.LUMINANCE_ALPHA;if(n===it)return e.DEPTH_COMPONENT;if(n===rt)return e.DEPTH_STENCIL;if(n===ot)return e.RED;if(n===at)return e.RED_INTEGER;if(n===st)return e.RG;if(n===lt)return e.RG_INTEGER;if(n===ut)return e.RGBA_INTEGER;if(n===ht||n===dt||n===pt||n===ft)if(o===fn){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===ht)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===dt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===pt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ft)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===ht)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===dt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===pt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ft)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===mt||n===gt||n===vt||n===yt){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===mt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===vt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===yt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===At||n===bt||n===xt){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===At||n===bt)return o===fn?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===xt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===_t||n===wt||n===Et||n===Ct||n===St||n===Tt||n===It||n===Mt||n===kt||n===Rt||n===Lt||n===Bt||n===Pt||n===Dt){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===_t)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===wt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Et)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ct)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===St)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Tt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===It)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Mt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===kt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Rt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Lt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Bt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Pt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Dt)return o===fn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Ot||n===Nt||n===Ft){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===Ot)return o===fn?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Nt)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ft)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===zt||n===Ut||n===jt||n===Vt){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===Ot)return i.COMPRESSED_RED_RGTC1_EXT;if(n===Ut)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===jt)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Vt)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ke?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class fm extends Oi{constructor(e,t,n){super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}copy(e){return super.copy(e),this.numViews=e.numViews,this}}fm.prototype.isWebGLMultiviewRenderTarget=!0;class mm{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const i=new Bi;e.properties.get(i).__webglTexture=t.texture,t.depthNear===n.depthNear&&t.depthFar===n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new aa({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new $o(new Tc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gm extends $n{constructor(e,t,n,i){super();const r=this;let o=null,a=1;var s=null;let l=null,c="local-floor",u=1,h=null,d=null;var p=[];let f=null,m=null,g=null,v=null;const y=new mm,A=t.getContextAttributes();let b=null,x=null;const _=[],w=[],E=new hi;let C=null;const S=new ha;S.viewport=new Pi;const T=new ha;T.viewport=new Pi;const I=[S,T],M=new hh;let k=null,R=null;function L(e){const t=w.indexOf(e.inputSource);if(-1===t)return;const n=_[t];void 0!==n&&(n.update(e.inputSource,e.frame,h||l),n.dispatchEvent({type:e.type,data:e.inputSource}))}function B(){o.removeEventListener("select",L),o.removeEventListener("selectstart",L),o.removeEventListener("selectend",L),o.removeEventListener("squeeze",L),o.removeEventListener("squeezestart",L),o.removeEventListener("squeezeend",L),o.removeEventListener("end",B),o.removeEventListener("inputsourceschange",P);for(let e=0;e<_.length;e++){const t=w[e];null!==t&&(w[e]=null,_[e].disconnect(t))}k=null,R=null,y.reset(),r.isPresenting=!1,e.setRenderTarget(b),g=null,m=null,f=null,o=null,x=null,z.stop(),e.setPixelRatio(C),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=w.indexOf(n);i>=0&&(w[i]=null,_[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=w.indexOf(n);if(-1===i){for(let e=0;e<_.length;e++){if(e>=w.length){w.push(n),i=e;break}if(null===w[e]){w[e]=n,i=e;break}}if(-1===i)break}const r=_[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return d},this.getController=function(e){let t=_[e];return void 0===t&&(t=new ya,_[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=_[e];return void 0===t&&(t=new ya,_[e]=t),t.getGripSpace()},this.getHand=function(e){let t=_[e];return void 0===t&&(t=new ya,_[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){c=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(e){h=e},this.getBaseLayer=function(){return null!==m?m:g},this.getBinding=function(){return f},this.getRenderTarget=function(){return x},this.getFrame=function(){return v},this.getSession=function(){return o},this.setSession=async function(s){if(o=s,null!==o){b=e.getRenderTarget(),o.addEventListener("select",L),o.addEventListener("selectstart",L),o.addEventListener("selectend",L),o.addEventListener("squeeze",L),o.addEventListener("squeezestart",L),o.addEventListener("squeezeend",L),o.addEventListener("end",B),o.addEventListener("inputsourceschange",P),!0!==A.xrCompatible&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(E);if("undefined"!==typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let s=null,l=null,c=null;A.depth&&(c=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,s=A.stencil?rt:it,l=A.stencil?Ke:Qe),r.isMultiview=i&&n.has("OCULUS_multiview");const u={colorFormat:t.RGBA8,depthFormat:c,scaleFactor:a};r.isMultiview&&(u.textureType="texture-array"),f=new XRWebGLBinding(o,t),m=f.createProjectionLayer(u),o.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1);const h={format:et,type:Ue,depthTexture:new pl(m.textureWidth,m.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:!1===m.ignoreDepthValues};if(r.isMultiview){const e=n.get("OCULUS_multiview");this.maxNumViews=t.getParameter(e.MAX_VIEWS_OVR),x=new fm(m.textureWidth,m.textureHeight,2,h)}else x=new Oi(m.textureWidth,m.textureHeight,h)}else{const n={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:a};g=new XRWebGLLayer(o,t,n),o.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),x=new Oi(g.framebufferWidth,g.framebufferHeight,{format:et,type:Ue,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}x.isXRRenderTarget=!0,this.setFoveation(u),h=null,l=await o.requestReferenceSpace(c),z.setContext(o),z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==o)return o.environmentBlendMode},this.addLayer=function(e){window.XRWebGLBinding&&this.layersEnabled&&o&&(p.push(e),this.updateLayers())},this.removeLayer=function(e){p.splice(p.indexOf(e),1),window.XRWebGLBinding&&this.layersEnabled&&o&&this.updateLayers()},this.updateLayers=function(){var e=p.map(function(e){return e});e.unshift(o.renderState.layers[0]),o.updateRenderState({layers:e})},this.getDepthTexture=function(){return y.getDepthTexture()};const D=new Vi,O=new Vi;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.setPoseTarget=function(e){void 0!==e&&(s=e)},this.updateCamera=function(e){if(null===o)return;let t=e.near,n=e.far;null!==y.texture&&(y.depthNear>0&&(t=y.depthNear),y.depthFar>0&&(n=y.depthFar)),M.near=T.near=S.near=t,M.far=T.far=S.far=n,k===M.near&&R===M.far||(o.updateRenderState({depthNear:M.near,depthFar:M.far}),k=M.near,R=M.far),S.layers.mask=2|e.layers.mask,T.layers.mask=4|e.layers.mask,M.layers.mask=S.layers.mask|T.layers.mask;const i=M.cameras;var r=s||e;const a=r.parent;N(M,a);for(let o=0;o<i.length;o++)N(i[o],a);2===i.length?function(e,t,n){D.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const i=D.distanceTo(O),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+f,n=s+f,r=d-m,o=p+(i-m),u=l*s/n*t,h=c*s/n*t;e.projectionMatrix.makePerspective(r,o,u,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(M,S,T):M.projectionMatrix.copy(S.projectionMatrix),function(e,t,n){t.matrixWorld.decompose(t.position,t.quaternion,t.scale),null===n.parent?n.matrix.copy(t.matrixWorld):(n.matrix.copy(n.parent.matrixWorld),n.matrix.invert(),n.matrix.multiply(t.matrixWorld));n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*ii*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,M,r)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==m||null!==g)return u},this.setFoveation=function(e){u=e,null!==m&&(m.fixedFoveation=e),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==y.texture},this.getDepthSensingMesh=function(){return y.getMesh(M)};let F=null;const z=new Fd;z.setAnimationLoop(function(t,n){if(d=n.getViewerPose(h||l),v=n,null!==d){const t=d.views;null!==g&&(e.setRenderTargetFramebuffer(x,g.framebuffer),e.setRenderTarget(x));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==g)o=g.getViewport(i);else{const t=f.getViewSubImage(m,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(x,t.colorTexture,m.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(x))}let a=I[r];void 0===a&&(a=new ha,a.layers.enable(r),a.viewport=new Pi,I[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(M.matrix.copy(a.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===n&&M.cameras.push(a)}const i=o.enabledFeatures;if(i&&i.includes("depth-sensing")&&"gpu-optimized"==o.depthUsage&&f){const n=f.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&y.init(e,n,o.renderState)}}for(let e=0;e<_.length;e++){const t=w[e],i=_[e];null!==t&&void 0!==i&&i.update(t,n,h||l)}F&&F(t,n),n.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:n}),v=null}),this.setAnimationLoop=function(e){F=e},this.dispose=function(){}}}const vm=new Ir,ym=new yr;function Am(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===S&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===S&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),o=r.envMap,a=r.envMapRotation;o&&(e.envMap.value=o,vm.copy(a),vm.x*=-1,vm.y*=-1,vm.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(vm.y*=-1,vm.z*=-1),e.envMapRotation.value.setFromMatrix4(ym.makeRotationFromEuler(vm)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,ra(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,o,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===S&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,s)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function bm(e,t,n,i){let r={},o={},a=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,o=t+"_"+n;if(void 0===i[o])return i[o]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[o];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let o=0,a=t.length;o<a;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=o.length;e<t;e++){const t=c(o[e]),a=n%i,s=a%t.boundary,l=a+s;n+=s,0!==l&&i-l<t.storage&&(n+=i-l),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const p=h.program;i.updateUBOMapping(n,p);const f=t.render.frame;o[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,a=i.length;r<a;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,o)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let o=0;o<n.length;o++){const a=n[o],s=c(a);"number"===typeof a||"boolean"===typeof a?(i.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},o={}}}}class xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=yi(),context:n=null,depth:i=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:h=!1,multiviewStereo:d=!1}=e;let p;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let v=null,y=null;const A=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=hn,this.toneMapping=he,this.toneMappingExposure=1;const x=this;let _=!1,w=0,E=0,I=null,M=-1,k=null;const R=new Pi,L=new Pi;let B=null;const P=new uo(0);let D=0,O=t.width,N=t.height,F=1,z=null,U=null;const j=new Pi(0,0,O,N),V=new Pi(0,0,O,N);let H=!1;const G=new bs;let Q=!1,W=!1;this.transmissionResolutionScale=1;const q=new yr,X=new yr,Y=new Vi,K=new Pi,J={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Z=!1;function $(){return null===I?F:1}let ee,te,ne,ie,re,oe,ae,se,le,ce,ue,de,pe,fe,me,ge,ve,ye,Ae,be,xe,_e,we,Ee,Ce,Se=n;function Te(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(f)),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",Re,!1),t.addEventListener("webglcontextcreationerror",Le,!1),null===Se){const t="webgl2";if(Se=Te(t,e),null===Se)throw Te(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(rt){throw console.error("THREE.WebGLRenderer: "+rt.message),rt}function Ie(){ee=new mp(Se),ee.init(),we=new pm(Se,ee),te=new Yd(Se,ee,e,we),ne=new hm(Se,ee),te.reverseDepthBuffer&&h&&ne.buffers.depth.setReversed(!0),ie=new yp(Se),re=new Zf,oe=new dm(Se,ee,ne,re,te,we,ie),ae=new Jd(x),se=new fp(x),le=new zd(Se),Ee=new qd(Se,le),ce=new gp(Se,le,ie,Ee),ue=new xp(Se,ce,le,ie),be=new Ap(Se,te,oe),ge=new Kd(re),de=new Jf(x,ae,se,ee,te,Ee,ge),pe=new Am(x,re),fe=new nm,me=new lm(ee),Ae=new Wd(x,ae,se,ne,ue,p,s),ye=new bp(x,ee,Se),ve=new cm(x,ue,te),Ce=new bm(Se,ie,te,ne),xe=new Xd(Se,ee,ie),_e=new vp(Se,ee,ie),ie.programs=de.programs,x.capabilities=te,x.extensions=ee,x.properties=re,x.renderLists=fe,x.shadowMap=ve,x.state=ne,x.info=ie}Ie();const Me=new gm(x,Se);function ke(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Re(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const e=ie.autoReset,t=ve.enabled,n=ve.autoUpdate,i=ve.needsUpdate,r=ve.type;Ie(),ie.autoReset=e,ve.enabled=t,ve.autoUpdate=n,ve.needsUpdate=i,ve.type=r}function Le(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Be(e){const t=e.target;t.removeEventListener("dispose",Be),function(e){(function(e){const t=re.get(e).programs;void 0!==t&&(t.forEach(function(e){de.releaseProgram(e)}),e.isShaderMaterial&&de.releaseShaderCache(e))})(e),re.remove(e)}(t)}function Pe(e,t,n){!0===e.transparent&&e.side===T&&!1===e.forceSinglePass?(e.side=S,e.needsUpdate=!0,Ze(e,t,n),e.side=C,e.needsUpdate=!0,Ze(e,t,n),e.side=T):Ze(e,t,n)}this.xr=Me,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const e=ee.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=ee.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(e){void 0!==e&&(F=e,this.setSize(O,N,!1))},this.getSize=function(e){return e.set(O,N)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,N=n,t.width=Math.floor(e*F),t.height=Math.floor(n*F),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(O*F,N*F).floor()},this.setDrawingBufferSize=function(e,n,i){O=e,N=n,F=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(R)},this.getViewport=function(e){return e.copy(j)},this.setViewport=function(e,t,n,i){e.isVector4?j.set(e.x,e.y,e.z,e.w):j.set(e,t,n,i),ne.viewport(R.copy(j).multiplyScalar(F).round())},this.getScissor=function(e){return e.copy(V)},this.setScissor=function(e,t,n,i){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,i),ne.scissor(L.copy(V).multiplyScalar(F).round())},this.getScissorTest=function(){return H},this.setScissorTest=function(e){ne.setScissorTest(H=e)},this.setOpaqueSort=function(e){z=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return e.copy(Ae.getClearColor())},this.setClearColor=function(){Ae.setClearColor.apply(Ae,arguments)},this.getClearAlpha=function(){return Ae.getClearAlpha()},this.setClearAlpha=function(){Ae.setClearAlpha.apply(Ae,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==I){const t=I.texture.format;e=t===ut||t===lt||t===at}if(e){const e=I.texture.type,t=e===Ue||e===Qe||e===He||e===Ke||e===Xe||e===Ye,n=Ae.getClearColor(),i=Ae.getClearAlpha(),r=n.r,o=n.g,a=n.b;t?(m[0]=r,m[1]=o,m[2]=a,m[3]=i,Se.clearBufferuiv(Se.COLOR,0,m)):(g[0]=r,g[1]=o,g[2]=a,g[3]=i,Se.clearBufferiv(Se.COLOR,0,g))}else n|=Se.COLOR_BUFFER_BIT}e&&(n|=Se.DEPTH_BUFFER_BIT),t&&(n|=Se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Se.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",Re,!1),t.removeEventListener("webglcontextcreationerror",Le,!1),Ae.dispose(),fe.dispose(),me.dispose(),re.dispose(),ae.dispose(),se.dispose(),ue.dispose(),Ee.dispose(),Ce.dispose(),de.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Oe),Me.removeEventListener("sessionend",Ne),ze.stop()},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=J);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,n,i,r){!0!==t.isScene&&(t=J);oe.resetTextureUnits();const o=t.fog,a=i.isMeshStandardMaterial?t.environment:null,s=null===I?x.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:dn,l=(i.isMeshStandardMaterial?se:ae).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=he;i.toneMapped&&(null!==I&&!0!==I.isXRRenderTarget||(f=x.toneMapping));const m=I&&I.isWebGLMultiviewRenderTarget?I.numViews:0,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,A=re.get(i),b=y.state.lights;if(!0===Q&&(!0===W||e!==k)){const t=e===k&&i.id===M;ge.setState(i,e,t)}let _=!1;i.version===A.__version?A.needsLights&&A.lightsStateVersion!==b.state.version||A.outputColorSpace!==s||r.isBatchedMesh&&!1===A.batching?_=!0:r.isBatchedMesh||!0!==A.batching?r.isBatchedMesh&&!0===A.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===A.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===A.instancing?_=!0:r.isInstancedMesh||!0!==A.instancing?r.isSkinnedMesh&&!1===A.skinning?_=!0:r.isSkinnedMesh||!0!==A.skinning?r.isInstancedMesh&&!0===A.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===A.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===A.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===A.instancingMorph&&null!==r.morphTexture||A.envMap!==l||!0===i.fog&&A.fog!==o?_=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===ge.numPlanes&&A.numIntersection===ge.numIntersection?(A.vertexAlphas!==c||A.vertexTangents!==u||A.morphTargets!==h||A.morphNormals!==d||A.morphColors!==p||A.toneMapping!==f||A.morphTargetsCount!==v||A.numMultiviewViews!==m)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,A.__version=i.version);let w=A.currentProgram;!0===_&&(w=Ze(i,t,r));let E=!1,C=!1,S=!1;const T=w.getUniforms(),R=A.uniforms;ne.useProgram(w.program)&&(E=!0,C=!0,S=!0);i.id!==M&&(M=i.id,C=!0);if(E||k!==e){if(w.numMultiviewViews>0)ye.updateCameraProjectionMatricesUniform(e,T),ye.updateCameraViewMatricesUniform(e,T);else{ne.buffers.depth.getReversed()?(q.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(q),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(q),T.setValue(Se,"projectionMatrix",q)):T.setValue(Se,"projectionMatrix",e.projectionMatrix),T.setValue(Se,"viewMatrix",e.matrixWorldInverse)}const t=T.map.cameraPosition;void 0!==t&&t.setValue(Se,Y.setFromMatrixPosition(e.matrixWorld)),te.logarithmicDepthBuffer&&T.setValue(Se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&T.setValue(Se,"isOrthographic",!0===e.isOrthographicCamera),k!==e&&(k=e,C=!0,S=!0)}if(r.isSkinnedMesh){T.setOptional(Se,r,"bindMatrix"),T.setOptional(Se,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),T.setValue(Se,"boneTexture",e.boneTexture,oe))}r.isBatchedMesh&&(T.setOptional(Se,r,"batchingTexture"),T.setValue(Se,"batchingTexture",r._matricesTexture,oe),T.setOptional(Se,r,"batchingIdTexture"),T.setValue(Se,"batchingIdTexture",r._indirectTexture,oe),T.setOptional(Se,r,"batchingColorTexture"),null!==r._colorsTexture&&T.setValue(Se,"batchingColorTexture",r._colorsTexture,oe));const L=n.morphAttributes;void 0===L.position&&void 0===L.normal&&void 0===L.color||be.update(r,n,w);(C||A.receiveShadow!==r.receiveShadow)&&(A.receiveShadow=r.receiveShadow,T.setValue(Se,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(R.envMapIntensity.value=t.environmentIntensity);C&&(T.setValue(Se,"toneMappingExposure",x.toneMappingExposure),A.needsLights&&(P=S,(B=R).ambientLightColor.needsUpdate=P,B.lightProbe.needsUpdate=P,B.directionalLights.needsUpdate=P,B.directionalLightShadows.needsUpdate=P,B.pointLights.needsUpdate=P,B.pointLightShadows.needsUpdate=P,B.spotLights.needsUpdate=P,B.spotLightShadows.needsUpdate=P,B.rectAreaLights.needsUpdate=P,B.hemisphereLights.needsUpdate=P),o&&!0===i.fog&&pe.refreshFogUniforms(R,o),pe.refreshMaterialUniforms(R,i,F,N,y.state.transmissionRenderTarget[e.id]),Tf.upload(Se,$e(A),R,oe));var B,P;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Tf.upload(Se,$e(A),R,oe),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&T.setValue(Se,"center",r.center);w.numMultiviewViews>0?ye.updateObjectMatricesUniforms(r,e,T):(T.setValue(Se,"modelViewMatrix",r.modelViewMatrix),T.setValue(Se,"normalMatrix",r.normalMatrix));if(T.setValue(Se,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];Ce.update(n,w),Ce.bind(n,w)}}return w}(e,t,n,i,r);ne.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=ce.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),p=Math.min(p,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;Ee.setup(r,i,s,n,l);let g=xe;if(null!==l&&(m=le.get(l),g=_e,g.setIndex(m)),r.isMesh)!0===i.wireframe?(ne.setLineWidth(i.wireframeLinewidth*$()),g.setMode(Se.LINES)):g.setMode(Se.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),ne.setLineWidth(e*$()),r.isLineSegments?g.setMode(Se.LINES):r.isLineLoop?g.setMode(Se.LINE_LOOP):g.setMode(Se.LINE_STRIP)}else r.isPoints?g.setMode(Se.POINTS):r.isSprite&&g.setMode(Se.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)g.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(ee.get("WEBGL_multi_draw"))g.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,o=l?le.get(l).bytesPerElement:1,a=re.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)a.setValue(Se,"_gl_DrawID",i),g.render(e[i]/o,t[i])}else if(r.isInstancedMesh)g.renderInstances(d,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(d,f,t)}else g.render(d,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),y=me.get(n),y.init(t),b.push(y),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(y.pushLight(e),e.castShadow&&y.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(y.pushLight(e),e.castShadow&&y.pushShadow(e))}),y.setupLights();const i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Pe(o,n,e),i.add(o)}else Pe(t,n,e),i.add(t)}),b.pop(),y=null,i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){re.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==ee.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let De=null;function Oe(){ze.stop()}function Ne(){ze.start()}const ze=new Fd;function je(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)y.pushLight(e),e.castShadow&&y.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||G.intersectsSprite(e)){i&&K.setFromMatrixPosition(e.matrixWorld).applyMatrix4(X);const t=ue.update(e),r=e.material;r.visible&&v.push(e,t,r,n,K.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||G.intersectsObject(e))){const t=ue.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),K.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),K.copy(t.boundingSphere.center)),K.applyMatrix4(e.matrixWorld).applyMatrix4(X)),Array.isArray(r)){const i=t.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&v.push(e,t,s,n,K.z,a)}}else r.visible&&v.push(e,t,r,n,K.z,null)}const r=e.children;for(let o=0,a=r.length;o<a;o++)je(r[o],t,n,i)}function Ve(e,t,n,i){const r=e.opaque,o=e.transmissive,a=e.transparent;y.setupLightsView(n),!0===Q&&ge.setGlobalState(x.clippingPlanes,n),i&&ne.viewport(R.copy(i)),r.length>0&&We(r,t,n),o.length>0&&We(o,t,n),a.length>0&&We(a,t,n),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function Ge(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===y.state.transmissionRenderTarget[i.id]&&(y.state.transmissionRenderTarget[i.id]=new Oi(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")||ee.has("EXT_color_buffer_float")?qe:Ue,minFilter:Fe,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ei.workingColorSpace}));const o=y.state.transmissionRenderTarget[i.id],a=i.viewport||R;o.setSize(a.z*x.transmissionResolutionScale,a.w*x.transmissionResolutionScale);const s=x.getRenderTarget();x.setRenderTarget(o),x.getClearColor(P),D=x.getClearAlpha(),D<1&&x.setClearColor(16777215,.5),x.clear(),Z&&Ae.render(n);const l=x.toneMapping;x.toneMapping=he;const c=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),y.setupLightsView(i),!0===Q&&ge.setGlobalState(x.clippingPlanes,i),We(e,n,i),oe.updateMultisampleRenderTarget(o),oe.updateRenderTargetMipmap(o),!1===ee.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=o.material,c=o.group;if(l.side===T&&a.layers.test(i.layers)){const t=l.side;l.side=S,l.needsUpdate=!0,Je(a,n,i,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(oe.updateMultisampleRenderTarget(o),oe.updateRenderTargetMipmap(o))}x.setRenderTarget(s),x.setClearColor(P,D),void 0!==c&&(i.viewport=c),x.toneMapping=l}function We(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;a.layers.test(n.layers)&&Je(a,t,n,s,l,c)}}function Je(e,t,n,i,r,o){e.onBeforeRender(x,t,n,i,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(x,t,n,i,e,o),!0===r.transparent&&r.side===T&&!1===r.forceSinglePass?(r.side=S,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,o),r.side=C,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,o),r.side=T):x.renderBufferDirect(n,t,i,r,e,o),e.onAfterRender(x,t,n,i,r,o)}function Ze(e,t,n){!0!==t.isScene&&(t=J);const i=re.get(e),r=y.state.lights,o=y.state.shadowsArray,a=r.state.version,s=de.getParameters(e,r.state,o,t,n),l=de.getProgramCacheKey(s);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?se:ae).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Be),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return et(e,s),u}else s.uniforms=de.getUniforms(e),e.onBeforeCompile(s,x),u=de.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const h=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ge.uniform),et(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function $e(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Tf.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function et(e,t){const n=re.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping,n.numMultiviewViews=t.numMultiviewViews}ze.setAnimationLoop(function(e){De&&De(e)}),"undefined"!==typeof self&&ze.setContext(self),this.setAnimationLoop=function(e){De=e,Me.setAnimationLoop(e),null===e?ze.stop():ze.start()},Me.addEventListener("sessionstart",Oe),Me.addEventListener("sessionend",Ne),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Me.enabled&&!0===Me.isPresenting&&(!0===Me.cameraAutoUpdate&&Me.updateCamera(t),t=Me.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,I),y=me.get(e,b.length),y.init(t),b.push(y),X.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),G.setFromProjectionMatrix(X),W=this.localClippingEnabled,Q=ge.init(this.clippingPlanes,W),v=fe.get(e,A.length),v.init(),A.push(v),!0===Me.enabled&&!0===Me.isPresenting){const e=x.xr.getDepthSensingMesh();null!==e&&je(e,t,-1/0,x.sortObjects)}je(e,t,0,x.sortObjects),v.finish(),!0===x.sortObjects&&v.sort(z,U),Z=!1===Me.enabled||!1===Me.isPresenting||!1===Me.hasDepthSensing(),Z&&Ae.addToRenderList(v,e),this.info.render.frame++,!0===Q&&ge.beginShadows();const n=y.state.shadowsArray;ve.render(n,e,t),!0===Q&&ge.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=v.opaque,r=v.transmissive;if(y.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,o=n.length;t<o;t++){Ge(i,r,e,n[t])}if(Z&&Ae.render(e),Me.enabled&&Me.isMultiview)oe.setDeferTextureUploads(!0),Ve(v,e,t,t.cameras[0].viewport);else for(let t=0,i=n.length;t<i;t++){const i=n[t];Ve(v,e,i,i.viewport)}}else r.length>0&&Ge(i,r,e,t),Z&&Ae.render(e),Ve(v,e,t);null!==I&&0===E&&(oe.updateMultisampleRenderTarget(I),oe.updateRenderTargetMipmap(I)),!0===e.isScene&&e.onAfterRender(x,e,t),Ee.resetDefaultState(),M=-1,k=null,b.pop(),b.length>0?(y=b[b.length-1],!0===Q&&ge.setGlobalState(x.clippingPlanes,y.state.camera)):y=null,A.pop(),v=A.length>0?A[A.length-1]:null},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),oe.setTexture2D(t,n)}}(),this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(e,t,n){re.get(e.texture).__webglTexture=t,re.get(e.depthTexture).__webglTexture=n;const i=re.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||I&&I.isWebGLMultiviewRenderTarget||!0===ee.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=re.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const tt=Se.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null===e&&this.xr.isPresenting&&(e=this.xr.getRenderTarget()),I=e,w=t,E=n;let i=!0,r=null,o=!1,a=!1;if(e){const s=re.get(e);if(void 0!==s.__useDefaultFramebuffer)ne.bindFramebuffer(Se.FRAMEBUFFER,null),i=!1;else if(void 0===s.__webglFramebuffer)oe.setupRenderTarget(e);else if(s.__hasExternalTextures)oe.rebindTextures(e,re.get(e.texture).__webglTexture,re.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&re.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");oe.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=re.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],o=!0):r=e.samples>0&&!1===oe.useMultisampledRTT(e)?re.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,R.copy(e.viewport),L.copy(e.scissor),B=e.scissorTest}else R.copy(j).multiplyScalar(F).floor(),L.copy(V).multiplyScalar(F).floor(),B=H;0!==n&&(r=tt);if(ne.bindFramebuffer(Se.FRAMEBUFFER,r)&&i&&ne.drawBuffers(e,r),ne.viewport(R),ne.scissor(L),ne.setScissorTest(B),o){const i=re.get(e.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(a){const i=re.get(e.texture),r=t;Se.framebufferTextureLayer(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,i.__webglTexture,n,r)}else if(null!==e&&0!==n){const t=re.get(e.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,t.__webglTexture,n)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){ne.bindFramebuffer(Se.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(!te.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!te.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Se.readPixels(t,n,i,r,we.convert(s),we.convert(l),o)}finally{const e=null!==I?re.get(I).__webglFramebuffer:null;ne.bindFramebuffer(Se.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,o,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){const a=e.texture,l=a.format,c=a.type;if(!te.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!te.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){ne.bindFramebuffer(Se.FRAMEBUFFER,s);const e=Se.createBuffer();Se.bindBuffer(Se.PIXEL_PACK_BUFFER,e),Se.bufferData(Se.PIXEL_PACK_BUFFER,o.byteLength,Se.STREAM_READ),Se.readPixels(t,n,i,r,we.convert(l),we.convert(c),0);const a=null!==I?re.get(I).__webglFramebuffer:null;ne.bindFramebuffer(Se.FRAMEBUFFER,a);const u=Se.fenceSync(Se.SYNC_GPU_COMMANDS_COMPLETE,0);return Se.flush(),await function(e,t,n){return new Promise(function(i,r){setTimeout(function o(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:i()}},n)})}(Se,u,4),Se.bindBuffer(Se.PIXEL_PACK_BUFFER,e),Se.getBufferSubData(Se.PIXEL_PACK_BUFFER,0,o),Se.deleteBuffer(e),Se.deleteSync(u),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(bi("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),a=null!==t?t.x:0,s=null!==t?t.y:0;oe.setTexture2D(e,0),Se.copyTexSubImage2D(Se.TEXTURE_2D,n,0,0,a,s,r,o),ne.unbindTexture()};const nt=Se.createFramebuffer(),it=Se.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,i,r,o,a,s,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!0!==e.isTexture&&(bi("WebGLRenderer: copyTextureToTexture function signature has changed."),d=arguments[0]||null,e=arguments[1],t=arguments[2],f=arguments[3]||0,h=null),null===f&&(0!==p?(bi("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),f=p,p=0):f=0);const m=e.isCompressedTexture?e.mipmaps[f]:e.image;if(null!==h)n=h.max.x-h.min.x,i=h.max.y-h.min.y,r=h.isBox3?h.max.z-h.min.z:1,o=h.min.x,a=h.min.y,s=h.isBox3?h.min.z:0;else{const t=Math.pow(2,-p);n=Math.floor(m.width*t),i=Math.floor(m.height*t),r=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,o=0,a=0,s=0}null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const g=we.convert(t.format),v=we.convert(t.type);let y;t.isData3DTexture?(oe.setTexture3D(t,0),y=Se.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(oe.setTexture2DArray(t,0),y=Se.TEXTURE_2D_ARRAY):(oe.setTexture2D(t,0),y=Se.TEXTURE_2D),Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,t.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,t.unpackAlignment);const A=Se.getParameter(Se.UNPACK_ROW_LENGTH),b=Se.getParameter(Se.UNPACK_IMAGE_HEIGHT),x=Se.getParameter(Se.UNPACK_SKIP_PIXELS),_=Se.getParameter(Se.UNPACK_SKIP_ROWS),w=Se.getParameter(Se.UNPACK_SKIP_IMAGES);Se.pixelStorei(Se.UNPACK_ROW_LENGTH,m.width),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,m.height),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,o),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,a),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,s);const E=e.isDataArrayTexture||e.isData3DTexture,C=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const h=re.get(e),d=re.get(t),m=re.get(h.__renderTarget),g=re.get(d.__renderTarget);ne.bindFramebuffer(Se.READ_FRAMEBUFFER,m.__webglFramebuffer),ne.bindFramebuffer(Se.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<r;v++)E&&(Se.framebufferTextureLayer(Se.READ_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,re.get(e).__webglTexture,p,s+v),Se.framebufferTextureLayer(Se.DRAW_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,re.get(t).__webglTexture,f,u+v)),Se.blitFramebuffer(o,a,n,i,l,c,n,i,Se.DEPTH_BUFFER_BIT,Se.NEAREST);ne.bindFramebuffer(Se.READ_FRAMEBUFFER,null),ne.bindFramebuffer(Se.DRAW_FRAMEBUFFER,null)}else if(0!==p||e.isRenderTargetTexture||re.has(e)){const h=re.get(e),d=re.get(t);ne.bindFramebuffer(Se.READ_FRAMEBUFFER,nt),ne.bindFramebuffer(Se.DRAW_FRAMEBUFFER,it);for(let e=0;e<r;e++)E?Se.framebufferTextureLayer(Se.READ_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,h.__webglTexture,p,s+e):Se.framebufferTexture2D(Se.READ_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,h.__webglTexture,p),C?Se.framebufferTextureLayer(Se.DRAW_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,d.__webglTexture,f,u+e):Se.framebufferTexture2D(Se.DRAW_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,d.__webglTexture,f),0!==p?Se.blitFramebuffer(o,a,n,i,l,c,n,i,Se.COLOR_BUFFER_BIT,Se.NEAREST):C?Se.copyTexSubImage3D(y,f,l,c,u+e,o,a,n,i):Se.copyTexSubImage2D(y,f,l,c,o,a,n,i);ne.bindFramebuffer(Se.READ_FRAMEBUFFER,null),ne.bindFramebuffer(Se.DRAW_FRAMEBUFFER,null)}else C?e.isDataTexture||e.isData3DTexture?Se.texSubImage3D(y,f,l,c,u,n,i,r,g,v,m.data):t.isCompressedArrayTexture?Se.compressedTexSubImage3D(y,f,l,c,u,n,i,r,g,m.data):Se.texSubImage3D(y,f,l,c,u,n,i,r,g,v,m):e.isDataTexture?Se.texSubImage2D(Se.TEXTURE_2D,f,l,c,n,i,g,v,m.data):e.isCompressedTexture?Se.compressedTexSubImage2D(Se.TEXTURE_2D,f,l,c,m.width,m.height,g,m.data):Se.texSubImage2D(Se.TEXTURE_2D,f,l,c,n,i,g,v,m);Se.pixelStorei(Se.UNPACK_ROW_LENGTH,A),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,b),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,x),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,_),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,w),0===f&&t.generateMipmaps&&Se.generateMipmap(y),ne.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!0!==e.isTexture&&(bi("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,i=arguments[1]||null,e=arguments[2],t=arguments[3],r=arguments[4]||0),bi('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,i,r)},this.initRenderTarget=function(e){void 0===re.get(e).__webglFramebuffer&&oe.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?oe.setTextureCube(e,0):e.isData3DTexture?oe.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?oe.setTexture2DArray(e,0):oe.setTexture2D(e,0),ne.unbindTexture()},this.resetState=function(){w=0,E=0,I=null,ne.reset(),Ee.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Kn}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ei._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ei._getUnpackColorSpace()}}var _m={8167:e=>{var t=Object.prototype.toString;e.exports=function(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===t.call(e.buffer)||Array.isArray(e)}},5734:e=>{e.exports=function(e,t){return"number"==typeof e?e:"number"==typeof t?t:0}},7961:(e,t)=>{t.byteLength=function(e){var t=s(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],l=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,a,l)),u=0,h=l>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],a=16383,s=0,c=i-r;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));return 1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,i){for(var r,o,a=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},911:(e,t,n)=>{var i=n(9922).hp;e.exports=function(e,t){if(i.isBuffer(e)&&i.isBuffer(t)){if("function"==typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}},9922:(e,t,n)=>{const i=n(7961),r=n(1024),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let i=s(n);const r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),s(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return i?-1:W(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:A(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,i,r){let o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){let i=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let i=0;i<l;i++)if(c(e,o+i)!==c(t,i)){n=!1;break}if(n)return o}return-1}function b(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(K(i))return a;e[n+a]=i}return a}function x(e,t,n,i){return X(W(t,e.length-n),e,n,i)}function _(e,t,n,i){return X(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n,i){return X(q(t),e,n,i)}function E(e,t,n,i){return X(function(e,t){let n,i,r;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(r+a<=n){let n,i,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=a}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=T));return n}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))r+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(i,r),u=e.slice(t,n);for(let l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function I(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function M(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function k(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let o=t;o<n;++o)r+=J[e[o]];return r}function R(e,t,n){const i=e.slice(t,n);let r="";for(let o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function P(e,t,n,i,r){V(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function D(e,t,n,i,r){V(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function O(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,o){return t=+t,n>>>=0,o||O(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,o){return t=+t,n>>>=0,o||O(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Z(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))}),l.prototype.readBigUInt64BE=Z(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let i=t,r=1,o=this[e+--i];for(;i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Z(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=Z(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||B(this,e,t,n,Math.pow(2,8*n)-1,0);let r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||B(this,e,t,n,Math.pow(2,8*n)-1,0);let r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Z(function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Z(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}let r=0,o=1,a=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/o|0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}let r=n-1,o=1,a=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/o|0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Z(function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Z(function(e){return D(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=o[r%a]}return this};const z={};function U(e,t,n){z[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function j(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function V(e,t,n,i,r,o){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=o>3?0===t||t===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(o+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(o+1)-1).concat(i,") and < 2 ** ").concat(8*(o+1)-1).concat(i):">= ".concat(t).concat(i," and <= ").concat(n).concat(i),new z.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||G(t,e.length-(n+1))}(i,r,o)}function H(e,t){if("number"!=typeof e)throw new z.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new z.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,n){let i='The value of "'.concat(e,'" is out of range.'),r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=j(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=j(r)),r+="n"),i+=" It must be ".concat(t,". Received ").concat(r),i},RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const i=e.length;let r=null;const o=[];for(let a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function Z(e){return"undefined"==typeof BigInt?$:e}function $(){throw new Error("BigInt not supported")}},9089:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,i,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},6492:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},963:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(r," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},8878:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))}),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(8945)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},8945:(e,t,n)=>{e.exports=function(e){function t(e){let n,r,o,a=null;function s(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];if(!s.enabled)return;const o=s,a=Number(new Date),l=a-(n||a);o.diff=l,o.prev=n,o.curr=a,n=a,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(e,n)=>{if("%%"===e)return"%";c++;const r=t.formatters[n];if("function"==typeof r){const t=i[c];e=r.call(o,t),i.splice(c,1),c--}return e}),t.formatArgs.call(o,i),(o.log||t.log).apply(o,i)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=i,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e,t){let n=0,i=0,r=-1,o=0;for(;n<e.length;)if(i<t.length&&(t[i]===e[n]||"*"===t[i]))"*"===t[i]?(r=i,o=n,i++):(n++,i++);else{if(-1===r)return!1;i=r+1,o++,n=o}for(;i<t.length&&"*"===t[i];)i++;return i===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const i of n)"-"===i[0]?t.skips.push(i.slice(1)):t.names.push(i)},t.enabled=function(e){for(const n of t.skips)if(r(e,n))return!1;for(const n of t.names)if(r(e,n))return!0;return!1},t.humanize=n(9192),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},1124:(e,t,n)=>{var i=n(6240),r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e,t,n){var o=t[n];if(null!=o){if(r.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");r.call(e,n)&&i(o)?e[n]=s(Object(e[n]),t[n]):e[n]=o}}function s(e,t){if(e===t)return e;for(var n in t=Object(t))r.call(t,n)&&a(e,t,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),s=0;s<i.length;s++)o.call(t,i[s])&&a(e,t,i[s]);return e}e.exports=function(e){e=function(e){if(null==e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}(e);for(var t=1;t<arguments.length;t++)s(e,arguments[t]);return e}},8480:e=>{e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(e,t,n)=>{var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},1024:(e,t)=>{t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m}},2225:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},8847:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},6240:e=>{e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},5651:(e,t,n)=>{var i=n(5406),r=n(4597),o=n(5734),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],s=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),u=" ".charCodeAt(0);function h(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function d(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function p(e,t){if(!e.chars||0===e.chars.length)return null;var n=m(e.chars,t);return n>=0?e.chars[n]:null}function f(e,t,n){if(!e.kernings||0===e.kernings.length)return 0;for(var i=e.kernings,r=0;r<i.length;r++){var o=i[r];if(o.first===t&&o.second===n)return o.amount}return 0}function m(e,t,n){for(var i=n=n||0;i<e.length;i++)if(e[i].id===t)return i;return-1}e.exports=function(e){return new h(e)},h.prototype.update=function(e){if(e=r({measure:this._measure},e),this._opt=e,this._opt.tabSize=o(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,n=e.text||"",s=e.font;this._setupSpaceGlyphs(s);var c=i.lines(n,e),u=e.width||0;t.length=0;var h=c.reduce(function(e,t){return Math.max(e,t.width,u)},0),d=0,p=0,g=o(e.lineHeight,s.common.lineHeight),v=s.common.base,y=g-v,A=e.letterSpacing||0,b=g*c.length-y,x=function(e){return"center"===e?1:"right"===e?2:0}(this._opt.align);p-=b,this._width=h,this._height=b,this._descender=g-v,this._baseline=v,this._xHeight=function(e){for(var t=0;t<a.length;t++){var n=a[t].charCodeAt(0),i=m(e.chars,n);if(i>=0)return e.chars[i].height}return 0}(s),this._capHeight=function(e){for(var t=0;t<l.length;t++){var n=l[t].charCodeAt(0),i=m(e.chars,n);if(i>=0)return e.chars[i].height}return 0}(s),this._lineHeight=g,this._ascender=g-y-this._xHeight;var _=this;c.forEach(function(e,i){for(var r,o=e.start,a=e.end,l=e.width,c=o;c<a;c++){var u=n.charCodeAt(c),m=_.getGlyph(s,u);if(m){r&&(d+=f(s,r.id,m.id));var v=d;1===x?v+=(h-l)/2:2===x&&(v+=h-l),t.push({position:[v,p],data:m,index:c,line:i}),d+=m.xadvance+A,r=m}}p+=g,d=0}),this._linesTotal=c.length},h.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=p(e,u)||function(e){for(var t=0;t<s.length;t++){var n=s[t].charCodeAt(0),i=m(e.chars,n);if(i>=0)return e.chars[i]}return 0}(e)||e.chars[0],n=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=r(t,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},h.prototype.getGlyph=function(e,t){return p(e,t)||(t===c?this._fallbackTabGlyph:t===u?this._fallbackSpaceGlyph:null)},h.prototype.computeMetrics=function(e,t,n,i){var r,o=this._opt.letterSpacing||0,a=this._opt.font,s=0,l=0,c=0;if(!a.chars||0===a.chars.length)return{start:t,end:t,width:0};n=Math.min(e.length,n);for(var u=t;u<n;u++){var h,d=e.charCodeAt(u);if(h=this.getGlyph(a,d)){h.xoffset;var p=(s+=r?f(a,r.id,h.id):0)+h.xadvance+o,m=s+h.width;if(m>=i||p>=i)break;s=p,l=m,r=h}c++}return r&&(l+=r.xoffset),{start:t,end:t+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(e){Object.defineProperty(h.prototype,e,{get:d(e),configurable:!0})})},5751:(e,t,n)=>{var i=n(9922).hp,r=n(3558),o=function(){},a=n(1476),s=n(7034),l=n(7480),c=n(573),u=n(4597),h=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;e.exports=function(e,t){t="function"==typeof t?t:o,"string"==typeof e?e={uri:e}:e||(e={}),e.binary&&(e=function(e){if(h)return u(e,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var t=new self.XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),u({xhr:t},e)}(e)),r(e,function(n,r,u){if(n)return t(n);if(!/^2/.test(r.statusCode))return t(new Error("http status code: "+r.statusCode));if(!u)return t(new Error("no body result"));var h,d,p=!1;if(h=u,"[object ArrayBuffer]"===Object.prototype.toString.call(h)){var f=new Uint8Array(u);u=i.from(f,"binary")}c(u)&&(p=!0,"string"==typeof u&&(u=i.from(u,"binary"))),p||(i.isBuffer(u)&&(u=u.toString(e.encoding)),u=u.trim());try{var m=r.headers["content-type"];d=p?l(u):/json/.test(m)||"{"===u.charAt(0)?JSON.parse(u):/xml/.test(m)||"<"===u.charAt(0)?s(u):a(u)}catch(e){t(new Error("error parsing font "+e.message)),t=o}t(null,d)})}},573:(e,t,n)=>{var i=n(9922).hp,r=n(911),o=i.from([66,77,70,3]);e.exports=function(e){return"string"==typeof e?"BMF"===e.substring(0,3):e.length>4&&r(e.slice(0,4),o)}},9192:e=>{var t=1e3,n=60*t,i=60*n,r=24*i,o=7*r;function a(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,s){s=s||{};var l,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*o;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(l=e,(c=Math.abs(l))>=r?a(l,c,r,"day"):c>=i?a(l,c,i,"hour"):c>=n?a(l,c,n,"minute"):c>=t?a(l,c,t,"second"):l+" ms"):function(e){var o=Math.abs(e);return o>=r?Math.round(e/r)+"d":o>=i?Math.round(e/i)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1476:e=>{function t(e,t){if(!(e=e.replace(/\t+/g," ").trim()))return null;var i=e.indexOf(" ");if(-1===i)throw new Error("no named row at line "+t);var r=e.substring(0,i);e=(e=(e=(e=e.substring(i+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(e){return e.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],a=0;a<e.length;a++){var s=e[a];0===a?o.push({key:s[0],data:""}):a===e.length-1?o[o.length-1].data=n(s[0]):(o[o.length-1].data=n(s[0]),o.push({key:s[1],data:""}))}var l={key:r,data:{}};return o.forEach(function(e){l.data[e.key]=e.data}),l}function n(e){return e&&0!==e.length?0===e.indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):-1!==e.indexOf(",")?function(e){return e.split(",").map(function(e){return parseInt(e,10)})}(e):parseInt(e,10):""}e.exports=function(e){if(!e)throw new Error("no data provided");var n={pages:[],chars:[],kernings:[]},i=(e=e.toString().trim()).split(/\r\n?|\n/g);if(0===i.length)throw new Error("no data in BMFont file");for(var r=0;r<i.length;r++){var o=t(i[r],r);if(o)if("page"===o.key){if("number"!=typeof o.data.id)throw new Error("malformed file at line "+r+" -- needs page id=N");if("string"!=typeof o.data.file)throw new Error("malformed file at line "+r+' -- needs page file="path"');n.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?n.chars.push(o.data):"kerning"===o.key?n.kernings.push(o.data):n[o.key]=o.data)}return n}},7480:e=>{var t=[66,77,70];function n(e,t,n){if(n>t.length-1)return 0;var r=t.readUInt8(n++),o=t.readInt32LE(n);switch(n+=4,r){case 1:e.info=function(e,t){var n={};n.size=e.readInt16LE(t);var r=e.readUInt8(t+2);return n.smooth=r>>7&1,n.unicode=r>>6&1,n.italic=r>>5&1,n.bold=r>>4&1,r>>3&1&&(n.fixedHeight=1),n.charset=e.readUInt8(t+3)||"",n.stretchH=e.readUInt16LE(t+4),n.aa=e.readUInt8(t+6),n.padding=[e.readInt8(t+7),e.readInt8(t+8),e.readInt8(t+9),e.readInt8(t+10)],n.spacing=[e.readInt8(t+11),e.readInt8(t+12)],n.outline=e.readUInt8(t+13),n.face=function(e,t){return i(e,t).toString("utf8")}(e,t+14),n}(t,n);break;case 2:e.common=function(e,t){var n={};return n.lineHeight=e.readUInt16LE(t),n.base=e.readUInt16LE(t+2),n.scaleW=e.readUInt16LE(t+4),n.scaleH=e.readUInt16LE(t+6),n.pages=e.readUInt16LE(t+8),e.readUInt8(t+10),n.packed=0,n.alphaChnl=e.readUInt8(t+11),n.redChnl=e.readUInt8(t+12),n.greenChnl=e.readUInt8(t+13),n.blueChnl=e.readUInt8(t+14),n}(t,n);break;case 3:e.pages=function(e,t,n){for(var r=[],o=i(e,t),a=o.length+1,s=n/a,l=0;l<s;l++)r[l]=e.slice(t,t+o.length).toString("utf8"),t+=a;return r}(t,n,o);break;case 4:e.chars=function(e,t,n){for(var i=[],r=n/20,o=0;o<r;o++){var a={},s=20*o;a.id=e.readUInt32LE(t+0+s),a.x=e.readUInt16LE(t+4+s),a.y=e.readUInt16LE(t+6+s),a.width=e.readUInt16LE(t+8+s),a.height=e.readUInt16LE(t+10+s),a.xoffset=e.readInt16LE(t+12+s),a.yoffset=e.readInt16LE(t+14+s),a.xadvance=e.readInt16LE(t+16+s),a.page=e.readUInt8(t+18+s),a.chnl=e.readUInt8(t+19+s),i[o]=a}return i}(t,n,o);break;case 5:e.kernings=function(e,t,n){for(var i=[],r=n/10,o=0;o<r;o++){var a={},s=10*o;a.first=e.readUInt32LE(t+0+s),a.second=e.readUInt32LE(t+4+s),a.amount=e.readInt16LE(t+8+s),i[o]=a}return i}(t,n,o)}return 5+o}function i(e,t){for(var n=t;n<e.length&&0!==e[n];n++);return e.slice(t,n)}e.exports=function(e){if(e.length<6)throw new Error("invalid buffer length for BMFont");var i=t.every(function(t,n){return e.readUInt8(n)===t});if(!i)throw new Error("BMFont missing BMF byte header");var r=3;if(e.readUInt8(r++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var o={kernings:[],chars:[]},a=0;a<5;a++)r+=n(o,e,r);return o}},7034:(e,t,n)=>{var i=n(7829),r=n(1896),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function a(e){var t=function(e){for(var t=[],n=0;n<e.attributes.length;n++)t.push(e.attributes[n]);return t}(e);return t.reduce(function(e,t){var n;return e[(n=t.nodeName,o[n.toLowerCase()]||n)]=t.nodeValue,e},{})}e.exports=function(e){e=e.toString();var t=r(e),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(e){var r=t.getElementsByTagName(e)[0];r&&(n[e]=i(a(r)))});var o=t.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var s=o.getElementsByTagName("page"),l=0;l<s.length;l++){var c=s[l],u=parseInt(c.getAttribute("id"),10),h=c.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(u,10)]=h}return["chars","kernings"].forEach(function(e){var r=t.getElementsByTagName(e)[0];if(r)for(var o=e.substring(0,e.length-1),s=r.getElementsByTagName(o),l=0;l<s.length;l++){var c=s[l];n[e].push(i(a(c)))}}),n}},7829:e=>{var t="chasrset";e.exports=function(e){for(var n in e=Object.assign({},e),t in e&&(e.charset=e[t],delete e[t]),e)"face"!==n&&"charset"!==n&&(e[n]="padding"===n||"spacing"===n?e[n].split(",").map(function(e){return parseInt(e,10)}):parseInt(e[n],10));return e}},3216:e=>{var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var n,i={},r=t(e).split("\n"),o=0;o<r.length;o++){var a=r[o],s=a.indexOf(":"),l=t(a.slice(0,s)).toLowerCase(),c=t(a.slice(s+1));void 0===i[l]?i[l]=c:(n=i[l],"[object Array]"===Object.prototype.toString.call(n)?i[l].push(c):i[l]=[i[l],c])}return i}},9035:(e,t,n)=>{var i=n(8480),r=n(8167),o=n(2225),a=[0,2,3],s=[2,1,3];e.exports=function(e,t){e&&(r(e)||o(e))||(t=e||{},e=null);for(var n="string"==typeof(t="number"==typeof t?{count:t}:t||{}).type?t.type:"uint16",l="number"==typeof t.count?t.count:1,c=t.start||0,u=!1!==t.clockwise?a:s,h=u[0],d=u[1],p=u[2],f=6*l,m=e||new(i(n))(f),g=0,v=0;g<f;g+=6,v+=4){var y=g+c;m[y+0]=v+0,m[y+1]=v+1,m[y+2]=v+2,m[y+3]=v+h,m[y+4]=v+d,m[y+5]=v+p}return m}},4433:(e,t,n)=>{var i=n(5651),r=n(9035),o=n(7106),a=n(1684);e.exports=function(e){return new s(e)};class s extends THREE.BufferGeometry{constructor(e){super(),"string"==typeof e&&(e={text:e}),this._opt=Object.assign({},e),e&&this.update(e)}update(e){if("string"==typeof e&&(e={text:e}),!(e=Object.assign({},this._opt,e)).font)throw new TypeError("must specify a { font } in options");this.layout=i(e);var t=!1!==e.flipY,n=e.font,a=n.common.scaleW,s=n.common.scaleH,l=this.layout.glyphs.filter(function(e){var t=e.data;return t.width*t.height>0});this.visibleGlyphs=l;var c=o.positions(l),u=o.uvs(l,a,s,t),h=r([],{clockwise:!0,type:"uint16",count:l.length});if(this.setIndex(h),this.setAttribute("position",new THREE.BufferAttribute(c,2)),this.setAttribute("uv",new THREE.BufferAttribute(u,2)),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var d=o.pages(l);this.setAttribute("page",new THREE.BufferAttribute(d,1))}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);a.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.boundingBox,t=this.attributes.position.array,n=this.attributes.position.itemSize;!t||!n||t.length<2?e.makeEmpty():a.computeBox(t,e)}}},1684:e=>{var t={min:[0,0],max:[0,0]};function n(e){var n=e.length/2;t.min[0]=e[0],t.min[1]=e[1],t.max[0]=e[0],t.max[1]=e[1];for(var i=0;i<n;i++){var r=e[2*i+0],o=e[2*i+1];t.min[0]=Math.min(r,t.min[0]),t.min[1]=Math.min(o,t.min[1]),t.max[0]=Math.max(r,t.max[0]),t.max[1]=Math.max(o,t.max[1])}}e.exports.computeBox=function(e,i){n(e),i.min.set(t.min[0],t.min[1],0),i.max.set(t.max[0],t.max[1],0)},e.exports.computeSphere=function(e,i){n(e);var r=t.min[0],o=t.min[1],a=t.max[0]-r,s=t.max[1]-o,l=Math.sqrt(a*a+s*s);i.center.set(r+a/2,o+s/2,0),i.radius=l/2}},7106:e=>{e.exports.pages=function(e){var t=new Float32Array(4*e.length*1),n=0;return e.forEach(function(e){var i=e.data.page||0;t[n++]=i,t[n++]=i,t[n++]=i,t[n++]=i}),t},e.exports.uvs=function(e,t,n,i){var r=new Float32Array(4*e.length*2),o=0;return e.forEach(function(e){var a=e.data,s=a.x+a.width,l=a.y+a.height,c=a.x/t,u=a.y/n,h=s/t,d=l/n;i&&(u=(n-a.y)/n,d=(n-l)/n),r[o++]=c,r[o++]=u,r[o++]=c,r[o++]=d,r[o++]=h,r[o++]=d,r[o++]=h,r[o++]=u}),r},e.exports.positions=function(e){var t=new Float32Array(4*e.length*2),n=0;return e.forEach(function(e){var i=e.data,r=e.position[0]+i.xoffset,o=e.position[1]+i.yoffset,a=i.width,s=i.height;t[n++]=r,t[n++]=o,t[n++]=r,t[n++]=o+s,t[n++]=r+a,t[n++]=o+s,t[n++]=r+a,t[n++]=o}),t}},5406:e=>{var t=/\n/,n=/\s/;function i(e,t,n,i){var r=e.indexOf(t,n);return-1===r||r>i?i:r}function r(e){return n.test(e)}function o(e,t,n,i){return{start:t,end:t+Math.min(i,n-t)}}e.exports=function(t,n){return e.exports.lines(t,n).map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(e,n){if(0===(n=n||{}).width&&"nowrap"!==n.mode)return[];e=e||"";var a="number"==typeof n.width?n.width:Number.MAX_VALUE,s=Math.max(0,n.start||0),l="number"==typeof n.end?n.end:e.length,c=n.mode,u=n.measure||o;return"pre"===c?function(e,n,i,r,o){for(var a=[],s=i,l=i;l<r&&l<n.length;l++){var c=n.charAt(l),u=t.test(c);if(u||l===r-1){var h=e(n,s,u?l:l+1,o);a.push(h),s=l+1}}return a}(u,e,s,l,a):function(e,t,n,o,a,s){var l=[],c=a;for("nowrap"===s&&(c=Number.MAX_VALUE);n<o&&n<t.length;){for(var u=i(t,"\n",n,o);n<u&&r(t.charAt(n));)n++;var h=e(t,n,u,c),d=n+(h.end-h.start),p=d+1;if(d<u){for(;d>n&&!r(t.charAt(d));)d--;if(d===n)p>n+1&&p--,d=p;else for(p=d;d>n&&r(t.charAt(d-1));)d--}if(d>=n){var f=e(t,n,d,c);l.push(f)}n=p}return l}(u,e,s,l,a,c)}},3558:(e,t,n)=>{var i=n(919),r=n(8847),o=n(3216),a=n(4597);function s(e,t,n){var i=e;return r(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=a(t,{uri:e}),i.callback=n,i}function l(e,t,n){return c(t=s(e,t,n))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=u.response?u.response:u.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(u),v)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!c){var t;clearTimeout(h),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var r=y,a=null;return 0!==t?(r={body:i(),statusCode:t,method:p,headers:{},url:d,rawRequest:u},u.getAllResponseHeaders&&(r.headers=o(u.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var s,c,u=e.xhr||null;u||(u=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var h,d=u.url=e.uri||e.url,p=u.method=e.method||"GET",f=e.body||e.data,m=u.headers=e.headers||{},g=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:u};if("json"in e&&!1!==e.json&&(v=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(a,0)},u.onload=a,u.onerror=r,u.onprogress=function(){},u.onabort=function(){c=!0},u.ontimeout=r,u.open(p,d,!g,e.username,e.password),g||(u.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(h=setTimeout(function(){if(!c){c=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),u.setRequestHeader)for(s in m)m.hasOwnProperty(s)&&u.setRequestHeader(s,m[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(f||null),u}e.exports=l,e.exports.default=l,l.XMLHttpRequest=i.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){l["delete"===e?"del":e]=function(t,n,i){return(n=s(t,n,i)).method=e.toUpperCase(),c(n)}})},1896:e=>{e.exports=void 0!==self.DOMParser?function(e){return(new self.DOMParser).parseFromString(e,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new self.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}},4597:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(e){var t=null,n=e;return{update:function(){var e;t("te").set((e=n.querySelectorAll("*"),Array.prototype.slice.call(e).filter(function(e){return e.isEntity}),e.length)),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(e){t=e},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:e=>{window.glStats=function(){var e=null,t=0,n=0,i=0,r=0,o=0,a=0,s=0;function l(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=l(WebGLRenderingContext.prototype.drawArrays,function(){t++,arguments[0]==this.POINTS?a+=arguments[2]:o+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=l(WebGLRenderingContext.prototype.drawElements,function(){n++,r+=arguments[1]/3,o+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=l(WebGLRenderingContext.prototype.useProgram,function(){i++}),WebGLRenderingContext.prototype.bindTexture=l(WebGLRenderingContext.prototype.bindTexture,function(){s++}),{update:function(){e("allcalls").set(t+n),e("drawElements").set(n),e("drawArrays").set(t),e("bindTexture").set(s),e("useProgram").set(i),e("glfaces").set(r),e("glvertices").set(o),e("glpoints").set(a)},start:function(){t=0,n=0,i=0,r=0,o=0,a=0,s=0},end:function(){},attach:function(t){e=t},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(e){var t=null;return{update:function(){var n,i;t("renderer.info.memory.geometries").set(e.info.memory.geometries),t("renderer.info.programs").set(null!==(n=null===(i=e.info.programs)||void 0===i?void 0:i.length)&&void 0!==n?n:NaN),t("renderer.info.memory.textures").set(e.info.memory.textures),t("renderer.info.render.calls").set(e.info.render.calls),t("renderer.info.render.triangles").set(e.info.render.triangles),t("renderer.info.render.points").set(e.info.render.points)},start:function(){},end:function(){},attach:function(e){t=e},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var e=null,t=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i=Math.log(1024);function r(e){var t=Math.floor(Math.log(e)/i);return Math.round(100*e/Math.pow(1024,t))/100}return{update:function(){t=r(performance.memory.usedJSHeapSize),n=r(performance.memory.totalJSHeapSize),e("memory").set(t),e("total").set(n)},start:function(){t=0},end:function(){},attach:function(t){e=t},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:e=>{!function(){"performance"in window==0&&(window.performance={});var e=window.performance;if("now"in e==0){var t=Date.now();e.timing&&e.timing.navigationStart&&(t=e.timing.navigationStart),e.now=function(){return Date.now()-t}}e.mark||(e.mark=function(){}),e.measure||(e.measure=function(){})}(),window.rStats=function(e){function t(e,t){for(var n=Object.keys(e),i=0,r=n.length;i<r;i++)t(n[i])}var n=e||{},i=n.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],r=(n.CSSPath?n.CSSPath:"")+"rStats.css";(n.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",r]).forEach(function(e){var t,n;t=e,(n=document.createElement("link")).href=t,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)}),n.values||(n.values={});var o,a,s=10,l={};function c(e,t,n){var i=n||{},r=document.createElement("canvas"),o=r.getContext("2d"),a=0,l=0,c=i.color?i.color:"#666666",u=document.createElement("canvas"),h=u.getContext("2d");u.width=1,u.height=20,h.fillStyle="#444444",h.fillRect(0,0,1,20),h.fillStyle=c,h.fillRect(0,s,1,s),h.fillStyle="#ffffff",h.globalAlpha=.5,h.fillRect(0,s,1,1),h.globalAlpha=1;var d=document.createElement("canvas"),p=d.getContext("2d");return d.width=1,d.height=20,p.fillStyle="#444444",p.fillRect(0,0,1,20),p.fillStyle="#b70000",p.fillRect(0,s,1,s),p.globalAlpha=.5,p.fillStyle="#ffffff",p.fillRect(0,s,1,1),p.globalAlpha=1,r.width=200,r.height=s,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(e,t){(l+=.1*(e-l))>(a*=.99)&&(a=l),o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),t?o.drawImage(d,r.width-1,r.height-l*r.height/a-s):o.drawImage(u,r.width-1,r.height-l*r.height/a-s)}}}function u(e,n){var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=200,r.height=s*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(e){o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;t(e,function(t){var a=e[t]*r.height;o.fillStyle=i[t],o.fillRect(r.width-1,n,1,a),n+=a})}}}function h(e,t){var i,r=e,o=0,s=0,l=0,u=0,h=performance.now(),d=0,p=document.createElement("div"),f=document.createElement("span"),m=document.createElement("div"),g=document.createTextNode(""),v=n?n.values[r.toLowerCase()]:null,y=new c(p,r,v),A=!1;function b(e){if(v&&v.average){u+=e,d++;var t=performance.now();t-h>=(v.avgMs||1e3)&&(l=u/d,u=0,h=t,d=0)}}function x(){i=performance.now(),n.userTimingAPI&&performance.mark(r+"-start"),A=!0}function _(){o=performance.now()-i,n.userTimingAPI&&(performance.mark(r+"-end"),A&&performance.measure(r,r+"-start",r+"-end")),b(o)}return f.className="rs-counter-id",f.textContent=v&&v.caption?v.caption:r,m.className="rs-counter-value",m.appendChild(g),p.appendChild(f),p.appendChild(m),t?t.div.appendChild(p):a.appendChild(p),i=performance.now(),{set:function(e){b(o=e)},start:x,tick:function(){_(),x()},end:_,frame:function(){var e=performance.now(),t=e-i;s++,t>1e3&&(o=v&&!1===v.interpolate?s:1e3*s/t,s=0,i=e,b(o))},value:function(){return o},draw:function(){var e=v&&v.average?l:o;g.nodeValue=Math.round(100*e)/100;var t=v&&(v.below&&o<v.below||v.over&&o>v.over);y.draw(o,t),p.className=t?"rs-counter-base alarm":"rs-counter-base"}}}function d(e){var i=e.toLowerCase();if(void 0===i&&(i="default"),l[i])return l[i];var r=null;n&&n.groups&&t(n.groups,function(e){var t=n.groups[parseInt(e,10)];r||-1===t.values.indexOf(i.toLowerCase())||(r=t)});var o=new h(i,r);return l[i]=o,o}function p(){t(n.plugins,function(e){n.plugins[e].update()}),t(l,function(e){l[e].draw()}),n&&n.fractions&&t(n.fractions,function(e){var i=n.fractions[parseInt(e,10)],r=[],o=l[i.base.toLowerCase()];o&&(o=o.value(),t(n.fractions[e].steps,function(t){var i=n.fractions[e].steps[parseInt(t,10)].toLowerCase(),a=l[i];a&&r.push(a.value()/o)})),i.graph.draw(r)})}return function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var e=0;e<n.plugins.length;e++)n.plugins[e].attach(d),t(n.plugins[e].values,function(t){n.values[t]=n.plugins[e].values[t]}),n.groups=n.groups.concat(n.plugins[e].groups),n.fractions=n.fractions.concat(n.plugins[e].fractions)}else n.plugins={};(o=document.createElement("div")).className="rs-base",(a=document.createElement("div")).className="rs-container",a.style.height="auto",o.appendChild(a),document.body.appendChild(o),n&&(n.groups&&t(n.groups,function(e){var t=n.groups[parseInt(e,10)],i=document.createElement("div");i.className="rs-group",t.div=i;var r=document.createElement("h1");r.textContent=t.caption,r.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(i)),a.appendChild(r),a.appendChild(i)}),n.fractions&&t(n.fractions,function(e){var r=n.fractions[parseInt(e,10)],o=document.createElement("div");o.className="rs-fraction";var l=document.createElement("div");l.className="rs-legend";var c=0;t(n.fractions[e].steps,function(t){var r=document.createElement("p");r.textContent=n.fractions[e].steps[t],r.style.color=i[c],l.appendChild(r),c++}),o.appendChild(l),o.style.height=c*s+"px",r.div=o;var h=new u(o,c);r.graph=h,a.appendChild(o)}))}(),function(e){return e?d(e):{element:o,update:p}}},e.exports=window.rStats},2535:e=>{var t={base64:function(e,t){return"data:"+e+";base64,"+t},isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},appendQueryParameter:function(e,t,n){var i=e.indexOf("?")<0?"?":"&";return e+(i+t+"=")+n},getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}};e.exports=t},5928:(e,t,n)=>{var i,r=n(2535);e.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){e&&(clearInterval(e),e=null)}}:function(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()}),this.request=function(){e.paused&&(e.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),e.play())},this.release=function(){e.pause(),e.src=""}}},8217:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(963),r=n.n(i),o=n(9089),a=n.n(o),s=n(6492),l=n.n(s),c=new URL(n(9169),n.b),u=new URL(n(6085),n.b),h=new URL(n(3931),n.b),d=new URL(n(7889),n.b),p=new URL(n(6517),n.b),f=a()(r()),m=l()(c),g=l()(u),v=l()(h),y=l()(d),A=l()(p);f.push([e.id,"/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(".concat(m,") 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(").concat(g,") 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(").concat(v,");\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(").concat(y,') center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: "Insert phone into Cardboard holder.";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(').concat(A,") no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n"),"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:["/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E\");\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: \"Insert phone into Cardboard holder.\";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n"],sourceRoot:""}]);const b=f},2470:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(963),r=n.n(i),o=n(9089),a=n.n(o)()(r());a.push([e.id,".rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n","",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[".rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n"],sourceRoot:""}]);const s=a},7180:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(5072),r=n.n(i),o=n(7825),a=n.n(o),s=n(7659),l=n.n(s),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),p=n(1113),f=n.n(p),m=n(8217),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d(),r()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},9379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(5072),r=n.n(i),o=n(7825),a=n.n(o),s=n(7659),l=n.n(s),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),p=n(1113),f=n.n(p),m=n(2470),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d(),r()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},5072:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],c=i.base?l[0]+i.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=r(p,i);i.byIndex=s,t.splice(s,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=i(e,r),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},7659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},3931:e=>{e.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},wm={};function Em(e){var t=wm[e];if(void 0!==t)return t.exports;var n=wm[e]={id:e,exports:{}};return _m[e](n,n.exports,Em),n.exports}Em.m=_m,Em.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Em.d(t,{a:t}),t},Em.d=(e,t)=>{for(var n in t)Em.o(t,n)&&!Em.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Em.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(QJ){if("object"==typeof window)return window}}(),Em.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Em.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Em.b=document.baseURI||self.location.href,Em.nc=void 0;var Cm={};Em.d(Cm,{A:()=>lT});var Sm={};Em.r(Sm),Em.d(Sm,{computeMikkTSpaceTangents:()=>rv,computeMorphedAttributes:()=>fv,deepCloneAttribute:()=>sv,deinterleaveAttribute:()=>cv,deinterleaveGeometry:()=>uv,estimateBytesUsed:()=>hv,interleaveAttributes:()=>lv,mergeAttributes:()=>av,mergeGeometries:()=>ov,mergeGroups:()=>mv,mergeVertices:()=>dv,toCreasedNormals:()=>gv,toTrianglesDrawMode:()=>pv});var Tm={};Em.r(Tm),Em.d(Tm,{checkARSupport:()=>QA,checkHeadsetConnected:()=>GA,checkVRSupport:()=>WA,isAppleVisionPro:()=>ZA,isBrowserEnvironment:()=>ab,isFirefoxReality:()=>nb,isIOS:()=>$A,isIpad:()=>JA,isLandscape:()=>ob,isMobile:()=>YA,isMobileDeviceRequestingDesktopSite:()=>eb,isMobileVR:()=>ib,isNodeEnvironment:()=>sb,isOculusBrowser:()=>tb,isR7:()=>rb,isTablet:()=>KA,isWebXRAvailable:()=>jA});var Im={};Em.r(Im),Em.d(Im,{clearObject:()=>hb,createPool:()=>ub,removeUnusedKeys:()=>db});var Mm={};Em.r(Mm),Em.d(Mm,{equals:()=>Ab,isCoordinate:()=>xb,isCoordinates:()=>bb,parse:()=>vb,regex:()=>mb,stringify:()=>yb,toVector3:()=>wb});var km={};Em.r(km),Em.d(km,{getComponentProperty:()=>Sb,getComponentPropertyPath:()=>Cb,setComponentProperty:()=>Tb});var Rm={};Em.r(Rm),Em.d(Rm,{parseUrl:()=>Bb,validateCubemapSrc:()=>Lb,validateEnvMapSrc:()=>Rb,validateSrc:()=>kb});var Lm={};Em.r(Lm),Em.d(Lm,{createCompatibleTexture:()=>Qb,handleTextureEvents:()=>Hb,isCompatibleTexture:()=>Gb,setTextureProperties:()=>Nb,updateDistortionMap:()=>Ub,updateEnvMap:()=>Vb,updateMap:()=>zb,updateMapMaterialFromData:()=>Fb});var Bm={};Em.r(Bm),Em.d(Bm,{parse:()=>qb,stringify:()=>Xb,toCamelCase:()=>Yb});var Pm={};Em.r(Pm),Em.d(Pm,{checkControllerPresentAndSetup:()=>tx,emitIfAxesChanged:()=>rx,findMatchingControllerWebXR:()=>ix,isControllerPresentWebXR:()=>nx,onButtonEvent:()=>ox});var Dm={};Em.r(Dm),Em.d(Dm,{bind:()=>sx,checkHeadsetConnected:()=>lx,clone:()=>vx,coordinates:()=>Mm,debounce:()=>fx,debug:()=>DA,deepEqual:()=>bx,device:()=>Tm,diff:()=>xx,entity:()=>km,extend:()=>mx,extendDeep:()=>gx,findAllScenes:()=>Tx,forceCanvasResizeSafariMobile:()=>Ib,getElData:()=>Ex,getUrlParameter:()=>Cx,isIOS:()=>cx,isIframed:()=>Sx,isMobile:()=>ux,material:()=>Lm,objectPool:()=>Im,shouldCaptureKeyEvent:()=>_x,split:()=>Eb,splitString:()=>wx,srcLoader:()=>Rm,styleParser:()=>Bm,throttle:()=>hx,throttleLeadingAndTrailing:()=>dx,throttleTick:()=>px,trackedControls:()=>Pm});var Om={};Em.r(Om),Em.d(Om,{isSingleProperty:()=>r_,parseProperties:()=>l_,parseProperty:()=>c_,process:()=>o_,processPropertyDefinition:()=>a_,stringifyProperties:()=>u_,stringifyProperty:()=>h_});var Nm={};Em.r(Nm),Em.d(Nm,{Component:()=>S_,components:()=>d_,registerComponent:()=>I_,registrationOrderWarnings:()=>T_});var Fm={};Em.r(Fm),Em.d(Fm,{System:()=>D_,registerSystem:()=>O_,systems:()=>P_});var zm={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Um={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},jm=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Vm={CSS:{},springs:{}};function Hm(e,t,n){return Math.min(Math.max(e,t),n)}function Gm(e,t){return e.indexOf(t)>-1}function Qm(e,t){return e.apply(null,t)}var Wm=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,qm=/^rgb/,Xm=/^hsl/,Ym={arr:function(e){return Array.isArray(e)},obj:function(e){return Gm(Object.prototype.toString.call(e),"Object")},pth:function(e){return Ym.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Ym.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return Wm.test(e)},rgb:function(e){return qm.test(e)},hsl:function(e){return Xm.test(e)},col:function(e){return Ym.hex(e)||Ym.rgb(e)||Ym.hsl(e)},key:function(e){return!zm.hasOwnProperty(e)&&!Um.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}},Km=/\(([^)]+)\)/;function Jm(e){var t=Km.exec(e);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function Zm(e,t){var n=Jm(e),i=Hm(Ym.und(n[0])?1:n[0],.1,100),r=Hm(Ym.und(n[1])?100:n[1],.1,100),o=Hm(Ym.und(n[2])?10:n[2],.1,100),a=Hm(Ym.und(n[3])?0:n[3],.1,100),s=Math.sqrt(r/i),l=o/(2*Math.sqrt(r*i)),c=l<1?s*Math.sqrt(1-l*l):0,u=l<1?(l*s-a)/c:-a+s;function h(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*s)*(1*Math.cos(c*n)+u*Math.sin(c*n)):(1+u*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?h:function(){var t=Vm.springs[e];if(t)return t;for(var n=1/6,i=0,r=0;;)if(1===h(i+=n)){if(++r>=16)break}else r=0;var o=i*n*1e3;return Vm.springs[e]=o,o}}function $m(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=Hm(e,1,10),i=Hm(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}function eg(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var tg=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function i(e){return 3*e}function r(e,r,o){return((t(r,o)*e+n(r,o))*e+i(r))*e}function o(e,r,o){return 3*t(r,o)*e*e+2*n(r,o)*e+i(r)}return function(t,n,i,a){if(0<=t&&t<=1&&0<=i&&i<=1){var s=new Float32Array(11);if(t!==n||i!==a)for(var l=0;l<11;++l)s[l]=r(l*e,t,i);return function(l){return t===n&&i===a||0===l||1===l?l:r(function(n){for(var a=0,l=1;10!==l&&s[l]<=n;++l)a+=e;--l;var c=a+(n-s[l])/(s[l+1]-s[l])*e,u=o(c,t,i);return u>=.001?function(e,t,n,i){for(var a=0;a<4;++a){var s=o(t,n,i);if(0===s)return t;t-=(r(t,n,i)-e)/s}return t}(n,c,t,i):0===u?c:function(e,t,n,i,o){var a,s,l=0;do{(a=r(s=t+(n-t)/2,i,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(n,a,a+e,t,i)}(l),n,a)}}}}(),ng=function(){var e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],$m],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,t){return function(n){return 1-$m(e,t)(1-n)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,t){return function(n){return n<.5?$m(e,t)(2*n)/2:1-$m(e,t)(-2*n+2)/2}}]},n={linear:[.25,.25,.75,.75]};for(var i in t)for(var r=0,o=t[i].length;r<o;r++)n["ease"+i+e[r]]=t[i][r];return n}();function ig(e,t){if(Ym.fnc(e))return e;var n=e.split("(")[0],i=ng[n],r=Jm(e);switch(n){case"spring":return Zm(e,t);case"cubicBezier":return Qm(tg,r);case"steps":return Qm(eg,r);default:return Ym.fnc(i)?Qm(i,r):Qm(tg,i)}}function rg(e){try{return document.querySelectorAll(e)}catch(e){return}}var og=[];function ag(e,t){for(var n=og,i=e.length,r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&n.push(a)}return(og=e).length=0,n}function sg(e,t){t||(t=[]);for(var n=0,i=e.length;n<i;n++){var r=e[n];Array.isArray(r)?sg(r,t):t.push(r)}return t}function lg(e){return Ym.arr(e)?e:(Ym.str(e)&&(e=rg(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function cg(e,t){return e.some(function(e){return e===t})}function ug(e){var t={};for(var n in e)t[n]=e[n];return t}function hg(e,t){var n=ug(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function dg(e,t){var n=ug(e);for(var i in t)n[i]=Ym.und(e[i])?t[i]:e[i];return n}var pg=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,fg=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,mg=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,gg=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,vg=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,yg=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Ag(e){var t=yg.exec(e);if(t)return t[2]}function bg(e,t){return Ym.fnc(e)?e(t.target,t.id,t.total):e}function xg(e,t){return e.getAttribute(t)}function _g(e,t,n){if(cg([n,"deg","rad","turn"],Ag(t)))return t;var i=Vm.CSS[t+n];if(!Ym.und(i))return i;var r=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(r),r.style.position="absolute",r.style.width=100+n;var a=100/r.offsetWidth;o.removeChild(r);var s=a*parseFloat(t);return Vm.CSS[t+n]=s,s}function wg(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?_g(e,r,n):r}}function Eg(e,t){return Ym.dom(e)&&!Ym.inp(e)&&(xg(e,t)||Ym.svg(e)&&e[t])?"attribute":Ym.dom(e)&&cg(jm,t)?"transform":Ym.dom(e)&&"transform"!==t&&wg(e,t)?"css":null!=e[t]?"object":void 0}var Cg=/(\w+)\(([^)]*)\)/g;function Sg(e){if(Ym.dom(e)){for(var t,n=e.style.transform||"",i=new Map;t=Cg.exec(n);)i.set(t[1],t[2]);return i}}function Tg(e,t,n,i){switch(Eg(e,t)){case"transform":return function(e,t,n,i){var r=Gm(t,"scale")?1:0+function(e){return Gm(e,"translate")||"perspective"===e?"px":Gm(e,"rotate")||Gm(e,"skew")?"deg":void 0}(t),o=Sg(e).get(t)||r;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),i?_g(e,o,i):o}(e,t,i,n);case"css":return wg(e,t,n);case"attribute":return xg(e,t);default:return e[t]||0}}var Ig=/^(\*=|\+=|-=)/;function Mg(e,t){var n=Ig.exec(e);if(!n)return e;var i=Ag(e)||0,r=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+o+i;case"-":return r-o+i;case"*":return r*o+i}}var kg=/\s/g;function Rg(e,t){if(Ym.col(e))return function(e){return Ym.rgb(e)?(t=e,(n=pg.exec(t))?"rgba("+n[1]+",1)":t):Ym.hex(e)?function(e){var t=e.replace(fg,function(e,t,n,i){return t+t+n+n+i+i}),n=mg.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):Ym.hsl(e)?function(e){var t,n,i,r=gg.exec(e)||vg.exec(e),o=parseInt(r[1],10)/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,l=r[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=i=s;else{var u=s<.5?s*(1+a):s+a-s*a,h=2*s-u;t=c(h,u,o+1/3),n=c(h,u,o),i=c(h,u,o-1/3)}return"rgba("+255*t+","+255*n+","+255*i+","+l+")"}(e):void 0;var t,n}(e);var n=Ag(e),i=n?e.substr(0,e.length-n.length):e;return t&&!kg.test(e)?i+t:i}function Lg(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bg(e){for(var t,n=e.points,i=0,r=0;r<n.numberOfItems;r++){var o=n.getItem(r);r>0&&(i+=Lg(t,o)),t=o}return i}function Pg(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*xg(e,"r")}(e);case"rect":return function(e){return 2*xg(e,"width")+2*xg(e,"height")}(e);case"line":return function(e){return Lg({x:xg(e,"x1"),y:xg(e,"y1")},{x:xg(e,"x2"),y:xg(e,"y2")})}(e);case"polyline":return Bg(e);case"polygon":return function(e){var t=e.points;return Bg(e)+Lg(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Dg(e,t){var n=t||{},i=n.el||function(e){for(var t=e.parentNode;Ym.svg(t)&&(t=t.parentNode,Ym.svg(t.parentNode)););return t}(e),r=i.getBoundingClientRect(),o=xg(i,"viewBox"),a=r.width,s=r.height,l=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function Og(e,t){function n(n){void 0===n&&(n=0);var i=t+n>=1?t+n:0;return e.el.getPointAtLength(i)}var i=Dg(e.el,e.svg),r=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}var Ng=/-?\d*\.?\d+/g;function Fg(e,t){var n=Rg(Ym.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(Ng)?n.match(Ng).map(Number):[0],strings:Ym.str(e)||t?n.split(Ng):[]}}function zg(e){return ag(e?sg(Ym.arr(e)?e.map(lg):lg(e)):[],function(e,t,n){return n.indexOf(e)===t})}function Ug(e){var t=zg(e);return t.map(function(e,n){return{target:e,id:n,total:t.length,transforms:{list:Sg(e)}}})}var jg=/^spring/;function Vg(e,t){var n=ug(t);if(jg.test(n.easing)&&(n.duration=Zm(n.easing)),Ym.arr(e)){var i=e.length;2!==i||Ym.obj(e[0])?Ym.fnc(t.duration)||(n.duration=t.duration/i):e={value:e}}var r=Ym.arr(e)?e:[e];return r.map(function(e,n){var i=Ym.obj(e)&&!Ym.pth(e)?e:{value:e};return Ym.und(i.delay)&&(i.delay=n?0:t.delay),Ym.und(i.endDelay)&&(i.endDelay=n===r.length-1?t.endDelay:0),i}).map(function(e){return dg(e,n)})}var Hg={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var o="";i.list.forEach(function(e,t){o+=t+"("+e+") "}),e.style.transform=o}}};function Gg(e,t){for(var n=Ug(e),i=0,r=n.length;i<r;i++){var o=n[i];for(var a in t){var s=bg(t[a],o),l=o.target,c=Ag(s),u=Tg(l,a,c,o),h=Mg(Rg(s,c||Ag(u)),u),d=Eg(l,a);Hg[d](l,a,h,o.transforms,!0)}}}function Qg(e,t){var n=e.length,i=function(e){return e.timelineOffset?e.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map(function(e){return i(e)+e.duration})):t.duration,r.delay=n?Math.min.apply(Math,e.map(function(e){return i(e)+e.delay})):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map(function(e){return i(e)+e.duration-e.endDelay})):t.endDelay,r}var Wg,qg=0,Xg=[],Yg=[],Kg=function(){function e(){Wg=requestAnimationFrame(t)}function t(t){var n=Xg.length;if(n){for(var i=0;i<n;){var r=Xg[i];if(r.paused){var o=Xg.indexOf(r);o>-1&&(Xg.splice(o,1),n=Xg.length)}else r.tick(t);i++}e()}else Wg=cancelAnimationFrame(Wg)}return e}();function Jg(e){void 0===e&&(e={});var t,n=0,i=0,r=0,o=0,a=null;function s(){return window.Promise&&new Promise(function(e){return a=e})}var l=s(),c=function(e){var t=hg(zm,e),n=hg(Um,e),i=function(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=dg(function(e){for(var t=ag(sg(e.map(function(e){return Object.keys(e)})),function(e){return Ym.key(e)}).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),n={},i=function(i){var r=t[i];n[r]=e.map(function(e){var t={};for(var n in e)Ym.key(n)?n==r&&(t.value=e[n]):t[n]=e[n];return t})},r=0;r<t.length;r++)i(r);return n}(i),t)),t)Ym.key(r)&&n.push({name:r,tweens:Vg(t[r],e)});return n}(n,e),r=Ug(e.targets),o=function(e,t){return ag(sg(e.map(function(e){return t.map(function(t){return function(e,t){var n=Eg(e.target,t.name);if(n){var i=function(e,t){var n;return e.tweens.map(function(i){var r=function(e,t){var n={};for(var i in e){var r=bg(e[i],t);Ym.arr(r)&&1===(r=r.map(function(e){return bg(e,t)})).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),o=r.value,a=Ym.arr(o)?o[1]:o,s=Ag(a),l=Tg(t.target,e.name,s,t),c=n?n.to.original:l,u=Ym.arr(o)?o[0]:c,h=Ag(u)||Ag(l),d=s||h;return Ym.und(a)&&(a=c),r.from=Fg(u,d),r.to=Fg(Mg(a,u),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=ig(r.easing,r.duration),r.isPath=Ym.pth(o),r.isColor=Ym.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(e,t)})})),function(e){return!Ym.und(e)})}(r,i),a=Qg(o,n),s=qg;return qg++,dg(t,{id:s,children:[],animatables:r,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);function u(){c.reversed=!c.reversed;for(var e=0,n=t.length;e<n;e++)t[e].reversed=c.reversed}function h(e){return c.reversed?c.duration-e:e}function d(){n=0,i=h(c.currentTime)*(1/Jg.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function f(e){for(var t=0,n=c.animations,i=n.length;t<i;){var r=n[t],o=r.animatable,a=r.tweens,s=a.length-1,l=a[s];s&&(l=ag(a,function(t){return e<t.end})[0]||l);for(var u=Hm(e-l.start-l.delay,0,l.duration)/l.duration,h=isNaN(u)?1:l.easing(u),d=l.to.strings,p=l.round,f=[],m=l.to.numbers.length,g=void 0,v=0;v<m;v++){var y=void 0,A=l.to.numbers[v],b=l.from.numbers[v]||0;y=l.isPath?Og(l.value,h*A):b+h*(A-b),p&&(l.isColor&&v>2||(y=Math.round(y*p)/p)),f.push(y)}var x=d.length;if(x){g=d[0];for(var _=0;_<x;_++){d[_];var w=d[_+1],E=f[_];isNaN(E)||(g+=w?E+w:E+" ")}}else g=f[0];Hg[r.type](o.target,r.property,g,o.transforms),r.currentValue=g,t++}}function m(e){c[e]&&!c.passThrough&&c[e](c)}function g(e){var d=c.duration,g=c.delay,v=d-c.endDelay,y=h(e);c.progress=Hm(y/d*100,0,100),c.reversePlayback=y<c.currentTime,t&&function(e){if(c.reversePlayback)for(var n=o;n--;)p(e,t[n]);else for(var i=0;i<o;i++)p(e,t[i])}(y),!c.began&&c.currentTime>0&&(c.began=!0,m("begin"),m("loopBegin")),y<=g&&0!==c.currentTime&&f(0),(y>=v&&c.currentTime!==d||!d)&&f(d),y>g&&y<v?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,m("changeBegin")),m("change"),f(y)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,m("changeComplete")),c.currentTime=Hm(y,0,d),c.began&&m("update"),e>=d&&(i=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(n=r,m("loopComplete"),m("loopBegin"),"alternate"===c.direction&&u()):(c.paused=!0,c.completed||(c.completed=!0,m("loopComplete"),m("complete"),"Promise"in window&&(a(),l=s()))))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var n=o=t.length;n--;)c.children[n].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,f(0)},c.set=function(e,t){return Gg(e,t),c},c.tick=function(e){r=e,n||(n=r),g((r+(i-n))*Jg.speed)},c.seek=function(e){g(h(e))},c.pause=function(){c.paused=!0,d()},c.play=function(){c.paused&&(c.paused=!1,Xg.push(c),d(),Wg||Kg())},c.reverse=function(){u(),d()},c.restart=function(){c.reset(),c.play()},c.finished=l,c.reset(),c.autoplay&&c.play(),c}function Zg(e,t){for(var n=t.length;n--;)cg(e,t[n].animatable.target)&&t.splice(n,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var e=0,t=Xg.length;e<t;e++)activeInstance[e].pause();Yg=Xg.slice(0),Xg=[]}else for(var n=0,i=Yg.length;n<i;n++)Yg[n].play()}),Jg.version="3.0.0",Jg.speed=1,Jg.running=Xg,Jg.remove=function(e){for(var t=zg(e),n=Xg.length;n--;){var i=Xg[n],r=i.animations,o=i.children;Zg(t,r);for(var a=o.length;a--;){var s=o[a],l=s.animations;Zg(t,l),l.length||s.children.length||o.splice(a,1)}r.length||o.length||i.pause()}},Jg.get=Tg,Jg.set=Gg,Jg.convertPx=_g,Jg.path=function(e,t){var n=Ym.str(e)?rg(e)[0]:e,i=t||100;return function(e){return{property:e,el:n,svg:Dg(n),totalLength:Pg(n)*(i/100)}}},Jg.setDashoffset=function(e){var t=Pg(e);return e.setAttribute("stroke-dasharray",t),t},Jg.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?ig(t.easing):null,r=t.grid,o=t.axis,a=t.from||0,s="first"===a,l="center"===a,c="last"===a,u=Ym.arr(e),h=u?parseFloat(e[0]):parseFloat(e),d=u?parseFloat(e[1]):0,p=Ag(u?e[1]:e)||0,f=t.start||0+(u?h:0),m=[],g=0;return function(e,t,v){if(s&&(a=0),l&&(a=(v-1)/2),c&&(a=v-1),!m.length){for(var y=0;y<v;y++){if(r){var A=l?(r[0]-1)/2:a%r[0],b=l?(r[1]-1)/2:Math.floor(a/r[0]),x=A-y%r[0],_=b-Math.floor(y/r[0]),w=Math.sqrt(x*x+_*_);"x"===o&&(w=-x),"y"===o&&(w=-_),m.push(w)}else m.push(Math.abs(a-y));g=Math.max.apply(Math,m)}i&&(m=m.map(function(e){return i(e/g)*g})),"reverse"===n&&(m=m.map(function(e){return o?e<0?-1*e:-e:Math.abs(g-e)}))}return f+(u?(d-h)/g:h)*(Math.round(100*m[t])/100)+p}},Jg.timeline=function(e){void 0===e&&(e={});var t=Jg(e);return t.duration=0,t.add=function(n,i){var r=Xg.indexOf(t),o=t.children;function a(e){e.passThrough=!0}r>-1&&Xg.splice(r,1);for(var s=0;s<o.length;s++)a(o[s]);var l=dg(n,hg(Um,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Ym.und(i)?c:Mg(i,c),a(t),t.seek(l.timelineOffset);var u=Jg(l);a(u),o.push(u);var h=Qg(o,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Jg.easing=ig,Jg.penner=ng,Jg.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const $g=Jg,ev=e,tv=new WeakMap;class nv extends ev.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new ev.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{this.parse(e,t,i)},n,i)}parse(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this.decodeDracoFile(e,t,null,null,ev.SRGBColorSpace,n).catch(n)}decodeDracoFile(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ev.LinearSRGBColorSpace,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>{};const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const n=JSON.stringify(t);if(tv.has(e)){const t=tv.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(n=>(i=n,new Promise((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),tv.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new ev.BufferGeometry;e.index&&t.setIndex(new ev.BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,o=i.array,a=i.itemSize,s=new ev.BufferAttribute(o,a);"color"===r&&(this._assignVertexColorSpace(s,i.vertexColorSpace),s.normalized=o instanceof Float32Array==0),t.setAttribute(r,s)}return t}_assignVertexColorSpace(e,t){if(t!==ev.SRGBColorSpace)return;const n=new ev.Color;for(let i=0,r=e.count;i<r;i++)n.fromBufferAttribute(e,i),ev.ColorManagement.toWorkingColorSpace(n,ev.SRGBColorSpace),e.setXYZ(i,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new ev.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,i)=>{n.load(e,t,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=iv.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function iv(){let e,t;function n(e,t,n,i,r,o){const a=o.num_components(),s=n.num_points()*a,l=s*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);const h=new r(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:i,array:h,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const i=r.buffer,o=r.taskConfig;t.then(e=>{const t=e.draco,a=new t.Decoder;try{const e=function(e,t,i,r){const o=r.attributeIDs,a=r.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeArrayToMesh(i,i.byteLength,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeArrayToPointCloud(i,i.byteLength,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in o){const i=self[a[h]];let l,c;if(r.useUniqueIDs)c=o[h],l=t.GetAttributeByUniqueId(s,c);else{if(c=t.GetAttributeId(s,e[o[h]]),-1===c)continue;l=t.GetAttribute(s,c)}const d=n(e,t,s,h,i,l);"color"===h&&(d.vertexColorSpace=r.vertexColorSpace),u.attributes.push(d)}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const i=3*n.num_faces(),r=4*i,o=e._malloc(r);t.GetTrianglesUInt32Array(n,r,o);const a=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:a,itemSize:1}}(e,t,s)),e.destroy(s),u}(t,a,new Int8Array(i),o),s=e.attributes.map(e=>e.array.buffer);e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},s)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(a)}})}}}function rv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!e.hasAttribute("position")||!e.hasAttribute("normal")||!e.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(e){if(e.normalized||e.isInterleavedBufferAttribute){const t=new Float32Array(e.count*e.itemSize);for(let n=0,i=0;n<e.count;n++)t[i++]=e.getX(n),t[i++]=e.getY(n),e.itemSize>2&&(t[i++]=e.getZ(n));return t}return e.array instanceof Float32Array?e.array:new Float32Array(e.array)}const r=e.index?e.toNonIndexed():e,o=t.generateTangents(i(r.attributes.position),i(r.attributes.normal),i(r.attributes.uv));if(n)for(let a=3;a<o.length;a+=4)o[a]*=-1;return r.setAttribute("tangent",new ev.BufferAttribute(o,4)),e!==r&&e.copy(r),e}function ov(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new ev.BufferGeometry;let c=0;for(let u=0;u<e.length;++u){const h=e[u];let d=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const e in h.attributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[e]&&(o[e]=[]),o[e].push(h.attributes[e]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const e in h.morphAttributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(h.morphAttributes[e])}if(t){let e;if(n)e=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;e=h.attributes.position.count}l.addGroup(c,e,u),c+=e}}if(n){let t=0;const n=[];for(let i=0;i<e.length;++i){const r=e[i].index;for(let e=0;e<r.count;++e)n.push(r.getX(e)+t);t+=e[i].attributes.position.count}l.setIndex(n)}for(const u in o){const e=av(o[u]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,e)}for(const u in a){const e=a[u][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let t=0;t<e;++t){const e=[];for(let i=0;i<a[u].length;++i)e.push(a[u][i][t]);const n=av(e);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(n)}}return l}function av(e){let t,n,i,r=-1,o=0;for(let c=0;c<e.length;++c){const a=e[c];if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=a.normalized),i!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===r&&(r=a.gpuType),r!==a.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;o+=a.count*n}const a=new t(o),s=new ev.BufferAttribute(a,n,i);let l=0;for(let c=0;c<e.length;++c){const t=e[c];if(t.isInterleavedBufferAttribute){const e=l/n;for(let i=0,r=t.count;i<r;i++)for(let o=0;o<n;o++){const n=t.getComponent(i,o);s.setComponent(i+e,o,n)}}else a.set(t.array,l);l+=t.count*n}return void 0!==r&&(s.gpuType=r),s}function sv(e){return e.isInstancedInterleavedBufferAttribute||e.isInterleavedBufferAttribute?cv(e):e.isInstancedBufferAttribute?(new ev.InstancedBufferAttribute).copy(e):(new ev.BufferAttribute).copy(e)}function lv(e){let t,n=0,i=0;for(let c=0,u=e.length;c<u;++c){const r=e[c];if(void 0===t&&(t=r.array.constructor),t!==r.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=r.array.length,i+=r.itemSize}const r=new ev.InterleavedBuffer(new t(n),i);let o=0;const a=[],s=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let c=0,u=e.length;c<u;c++){const t=e[c],n=t.itemSize,i=t.count,u=new ev.InterleavedBufferAttribute(r,n,o,t.normalized);a.push(u),o+=n;for(let e=0;e<i;e++)for(let i=0;i<n;i++)u[l[i]](e,t[s[i]](e))}return a}function cv(e){const t=e.data.array.constructor,n=e.count,i=e.itemSize,r=e.normalized,o=new t(n*i);let a;a=e.isInstancedInterleavedBufferAttribute?new ev.InstancedBufferAttribute(o,i,r,e.meshPerAttribute):new ev.BufferAttribute(o,i,r);for(let s=0;s<n;s++)a.setX(s,e.getX(s)),i>=2&&a.setY(s,e.getY(s)),i>=3&&a.setZ(s,e.getZ(s)),i>=4&&a.setW(s,e.getW(s));return a}function uv(e){const t=e.attributes,n=e.morphTargets,i=new Map;for(const r in t){const e=t[r];e.isInterleavedBufferAttribute&&(i.has(e)||i.set(e,cv(e)),t[r]=i.get(e))}for(const r in n){const e=n[r];e.isInterleavedBufferAttribute&&(i.has(e)||i.set(e,cv(e)),n[r]=i.get(e))}}function hv(e){let t=0;for(const i in e.attributes){const n=e.getAttribute(i);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}const n=e.getIndex();return t+=n?n.count*n.itemSize*n.array.BYTES_PER_ELEMENT:0,t}function dv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);const n={},i=e.getIndex(),r=e.getAttribute("position"),o=i?i.count:r.count;let a=0;const s=Object.keys(e.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let y=0,A=s.length;y<A;y++){const t=s[y],n=e.attributes[t];l[t]=new n.constructor(new n.array.constructor(n.count*n.itemSize),n.itemSize,n.normalized);const i=e.morphAttributes[t];i&&(c[t]||(c[t]=[]),i.forEach((e,n)=>{const i=new e.array.constructor(e.count*e.itemSize);c[t][n]=new e.constructor(i,e.itemSize,e.normalized)}))}const p=.5*t,f=Math.log10(1/t),m=Math.pow(10,f),g=p*m;for(let y=0;y<o;y++){const t=i?i.getX(y):y;let r="";for(let n=0,i=s.length;n<i;n++){const i=s[n],o=e.getAttribute(i),a=o.itemSize;for(let e=0;e<a;e++)r+=~~(o[h[e]](t)*m+g)+","}if(r in n)u.push(n[r]);else{for(let n=0,i=s.length;n<i;n++){const i=s[n],r=e.getAttribute(i),o=e.morphAttributes[i],u=r.itemSize,p=l[i],f=c[i];for(let e=0;e<u;e++){const n=h[e],i=d[e];if(p[i](a,r[n](t)),o)for(let e=0,r=o.length;e<r;e++)f[e][i](a,o[e][n](t))}}n[r]=a,u.push(a),a++}}const v=e.clone();for(const y in e.attributes){const e=l[y];if(v.setAttribute(y,new e.constructor(e.array.slice(0,a*e.itemSize),e.itemSize,e.normalized)),y in c)for(let t=0;t<c[y].length;t++){const e=c[y][t];v.morphAttributes[y][t]=new e.constructor(e.array.slice(0,a*e.itemSize),e.itemSize,e.normalized)}}return v.setIndex(u),v}function pv(e,t){if(t===ev.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===ev.TriangleFanDrawMode||t===ev.TriangleStripDrawMode){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(t===ev.TriangleFanDrawMode)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function fv(e){const t=new ev.Vector3,n=new ev.Vector3,i=new ev.Vector3,r=new ev.Vector3,o=new ev.Vector3,a=new ev.Vector3,s=new ev.Vector3,l=new ev.Vector3,c=new ev.Vector3;function u(e,u,h,d,p,f,m,g){t.fromBufferAttribute(u,p),n.fromBufferAttribute(u,f),i.fromBufferAttribute(u,m);const v=e.morphTargetInfluences;if(h&&v){s.set(0,0,0),l.set(0,0,0),c.set(0,0,0);for(let e=0,u=h.length;e<u;e++){const u=v[e],g=h[e];0!==u&&(r.fromBufferAttribute(g,p),o.fromBufferAttribute(g,f),a.fromBufferAttribute(g,m),d?(s.addScaledVector(r,u),l.addScaledVector(o,u),c.addScaledVector(a,u)):(s.addScaledVector(r.sub(t),u),l.addScaledVector(o.sub(n),u),c.addScaledVector(a.sub(i),u)))}t.add(s),n.add(l),i.add(c)}e.isSkinnedMesh&&(e.applyBoneTransform(p,t),e.applyBoneTransform(f,n),e.applyBoneTransform(m,i)),g[3*p+0]=t.x,g[3*p+1]=t.y,g[3*p+2]=t.z,g[3*f+0]=n.x,g[3*f+1]=n.y,g[3*f+2]=n.z,g[3*m+0]=i.x,g[3*m+1]=i.y,g[3*m+2]=i.z}const h=e.geometry,d=e.material;let p,f,m;const g=h.index,v=h.attributes.position,y=h.morphAttributes.position,A=h.morphTargetsRelative,b=h.attributes.normal,x=h.morphAttributes.position,_=h.groups,w=h.drawRange;let E,C,S,T,I,M,k;const R=new Float32Array(v.count*v.itemSize),L=new Float32Array(b.count*b.itemSize);if(null!==g)if(Array.isArray(d))for(E=0,S=_.length;E<S;E++)for(I=_[E],M=Math.max(I.start,w.start),k=Math.min(I.start+I.count,w.start+w.count),C=M,T=k;C<T;C+=3)p=g.getX(C),f=g.getX(C+1),m=g.getX(C+2),u(e,v,y,A,p,f,m,R),u(e,b,x,A,p,f,m,L);else for(M=Math.max(0,w.start),k=Math.min(g.count,w.start+w.count),E=M,S=k;E<S;E+=3)p=g.getX(E),f=g.getX(E+1),m=g.getX(E+2),u(e,v,y,A,p,f,m,R),u(e,b,x,A,p,f,m,L);else if(Array.isArray(d))for(E=0,S=_.length;E<S;E++)for(I=_[E],M=Math.max(I.start,w.start),k=Math.min(I.start+I.count,w.start+w.count),C=M,T=k;C<T;C+=3)p=C,f=C+1,m=C+2,u(e,v,y,A,p,f,m,R),u(e,b,x,A,p,f,m,L);else for(M=Math.max(0,w.start),k=Math.min(v.count,w.start+w.count),E=M,S=k;E<S;E+=3)p=E,f=E+1,m=E+2,u(e,v,y,A,p,f,m,R),u(e,b,x,A,p,f,m,L);return{positionAttribute:v,normalAttribute:b,morphedPositionAttribute:new ev.Float32BufferAttribute(R,3),morphedNormalAttribute:new ev.Float32BufferAttribute(L,3)}}function mv(e){if(0===e.groups.length)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),e;let t=e.groups;if(t=t.sort((e,t)=>e.materialIndex!==t.materialIndex?e.materialIndex-t.materialIndex:e.start-t.start),null===e.getIndex()){const t=e.getAttribute("position"),n=[];for(let e=0;e<t.count;e+=3)n.push(e,e+1,e+2);e.setIndex(n)}const n=e.getIndex(),i=[];for(let a=0;a<t.length;a++){const e=t[a],r=e.start,o=r+e.count;for(let t=r;t<o;t++)i.push(n.getX(t))}e.dispose(),e.setIndex(i);let r=0;for(let a=0;a<t.length;a++){const e=t[a];e.start=r,r+=e.count}let o=t[0];e.groups=[o];for(let a=1;a<t.length;a++){const n=t[a];o.materialIndex===n.materialIndex?o.count+=n.count:(o=n,e.groups.push(o))}return e}function gv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3;const n=Math.cos(t),i=100*(1+1e-10),r=[new ev.Vector3,new ev.Vector3,new ev.Vector3],o=new ev.Vector3,a=new ev.Vector3,s=new ev.Vector3,l=new ev.Vector3;function c(e){return"".concat(~~(e.x*i),",").concat(~~(e.y*i),",").concat(~~(e.z*i))}const u=e.index?e.toNonIndexed():e,h=u.attributes.position,d={};for(let m=0,g=h.count/3;m<g;m++){const e=3*m,t=r[0].fromBufferAttribute(h,e+0),n=r[1].fromBufferAttribute(h,e+1),i=r[2].fromBufferAttribute(h,e+2);o.subVectors(i,n),a.subVectors(t,n);const s=(new ev.Vector3).crossVectors(o,a).normalize();for(let o=0;o<3;o++){const e=c(r[o]);e in d||(d[e]=[]),d[e].push(s)}}const p=new Float32Array(3*h.count),f=new ev.BufferAttribute(p,3,!1);for(let m=0,g=h.count/3;m<g;m++){const e=3*m,t=r[0].fromBufferAttribute(h,e+0),i=r[1].fromBufferAttribute(h,e+1),u=r[2].fromBufferAttribute(h,e+2);o.subVectors(u,i),a.subVectors(t,i),s.crossVectors(o,a).normalize();for(let o=0;o<3;o++){const t=d[c(r[o])];l.set(0,0,0);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.dot(i)>n&&l.add(i)}l.normalize(),f.setXYZ(e+o,l.x,l.y,l.z)}}return u.setAttribute("normal",f),u}class vv extends ev.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new wv(e)}),this.register(function(e){return new Ev(e)}),this.register(function(e){return new Bv(e)}),this.register(function(e){return new Pv(e)}),this.register(function(e){return new Dv(e)}),this.register(function(e){return new Sv(e)}),this.register(function(e){return new Tv(e)}),this.register(function(e){return new Iv(e)}),this.register(function(e){return new Mv(e)}),this.register(function(e){return new _v(e)}),this.register(function(e){return new kv(e)}),this.register(function(e){return new Cv(e)}),this.register(function(e){return new Lv(e)}),this.register(function(e){return new Rv(e)}),this.register(function(e){return new bv(e)}),this.register(function(e){return new Ov(e)}),this.register(function(e){return new Nv(e)})}load(e,t,n,i){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=ev.LoaderUtils.extractUrlBase(e);o=ev.LoaderUtils.resolveURL(t,this.path)}else o=ev.LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},s=new ev.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{r.parse(n,o,function(n){t(n),r.manager.itemEnd(e)},a)}catch(e){a(e)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},a={},s=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(s.decode(new Uint8Array(e,0,4))===Fv){try{o[Av.KHR_BINARY_GLTF]=new zv(e)}catch(e){return void(i&&i(e))}r=JSON.parse(o[Av.KHR_BINARY_GLTF].content)}else r=JSON.parse(s.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new ly(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const e=r.extensionsUsed[c],t=r.extensionsRequired||[];switch(e){case Av.KHR_MATERIALS_UNLIT:o[e]=new xv;break;case Av.KHR_DRACO_MESH_COMPRESSION:o[e]=new Uv(r,this.dracoLoader);break;case Av.KHR_TEXTURE_TRANSFORM:o[e]=new jv;break;case Av.KHR_MESH_QUANTIZATION:o[e]=new Vv;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function yv(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Av={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class bv{constructor(e){this.parser=e,this.name=Av.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const s=new ev.Color(16777215);void 0!==o.color&&s.setRGB(o.color[0],o.color[1],o.color[2],ev.LinearSRGBColorSpace);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new ev.DirectionalLight(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new ev.PointLight(s),a.distance=l;break;case"spot":a=new ev.SpotLight(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),ny(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class xv{constructor(){this.name=Av.KHR_MATERIALS_UNLIT}getMaterialType(){return ev.MeshBasicMaterial}extendParams(e,t,n){const i=[];e.color=new ev.Color(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],ev.LinearSRGBColorSpace),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,ev.SRGBColorSpace))}return Promise.all(i)}}class _v{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class wv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ev.Vector2(e,e)}return Promise.all(r)}}class Ev{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class Cv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Sv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new ev.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],ev.LinearSRGBColorSpace)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ev.SRGBColorSpace)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Tv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Iv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new ev.Color).setRGB(a[0],a[1],a[2],ev.LinearSRGBColorSpace),Promise.all(r)}}class Mv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class kv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new ev.Color).setRGB(a[0],a[1],a[2],ev.LinearSRGBColorSpace),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,ev.SRGBColorSpace)),Promise.all(r)}}class Rv{constructor(e){this.parser=e,this.name=Av.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class Lv{constructor(e){this.parser=e,this.name=Av.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ev.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class Bv{constructor(e){this.parser=e,this.name=Av.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class Pv{constructor(e){this.parser=e,this.name=Av.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=i.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Dv{constructor(e){this.parser=e,this.name=Av.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=i.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,o.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Ov{constructor(e){this.name=Av.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(o*a);return r.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t})})}return null}}class Nv{constructor(e){this.name=Av.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const s of i.primitives)if(s.mode!==Wv.TRIANGLES&&s.mode!==Wv.TRIANGLE_STRIP&&s.mode!==Wv.TRIANGLE_FAN&&void 0!==s.mode)return null;const r=n.extensions[this.name].attributes,o=[],a={};for(const s in r)o.push(this.parser.getDependency("accessor",r[s]).then(e=>(a[s]=e,a[s])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const o of n){const e=new ev.Matrix4,t=new ev.Vector3,n=new ev.Quaternion,s=new ev.Vector3(1,1,1),l=new ev.InstancedMesh(o.geometry,o.material,i);for(let r=0;r<i;r++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,r),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,r),a.SCALE&&s.fromBufferAttribute(a.SCALE,r),l.setMatrixAt(r,e.compose(t,n,s));for(const i in a)if("_COLOR_0"===i){const e=a[i];l.instanceColor=new ev.InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&o.geometry.setAttribute(i,a[i]);ev.Object3D.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const Fv="glTF";class zv{constructor(e){this.name=Av.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Fv)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<i;){const t=r.getUint32(o,!0);o+=4;const i=r.getUint32(o,!0);if(o+=4,1313821514===i){const i=new Uint8Array(e,12+o,t);this.content=n.decode(i)}else if(5130562===i){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Uv{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Av.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const c in o){const e=Jv[c]||c.toLowerCase();a[e]=o[c]}for(const c in e.attributes){const t=Jv[c]||c.toLowerCase();if(void 0!==o[c]){const i=n.accessors[e.attributes[c]],r=qv[i.componentType];l[t]=r.name,s[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=s[t];void 0!==i&&(n.normalized=i)}t(e)},a,l,ev.LinearSRGBColorSpace,n)})})}}class jv{constructor(){this.name=Av.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Vv{constructor(){this.name=Av.KHR_MESH_QUANTIZATION}}class Hv extends ev.Interpolant{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=i-t,u=(n-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u;for(let A=0;A!==a;A++){const e=o[f+A+a],t=o[f+A+s]*c,n=o[p+A+a],i=o[p+A]*c;r[A]=v*e+y*t+m*n+g*i}return r}}const Gv=new ev.Quaternion;class Qv extends Hv{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return Gv.fromArray(r).normalize().toArray(r),r}}const Wv={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},qv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xv={9728:ev.NearestFilter,9729:ev.LinearFilter,9984:ev.NearestMipmapNearestFilter,9985:ev.LinearMipmapNearestFilter,9986:ev.NearestMipmapLinearFilter,9987:ev.LinearMipmapLinearFilter},Yv={33071:ev.ClampToEdgeWrapping,33648:ev.MirroredRepeatWrapping,10497:ev.RepeatWrapping},Kv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jv={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zv={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$v={CUBICSPLINE:void 0,LINEAR:ev.InterpolateLinear,STEP:ev.InterpolateDiscrete};function ey(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new ev.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ev.FrontSide})),e.DefaultMaterial}function ty(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function ny(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function iy(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ry(e){let t;const n=e.extensions&&e.extensions[Av.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+oy(n.attributes):e.indices+":"+oy(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+oy(e.targets[i]);return t}function oy(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function ay(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const sy=new ev.Matrix4;class ly{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new yv,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,r=!1,o=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);i=n&&t?parseInt(t[1],10):-1,r=e.indexOf("Firefox")>-1,o=r?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&i<17||r&&o<98?this.textureLoader=new ev.TextureLoader(this.options.manager):this.textureLoader=new ev.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ev.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return ty(r,o,i),ny(o,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(o)})).then(function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,o]of e.children.entries())r(o,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Av.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(e,r){n.load(ev.LoaderUtils.resolveURL(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=Kv[i.type],t=qv[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new ev.BufferAttribute(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],o=Kv[i.type],a=qv[i.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(d=new a(r,e*u,i.count*u/s),l=new ev.InterleavedBuffer(d,u/s),t.cache.add(n,l)),p=new ev.InterleavedBufferAttribute(l,o,c%u/s,h)}else d=null===r?new a(i.count*o):new a(r,c,i.count*o),p=new ev.BufferAttribute(d,o,h);if(void 0!==i.sparse){const t=Kv.SCALAR,n=qv[i.sparse.indices.componentType],s=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(e[1],s,i.sparse.count*t),u=new a(e[2],l,i.sparse.count*o);null!==r&&(p=new ev.BufferAttribute(p.array.slice(),p.itemSize,p.normalized)),p.normalized=!1;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}p.normalized=h}return p})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,r=this.json,o=r.textures[e],a=r.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(r.samplers||{})[o.sampler]||{};return t.magFilter=Xv[n.magFilter]||ev.LinearFilter,t.minFilter=Xv[n.minFilter]||ev.LinearMipmapLinearFilter,t.wrapS=Yv[n.wrapS]||ev.RepeatWrapping,t.wrapT=Yv[n.wrapT]||ev.RepeatWrapping,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==ev.NearestFilter&&t.minFilter!==ev.LinearFilter,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[s]=l,l}loadImageSource(e,t){const n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const r=n.images[e],o=self.URL||self.webkitURL;let a=r.uri||"",s=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then(function(e){s=!0;const t=new Blob([e],{type:r.mimeType});return a=o.createObjectURL(t),a});else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(a).then(function(e){return new Promise(function(n,r){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new ev.Texture(e);t.needsUpdate=!0,n(t)}),t.load(ev.LoaderUtils.resolveURL(e,i.path),o,void 0,r)})}).then(function(e){var t;return!0===s&&o.revokeObjectURL(a),ny(e,r),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=l,l}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[Av.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Av.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[Av.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==i&&(o.colorSpace=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new ev.PointsMaterial,ev.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new ev.LineBasicMaterial,ev.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||o){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return ev.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const a={},s=[];if((r.extensions||{})[Av.KHR_MATERIALS_UNLIT]){const e=i[Av.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),s.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new ev.Color(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],ev.LinearSRGBColorSpace),a.opacity=e[3]}void 0!==n.baseColorTexture&&s.push(t.assignTexture(a,"map",n.baseColorTexture,ev.SRGBColorSpace)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),s.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),s.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=ev.DoubleSide);const l=r.alphaMode||"OPAQUE";if("BLEND"===l?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===l&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==ev.MeshBasicMaterial&&(s.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new ev.Vector2(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==ev.MeshBasicMaterial&&(s.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==ev.MeshBasicMaterial){const e=r.emissiveFactor;a.emissive=(new ev.Color).setRGB(e[0],e[1],e[2],ev.LinearSRGBColorSpace)}return void 0!==r.emissiveTexture&&o!==ev.MeshBasicMaterial&&s.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,ev.SRGBColorSpace)),Promise.all(s).then(function(){const n=new o(a);return r.name&&(n.name=r.name),ny(n,r),t.associations.set(n,{materials:e}),r.extensions&&ty(i,n,r),n})}createUniqueName(e){const t=ev.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[Av.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return cy(n,e,t)})}const o=[];for(let a=0,s=e.length;a<s;a++){const n=e[a],s=ry(n),l=i[s];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[Av.KHR_DRACO_MESH_COMPRESSION]?r(n):cy(new ev.BufferGeometry,n,t),i[s]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,a=[];for(let s=0,l=o.length;s<l;s++){const e=void 0===o[s].material?ey(this.cache):this.getDependency("material",o[s].material);a.push(e)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let u=0,h=s.length;u<h;u++){const n=s[u],c=o[u];let h;const d=a[u];if(c.mode===Wv.TRIANGLES||c.mode===Wv.TRIANGLE_STRIP||c.mode===Wv.TRIANGLE_FAN||void 0===c.mode)h=!0===r.isSkinnedMesh?new ev.SkinnedMesh(n,d):new ev.Mesh(n,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),c.mode===Wv.TRIANGLE_STRIP?h.geometry=pv(h.geometry,ev.TriangleStripDrawMode):c.mode===Wv.TRIANGLE_FAN&&(h.geometry=pv(h.geometry,ev.TriangleFanDrawMode));else if(c.mode===Wv.LINES)h=new ev.LineSegments(n,d);else if(c.mode===Wv.LINE_STRIP)h=new ev.Line(n,d);else if(c.mode===Wv.LINE_LOOP)h=new ev.LineLoop(n,d);else{if(c.mode!==Wv.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new ev.Points(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&iy(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),ny(h,r),c.extensions&&ty(i,h,c),t.assignFinalMaterial(h),l.push(h)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&ty(i,l[0],r),l[0];const c=new ev.Group;r.extensions&&ty(i,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new ev.PerspectiveCamera(ev.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new ev.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ny(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),i=e,r=[],o=[];for(let a=0,s=i.length;a<s;a++){const e=i[a];if(e){r.push(e);const t=new ev.Matrix4;null!==n&&t.fromArray(n.array,16*a),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new ev.Skeleton(r,o)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,o=[],a=[],s=[],l=[],c=[];for(let u=0,h=i.channels.length;u<h;u++){const e=i.channels[u],t=i.samplers[e.sampler],n=e.target,r=n.node,h=void 0!==i.parameters?i.parameters[t.input]:t.input,d=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",h)),s.push(this.getDependency("accessor",d)),l.push(t),c.push(n))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=i[r],u=o[r],h=a[r],d=s[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,u,h,d);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new ev.AnimationClip(r,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[];for(let s=0,l=o.length;s<l;s++)r.push(t.getDependency("node",o[s]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),a]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,sy)});for(let r=0,o=n.length;r<o;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",a=[],s=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return s&&a.push(s),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then(function(e){return i._getNodeRef(i.cameraCache,r.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if(a=!0===r.isBone?new ev.Bone:t.length>1?new ev.Group:1===t.length?t[0]:new ev.Object3D,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),ny(a,r),r.extensions&&ty(n,a,r),void 0!==r.matrix){const e=new ev.Matrix4;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new ev.Group;n.name&&(r.name=i.createUniqueName(n.name)),ny(r,n),n.extensions&&ty(t,r,n);const o=n.nodes||[],a=[];for(let s=0,l=o.length;s<l;s++)a.push(i.getDependency("node",o[s]));return Promise.all(a).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof ev.Material||n instanceof ev.Texture)&&t.set(n,r);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,i,r){const o=[],a=e.name?e.name:e.uuid,s=[];let l;switch(Zv[r.path]===Zv.weights?e.traverse(function(e){e.morphTargetInfluences&&s.push(e.name?e.name:e.uuid)}):s.push(a),Zv[r.path]){case Zv.weights:l=ev.NumberKeyframeTrack;break;case Zv.rotation:l=ev.QuaternionKeyframeTrack;break;case Zv.position:case Zv.scale:l=ev.VectorKeyframeTrack;break;default:l=1===n.itemSize?ev.NumberKeyframeTrack:ev.VectorKeyframeTrack}const c=void 0!==i.interpolation?$v[i.interpolation]:ev.InterpolateLinear,u=this._getArrayFromAccessor(n);for(let h=0,d=s.length;h<d;h++){const e=new l(s[h]+"."+Zv[r.path],t.array,u,c);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=ay(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof ev.QuaternionKeyframeTrack?Qv:Hv)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function cy(e,t,n){const i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const a in i){const t=Jv[a]||a.toLowerCase();t in e.attributes||r.push(o(i[a],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(i)}return ev.ColorManagement.workingColorSpace!==ev.LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn('THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "'.concat(ev.ColorManagement.workingColorSpace,'" not supported.')),ny(e,t),function(e,t,n){const i=t.attributes,r=new ev.Box3;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new ev.Vector3(t[0],t[1],t[2]),new ev.Vector3(o[0],o[1],o[2])),e.normalized){const t=ay(qv[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new ev.Vector3,t=new ev.Vector3;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,a=i.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),i.normalized){const e=ay(qv[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new ev.Sphere;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then(function(t){const n=t[0],a=t[1],s=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}class uy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:t,msg:n,transfer:i}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(n,i)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const i=this._getIdleWorker();-1!==i?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=n,this.workers[i].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const hy=9,dy=15,py=16,fy=22,my=37,gy=43,vy=76,yy=83,Ay=97,by=100,xy=103,_y=109,wy=165,Ey=166,Cy=1000066e3;class Sy{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ty{constructor(e,t,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=i,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){void 0===t&&(t=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}new Uint8Array([0]);const Iy=[171,75,84,88,32,50,48,187,13,10,26,10];function My(e){return(new TextDecoder).decode(e)}var ky=Em(9922).hp;let Ry,Ly,By;const Py={env:{emscripten_notify_memory_growth:function(e){By=new Uint8Array(Ly.exports.memory.buffer)}}};class Dy{init(){return Ry||(Ry="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+Oy).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Py)).then(this._init):WebAssembly.instantiate(ky.from(Oy,"base64"),Py).then(this._init),Ry)}_init(e){Ly=e.instance,Py.env.emscripten_notify_memory_growth(0)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Ly)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,i=Ly.exports.malloc(n);By.set(e,i),t=t||Number(Ly.exports.ZSTD_findDecompressedSize(i,n));const r=Ly.exports.malloc(t),o=Ly.exports.ZSTD_decompress(r,t,i,n),a=By.slice(r,r+o);return Ly.exports.free(i),Ly.exports.free(r),a}}const Oy="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Ny=(ev.SRGBTransfer,ev.LinearTransfer,ev.LinearTransfer,new WeakMap);let Fy,zy=0;class Uy extends ev.Loader{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new uy,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new ev.FileLoader(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new ev.FileLoader(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,i]).then(e=>{let[t,n]=e;const i=Uy.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(Uy.EngineFormat),"let _EngineType = "+JSON.stringify(Uy.EngineType),"let _TranscoderFormat = "+JSON.stringify(Uy.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Uy.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=n,this.workerPool.setWorkerCreator(()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e})}),zy>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),zy++}return this.transcoderPending}load(e,t,n,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new ev.FileLoader(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,e=>{this.parse(e,t,i)},n,i)}parse(e,t,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(Ny.has(e))return Ny.get(e).promise.then(t).catch(n);this._createTexture(e).then(e=>t?t(e):null).catch(n)}_createTextureFrom(e,t){const{type:n,error:i,data:{faces:r,width:o,height:a,format:s,type:l,dfdFlags:c}}=e;if("error"===n)return Promise.reject(i);let u;if(6===t.faceCount)u=new ev.CompressedCubeTexture(r,s,l);else{const e=r[0].mipmaps;u=t.layerCount>1?new ev.CompressedArrayTexture(e,o,a,t.layerCount,s,l):new ev.CompressedTexture(e,o,a,s,l)}return u.minFilter=1===r[0].mipmaps.length?ev.LinearFilter:ev.LinearMipmapLinearFilter,u.magFilter=ev.LinearFilter,u.generateMipmaps=!1,u.needsUpdate=!0,u.colorSpace=Gy(t),u.premultiplyAlpha=!!(1&c),u}async _createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,Iy.length);if(t[0]!==Iy[0]||t[1]!==Iy[1]||t[2]!==Iy[2]||t[3]!==Iy[3]||t[4]!==Iy[4]||t[5]!==Iy[5]||t[6]!==Iy[6]||t[7]!==Iy[7]||t[8]!==Iy[8]||t[9]!==Iy[9]||t[10]!==Iy[10]||t[11]!==Iy[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Sy,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new Ty(e,Iy.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const o=r._nextUint32();n.supercompressionScheme=r._nextUint32();const a=r._nextUint32(),s=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),d=new Ty(e,Iy.length+i,3*o*8,!0);for(let B=0;B<o;B++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new Ty(e,a,s,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let B=0;B<m;B++){const e={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=p._nextInt32(),e.sampleUpper=p._nextInt32()):(e.sampleLower=p._nextUint32(),e.sampleUpper=p._nextUint32()),f.samples[B]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(f);const g=new Ty(e,l,c,!0);for(;g._offset<c;){const e=g._nextUint32(),t=g._scan(e),i=My(t);if(n.keyValue[i]=g._nextUint8Array(e-t.byteLength-1),i.match(/^ktx/i)){const e=My(n.keyValue[i]);n.keyValue[i]=e.substring(0,e.lastIndexOf("\0"))}g._skip(e%4?4-e%4:0)}if(h<=0)return n;const v=new Ty(e,u,h,!0),y=v._nextUint16(),A=v._nextUint16(),b=v._nextUint32(),x=v._nextUint32(),_=v._nextUint32(),w=v._nextUint32(),E=[];for(let B=0;B<o;B++)E.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const C=u+v._offset,S=C+b,T=S+x,I=T+_,M=new Uint8Array(e.buffer,e.byteOffset+C,b),k=new Uint8Array(e.buffer,e.byteOffset+S,x),R=new Uint8Array(e.buffer,e.byteOffset+T,_),L=new Uint8Array(e.buffer,e.byteOffset+I,w);return n.globalData={endpointCount:y,selectorCount:A,imageDescs:E,endpointsData:M,selectorsData:k,tablesData:R,extendedData:L},n}(new Uint8Array(e)),i=n.vkFormat===Cy&&167===n.dataFormatDescriptor[0].colorModel;if(0!==n.vkFormat&&(!i||this.workerConfig.astcHDRSupported))return async function(e){const{vkFormat:t}=e;if(void 0===Vy[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let n;2===e.supercompressionScheme&&(Fy||(Fy=new Promise(async e=>{const t=new Dy;await t.init(),e(t)})),n=await Fy);const i=[];for(let o=0;o<e.levels.length;o++){const r=Math.max(1,e.pixelWidth>>o),a=Math.max(1,e.pixelHeight>>o),s=e.pixelDepth?Math.max(1,e.pixelDepth>>o):0,l=e.levels[o];let c,u;if(0===e.supercompressionScheme)c=l.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=n.decode(l.levelData,l.uncompressedByteLength)}u=Hy[t]===ev.FloatType?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):Hy[t]===ev.HalfFloatType?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,i.push({data:u,width:r,height:a,depth:s})}let r;if(jy.has(Vy[t]))r=0===e.pixelDepth?new ev.DataTexture(i[0].data,e.pixelWidth,e.pixelHeight):new ev.Data3DTexture(i[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new ev.CompressedTexture(i,e.pixelWidth,e.pixelHeight),r.minFilter=1===i.length?ev.LinearFilter:ev.LinearMipmapLinearFilter,r.magFilter=ev.LinearFilter}return r.mipmaps=i,r.type=Hy[t],r.format=Vy[t],r.colorSpace=Gy(e),r.needsUpdate=!0,Promise.resolve(r)}(n);const r=t,o=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(e=>this._createTextureFrom(e.data,n));return Ny.set(e,{promise:o}),o}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),zy--,this}}Uy.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},Uy.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},Uy.EngineFormat={RGBAFormat:ev.RGBAFormat,RGBA_ASTC_4x4_Format:ev.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:ev.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:ev.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:ev.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:ev.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:ev.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:ev.RGB_ETC1_Format,RGB_ETC2_Format:ev.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:ev.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:ev.RGBA_S3TC_DXT1_Format},Uy.EngineType={UnsignedByteType:ev.UnsignedByteType,HalfFloatType:ev.HalfFloatType,FloatType:ev.FloatType},Uy.BasisWorker=function(){let e,t,n;const i=_EngineFormat,r=_EngineType,o=_TranscoderFormat,a=_BasisFormat;self.addEventListener("message",function(i){const o=i.data;switch(o.type){case"init":e=o.config,s=o.transcoderBinary,t=new Promise(e=>{n={wasmBinary:s,onRuntimeInitialized:e},BASIS(n)}).then(()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{const{faces:t,buffers:i,width:s,height:h,hasAlpha:d,format:p,type:f,dfdFlags:m}=function(t){const i=new n.KTX2File(new Uint8Array(t));function o(){i.close(),i.delete()}if(!i.isValid())throw o(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");let s;if(i.isUASTC())s=a.UASTC;else if(i.isETC1S())s=a.ETC1S;else{if(!i.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");s=a.UASTC_HDR}const h=i.getWidth(),d=i.getHeight(),p=i.getLayers()||1,f=i.getLevels(),m=i.getFaces(),g=i.getHasAlpha(),v=i.getDFDFlags(),{transcoderFormat:y,engineFormat:A,engineType:b}=function(t,n,i,r){const o=l[t];for(let a=0;a<o.length;a++){const s=o[a];if((!s.if||e[s.if])&&s.basisFormat.includes(t)&&!(r&&s.transcoderFormat.length<2)&&(!s.needsPowerOfTwo||c(n)&&c(i)))return{transcoderFormat:s.transcoderFormat[r?1:0],engineFormat:s.engineFormat[r?1:0],engineType:s.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(s,h,d,g);if(!h||!d||!f)throw o(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!i.startTranscoding())throw o(),new Error("THREE.KTX2Loader: .startTranscoding failed");const x=[],_=[];for(let e=0;e<m;e++){const t=[];for(let n=0;n<f;n++){const a=[];let s,l;for(let t=0;t<p;t++){const c=i.getImageLevelInfo(n,t,e);0!==e||0!==n||0!==t||c.origWidth%4==0&&c.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),f>1?(s=c.origWidth,l=c.origHeight):(s=c.width,l=c.height);let u=new Uint8Array(i.getImageTranscodedSizeInBytes(n,t,0,y));const h=i.transcodeImage(u,n,t,e,y,0,-1,-1);if(b===r.HalfFloatType&&(u=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!h)throw o(),new Error("THREE.KTX2Loader: .transcodeImage failed.");a.push(u)}const c=u(a);t.push({data:c,width:s,height:l}),_.push(c.buffer)}x.push({mipmaps:t,width:h,height:d,format:A,type:b})}return o(),{faces:x,buffers:_,width:h,height:d,hasAlpha:g,dfdFlags:v,format:A,type:b}}(o.buffer);self.postMessage({type:"transcode",id:o.id,data:{faces:t,width:s,height:h,hasAlpha:d,format:p,type:f,dfdFlags:m}},i)}catch(e){console.error(e),self.postMessage({type:"error",id:o.id,error:e.message})}})}var s});const s=[{if:"astcSupported",basisFormat:[a.UASTC],transcoderFormat:[o.ASTC_4x4,o.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.BC7_M5,o.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.BC1,o.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.ETC1,o.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.PVRTC1_4_RGB,o.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[a.UASTC_HDR],transcoderFormat:[o.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[o.RGBA32,o.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[a.UASTC_HDR],transcoderFormat:[o.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],l={[a.ETC1S]:s.filter(e=>e.basisFormat.includes(a.ETC1S)).sort((e,t)=>e.priorityUASTC-t.priorityUASTC),[a.UASTC]:s.filter(e=>e.basisFormat.includes(a.UASTC)).sort((e,t)=>e.priorityUASTC-t.priorityUASTC),[a.UASTC_HDR]:s.filter(e=>e.basisFormat.includes(a.UASTC_HDR)).sort((e,t)=>e.priorityHDR-t.priorityHDR)};function c(e){return e<=2||!(e&e-1)&&0!==e}function u(e){if(1===e.length)return e[0];let t=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;const n=new Uint8Array(t);let i=0;for(let r=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.byteLength}return n}};const jy=new Set([ev.RGBAFormat,ev.RGFormat,ev.RedFormat]),Vy={[_y]:ev.RGBAFormat,[Ay]:ev.RGBAFormat,[my]:ev.RGBAFormat,[gy]:ev.RGBAFormat,[xy]:ev.RGFormat,[yy]:ev.RGFormat,[py]:ev.RGFormat,[fy]:ev.RGFormat,[by]:ev.RedFormat,[vy]:ev.RedFormat,[dy]:ev.RedFormat,[hy]:ev.RedFormat,[Cy]:ev.RGBA_ASTC_4x4_Format,[Ey]:ev.RGBA_ASTC_6x6_Format,[wy]:ev.RGBA_ASTC_6x6_Format},Hy={[_y]:ev.FloatType,[Ay]:ev.HalfFloatType,[my]:ev.UnsignedByteType,[gy]:ev.UnsignedByteType,[xy]:ev.FloatType,[yy]:ev.HalfFloatType,[py]:ev.UnsignedByteType,[fy]:ev.UnsignedByteType,[by]:ev.FloatType,[vy]:ev.HalfFloatType,[dy]:ev.UnsignedByteType,[hy]:ev.UnsignedByteType,[Cy]:ev.HalfFloatType,[Ey]:ev.UnsignedByteType,[wy]:ev.UnsignedByteType};function Gy(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?ev.SRGBColorSpace:ev.LinearSRGBColorSpace:10===t.colorPrimaries?2===t.transferFunction?"display-p3":"display-p3-linear":(0===t.colorPrimaries||console.warn('THREE.KTX2Loader: Unsupported color primaries, "'.concat(t.colorPrimaries,'"')),ev.NoColorSpace)}const Qy={c:null,u:[new ev.Vector3,new ev.Vector3,new ev.Vector3],e:[]},Wy={c:null,u:[new ev.Vector3,new ev.Vector3,new ev.Vector3],e:[]},qy=[[],[],[]],Xy=[[],[],[]],Yy=[],Ky=new ev.Vector3,Jy=new ev.Vector3,Zy=new ev.Vector3,$y=new ev.Vector3,eA=new ev.Vector3,tA=new ev.Vector3,nA=new ev.Matrix3,iA=new ev.Box3,rA=new ev.Matrix4,oA=new ev.Matrix4,aA=new ev.Ray;class sA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ev.Vector3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ev.Vector3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ev.Matrix3;this.center=e,this.halfSize=t,this.rotation=n}set(e,t,n){return this.center=e,this.halfSize=t,this.rotation=n,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return(new this.constructor).copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,t){const n=this.halfSize;$y.subVectors(e,this.center),this.rotation.extractBasis(Ky,Jy,Zy),t.copy(this.center);const i=ev.MathUtils.clamp($y.dot(Ky),-n.x,n.x);t.add(Ky.multiplyScalar(i));const r=ev.MathUtils.clamp($y.dot(Jy),-n.y,n.y);t.add(Jy.multiplyScalar(r));const o=ev.MathUtils.clamp($y.dot(Zy),-n.z,n.z);return t.add(Zy.multiplyScalar(o)),t}containsPoint(e){return $y.subVectors(e,this.center),this.rotation.extractBasis(Ky,Jy,Zy),Math.abs($y.dot(Ky))<=this.halfSize.x&&Math.abs($y.dot(Jy))<=this.halfSize.y&&Math.abs($y.dot(Zy))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(lA.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,tA),tA.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;Qy.c=this.center,Qy.e[0]=this.halfSize.x,Qy.e[1]=this.halfSize.y,Qy.e[2]=this.halfSize.z,this.rotation.extractBasis(Qy.u[0],Qy.u[1],Qy.u[2]),Wy.c=e.center,Wy.e[0]=e.halfSize.x,Wy.e[1]=e.halfSize.y,Wy.e[2]=e.halfSize.z,e.rotation.extractBasis(Wy.u[0],Wy.u[1],Wy.u[2]);for(let r=0;r<3;r++)for(let e=0;e<3;e++)qy[r][e]=Qy.u[r].dot(Wy.u[e]);$y.subVectors(Wy.c,Qy.c),Yy[0]=$y.dot(Qy.u[0]),Yy[1]=$y.dot(Qy.u[1]),Yy[2]=$y.dot(Qy.u[2]);for(let r=0;r<3;r++)for(let e=0;e<3;e++)Xy[r][e]=Math.abs(qy[r][e])+i;for(let r=0;r<3;r++)if(t=Qy.e[r],n=Wy.e[0]*Xy[r][0]+Wy.e[1]*Xy[r][1]+Wy.e[2]*Xy[r][2],Math.abs(Yy[r])>t+n)return!1;for(let r=0;r<3;r++)if(t=Qy.e[0]*Xy[0][r]+Qy.e[1]*Xy[1][r]+Qy.e[2]*Xy[2][r],n=Wy.e[r],Math.abs(Yy[0]*qy[0][r]+Yy[1]*qy[1][r]+Yy[2]*qy[2][r])>t+n)return!1;return t=Qy.e[1]*Xy[2][0]+Qy.e[2]*Xy[1][0],n=Wy.e[1]*Xy[0][2]+Wy.e[2]*Xy[0][1],!(Math.abs(Yy[2]*qy[1][0]-Yy[1]*qy[2][0])>t+n||(t=Qy.e[1]*Xy[2][1]+Qy.e[2]*Xy[1][1],n=Wy.e[0]*Xy[0][2]+Wy.e[2]*Xy[0][0],Math.abs(Yy[2]*qy[1][1]-Yy[1]*qy[2][1])>t+n||(t=Qy.e[1]*Xy[2][2]+Qy.e[2]*Xy[1][2],n=Wy.e[0]*Xy[0][1]+Wy.e[1]*Xy[0][0],Math.abs(Yy[2]*qy[1][2]-Yy[1]*qy[2][2])>t+n||(t=Qy.e[0]*Xy[2][0]+Qy.e[2]*Xy[0][0],n=Wy.e[1]*Xy[1][2]+Wy.e[2]*Xy[1][1],Math.abs(Yy[0]*qy[2][0]-Yy[2]*qy[0][0])>t+n||(t=Qy.e[0]*Xy[2][1]+Qy.e[2]*Xy[0][1],n=Wy.e[0]*Xy[1][2]+Wy.e[2]*Xy[1][0],Math.abs(Yy[0]*qy[2][1]-Yy[2]*qy[0][1])>t+n||(t=Qy.e[0]*Xy[2][2]+Qy.e[2]*Xy[0][2],n=Wy.e[0]*Xy[1][1]+Wy.e[1]*Xy[1][0],Math.abs(Yy[0]*qy[2][2]-Yy[2]*qy[0][2])>t+n||(t=Qy.e[0]*Xy[1][0]+Qy.e[1]*Xy[0][0],n=Wy.e[1]*Xy[2][2]+Wy.e[2]*Xy[2][1],Math.abs(Yy[1]*qy[0][0]-Yy[0]*qy[1][0])>t+n||(t=Qy.e[0]*Xy[1][1]+Qy.e[1]*Xy[0][1],n=Wy.e[0]*Xy[2][2]+Wy.e[2]*Xy[2][0],Math.abs(Yy[1]*qy[0][1]-Yy[0]*qy[1][1])>t+n||(t=Qy.e[0]*Xy[1][2]+Qy.e[1]*Xy[0][2],n=Wy.e[0]*Xy[2][1]+Wy.e[1]*Xy[2][0],Math.abs(Yy[1]*qy[0][2]-Yy[0]*qy[1][2])>t+n)))))))))}intersectsPlane(e){this.rotation.extractBasis(Ky,Jy,Zy);const t=this.halfSize.x*Math.abs(e.normal.dot(Ky))+this.halfSize.y*Math.abs(e.normal.dot(Jy))+this.halfSize.z*Math.abs(e.normal.dot(Zy)),n=e.normal.dot(this.center)-e.constant;return Math.abs(n)<=t}intersectRay(e,t){return this.getSize(eA),iA.setFromCenterAndSize($y.set(0,0,0),eA),rA.setFromMatrix3(this.rotation),rA.setPosition(this.center),oA.copy(rA).invert(),aA.copy(e).applyMatrix4(oA),aA.intersectBox(iA,t)?t.applyMatrix4(rA):null}intersectsRay(e){return null!==this.intersectRay(e,$y)}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const t=e.elements;let n=$y.set(t[0],t[1],t[2]).length();const i=$y.set(t[4],t[5],t[6]).length(),r=$y.set(t[8],t[9],t[10]).length();e.determinant()<0&&(n=-n),nA.setFromMatrix4(e);const o=1/n,a=1/i,s=1/r;return nA.elements[0]*=o,nA.elements[1]*=o,nA.elements[2]*=o,nA.elements[3]*=a,nA.elements[4]*=a,nA.elements[5]*=a,nA.elements[6]*=s,nA.elements[7]*=s,nA.elements[8]*=s,this.rotation.multiply(nA),this.halfSize.x*=n,this.halfSize.y*=i,this.halfSize.z*=r,$y.setFromMatrixPosition(e),this.center.add($y),this}}const lA=new sA,cA=/^[og]\s*(.+)?/,uA=/^mtllib /,hA=/^usemtl /,dA=/^usemap /,pA=/\s+/,fA=new ev.Vector3,mA=new ev.Vector3,gA=new ev.Vector3,vA=new ev.Vector3,yA=new ev.Vector3,AA=new ev.Color;function bA(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const i=this.vertices,r=this.object.geometry.vertices;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const i=this.normals,r=this.object.geometry.normals;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addFaceNormal:function(e,t,n){const i=this.vertices,r=this.object.geometry.normals;fA.fromArray(i,e),mA.fromArray(i,t),gA.fromArray(i,n),yA.subVectors(gA,mA),vA.subVectors(fA,mA),yA.cross(vA),yA.normalize(),r.push(yA.x,yA.y,yA.z),r.push(yA.x,yA.y,yA.z),r.push(yA.x,yA.y,yA.z)},addColor:function(e,t,n){const i=this.colors,r=this.object.geometry.colors;void 0!==i[e]&&r.push(i[e+0],i[e+1],i[e+2]),void 0!==i[t]&&r.push(i[t+0],i[t+1],i[t+2]),void 0!==i[n]&&r.push(i[n+0],i[n+1],i[n+2])},addUV:function(e,t,n){const i=this.uvs,r=this.object.geometry.uvs;r.push(i[e+0],i[e+1]),r.push(i[t+0],i[t+1]),r.push(i[n+0],i[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,i,r,o,a,s,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),d=this.parseVertexIndex(n,c);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==a&&""!==a){const e=this.normals.length;u=this.parseNormalIndex(a,e),h=this.parseNormalIndex(s,e),d=this.parseNormalIndex(l,e),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==i&&""!==i){const e=this.uvs.length;u=this.parseUVIndex(i,e),h=this.parseUVIndex(r,e),d=this.parseUVIndex(o,e),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,i=e.length;n<i;n++){const i=this.parseVertexIndex(e[n],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,i=this.uvs.length;for(let r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],n));for(let r=0,o=t.length;r<o;r++)this.addUVLine(this.parseUVIndex(t[r],i))}};return e.startObject("",!1),e}class xA extends ev.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,i){const r=this,o=new ev.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{t(r.parse(n))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new bA;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let i=[];for(let o=0,a=n.length;o<a;o++){const e=n[o].trimStart();if(0===e.length)continue;const r=e.charAt(0);if("#"!==r)if("v"===r){const n=e.split(pA);switch(n[0]){case"v":t.vertices.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])),n.length>=7?(AA.setRGB(parseFloat(n[4]),parseFloat(n[5]),parseFloat(n[6]),ev.SRGBColorSpace),t.colors.push(AA.r,AA.g,AA.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]));break;case"vt":t.uvs.push(parseFloat(n[1]),parseFloat(n[2]))}}else if("f"===r){const n=e.slice(1).trim().split(pA),i=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];if(t.length>0){const e=t.split("/");i.push(e)}}const r=i[0];for(let e=1,o=i.length-1;e<o;e++){const n=i[e],o=i[e+1];t.addFace(r[0],n[0],o[0],r[1],n[1],o[1],r[2],n[2],o[2])}}else if("l"===r){const n=e.substring(1).trim().split(" ");let i=[];const r=[];if(-1===e.indexOf("/"))i=n;else for(let e=0,t=n.length;e<t;e++){const t=n[e].split("/");""!==t[0]&&i.push(t[0]),""!==t[1]&&r.push(t[1])}t.addLineGeometry(i,r)}else if("p"===r){const n=e.slice(1).trim().split(" ");t.addPointGeometry(n)}else if(null!==(i=cA.exec(e))){const e=(" "+i[0].slice(1).trim()).slice(1);t.startObject(e)}else if(hA.test(e))t.object.startMaterial(e.substring(7).trim(),t.materialLibraries);else if(uA.test(e))t.materialLibraries.push(e.substring(7).trim());else if(dA.test(e))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===r){if(i=e.split(" "),i.length>1){const e=i[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const n=t.object.currentMaterial();n&&(n.smooth=t.object.smooth)}else{if("\0"===e)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+e+'"')}}t.finalize();const r=new ev.Group;if(r.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let o=0,a=t.objects.length;o<a;o++){const e=t.objects[o],n=e.geometry,i=e.materials,a="Line"===n.type,s="Points"===n.type;let l=!1;if(0===n.vertices.length)continue;const c=new ev.BufferGeometry;c.setAttribute("position",new ev.Float32BufferAttribute(n.vertices,3)),n.normals.length>0&&c.setAttribute("normal",new ev.Float32BufferAttribute(n.normals,3)),n.colors.length>0&&(l=!0,c.setAttribute("color",new ev.Float32BufferAttribute(n.colors,3))),!0===n.hasUVIndices&&c.setAttribute("uv",new ev.Float32BufferAttribute(n.uvs,2));const u=[];for(let r=0,o=i.length;r<o;r++){const e=i[r],n=e.name+"_"+e.smooth+"_"+l;let o=t.materials[n];if(null!==this.materials)if(o=this.materials.create(e.name),!a||!o||o instanceof ev.LineBasicMaterial){if(s&&o&&!(o instanceof ev.PointsMaterial)){const e=new ev.PointsMaterial({size:10,sizeAttenuation:!1});ev.Material.prototype.copy.call(e,o),e.color.copy(o.color),e.map=o.map,o=e}}else{const e=new ev.LineBasicMaterial;ev.Material.prototype.copy.call(e,o),e.color.copy(o.color),o=e}void 0===o&&(o=a?new ev.LineBasicMaterial:s?new ev.PointsMaterial({size:1,sizeAttenuation:!1}):new ev.MeshPhongMaterial,o.name=e.name,o.flatShading=!e.smooth,o.vertexColors=l,t.materials[n]=o),u.push(o)}let h;if(u.length>1){for(let e=0,t=i.length;e<t;e++){const t=i[e];c.addGroup(t.groupStart,t.groupCount,e)}h=a?new ev.LineSegments(c,u):s?new ev.Points(c,u):new ev.Mesh(c,u)}else h=a?new ev.LineSegments(c,u[0]):s?new ev.Points(c,u[0]):new ev.Mesh(c,u[0]);h.name=e.name,r.add(h)}else if(t.vertices.length>0){const e=new ev.PointsMaterial({size:1,sizeAttenuation:!1}),n=new ev.BufferGeometry;n.setAttribute("position",new ev.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new ev.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const i=new ev.Points(n,e);r.add(i)}return r}}class _A extends ev.Loader{constructor(e){super(e)}load(e,t,n,i){const r=this,o=""===this.path?ev.LoaderUtils.extractUrlBase(e):this.path,a=new ev.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(r.parse(n,o))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},n,i)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split("\n");let i={};const r=/\s+/,o={};for(let s=0;s<n.length;s++){let e=n[s];if(e=e.trim(),0===e.length||"#"===e.charAt(0))continue;const t=e.indexOf(" ");let a=t>=0?e.substring(0,t):e;a=a.toLowerCase();let l=t>=0?e.substring(t+1):"";if(l=l.trim(),"newmtl"===a)i={name:l},o[l]=i;else if("ka"===a||"kd"===a||"ks"===a||"ke"===a){const e=l.split(r,3);i[a]=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]}else i[a]=l}const a=new wA(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class wA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:ev.FrontSide,this.wrap=void 0!==this.options.wrap?this.options.wrap:ev.RepeatWrapping}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const i=e[n],r={};t[n]=r;for(const e in i){let t=!0,n=i[e];const o=e.toLowerCase();switch(o){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(n=[n[0]/255,n[1]/255,n[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===n[0]&&0===n[1]&&0===n[2]&&(t=!1)}t&&(r[o]=n)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],i={name:e,side:this.side};function r(e,n){if(i[e])return;const r=t.getTextureParams(n,i),o=t.loadTexture((a=t.baseUrl,"string"!=typeof(s=r.url)||""===s?"":/^https?:\/\//i.test(s)?s:a+s));var a,s;o.repeat.copy(r.scale),o.offset.copy(r.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,"map"!==e&&"emissiveMap"!==e||(o.colorSpace=ev.SRGBColorSpace),i[e]=o}for(const o in n){const e=n[o];let t;if(""!==e)switch(o.toLowerCase()){case"kd":i.color=ev.ColorManagement.toWorkingColorSpace((new ev.Color).fromArray(e),ev.SRGBColorSpace);break;case"ks":i.specular=ev.ColorManagement.toWorkingColorSpace((new ev.Color).fromArray(e),ev.SRGBColorSpace);break;case"ke":i.emissive=ev.ColorManagement.toWorkingColorSpace((new ev.Color).fromArray(e),ev.SRGBColorSpace);break;case"map_kd":r("map",e);break;case"map_ks":r("specularMap",e);break;case"map_ke":r("emissiveMap",e);break;case"norm":r("normalMap",e);break;case"map_bump":case"bump":r("bumpMap",e);break;case"map_d":r("alphaMap",e),i.transparent=!0;break;case"ns":i.shininess=parseFloat(e);break;case"d":t=parseFloat(e),t<1&&(i.opacity=t,i.transparent=!0);break;case"tr":t=parseFloat(e),this.options&&this.options.invertTrProperty&&(t=1-t),t>0&&(i.opacity=1-t,i.transparent=!0)}}return this.materials[e]=new ev.MeshPhongMaterial(i),this.materials[e]}getTextureParams(e,t){const n={scale:new ev.Vector2(1,1),offset:new ev.Vector2(0,0)},i=e.split(/\s+/);let r;return r=i.indexOf("-bm"),r>=0&&(t.bumpScale=parseFloat(i[r+1]),i.splice(r,2)),r=i.indexOf("-s"),r>=0&&(n.scale.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),r=i.indexOf("-o"),r>=0&&(n.offset.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),n.url=i.join(" ").trim(),n}loadTexture(e,t,n,i,r){const o=void 0!==this.manager?this.manager:ev.DefaultLoadingManager;let a=o.getHandler(e);null===a&&(a=new ev.TextureLoader(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const s=a.load(e,n,i,r);return void 0!==t&&(s.mapping=t),s}}class EA{static fromCubeTexture(e){let t=0;const n=new ev.Vector3,i=new ev.Vector3,r=new ev.Color,o=[0,0,0,0,0,0,0,0,0],a=new ev.SphericalHarmonics3,s=a.coefficients;for(let c=0;c<6;c++){const a=e.image[c],l=a.width,u=a.height,h=document.createElement("canvas");h.width=l,h.height=u;const d=h.getContext("2d");d.drawImage(a,0,0,l,u);const p=d.getImageData(0,0,l,u),f=p.data,m=p.width,g=2/m;for(let v=0,y=f.length;v<y;v+=4){r.setRGB(f[v]/255,f[v+1]/255,f[v+2]/255),CA(r,e.colorSpace);const a=v/4,l=(a%m+.5)*g-1,u=1-(Math.floor(a/m)+.5)*g;switch(c){case 0:n.set(-1,u,-l);break;case 1:n.set(1,u,l);break;case 2:n.set(-l,1,-u);break;case 3:n.set(-l,-1,u);break;case 4:n.set(-l,u,1);break;case 5:n.set(l,u,-1)}const h=n.lengthSq(),d=4/(Math.sqrt(h)*h);t+=d,i.copy(n).normalize(),ev.SphericalHarmonics3.getBasisAt(i,o);for(let e=0;e<9;e++)s[e].x+=o[e]*r.r*d,s[e].y+=o[e]*r.g*d,s[e].z+=o[e]*r.b*d}}const l=4*Math.PI/t;for(let c=0;c<9;c++)s[c].x*=l,s[c].y*=l,s[c].z*=l;return new ev.LightProbe(a)}static async fromCubeRenderTarget(e,t){const n=e.coordinateSystem===ev.WebGLCoordinateSystem?-1:1;let i=0;const r=new ev.Vector3,o=new ev.Vector3,a=new ev.Color,s=[0,0,0,0,0,0,0,0,0],l=new ev.SphericalHarmonics3,c=l.coefficients,u=t.texture.type,h=t.width;let d;e.isWebGLRenderer&&(d=u===ev.HalfFloatType?new Uint16Array(h*h*4):new Uint8Array(h*h*4));for(let f=0;f<6;f++){e.isWebGLRenderer?await e.readRenderTargetPixelsAsync(t,0,0,h,h,d,f):d=await e.readRenderTargetPixelsAsync(t,0,0,h,h,0,f);const l=2/h;for(let e=0,p=d.length;e<p;e+=4){let p,m,g;u===ev.HalfFloatType?(p=ev.DataUtils.fromHalfFloat(d[e]),m=ev.DataUtils.fromHalfFloat(d[e+1]),g=ev.DataUtils.fromHalfFloat(d[e+2])):(p=d[e]/255,m=d[e+1]/255,g=d[e+2]/255),a.setRGB(p,m,g),CA(a,t.texture.colorSpace);const v=e/4,y=(1-(v%h+.5)*l)*n,A=1-(Math.floor(v/h)+.5)*l;switch(f){case 0:r.set(-1*n,A,y*n);break;case 1:r.set(1*n,A,-y*n);break;case 2:r.set(y,1,-A);break;case 3:r.set(y,-1,A);break;case 4:r.set(y,A,1);break;case 5:r.set(-y,A,-1)}const b=r.lengthSq(),x=4/(Math.sqrt(b)*b);i+=x,o.copy(r).normalize(),ev.SphericalHarmonics3.getBasisAt(o,s);for(let e=0;e<9;e++)c[e].x+=s[e]*a.r*x,c[e].y+=s[e]*a.g*x,c[e].z+=s[e]*a.b*x}}const p=4*Math.PI/i;for(let f=0;f<9;f++)c[f].x*=p,c[f].y*=p,c[f].z*=p;return new ev.LightProbe(l)}}function CA(e,t){switch(t){case ev.SRGBColorSpace:e.convertSRGBToLinear();break;case ev.LinearSRGBColorSpace:case ev.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return e}var SA=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n,i,r,o,a=function(e){t.deviceOrientation=e},s=function(){t.screenOrientation=window.orientation||0},l=(n=new THREE.Vector3(0,0,1),i=new THREE.Euler,r=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,t,a,s,l){i.set(a,t,-s,"YXZ"),e.setFromEuler(i),e.multiply(o),e.multiply(r.setFromAxisAngle(n,-l))});this.connect=function(){s(),window.addEventListener("orientationchange",s,!1),window.addEventListener("deviceorientation",a,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",s,!1),window.removeEventListener("deviceorientation",a,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation;if(e){var n=e.alpha?THREE.MathUtils.degToRad(e.alpha)+t.alphaOffset:0,i=e.beta?THREE.MathUtils.degToRad(e.beta):0,r=e.gamma?THREE.MathUtils.degToRad(e.gamma):0,o=t.screenOrientation?THREE.MathUtils.degToRad(t.screenOrientation):0;l(t.object.quaternion,n,i,r,o)}}},this.dispose=function(){t.disconnect()},this.connect()},TA=globalThis.THREE=u({},ev);TA.DRACOLoader=nv,TA.GLTFLoader=vv,TA.KTX2Loader=Uy,TA.OBJLoader=xA,TA.MTLLoader=_A,TA.OBB=sA,TA.BufferGeometryUtils=Sm,TA.LightProbeGenerator=EA,TA.DeviceOrientationControls=SA,TA.Cache.enabled=!0;const IA=TA;var MA=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",kA="aframe-injected",RA=Em(8878),LA=Em.n(RA),BA={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};LA().formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" "),this.useColors){var t;this.color=(t=function(e){var t=e.split(":");return t[t.length-1]}(this.namespace),BA.colors&&BA.colors[t]||null);var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),e.splice(r,0,n)}};var PA=function(){try{return window.localStorage}catch(QJ){}}();PA&&(parseInt(PA.logs,10)||"true"===PA.logs)?LA().enable("*"):LA().enable("*:error,*:info,*:warn");const DA=LA();var OA=Em(1124),NA=Em.n(OA),FA=DA("device:error"),zA=!1,UA=!1,jA=void 0!==navigator.xr;if(jA){var VA=function(){var e=document.querySelector("a-scene");e?e.hasLoaded?e.components["xr-mode-ui"].updateEnterInterfaces():e.addEventListener("loaded",VA):window.addEventListener("DOMContentLoaded",VA)},HA=function(e){FA("WebXR session support error: "+e.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(e){zA=e,VA()}).catch(HA),navigator.xr.isSessionSupported("immersive-ar").then(function(e){UA=e,VA()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){zA=!0,VA()}).catch(HA),navigator.xr.supportsSession("immersive-ar").then(function(){UA=!0,VA()}).catch(function(){})):FA("WebXR has neither isSessionSupported or supportsSession?!")}function GA(){return zA||UA}function QA(){return UA}function WA(){return zA}var qA,XA,YA=(qA=!1,XA=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(XA)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(XA.substr(0,4)))&&(qA=!0),($A()||KA()||rb())&&(qA=!0),ib()&&(qA=!1),function(){return qA});function KA(e){var t=e||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t)||JA()}function JA(e,t,n){var i=e||window.navigator.userAgent,r=t||window.navigator.platform,o=n||window.navigator.maxTouchPoints||0;return("iPad"===r||"MacIntel"===r)&&o>0&&/Macintosh|Intel|iPad|ipad/i.test(i)&&!window.MSStream}function ZA(){var e=navigator.userAgent.includes("Macintosh"),t=5===navigator.maxTouchPoints;return e&&t&&jA}function $A(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function eb(){return!YA()&&!ib()&&void 0!==window.orientation}function tb(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function nb(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function ib(){return tb()||nb()||ZA()}function rb(){return/R7 Build/.test(window.navigator.userAgent)}function ob(){var e=window.orientation;return rb()&&(e+=90),90===e||-90===e}var ab="undefined"==typeof process||!0===process.browser,sb=!ab,lb=Object.freeze(Object.create(null));function cb(){return{}}function ub(e){var t=[],n=null;function i(i){var r,o;if((i=void 0===i?t.length:i)>0&&null==n&&(n=0),i>0)for(r=t.length,t.length+=Number(i),o=r;o<t.length;o++)t[o]=e();return t.length}return e=e||cb,{grow:i,pool:t,recycle:function(e){e instanceof Object&&(null!==n&&-1!==n?t[--n]=e:t[t.length]=e)},size:function(){return t.length},use:function(){var e;return null!==n&&n!==t.length||i(t.length||5),e=t[n],t[n++]=lb,hb(e),e}}}function hb(e){var t;if(e&&e.constructor===Object)for(t in e)e[t]=void 0}function db(e,t){var n;if(e&&e.constructor===Object)for(n in e)n in t||delete e[n]}var pb=DA("utils:coordinates:warn"),fb=["x","y","z","w"],mb=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,gb=/\s+/g;function vb(e,t,n){var i,r,o,a,s,l,c,u,h=n&&"object"==typeof n?n:{};if(e&&e instanceof Object)return s=void 0===e.x?t&&t.x:e.x,l=void 0===e.y?t&&t.y:e.y,c=void 0===e.z?t&&t.z:e.z,u=void 0===e.w?t&&t.w:e.w,null!=s&&(h.x=_b(s)),null!=l&&(h.y=_b(l)),null!=c&&(h.z=_b(c)),null!=u&&(h.w=_b(u)),h;if(null==e)return"object"==typeof t?Object.assign(h,t):t;for(i=e.trim().split(gb),a=0;a<fb.length;a++)if(o=fb[a],i[a])h[o]=parseFloat(i[a],10);else{if(void 0===(r=t&&t[o]))continue;h[o]=_b(r)}return h}function yb(e){var t;return"object"!=typeof e?e:(t=e.x+" "+e.y,null!=e.z&&(t+=" "+e.z),null!=e.w&&(t+=" "+e.w),t)}function Ab(e,t){return"object"!=typeof e||"object"!=typeof t?e===t:e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}function bb(e){return mb.test(e)}function xb(e){return pb("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),bb(e)}function _b(e){return null!=e&&e.constructor===String?parseFloat(e,10):e}function wb(e){return new ev.Vector3(e.x,e.y,e.z)}var Eb=function(){var e={};return function(t,n){return n in e||(e[n]={}),t in e[n]||(e[n][t]=t.split(n)),e[n][t]}}();function Cb(e,t){var n=Eb(e,t=t||".");return 1===n.length?n[0]:n}function Sb(e,t,n){var i;return n=n||".",-1!==t.indexOf(n)?(i=Cb(t,n)).constructor===String?e.getAttribute(i):e.getAttribute(i[0])[i[1]]:e.getAttribute(t)}function Tb(e,t,n,i){var r;i=i||".",-1===t.indexOf(i)?e.setAttribute(t,n):(r=Cb(t,i)).constructor===String?e.setAttribute(r,n):e.setAttribute(r[0],r[1],n)}function Ib(e){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(n,10)+1+"px",setTimeout(function(){e.style.width=t,e.style.height=n},200)}var Mb=DA("utils:src-loader:warn");function kb(e,t,n){!function(e,t){var n;e.tagName?t("IMG"===e.tagName):((n=new XMLHttpRequest).open("HEAD",e),n.addEventListener("load",function(i){var r;n.status>=200&&n.status<300?null==(r=n.getResponseHeader("Content-Type"))?Pb(e,t):r.startsWith("image")?t(!0):t(!1):Pb(e,t),n.abort()}),n.send())}(e,function(i){i?t(e):n(e)})}function Rb(e,t,n){var i,r,o,a="",s=[];if("string"==typeof e){for(r=0;r<5;r++)a+="(url\\((?:[^\\)]+)\\),\\s*)";function l(e){s.push(e),6===s.length&&t(s)}if(a+="(url\\((?:[^\\)]+)\\)\\s*)",o=e.match(new RegExp(a))){for(r=1;r<7;r++)kb(Bb(o[r]),l);return}if(!e.startsWith("#"))return void kb(Bb(e)||e,n)}if(i=e.tagName?e:function(e){try{var t=document.querySelector(e);return t||Mb('No element was found matching the selector: "%s"',e),t}catch(t){return void Mb('"%s" is not a valid selector',e)}}(e))return"A-CUBEMAP"===i.tagName&&i.srcs?t(i.srcs):"IMG"===i.tagName?n(i):void Mb('Selector "%s" does not point to <a-cubemap> or <img>',e)}function Lb(e,t){return Rb(e,t,function(){Mb("Expected cubemap but got image")})}function Bb(e){var t=e.match(/url\((.+)\)/);if(t)return t[1]}function Pb(e,t){var n=new Image;n.addEventListener("load",function(){t(!0)}),n.addEventListener("error",function(){t(!1)}),n.src=e}var Db=DA("utils:material:warn"),Ob=new Set(["emissiveMap","envMap","map","specularMap"]);function Nb(e,t){var n=t.offset||{x:0,y:0},i=t.repeat||{x:1,y:1},r=t.npot||!1,o=t.anisotropy||ev.Texture.DEFAULT_ANISOTROPY,a=e.wrapS,s=e.wrapT,l=e.magFilter,c=e.minFilter;r&&(a=ev.ClampToEdgeWrapping,s=ev.ClampToEdgeWrapping,l=ev.LinearFilter,c=ev.LinearFilter),1===i.x&&1===i.y||(a=ev.RepeatWrapping,s=ev.RepeatWrapping),e.offset.set(n.x,n.y),e.repeat.set(i.x,i.y),e.wrapS===a&&e.wrapT===s&&e.magFilter===l&&e.minFilter===c&&e.anisotropy===o||(e.wrapS=a,e.wrapT=s,e.magFilter=l,e.minFilter=c,e.anisotropy=o,e.needsUpdate=!0)}function Fb(e,t,n,i){var r=n.el,o=n.material,a=r.sceneEl.systems.renderer,s=i[t];if(n.materialSrcs||(n.materialSrcs={}),!s)return delete n.materialSrcs[e],void l(null);function l(t){o[e]!==t&&(o[e]&&o[e].dispose(),o[e]=t,o.needsUpdate=!0,Hb(r,t))}s===n.materialSrcs[e]&&o[e]?Nb(o[e],i):(n.materialSrcs[e]=s,s instanceof ev.Texture?l(s):r.sceneEl.systems.material.loadTextureSource(s,function(t){if(n.materialSrcs[e]===s){var r=o[e];!r||null!==t&&Gb(r,t)||(r=null),!r&&t&&(r=Qb(t)),r&&(r.source!==t&&(r.source=t,r.needsUpdate=!0),Ob.has(e)&&a.applyColorCorrection(r),Nb(r,i)),l(r)}}))}function zb(e,t){return Fb("map","src",e,t)}function Ub(e,t,n){var i=e;"ambientOcclusion"===e&&(i="ao");var r={};return r.src=n[e+"Map"],r.offset=n[e+"TextureOffset"],r.repeat=n[e+"TextureRepeat"],r.wrap=n[e+"TextureWrap"],Fb(i+"Map","src",t,r)}var jb={};function Vb(e,t){var n=e.material,i=e.el,r="envMap",o=t.envMap,a=t.sphericalEnvMap,s=t.refract;if(a&&(o=a,Db("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),e.materialSrcs||(e.materialSrcs={}),!o)return delete e.materialSrcs[r],n.envMap=null,void(n.needsUpdate=!0);function l(t){e.materialSrcs[r]===o&&(n.envMap=t,n.needsUpdate=!0,Hb(i,t))}e.materialSrcs[r]=o,jb[o]?jb[o].then(l):jb[o]=new Promise(function(e){Rb(o,function(t){i.sceneEl.systems.material.loadCubeMapTexture(t,function(t){t.mapping=s?ev.CubeRefractionMapping:ev.CubeReflectionMapping,l(t),e(t)})},function(t){i.sceneEl.systems.material.loadTexture(t,{src:t},function(t){t.mapping=s?ev.EquirectangularRefractionMapping:ev.EquirectangularReflectionMapping,l(t),e(t)})})})}function Hb(e,t){function n(){e.emit("materialvideoloadeddata",{src:t.image,texture:t})}function i(){e.emit("materialvideoended",{src:t.image,texture:t})}t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&"VIDEO"===t.image.tagName&&(t.image.addEventListener("loadeddata",n),t.image.addEventListener("ended",i),t.addEventListener("dispose",function(){t.image.removeEventListener("loadeddata",n),t.image.removeEventListener("ended",i)})))}function Gb(e,t){return e.source===t&&(t.data instanceof HTMLCanvasElement?e.isCanvasTexture:t.data instanceof HTMLVideoElement?e.isVideoTexture:e.isTexture&&!e.isCanvasTexture&&!e.isVideoTexture)}function Qb(e){var t;return(t=e.data instanceof HTMLCanvasElement?new ev.CanvasTexture:e.data instanceof HTMLVideoElement?new ev.VideoTexture(e.data):new ev.Texture).source=e,t.needsUpdate=!0,t}var Wb=/-([a-z])/g;function qb(e,t){var n;return"string"!=typeof e?e:(n=function(e,t){var n,i,r,o,a,s;for(t=t||{},n=Zb(e),i=0;i<n.length;i++)(r=n[i])&&(o=r.indexOf(":"),a=r.substr(0,o).trim(),s=r.substr(o+1).trim(),t[Yb(a)]=s);return t}(e,t),n[""]?e:n)}function Xb(e){return"string"==typeof e?e:function(e){var t,n=0,i=0,r="";for(t in e)n++;for(t in e)r+=t+": "+e[t],i<n-1&&(r+="; "),i++;return r}(e)}function Yb(e){return e.replace(Wb,$b)}var Kb,Jb,Zb=(Kb=[],Jb=/url\([^)]+$/,function(e){var t,n="",i=0;for(Kb.length=0;i<e.length;)-1===(t=e.indexOf(";",i))&&(t=e.length),n+=e.substring(i,t),Jb.test(n)?(n+=";",i=t+1):(Kb.push(n.trim()),n="",i=t+1);return Kb});function $b(e){return e[1].toUpperCase()}var ex=["x","y","z","w"];function tx(e,t,n){var i,r,o=e.el;if((r=!!(i=nx(e,t,n)))===e.controllerPresent)return r;e.controllerPresent=r,r?(e.addEventListeners(),e.injectTrackedControls(i),o.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),o.emit("controllerdisconnected",{name:e.name,component:e}))}function nx(e,t,n){var i,r=e.el.sceneEl,o=r&&r.systems["tracked-controls"];return!!o&&!(!(i=o.controllers)||!i.length)&&ix(i,t,n.hand,n.index,n.iterateControllerProfiles,n.handTracking)}function ix(e,t,n,i,r,o){var a,s,l,c,u=!1;for(a=0;a<e.length;a++){if(c=(l=e[a]).profiles,o)u=l.hand;else if(r)for(s=0;s<c.length&&!(u=c[s].startsWith(t));s++);else u=c.length>0&&c[0].startsWith(t);if(u)if("right"===l.handedness||"left"===l.handedness){if(l.handedness===n)return e[a]}else if(a===i)return e[a]}}function rx(e,t,n){var i,r,o,a,s;for(r in t){for(i=t[r],o=!1,s=0;s<i.length;s++)n.detail.changed[i[s]]&&(o=!0);if(o){for(a={},s=0;s<i.length;s++)a[ex[s]]=n.detail.axis[i[s]];e.el.emit(r+"moved",a)}}}function ox(e,t,n,i){var r=(i?n.mapping[i]:n.mapping).buttons[e];n.el.emit(r+t),n.updateModel&&n.updateModel(r,t)}var ax=DA("utils:warn");function sx(e){return e.bind.apply(e,Array.prototype.slice.call(arguments,1))}function lx(){return ax("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),GA()}function cx(){return ax("`utils.isIOS` has moved to `utils.device.isIOS`"),$A()}function ux(){return ax("`utils.isMobile has moved to `utils.device.isMobile`"),YA(arguments)}function hx(e,t,n){var i;return n&&(e=e.bind(n)),function(){var n=Date.now();(void 0===i||(void 0===i?t:n-i)>=t)&&(i=n,e.apply(null,arguments))}}function dx(e,t,n){var i,r,o;n&&(e=e.bind(n));var a=function(){i=Date.now(),e.apply(this,o),r=void 0};return function(){var n=Date.now(),s=void 0===i?t:n-i;s>=t?(clearTimeout(r),r=void 0,i=n,e.apply(null,arguments)):(r=r||setTimeout(a,t-s),o=arguments)}}function px(e,t,n){var i;return n&&(e=e.bind(n)),function(n,r){var o=void 0===i?r:n-i;(void 0===i||o>=t)&&(i=n,e(n,o))}}function fx(e,t,n){var i;return function(){var r=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,o)},t),a&&e.apply(r,o)}}var mx=Object.assign,gx=NA();function vx(e){return JSON.parse(JSON.stringify(e))}var yx,Ax,bx=(yx=ub(function(){return[]}),function(e,t){var n,i,r,o,a,s;if(void 0===e||void 0===t||null===e||null===t||!(e&&t&&e.constructor===Object&&t.constructor===Object||e.constructor===Array&&t.constructor===Array))return e===t;for(n in i=yx.use(),r=yx.use(),i.length=0,r.length=0,e)i.push(n);for(n in t)r.push(n);if(i.length!==r.length)return yx.recycle(i),yx.recycle(r),!1;for(o=0;o<i.length;++o)if(a=e[i[o]],s=t[i[o]],"object"==typeof a||"object"==typeof s||Array.isArray(a)&&Array.isArray(s)){if(a===s)continue;if(!bx(a,s))return yx.recycle(i),yx.recycle(r),!1}else if(a!==s)return yx.recycle(i),yx.recycle(r),!1;return yx.recycle(i),yx.recycle(r),!0}),xx=(Ax=[],function(e,t,n){var i,r,o,a,s,l,c;for(s in a=n||{},Ax.length=0,e)Ax.push(s);if(!t)return a;for(o in t)-1===Ax.indexOf(o)&&Ax.push(o);for(l=0;l<Ax.length;l++)i=e[s=Ax[l]],r=t[s],((c=i&&r&&i.constructor===Object&&r.constructor===Object)&&!bx(i,r)||!c&&i!==r)&&(a[s]=r);return a});function _x(e){return!e.metaKey&&document.activeElement===document.body}function wx(e,t){void 0===t&&(t=" ");var n=new RegExp(t,"g");return(e=(e||"").replace(n,t)).split(t)}function Ex(e,t){t=t||{};var n={};return Object.keys(t).forEach(function(t){e.hasAttribute(t)&&(n[t]=e.getAttribute(t))}),n}function Cx(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function Sx(){return window.top!==window.self}function Tx(e){for(var t=[],n=e.getElementsByTagName("*"),i=0,r=n.length;i<r;i++)n[i].isScene&&t.push(n[i]);return t}var Ix,Mx=[Rx({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),Rx({name:"mobile-web-app-capable",content:"yes"}),Rx({name:"theme-color",content:"black"})],kx=[Rx({name:"apple-mobile-web-app-capable",content:"yes"}),Rx({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(Ix={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:Ix,exists:function(){return document.querySelector('link[rel="'+Ix.rel+'"]')}})];function Rx(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}var Lx,Bx,Px,Dx=Em(5928),Ox=Em.n(Dx),Nx=Bm,Fx="loading-screen";function zx(e){var t=Lx.hasAttribute("embedded"),n=Px(Lx.canvas,t,Lx.maxCanvasSize,Lx.is("vr-mode"));e.aspect=n.width/n.height,e.updateProjectionMatrix(),Lx.renderer.setSize(n.width,n.height,!1)}const Ux=[];var jx=LA()("core:propertyTypes:warn"),Vx={},Hx=/[,> .[\]:]/,Gx=/url\((.+)\)/;function Qx(e,t,n,i,r,o){if(e in Vx)throw new Error("Property type "+e+" is already registered.");Vx[e]={default:t,parse:n||Yx,stringify:i||Kx,equals:r||Jx,isCacheable:!1!==o}}function Wx(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function qx(e){var t,n;return"string"!=typeof e?e:(n=e.match(Gx))?n[1]:"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)))?"CANVAS"===t.tagName||"VIDEO"===t.tagName||"IMG"===t.tagName?t:t.getAttribute("src"):void jx('"'+e+'" asset not found.'):e}function Xx(e){return e.getAttribute?e.getAttribute("id")?"#"+e.getAttribute("id"):e.getAttribute("src"):Kx(e)}function Yx(e){return e}function Kx(e){return null===e?"null":e.toString()}function Jx(e,t){return e===t}function Zx(e){return parseInt(e,10)}function $x(e,t,n){return vb(e,t,n)}function e_(e,t){if(null===e)return!0;if("object"!=typeof e)return!1;if(Object.keys(e).length!==t)return!1;var n=e.x,i=e.y,r=e.z,o=e.w;return!("number"!=typeof n||"number"!=typeof i||t>2&&"number"!=typeof r||t>3&&"number"!=typeof o)}Qx("audio","",qx,Xx),Qx("array",[],function(e){return Array.isArray(e)?e:e&&"string"==typeof e?e.split(",").map(function(e){return e.trim()}):[]},function(e){return e.join(", ")},Wx),Qx("asset","",qx,Xx),Qx("boolean",!1,function(e){return"false"!==e&&!1!==e}),Qx("color","#FFF"),Qx("int",0,Zx),Qx("number",0,function(e){return parseFloat(e,10)}),Qx("map","",qx,Xx),Qx("model","",qx,Xx),Qx("selector",null,function(e){return e?"string"!=typeof e?e:"#"!==e[0]||Hx.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null},function(e){return e.getAttribute?"#"+e.getAttribute("id"):Kx(e)},Jx,!1),Qx("selectorAll",null,function(e){return e?"string"!=typeof e?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null},function(e){return e instanceof Array?e.map(function(e){return"#"+e.getAttribute("id")}).join(", "):Kx(e)},Wx,!1),Qx("src","",function(e){return jx("`src` property type is deprecated. Use `asset` instead."),qx(e)},Xx),Qx("string",""),Qx("time",0,Zx),Qx("vec2",{x:0,y:0},$x,yb,Ab),Qx("vec3",{x:0,y:0,z:0},$x,yb,Ab),Qx("vec4",{x:0,y:0,z:0,w:1},$x,yb,Ab);var t_=function(e,t){return("audio"!==e||"string"==typeof t)&&!("array"===e&&!Array.isArray(t))&&("asset"!==e||"string"==typeof t)&&("boolean"!==e||"boolean"==typeof t)&&("color"!==e||"string"==typeof t)&&("int"!==e||"number"==typeof t)&&("number"!==e||"number"==typeof t)&&("map"!==e||"string"==typeof t)&&("model"!==e||"string"==typeof t)&&("selector"!==e||"string"==typeof t||null===t)&&("selectorAll"!==e||"string"==typeof t||null===t)&&("src"!==e||"string"==typeof t)&&("string"!==e||"string"==typeof t)&&("time"!==e||"number"==typeof t)&&("vec2"===e?e_(t,2):"vec3"===e?e_(t,3):"vec4"!==e||e_(t,4))},n_=Vx,i_=DA("core:schema:warn");function r_(e){return"type"in e?"string"==typeof e.type:"default"in e}function o_(e,t){var n;if(r_(e))return a_(e,t);for(n in e)e[n]=a_(e[n],t);return e}function a_(e,t){var n,i,r=e.default,o=e.type;return e.type?"bool"===e.type?o="boolean":"float"===e.type&&(o="number"):o=void 0===r||"boolean"!=typeof r&&"number"!=typeof r?Array.isArray(r)?"array":"string":typeof r,(i=n_[o])||i_("Unknown property type for component `"+t+"`: "+o),n=!!e.parse,e.parse=e.parse||i.parse,e.stringify=e.stringify||i.stringify,e.equals=e.equals||i.equals,e.isCacheable=!0===e.isCacheable||i.isCacheable,e.type=o,"default"in e?n||t_(o,r)||i_("Default value `"+r+"` does not match type `"+o+"` in component `"+t+"`"):e.default=i.default,e}var s_,l_=(s_=[],function(e,t,n,i,r){var o,a,s,l;for(a in s_.length=0,n?e:t)n&&void 0===e[a]||s_.push(a);if(null===e||"object"!=typeof e)return e;for(a in e)void 0===e[a]||t[a]||r||i_("Unknown property `"+a+"` for component/system `"+i+"`.");for(o=0;o<s_.length;o++){if(s=t[a=s_[o]],l=e[a],!t[a])return;e[a]=c_(l,s)}return e});function c_(e,t,n){return null!=e&&""!==e||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default,n)}function u_(e,t){var n,i,r,o,a={};for(n in e)i=t[n],"object"==typeof(o=r=e[n])&&(o=h_(r,i),i||i_("Unknown component property: "+n)),void 0!==o&&(a[n]=o);return a}function h_(e,t){return"object"!=typeof e?e:t&&null!==e?t.stringify(e):JSON.stringify(e)}var d_={},p_=c_,f_=o_,m_=r_,g_=u_,v_=h_,y_=Bm,A_=DA("core:component:warn"),b_=document.currentScript,x_=new RegExp("[A-Z]+"),__={},w_=Object.freeze({}),E_=[],C_={get:function(e,t){return e.getComputedPropertyValue(t)},set:function(e,t,n){return t in e.schema?e.recomputeProperty(t,n):void 0!==n&&e.handleUnknownProperty(t,n),!0}},S_=function(e,t,n){var i=this;if(this.sceneOnly&&!e.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(n&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=e,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=__[this.name];var r=this.events;this.events={},function(e,t){var n;for(n in t)e.events[n]=t[n].bind(e)}(this,r),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),db(this.data,this.schema),this.oldData=this.objectPool.use(),db(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,C_)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=dx(function(){e.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(t,!0)};S_.prototype={schema:{},init:function(){},events:{},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(e){var t=this.schema;return"string"==typeof e?e:this.isSingleProperty?v_(e,t):(e=g_(e,t),y_.stringify(e))},flushToDOM:function(e){var t=e?this.data:this.attrValue;null!=t&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var n=this.el;this.updateData(e,t),(n.hasLoaded||n.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var e,t=this.el;t.initializingComponents[this.name]||(t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],e=this.isObjectBased?w_:void 0,this.dataChanged=!1,this.storeOldData(),this.update(e),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1))},updateData:function(e,t){this.isSingleProperty?this.recomputeProperty(void 0,e):(t?(hb(this.attrValue),this.recomputeData(e),this.schemaChangeRequired=!!this.updateSchema):"string"==typeof e?y_.parse(e,this.attrValueProxy):mx(this.attrValueProxy,e),this.updateSchemaIfNeeded(e))},updateSchemaIfNeeded:function(e){if(this.schemaChangeRequired&&this.updateSchema)for(var t in E_.length=0,this.updateSchema(this.data),db(this.data,this.schema),this.recomputeData(e),this.schemaChangeRequired=!1,this.attrValue)void 0!==this.attrValue[t]&&-1===E_.indexOf(t)&&(t in this.schema||A_("Unknown property `"+t+"` for component `"+this.name+"`."));for(var n=0;n<E_.length;n++)A_("Unknown property `"+E_[n]+"` for component `"+this.name+"`.");E_.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var e=this.oldData;this.oldDataInUse=!0,this.update(e),e!==this.oldData&&this.objectPool.recycle(e),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(e){(this.isSingleProperty||e in this.schema)&&(e?this.attrValue[e]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(e,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(e){var t;t=mx({},d_[this.name].schema),mx(t,e),this.schema=f_(t),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(e){var t=this.el.mixinEls,n=this.attrValue&&e?this.attrValue[e]:this.attrValue;if(void 0!==n)return n;for(var i=t.length-1;i>=0;i--){var r=t[i].getAttribute(this.attrName);if(null!==r&&(!e||e in r))return e?r[e]:r}return e?this.schema[e].default:this.schema.default},recomputeProperty:function(e,t){var n=e?this.schema[e]:this.schema;if(null!=t){void 0===this.attrValue&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var i=e?this.attrValue[e]:this.attrValue;"string"==typeof(i=n.isCacheable?p_(t,n,i):t)&&(i=""===t?void 0:t),e?this.attrValue[e]=i:this.attrValue=i}this.oldDataInUse&&(this.oldData=this.objectPool.use(),db(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var r=e?this.oldData[e]:this.oldData,o=e?this.data[e]:this.data,a=p_(this.getComputedPropertyValue(e),n,o);return"array"!==n.type||e||(a=vx(a)),n.equals(a,r)||(this.dataChanged=!0,n.schemaChange&&(this.schemaChangeRequired=!0)),e?this.data[e]=a:this.data=a,a},handleUnknownProperty:function(e,t){void 0===this.attrValue&&(this.attrValue=this.objectPool.use()),this.attrValue[e]=t,this.deferUnknownPropertyWarnings?E_.push(e):this.silenceUnknownPropertyWarnings||A_("Unknown property `"+e+"` for component `"+this.name+"`.")},storeOldData:function(){var e;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=p_(this.data,this.schema,this.oldData);else for(e in this.schema)void 0!==this.data[e]&&(this.data[e]&&"object"==typeof this.data[e]?this.oldData[e]=p_(this.data[e],this.schema[e],this.oldData[e]):this.oldData[e]=this.data[e]);else this.oldData=this.data},recomputeData:function(e){var t;if(this.isSingleProperty)this.recomputeProperty(void 0,e);else{for(t in this.schema)this.attrValueProxy[t]=void 0;e&&"object"==typeof e?mx(this.attrValueProxy,e):"string"==typeof e&&y_.parse(e,this.attrValueProxy)}},eventsAttach:function(){var e;for(e in this.eventsDetach(),this.events)this.el.addEventListener(e,this.events[e])},eventsDetach:function(){var e;for(e in this.events)this.el.removeEventListener(e,this.events[e])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var T_={};function I_(e,t){var n,i,r,o,a,s={};if(document.currentScript&&document.currentScript!==b_&&Ux.forEach(function(t){t.hasLoaded||document.currentScript.compareDocumentPosition(t)!==Node.DOCUMENT_POSITION_FOLLOWING&&(A_("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(T_[e]=!0))}),!0===x_.test(e)&&A_("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),-1!==e.indexOf("__"))throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach(function(e){s[e]={value:t[e],writable:!0}}),d_[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((n=function(e,t,n){S_.call(this,e,t,n)}).prototype=Object.create(S_.prototype,s)).name=e,n.prototype.isPositionRotationScale="position"===e||"rotation"===e||"scale"===e,n.prototype.constructor=n,n.prototype.system=Fm&&P_[e],n.prototype.play=(o=n.prototype.play,function(){var e=this.el.sceneEl,t=this.el.isPlaying&&!this.isPlaying;this.initialized&&t&&(o.call(this),this.isPlaying=!0,this.eventsAttach(),M_(this)&&e.addBehavior(this))}),n.prototype.pause=(a=n.prototype.pause,function(){var e=this.el.sceneEl;this.isPlaying&&(a.call(this),this.isPlaying=!1,this.eventsDetach(),M_(this)&&e.removeBehavior(this))}),i=mx(f_(n.prototype.schema,n.prototype.name)),n.prototype.isSingleProperty=r=m_(n.prototype.schema),n.prototype.isObjectBased=!r||r&&(k_(i.default)||k_(p_(void 0,i))),__[e]=ub(),d_[e]={Component:n,dependencies:n.prototype.dependencies,before:n.prototype.before,after:n.prototype.after,isSingleProperty:n.prototype.isSingleProperty,isObjectBased:n.prototype.isObjectBased,multiple:n.prototype.multiple,sceneOnly:n.prototype.sceneOnly,name:e,schema:i,stringify:n.prototype.stringify};for(var l=0;l<Ux.length;l++)Ux[l].emit("componentregistered",{name:e},!1);return n}function M_(e){return e.tick||e.tock}function k_(e){return e&&e.constructor===Object&&!(e instanceof window.HTMLElement)}var R_=!1;function L_(){R_||(R_=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}var B_=Bm,P_={},D_=function(e){var t=Nm&&d_[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function O_(e,t){var n,i,r={},o=Tx(document);if(Object.keys(t).forEach(function(e){r[e]={value:t[e],writable:!0}}),P_[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(i=function(e){D_.call(this,e)},(i.prototype=Object.create(D_.prototype,r)).name=e,i.prototype.constructor=i,i.prototype.schema=mx(o_(i.prototype.schema)),P_[e]=i,R_)for(n=0;n<o.length;n++)o[n].initSystem(e)}D_.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;0!==Object.keys(this.schema).length&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;0!==Object.keys(t).length&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),r_(t)?this.data=c_(e,t):this.data=l_(B_.parse(e)||{},t,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var N_=DA("core:a-node:warn"),F_={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function z_(e){return e.tagName.toLowerCase()in F_||e.isANode}class U_ extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){R_?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var e;this.sceneEl=this.closestScene(),this.sceneEl||N_("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(e=this.getAttribute("mixin"))&&this.updateMixins(e)}attributeChangedCallback(e,t,n){n!==this.computedMixinStr&&("mixin"!==e||this.isMixin||this.updateMixins(n,t))}closestScene(){for(var e=this;e&&!e.isScene;)e=e.parentElement;return e}closest(e){for(var t=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!t.call(n,e);)n=n.parentElement;return n}disconnectedCallback(){this.hasLoaded=!1}load(e,t){var n,i=this;this.hasLoaded||(t=t||z_,n=this.getChildren().filter(t).map(function(e){return new Promise(function(t,n){if(e.hasLoaded)return t();e.addEventListener("loaded",t),e.addEventListener("error",n)})}),Promise.allSettled(n).then(function(t){t.forEach(function(e){"rejected"===e.status&&N_("Rendering scene with errors on node: ",e.reason.target)}),i.isLoading=!0,i.setupMutationObserver(),e&&e(),i.isLoading=!1,i.hasLoaded=!0,i.emit("loaded-private",void 0,!1),i.emit("loaded",void 0,!1)}))}setupMutationObserver(){var e=this;new MutationObserver(function(t){var n;for(n=0;n<t.length;n++)if("attributes"===t[n].type){var i=t[n].attributeName,r=window.HTMLElement.prototype.getAttribute.call(e,i),o=t[n].oldValue;e.attributeChangedCallback(i,o,r)}}).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(e,t){var n,i,r,o=U_.newMixinIdArray,a=U_.oldMixinIdArray,s=U_.mixinIds;for(o.length=0,a.length=0,i=e?Eb(e.trim(),/\s+/):o,r=t?Eb(t.trim(),/\s+/):a,s.newMixinIds=i,s.oldMixinIds=r,n=0;n<r.length;n++)-1===i.indexOf(r[n])&&this.unregisterMixin(r[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<i.length;n++)this.registerMixin(i[n]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),0===i.length&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),s}registerMixin(e){var t,n,i,r=document.getElementById(e);if(r){if(i=r.getAttribute("mixin"))for(t=Eb(i.trim(),/\s+/),n=0;n<t.length;n++)this.registerMixin(t[n]);this.computedMixinStr=this.computedMixinStr+" "+r.id,this.mixinEls.push(r)}else N_("No mixin was found with id `%s`",e)}setAttribute(e,t){"mixin"===e&&this.updateMixins(t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}unregisterMixin(e){var t,n=this.mixinEls;for(t=0;t<n.length;++t)if(e===n[t].id){n.splice(t,1);break}}emit(e,t,n,i){var r=U_.evtData;void 0===n&&(n=!0),r.bubbles=!!n,r.detail=t,i&&(r=mx({},i,r)),this.dispatchEvent(new CustomEvent(e,r))}}U_.evtData={},U_.newMixinIdArray=[],U_.oldMixinIdArray=[],U_.mixinIds={},customElements.define("a-node",U_);var j_=DA("core:a-entity:debug"),V_=DA("core:a-entity:warn"),H_="__",G_=["position","rotation","scale","visible"],Q_={once:!0};class W_ extends U_{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new ev.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(e,t,n){var i=this.components[e];super.attributeChangedCallback(),i&&i.justInitialized&&""===n?delete i.justInitialized:(i||null!==n)&&this.setEntityAttribute(e,t,n)}doConnectedCallback(){var e,t,n=this;super.doConnectedCallback(),t=this.sceneEl,this.addToParent(),this.isScene||(t?!(e=t.querySelector("a-assets"))||e.hasLoaded?this.load():e.addEventListener("loaded",function(){n.load()}):this.load())}disconnectedCallback(){var e;if(this.parentEl){for(e in this.components)this.removeComponent(e,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(e){return this.object3DMap[e]}setObject3D(e,t){var n,i=this;if(!(t instanceof ev.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(n=this.getObject3D(e))&&this.object3D.remove(n),t.el=this,t.children.length&&t.traverse(function(e){e.el=i}),this.object3D.add(t),this.object3DMap[e]=t,this.emit("object3dset",{object:t,type:e})}removeObject3D(e){var t=this.getObject3D(e);t?(this.object3D.remove(t),delete this.object3DMap[e],this.emit("object3dremove",{type:e})):V_("Tried to remove `Object3D` of type:",e,"which was not defined.")}getOrCreateObject3D(e,t){var n=this.getObject3D(e);return!n&&t&&(n=new t,this.setObject3D(e,n)),V_("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}add(e){if(!e.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(e.object3D),this.emit("child-attached",{el:e})}addToParent(){var e=this.parentEl=this.parentNode;e&&e.add&&!this.attachedToParent&&(e.add(this),this.attachedToParent=!0)}removeFromParent(){var e=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,e.emit("child-detached",{el:this})}load(){var e=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,function(){e.parentEl&&(e.updateComponents(),(e.isScene||e.parentEl.isPlaying)&&e.play())})}remove(e){e?this.object3D.remove(e.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var e=this.children,t=[],n=0;n<e.length;n++){var i=e[n];i instanceof W_&&t.push(i)}return t}initComponent(e,t,n){var i,r,o,a;a=(o=Eb(e,H_))[0],r=o.length>2?o.slice(1).join("__"):o[1],d_[a]&&(q_(this,e)||void 0!==t||n)&&(e in this.components||(this.initComponentDependencies(a),i=new d_[a].Component(this,t,r),this.isPlaying&&i.play(),this.hasAttribute(e)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,e,"")),j_("Component initialized: %s",e)))}initComponentDependencies(e){var t,n;if(d_[e]&&(t=d_[e].dependencies))for(n=0;n<t.length;n++)this.initComponent(t[n],window.HTMLElement.prototype.getAttribute.call(this,t[n])||void 0,!0)}removeComponent(e,t){var n;(n=this.components[e])&&(n.initialized?(n.pause(),n.remove(),t&&(n.destroy(),delete this.components[e],this.hasAttribute(e)&&window.HTMLElement.prototype.removeAttribute.call(this,e)),this.emit("componentremoved",n.evtDetail,!1)):this.addEventListener("componentinitialized",function n(i){i.detail.name===e&&(this.removeComponent(e,t),this.removeEventListener("componentinitialized",n))}))}updateComponents(){var e,t,n,i,r,o,a=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(n=0;n<this.mixinEls.length;n++)for(i in this.mixinEls[n].componentCache)X_(i)&&(a[i]=!0);if(this.getExtraComponents)for(i in t=this.getExtraComponents())X_(i)&&(a[i]=!0);for(n=0;n<this.attributes.length;++n)i=this.attributes[n].name,-1===G_.indexOf(i)&&X_(i)&&(a[i]=!0);for(n=0;n<G_.length;n++)i=G_[n],this.hasAttribute(i)&&this.updateComponent(i,this.getDOMAttribute(i));for(i in a)r=this.getDOMAttribute(i),e=(o=t&&t[i])?o.constructor===Object?mx(o,qb(r||{})):r||o:r,this.updateComponent(i,e),delete a[i]}}updateComponent(e,t,n){var i=this.components[e];if(i)return null!==t||q_(this,e)?void i.updateProperties(t,n):void this.removeComponent(e,!0);this.initComponent(e,t,!1)}removeAttribute(e,t){var n=this.components[e];n&&void 0===t&&this.removeComponent(e,!0),n&&void 0!==t?n.resetProperty(t):("mixin"===e&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,e))}play(){var e,t,n;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].play();this.emit("play")}}pause(){var e,t,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].pause();this.emit("pause")}}setEntityAttribute(e,t,n){if(d_[e]||this.components[e])this.updateComponent(e,n);else if("mixin"===e){if(n===this.computedMixinStr)return;this.mixinUpdate(n,t)}}mixinUpdate(e,t,n){var i,r,o,a,s=W_.componentsUpdated,l=this;if(n||(t=t||this.getAttribute("mixin")),this.hasLoaded){for(o=this.updateMixins(e,t),s.length=0,a=0;a<this.mixinEls.length;a++)for(i in this.mixinEls[a].componentCache)-1===s.indexOf(i)&&(this.components[i]?this.components[i].handleMixinUpdate():this.initComponent(i,null),s.push(i));for(a=0;a<o.oldMixinIds.length;a++)if(r=document.getElementById(o.oldMixinIds[a]))for(i in r.componentCache)-1===s.indexOf(i)&&this.components[i]&&(this.getDOMAttribute(i)?this.components[i].handleMixinUpdate():this.removeComponent(i,!0))}else this.addEventListener("loaded-private",function(){l.mixinUpdate(e,t,!0)},Q_)}setAttribute(e,t,n){var i,r,o,a,s,l=W_.singlePropUpdate;if(o=(a=e.indexOf(H_))>0?e.substring(0,a):e,!d_[o])return"mixin"===e&&this.mixinUpdate(t),void super.setAttribute.call(this,e,t);if(!this.components[e]&&this.hasAttribute(e)&&this.updateComponent(e,window.HTMLElement.prototype.getAttribute.call(this,e)),void 0!==n&&"string"==typeof t&&t.length>0&&"string"==typeof qb(t)){for(s in l)delete l[s];(i=l)[t]=n,r=!1}else i=t,r=!0===n;this.updateComponent(e,i,r),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[e].flushToDOM()}flushToDOM(e){var t,n,i,r=this.components,o=this.children;for(i in r)r[i].flushToDOM();if(e)for(n=0;n<o.length;++n)(t=o[n]).flushToDOM&&t.flushToDOM(e)}getAttribute(e){var t,n,i,r;return"position"===e?this.object3D.position:"rotation"===e?(n=ev.MathUtils.radToDeg,i=this.object3D.rotation,(r=this.rotationObj).x=n(i.x),r.y=n(i.y),r.z=n(i.z),r):"scale"===e?this.object3D.scale:"visible"===e?this.object3D.visible:(t=this.components[e])?t.data:window.HTMLElement.prototype.getAttribute.call(this,e)}getDOMAttribute(e){var t=this.components[e];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,e)}addState(e){this.is(e)||(this.states.push(e),this.emit("stateadded",e))}removeState(e){var t=this.states.indexOf(e);-1!==t&&(this.states.splice(t,1),this.emit("stateremoved",e))}is(e){return-1!==this.states.indexOf(e)}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var e;if(this.parentNode)V_("Entity can only be destroyed if detached from scenegraph.");else for(e in this.components)this.components[e].destroy()}}function q_(e,t){return!(!e.components[t]||!e.components[t].attrValue)||function(e,t){var n,i=!1;for(n=0;n<t.length&&!(i=t[n].hasAttribute(e));++n);return i}(t,e.mixinEls)}function X_(e){return-1!==e.indexOf(H_)&&(e=Eb(e,H_)[0]),!!d_[e]}function Y_(e){if(e.data&&"vr"===e.data.type)switch(e.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}W_.componentsUpdated=[],W_.singlePropUpdate={},customElements.define("a-entity",W_),$A()&&window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)});var K_=DA("core:a-scene:warn"),J_=$A(),Z_=YA(),$_=jA;class ew extends W_{constructor(){var e;super(),(e=this).clock=new ev.Clock,e.isIOS=J_,e.isMobile=Z_,e.hasWebXR=$_,e.isAR=!1,e.isScene=!0,e.object3D=new ev.Scene,e.resize=e.resize.bind(e),e.render=e.render.bind(e),e.systems={},e.systemNames=[],e.time=e.delta=0,e.usedOfferSession=!1,e.componentOrder=[],e.behaviors={},e.hasLoaded=!1,e.isPlaying=!1,e.originalHTML=e.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var e=this,t=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),function(e){var t;function n(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||e.exitVR(),document.activeElement.blur(),document.body.focus()}(t=document.createElement("canvas")).classList.add("a-canvas"),t.dataset.aframeCanvas=!0,e.appendChild(t),document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),t.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),e.canvas=t,e.emit("render-target-loaded",{target:t}),setTimeout(e.resize.bind(e),0)}(this),this.setupRenderer(),function(e,t){Px=t;var n,i,r,o,a,s,l,c,u,h,d=(Lx=e).hasAttribute(Fx)?Nx.parse(Lx.getAttribute(Fx)):void 0,p=d&&d.dotsColor||"white",f=d&&d.backgroundColor||"#24CAFF";(void 0===d||"true"===d.enabled||void 0===d.enabled)&&(n=new ev.Scene,i=new ev.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),r=new ev.MeshBasicMaterial({color:p}),o=new ev.Mesh(i,r),a=o.clone(),s=o.clone(),l=new ev.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),c=new ev.Clock,u=0,h=function(){Lx.renderer.render(n,l),u=c.getElapsedTime()%4,o.visible=u>=1,a.visible=u>=2,s.visible=u>=3},n.background=new ev.Color(f),n.add(l),o.position.set(-1,0,-15),a.position.set(0,0,-15),s.position.set(1,0,-15),l.add(o),l.add(a),l.add(s),(Bx=document.createElement("div")).className="a-loader-title",Bx.innerHTML=document.title,Bx.style.display="none",Bx.setAttribute(kA,""),Lx.appendChild(Bx),setTimeout(function(){Lx.hasLoaded||(zx(l),Bx.style.display="block",window.addEventListener("resize",function(){zx(l)}),Lx.renderer.setAnimationLoop(h))},200))}(this,iw),this.resize(),t||this.addFullScreenStyles(),Sx()&&window.addEventListener("message",Y_.bind(this)),function(e){var t,n=document.head,i=n.querySelector("script"),r=[];return Mx.forEach(o),e.isIOS&&kx.forEach(o),r;function o(e){e&&!e.exists()&&(t=function(e){if(e&&e.tagName){var t=document.createElement(e.tagName);return t.setAttribute(kA,""),mx(t,e.attributes)}}(e),t&&(i?i.parentNode.insertBefore(t,i):n.appendChild(t),r.push(t)))}}(this),function(e){if(e.isMobile){var t=e.wakelock=new(Ox());e.addEventListener("enter-vr",function(){t.request()}),e.addEventListener("exit-vr",function(){t.release()})}}(this),this.enterVRBound=function(){e.enterVR()},this.exitVRBound=function(){e.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){e.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=tw(d_,this.componentOrder),this.addEventListener("componentregistered",function(){e.componentOrder=tw(d_,e.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){e.enterVR()})}attachedCallbackPostCamera(){var e=this;window.addEventListener("load",void 0),window.addEventListener("resize",function(){e.isIOS?setTimeout(e.resize,100):e.resize()}),this.play(),Ux.push(this)}initSystems(){var e;for(e in this.initSystem("camera"),P_)"camera"!==e&&this.initSystem(e)}initSystem(e){this.systems[e]||(this.systems[e]=new P_[e](this),this.systemNames.push(e))}disconnectedCallback(){var e=Ux.indexOf(this);super.disconnectedCallback(),Ux.splice(e,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(e){var t,n,i=this.behaviors[e.name];for(n in i||(i=this.behaviors[e.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),i)if(e[n]){if((t=i[n]).inUse){var r=t.markedForRemoval.indexOf(e);-1!==r&&t.markedForRemoval.splice(r,1)}-1===t.array.indexOf(e)&&t.array.push(e)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return GA()}enterAR(){var e;if(!this.hasWebXR)throw e="Failed to enter AR mode, WebXR not supported.",new Error(e);if(!QA())throw e="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(e);return this.enterVR(!0)}enterVR(e,t){var n,i=this,r=i.renderer.xr;if(t&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(i.usedOfferSession&&t)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var o=i.getAttribute("renderer");if(r.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var a=this.sceneEl.systems.webxr.sessionReferenceSpaceType;r.setReferenceSpaceType(a);var s=e?"immersive-ar":"immersive-vr";return n=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(e,a){var c=t?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);i.usedOfferSession|=t,c(s,n).then(function(a){t&&(i.usedOfferSession=!1),r.layersEnabled=-1!==n.requiredFeatures.indexOf("layers"),r.setSession(a).then(function(){r.setFoveation(o.foveationLevel),i.xrSession=a,i.systems.renderer.setWebXRFrameRate(a),a.addEventListener("end",i.exitVRBound),l(e)})},function(e){a(new Error("Failed to enter "+("immersive-ar"===s?"AR":"VR")+" mode (`requestSession`)",{cause:e}))})})}throw new Error("Failed to enter "+(e?"AR":"VR")+" no WebXR")}return l(),Promise.resolve();function l(t){var n;e?i.addState("ar-mode"):i.addState("vr-mode"),i.emit("enter-vr",{target:i}),!i.hasWebXR&&i.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),i.addFullScreenStyles(),i.isMobile||i.checkHeadsetConnected()||((n=i.canvas).requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen).apply(n,[{navigationUI:"hide"}]),i.resize(),t&&t()}}exitVR(){var e=this,t=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(t.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return e.removeState("vr-mode"),e.removeState("ar-mode"),e.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.hasAttribute("embedded")&&e.removeFullScreenStyles(),e.resize(),e.isIOS&&Ib(e.canvas),e.renderer.setPixelRatio(window.devicePixelRatio),e.emit("exit-vr",{target:e}),Promise.resolve()}getAttribute(e){var t=this.systems[e];return t?t.data:W_.prototype.getAttribute.call(this,e)}getDOMAttribute(e){var t=this.systems[e];return t?t.data:W_.prototype.getDOMAttribute.call(this,e)}setAttribute(e,t,n){if(P_[e]){U_.prototype.setAttribute.call(this,e,t);var i=this.systems[e];i&&i.updateProperties(t)}else W_.prototype.setAttribute.call(this,e,t,n)}removeBehavior(e){var t,n,i,r=this.behaviors[e.name];for(n in r)e[n]&&-1!==(i=(t=r[n]).array.indexOf(e))&&(t.inUse?-1===t.markedForRemoval.indexOf(e)&&t.markedForRemoval.push(e):(t.array[i]=t.array[t.array.length-1],t.array.pop()))}resize(){var e,t,n=this.camera,i=this.canvas,r=this.renderer.xr.isPresenting;e=this.renderer.xr.enabled&&r,!n||!i||this.is("vr-mode")&&(this.isMobile||e)||(t=iw(i,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),n.aspect=t.width/t.height,n.updateProjectionMatrix(),this.renderer.setSize(t.width,t.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var e,t,n,i=this;n={alpha:!0,antialias:!Z_,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((t=qb(this.getAttribute("renderer"))).precision&&(n.precision=t.precision+"p"),t.antialias&&"auto"!==t.antialias&&(n.antialias="true"===t.antialias),t.logarithmicDepthBuffer&&"auto"!==t.logarithmicDepthBuffer&&(n.logarithmicDepthBuffer="true"===t.logarithmicDepthBuffer),t.alpha&&(n.alpha="true"===t.alpha),t.stencil&&(n.stencil="true"===t.stencil),t.multiviewStereo&&(n.multiviewStereo="true"===t.multiviewStereo),this.maxCanvasSize={width:t.maxCanvasWidth?parseInt(t.maxCanvasWidth):this.maxCanvasSize.width,height:t.maxCanvasHeight?parseInt(t.maxCanvasHeight):this.maxCanvasSize.height});var r=["WebGLRenderer","WebGPURenderer"].find(function(e){return ev[e]});(e=this.renderer=new ev[r](n)).xr.setPoseTarget||(e.xr.setPoseTarget=function(){}),e.setPixelRatio(window.devicePixelRatio),this.camera&&e.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){e.xr.setPoseTarget(i.camera.el.object3D)})}play(){var e=this,t=this;this.renderStarted?W_.prototype.play.call(this):(this.addEventListener("loaded",function(){var e=this.renderer;W_.prototype.play.call(this),t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",zx),Bx&&(Bx.style.display="none"),e.setAnimationLoop(this.render),t.renderStarted=!0,t.emit("renderstart")))}),setTimeout(function(){W_.prototype.load.call(e)}))}updateComponent(e){e in P_||W_.prototype.updateComponent.apply(this,arguments)}tick(e,t){var n,i=this.systems;for(this.callComponentBehaviors("tick",e,t),n=0;n<this.systemNames.length;n++)i[this.systemNames[n]].tick&&i[this.systemNames[n]].tick(e,t)}tock(e,t,n){var i,r=this.systems;for(this.callComponentBehaviors("tock",e,t),i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tock&&r[this.systemNames[i]].tock(e,t,n)}render(e,t){var n=this.renderer;this.frame=t,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var i=null;if(this.is("ar-mode")&&(i=this.object3D.background,this.object3D.background=null),n.render(this.object3D,this.camera),i&&(this.object3D.background=i),this.isPlaying){var r=n.xr.isPresenting?n.xr.getCamera():this.camera;this.tock(this.time,this.delta,r)}}callComponentBehaviors(e,t,n){for(var i,r=0;r<this.componentOrder.length;r++){var o=this.behaviors[this.componentOrder[r]];if(o){var a=o[e];for(a.inUse=!0,i=0;i<a.array.length;i++)a.array[i].isPlaying&&a.array[i][e](t,n);for(a.inUse=!1,i=0;i<a.markedForRemoval.length;i++)this.removeBehavior(a.markedForRemoval[i]);a.markedForRemoval.length=0}}}}function tw(e,t){var n,i,r={},o=t||[];for(i in o.length=0,e){var a=e[i];if(void 0!==a){var s=a.before?a.before.slice(0):[],l=a.after?a.after.slice(0):[];r[i]={before:s,after:l,visited:!1,done:!1}}}for(i in r)for(n=0;n<r[i].before.length;n++){var c=r[i].before[n];c in r?r[c].after.push(i):K_("Invalid ordering constraint, no component named `"+c+"` referenced by `"+i+"`")}function u(e){if(e in r&&!r[e].done)if(r[e].visited)K_("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{r[e].visited=!0;for(var t=0;t<r[e].after.length;t++){var n=r[e].after[t];n in r||K_("Invalid before/after constraint, no component named `"+n+"` referenced in `"+e+"`"),u(n)}r[e].done=!0,o.push(e)}}for(i in r)r[i].done||u(i);return o}function nw(e,t){var n,i=window.devicePixelRatio;return!t||-1===t.width&&-1===t.height||e.width*i<t.width&&e.height*i<t.height||(n=e.width/e.height,e.width*i>t.width&&-1!==t.width&&(e.width=Math.round(t.width/i),e.height=Math.round(t.width/n/i)),e.height*i>t.height&&-1!==t.height&&(e.height=Math.round(t.height/i),e.width=Math.round(t.height*n/i))),e}function iw(e,t,n,i){return e.parentElement?t?nw({height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth},n):function(e,t){var n;return n={height:document.body.offsetHeight,width:document.body.offsetWidth},t?n:nw(n,e)}(n,i):{height:0,width:0}}customElements.define("a-scene",ew);var rw=o_,ow={},aw=[],sw=function(){};function lw(e,t){var n,i={};if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),ow[e])throw new Error("The geometry `"+e+"` has been already registered");return((n=function(){sw.call(this)}).prototype=Object.create(sw.prototype,i)).name=e,n.prototype.constructor=n,ow[e]={Geometry:n,schema:rw(n.prototype.schema)},aw.push(e),n}sw.prototype={schema:{},init:function(e){return this.geometry=new ev.BufferGeometry,this.geometry},update:function(e){}};var cw=DA,uw=Tb,hw=cw("extras:primitives:debug"),dw=cw("extras:primitives:warn"),pw=cw("extras:primitives:error"),fw={};function mw(e,t){if(e=e.toLowerCase(),!F_[e]){F_[e]=!0,hw("Registering <%s>",e),t.defaultAttributes&&dw("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=t.mappings||{},i=class extends W_{constructor(){super(),this.defaultComponentsFromPrimitive=t.defaultComponents||t.defaultAttributes||{},this.deprecated=t.deprecated||null,this.deprecatedMappings=t.deprecatedMappings||{},this.mappings=n,t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var e=this.mappings,t=this;Object.keys(e).forEach(function(n){var i;n!==n.toLowerCase()&&dw("Mapping keys should be specified in lower case. The mapping key "+n+" may not be recognized"),d_[n]&&(i=e[n].replace(".","-"),e[i]=e[n],delete e[n],console.warn("The primitive "+t.tagName.toLowerCase()+" has a mapping collision. The attribute "+n+" has the same name as a registered component and has been renamed to "+i))})}getExtraComponents(){var e,t,n,i,r,o=this;for(t=vx(this.defaultComponentsFromPrimitive),(r=this.getAttribute("mixin"))&&(r=Eb(r.trim(),/\s+/)).forEach(function(e){var n,r,c=document.getElementById(e);if(c){var u=c.rawAttributeCache,h=c.componentCache;for(var d in u){if(i=o.mappings[d])return void gw(i,u[d],t);d in h&&(t[d]=(n=t[d],r=h[d],a(n)?s(r):a(r)?s(n):l(n)&&l(r)?gx(n,r):s(r)))}}}),n=0;n<this.attributes.length;n++)e=this.attributes[n],(i=this.mappings[e.name])&&gw(i,e.value,t);return t;function a(e){return void 0===e}function s(e){return l(e)?gx({},e):e}function l(e){return null!==e&&e.constructor===Object}}attributeChangedCallback(e,t,n){var i=this.mappings[e];e in this.deprecatedMappings&&console.warn(this.deprecatedMappings[e]),e&&i?uw(this,i,n):super.attributeChangedCallback(e,t,n)}};return customElements.define(e,i),i.mappings=n,fw[e]=i,i}pw("Trying to register primitive "+e+" that has been already previously registered")}function gw(e,t,n){var i=Cb(e);i.constructor===Array?(n[i[0]]=n[i[0]]||{},n[i[0]][i[1]]=t.trim()):n[i]=t.trim()}var vw={},yw=[],Aw={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},bw=function(){};function xw(e,t){var n,i={};if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),vw[e])throw new Error("The shader "+e+" has already been registered");return((n=function(){bw.call(this)}).prototype=Object.create(bw.prototype,i)).name=e,n.prototype.constructor=n,vw[e]={Shader:n,schema:o_(n.prototype.schema)},yw.push(e),n}bw.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.uniforms=this.initUniforms(),this.material=new(this.raw?ev.RawShaderMaterial:ev.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?ev.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var e,t,n=this.schema,i={};for(e in n)"uniform"===n[e].is&&(t=Aw[n[e].type],i[e]={type:t,value:void 0});return i},update:function(e){var t,n,i=this.schema,r=this.uniforms;for(t in e)if(i[t]&&"uniform"===i[t].is)if("map"!==i[t].type)r[t].value=this.parseValue(i[t].type,e[t]),r[t].needsUpdate=!0;else{if(!r[t]||r[t].value===e[t])continue;n="_texture_"+t,this.setMapOnTextureLoad(r,t,n),Fb(n,t,this,e)}},parseValue:function(e,t){var n;switch(e){case"vec2":return new ev.Vector2(t.x,t.y);case"vec3":return new ev.Vector3(t.x,t.y,t.z);case"vec4":return new ev.Vector4(t.x,t.y,t.z,t.w);case"color":return n=new ev.Color(t),new ev.Vector3(n.r,n.g,n.b);default:return t}},setMapOnTextureLoad:function(e,t,n){var i=this;this.el.addEventListener("materialtextureloaded",function(){e[t].value=i.material[n],e[t].needsUpdate=!0})}};var _w=new ev.FileLoader,ww=DA("core:a-assets:warn");function Ew(e){if(e.hasAttribute("autoplay")||"auto"===e.getAttribute("preload"))return new Promise(function(t,n){if(4===e.readyState)return t();if(e.error)return n();function i(){for(var n=0,i=0;i<e.buffered.length;i++)n+=e.buffered.end(i)-e.buffered.start(i);n>=e.duration&&("VIDEO"===e.tagName&&ev.Cache.add(e.getAttribute("src"),e),t())}e.addEventListener("loadeddata",i,!1),e.addEventListener("progress",i,!1),e.addEventListener("error",n,!1)})}function Cw(e){var t=function(e){var t,n,i;if(e.hasAttribute("crossorigin"))return e;if(null!==(t=e.getAttribute("src"))){if(-1===t.indexOf("://"))return e;if((i=(n=t).indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).substring(0,i.indexOf(":"))===window.location.host)return e}return ww('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',t),e.crossOrigin="anonymous",e.cloneNode(!0)}(e);return t.tagName&&"video"===t.tagName.toLowerCase()&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}customElements.define("a-assets",class extends U_{constructor(){super(),this.isAssets=!0,this.fileLoader=_w,this.timeout=null}doConnectedCallback(){var e,t,n,i,r,o,a=this,s=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(r=this.querySelectorAll("img"),e=0;e<r.length;e++)i=Cw(r[e]),s.push(new Promise(function(t,n){ev.Cache.add(r[e].getAttribute("src"),i),i.complete?t():(i.onload=t,i.onerror=n)}));for(n=this.querySelectorAll("audio, video"),e=0;e<n.length;e++)(t=Cw(n[e])).src||t.srcObject||ww("Audio/video asset has neither `src` nor `srcObject` attributes."),s.push(Ew(t));this.getChildren().forEach(function(e){e.isAssetItem&&e.hasAttribute("src")&&s.push(new Promise(function(t,n){if(e.hasLoaded)return t();e.addEventListener("loaded",t),e.addEventListener("error",n)}))}),Promise.allSettled(s).then(function(){null!==a.timeout&&a.load()}),o=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){a.hasLoaded||(ww("Asset loading timed out in",o,"ms"),a.timeout=null,a.emit("timeout"),a.load())},o)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}),customElements.define("a-asset-item",class extends U_{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var e=this,t=this.getAttribute("src");_w.setResponseType(this.getAttribute("response-type")||function(e){var t=function(e){var t=document.createElement("a");t.href=e;var n=t.search.replace(/^\?/,""),i=e.replace(n,"").replace("?","");return i.substring(i.lastIndexOf("/")+1)}(e),n=t.lastIndexOf(".");return n>=0&&".glb"===t.slice(n,e.search(/\?|#|$/))?"arraybuffer":"text"}(t)),_w.load(t,function(t){e.data=t,U_.prototype.load.call(e)},function(t){e.emit("progress",{loadedBytes:t.loaded,totalBytes:t.total,xhr:t})},function(t){e.emit("error",{xhr:t},!1)})}});var Sw=DA("core:cubemap:warn");class Tw extends HTMLElement{constructor(e){return super(e)}onReadyStateChange(){"complete"===document.readyState&&this.doConnectedCallback()}connectedCallback(){"complete"===document.readyState?Tw.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var e,t=this.querySelectorAll("[src]"),n=[];if(6===t.length){for(e=0;e<t.length;e++)"IMG"===t[e].tagName?n.push(t[e]):n.push(t[e].getAttribute("src"));return n}Sw("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",Tw),customElements.define("a-mixin",class extends U_{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(),this.cacheAttribute(e,n),this.updateEntities()}setAttribute(e,t){window.HTMLElement.prototype.setAttribute.call(this,e,t),this.cacheAttribute(e,t)}cacheAttribute(e,t){var n,i;i=Eb(e,"__")[0],n=d_[i],void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.rawAttributeCache[e]=t,n&&(this.componentCache[e]=this.parseComponentAttrValue(n,t))}parseComponentAttrValue(e,t){var n;return"string"!=typeof t?t:(e.isSingleProperty?"string"==typeof(n=e.schema.parse(t))&&(n=t):n=qb(t),n)}getAttribute(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}cacheAttributes(){var e,t,n=this.attributes;for(t=0;t<n.length;t++)e=n[t].name,this.cacheAttribute(e)}updateEntities(){var e,t,n;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<t.length;n++)(e=t[n]).hasLoaded&&!e.isMixin&&e.mixinUpdate(this.id)}});const Iw="1.7.0";var Mw=new ev.Color,kw=new ev.Color,Rw=Sb,Lw=Tb,Bw={},Pw="color",Dw="rotation",Ow="components";function Nw(e){e.x=ev.MathUtils.degToRad(e.x),e.y=ev.MathUtils.degToRad(e.y),e.z=ev.MathUtils.degToRad(e.z)}function Fw(e,t,n){var i;for(i=0;i<t.length;i++)e.addEventListener(t[i],n)}function zw(e,t,n){var i;for(i=0;i<t.length;i++)e.removeEventListener(t[i],n)}function Uw(e,t){var n,i,r;for(i=Vw(t),r=e,n=0;n<i.length;n++)r=r[i[n]];if(void 0===r)throw console.log(e),new Error("[animation] property ("+t+") could not be found");return r}function jw(e,t,n,i){var r,o,a,s;for(t.startsWith("object3D.rotation")&&(n=ev.MathUtils.degToRad(n)),o=Vw(t),s=e,r=0;r<o.length-1;r++)s=s[o[r]];a=o[o.length-1],i!==Pw?s[a]=n:"r"in s[a]?(s[a].r=n.r,s[a].g=n.g,s[a].b=n.b):(s[a].x=n.r,s[a].y=n.g,s[a].z=n.b)}function Vw(e){return e in Bw||(Bw[e]=e.split(".")),Bw[e]}function Hw(e){return e.isRawProperty||e.property.startsWith(Ow)||e.property.startsWith("object3D")}I_("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(t.autoplay=!1,t.direction=n.dir,t.duration=n.dur,t.easing=n.easing,t.elasticity=n.elasticity,t.loop=n.loop,t.round=n.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=$g(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=$g(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,n,i=this.config,r=this.data,o=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=""===r.from?Uw(o,r.property):r.from,n=r.to,this.setColorConfig(e,n),e=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),i.targets=this.targetsArray,n)i[t]=n[t];var a;i.update=(a={},function(e){var t;(t=e.animatables[0].target).r===a.r&&t.g===a.g&&t.b===a.b||jw(o,r.property,t,r.type)})}},updateConfigForDefault:function(){var e,t,n,i,r=this.config,o=this.data,a=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=""===o.from?Hw(o)?Uw(a,o.property):Rw(a,o.property):o.from,n=o.to,isNaN(e||n)?(e=e?e.toString():e,n=n?n.toString():n):(e=parseFloat(e),n=parseFloat(n)),(t="true"===o.to||"false"===o.to||!0===o.to||!1===o.to)&&(e="true"===o.from||!0===o.from?1:0,n="true"===o.to||!0===o.to?1:0),this.targets.aframeProperty=e,r.targets=this.targets,r.aframeProperty=n,r.update=function(e){var n;(n=e.animatables[0].target.aframeProperty)!==i&&(i=n,t&&(n=n>=1),Hw(o)?jw(a,o.property,n,o.type):Lw(a,o.property,n))})},updateConfigForVector:function(){var e,t,n,i,r=this.config,o=this.data,a=this.el,s=Vw(o.property),l="object3D"===s[0]?s[1]:s[0];for(e in t=""!==o.from?vb(o.from):Rw(a,l),n=vb(o.to),l===Dw&&(Nw(t),Nw(n)),this.targetsArray.length=0,this.targetsArray.push(t),r.targets=this.targetsArray,n)r[e]=n[e];r.update="position"!==l&&l!==Dw&&"scale"!==l?function(){var e={};return function(t){var n=t.animatables[0].target;n.x===e.x&&n.y===e.y&&n.z===e.z||(e.x=n.x,e.y=n.y,e.z=n.z,Lw(a,o.property,n))}}():(i={},function(e){var t=e.animatables[0].target;t.x===i.x&&t.y===i.y&&t.z===i.z||(i.x=t.x,i.y=t.y,i.z=t.z,a.object3D[l].set(t.x,t.y,t.z))})},updateConfig:function(){var e;e=function(e,t){var n,i,r,o;return"object3D"!==(r=t.split("."))[0]||r[2]||"position"!==r[1]&&"rotation"!==r[1]&&"scale"!==r[1]?(i=r[0],o=r[1],(n=e.components[i]||d_[i])?o&&!n.schema[o]?null:o?n.schema[o].type:n.schema.type:null):"vec3"}(this.el,this.data.property),Hw(this.data)&&this.data.type===Pw?this.updateConfigForRawColor():"vec2"===e||"vec3"===e||"vec4"===e?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,n=this.data,i=this.el,r=this;return""===n.from&&!!n.property.startsWith(Ow)&&(t=Vw(n.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",function n(o){o.detail.name===t&&(e(),r.animation=$g(r.config),i.removeEventListener("componentinitialized",n))}),!0))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&"animation"===e.name&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;Fw(t,e.startEvents,this.onStartEvent),Fw(t,e.pauseEvents,this.pauseAnimation),Fw(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;zw(t,e.startEvents,this.onStartEvent),zw(t,e.pauseEvents,this.pauseAnimation),zw(t,e.resumeEvents,this.resumeAnimation)},setColorConfig:function(e,t){Mw.set(e),kw.set(t),e=this.fromColor,t=this.toColor,e.r=Mw.r,e.g=Mw.g,e.b=Mw.b,t.r=kw.r,t.g=kw.g,t.b=kw.b}});var Gw=DA("components:anchored:warn");I_("anchored",{schema:{persistent:{default:!1}},init:function(){var e=this.el.sceneEl.getAttribute("webxr"),t=e.optionalFeatures;-1===t.indexOf("anchors")&&(t.push("anchors"),this.el.sceneEl.setAttribute("webxr",e)),this.auxQuaternion=new ev.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var e,t,n,i=this.el.sceneEl,r=i.renderer.xr,o=this.el.object3D;(i.is("ar-mode")||i.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(e=i.frame,t=r.getReferenceSpace(),n=e.getPose(this.anchor.anchorSpace,t),o.position.copy(n.transform.position),o.quaternion.copy(n.transform.orientation)))},createAnchor:async function(e,t){var n,i,r,o,a=this.el.sceneEl,s=a.renderer.xr,l=this.el.object3D;e=e||l.position,t=t||this.auxQuaternion.setFromEuler(l.rotation),function(e){var t=e.renderer.xr.getSession();return t&&t.restorePersistentAnchor}(a)?(this.anchor&&this.deleteAnchor(),n=a.frame,i=s.getReferenceSpace(),r=new XRRigidTransform({x:e.x,y:e.y,z:e.z},{x:t.x,y:t.y,z:t.z,w:t.w}),this.requestAnchorPending=!1,o=await n.createAnchor(r,i),this.data.persistent&&(this.el.id?(this.persistentHandle=await o.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):Gw("The anchor won't be persisted because the entity has no assigned id.")),a.object3D.attach(this.el.object3D),this.anchor=o):Gw("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var e,t=this.el.sceneEl.renderer.xr.getSession(),n=t.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return Gw("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(n){e=localStorage.getItem(this.el.id);for(var i=0;i<n.length;++i)if(e===n[i]){this.anchor=await t.restorePersistentAnchor(n[i]),this.anchor&&(this.persistentHandle=n[i]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var e,t=this.anchor;t&&(e=this.el.sceneEl.renderer.xr.getSession(),t.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&e.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),I_("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var e,t=this.el;e=this.camera=new ev.PerspectiveCamera,t.setObject3D("camera",e)},update:function(e){var t=this.data,n=this.camera;n.aspect=t.aspect||window.innerWidth/window.innerHeight,n.far=t.far,n.fov=t.fov,n.near=t.near,n.zoom=t.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(e),this.updateSpectatorCamera(e)},updateActiveCamera:function(e){var t=this.data,n=this.el,i=this.system;e&&e.active===t.active||t.spectator||(t.active&&i.activeCameraEl!==n?i.setActiveCamera(n):t.active||i.activeCameraEl!==n||i.disableActiveCamera())},updateSpectatorCamera:function(e){var t=this.data,n=this.el,i=this.system;e&&e.spectator===t.spectator||(t.spectator&&i.spectatorCameraEl!==n?i.setSpectatorCamera(n):t.spectator||i.spectatorCameraEl!==n||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var Qw,Ww,qw,Xw,Yw="click",Kw="mouseup",Jw="cursor-fusing",Zw="cursor-hovering",$w="cursor-hovered",eE={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},tE={DOWN:["selectstart"],UP:["selectend"]},nE="a-mouse-cursor-hover",iE=(I_("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:YA()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var e=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=fx(function(){e.canvasBounds=e.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(e){var t=this.data.rayOrigin;t!==e.rayOrigin&&("entity"===t&&this.resetRaycaster(),this.updateMouseEventListeners(),"xrselect"!==t&&"entity"!==t||this.addWebXREventListeners(),"xrselect"!==e.rayOrigin&&"entity"!==e.rayOrigin||this.removeWebXREventListeners())},tick:function(){var e=this.el.sceneEl.frame,t=this.activeXRInput;"xrselect"===this.data.rayOrigin&&e&&t&&this.onMouseMove({frame:e,inputSource:t,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(Zw),e.removeState(Jw),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState($w),this.removeEventListeners()},addEventListeners:function(){var e,t=this.data,n=this.el,i=this;function r(){e=n.sceneEl.canvas,t.downEvents.length||t.upEvents.length||(eE.DOWN.forEach(function(t){e.addEventListener(t,i.onCursorDown,{passive:!1})}),eE.UP.forEach(function(t){e.addEventListener(t,i.onCursorUp,{passive:!1})}))}(e=n.sceneEl.canvas)?r():n.sceneEl.addEventListener("render-target-loaded",r),t.downEvents.forEach(function(e){n.addEventListener(e,i.onCursorDown)}),t.upEvents.forEach(function(e){n.addEventListener(e,i.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-closest-entity-changed",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var e,t=this.data,n=this.el,i=this;!(e=n.sceneEl.canvas)||t.downEvents.length||t.upEvents.length||(eE.DOWN.forEach(function(t){e.removeEventListener(t,i.onCursorDown)}),eE.UP.forEach(function(t){e.removeEventListener(t,i.onCursorUp)})),t.downEvents.forEach(function(e){n.removeEventListener(e,i.onCursorDown)}),t.upEvents.forEach(function(e){n.removeEventListener(e,i.onCursorUp)}),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),n.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var e,t=this.el;(e=t.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("touchmove",this.onMouseMove,{passive:!1}),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:(new ev.Vector3).set(0,0,-1),origin:new ev.Vector3})},addWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(tE.DOWN.forEach(function(n){t.addEventListener(n,e.onCursorDown)}),tE.UP.forEach(function(n){t.addEventListener(n,e.onCursorUp)}))},removeWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(tE.DOWN.forEach(function(n){t.removeEventListener(n,e.onCursorDown)}),tE.UP.forEach(function(n){t.removeEventListener(n,e.onCursorUp)}))},onMouseMove:(Qw=new ev.Vector3,Ww=new ev.Vector2,qw=new ev.Vector3,Xw={origin:qw,direction:Qw},function(e){var t,n,i,r,o,a,s,l,c,u=this.canvasBounds,h=this.el.sceneEl.camera;h.parent.updateMatrixWorld(),n=(i="touchmove"===e.type||"touchstart"===e.type?e.touches.item(0):e).clientX-u.left,r=i.clientY-u.top,Ww.x=n/u.width*2-1,Ww.y=-r/u.height*2+1,"xrselect"!==this.data.rayOrigin||"selectstart"!==e.type&&"fakeselectevent"!==e.type?"fakeselectout"===e.type?(Qw.set(0,1,0),qw.set(0,9999,0)):h&&h.isPerspectiveCamera?(qw.setFromMatrixPosition(h.matrixWorld),Qw.set(Ww.x,Ww.y,.5).unproject(h).sub(qw).normalize()):h&&h.isOrthographicCamera?(qw.set(Ww.x,Ww.y,(h.near+h.far)/(h.near-h.far)).unproject(h),Qw.set(0,0,-1).transformDirection(h.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+h.type):(o=e.frame,a=e.inputSource,s=this.el.sceneEl.renderer.xr.getReferenceSpace(),(l=o.getPose(a.targetRaySpace,s))&&(c=l.transform,Qw.set(0,0,-1),Qw.applyQuaternion(c.orientation),qw.copy(c.position),(t=h.el.object3D.parent).localToWorld(qw),Qw.transformDirection(t.matrixWorld))),this.el.setAttribute("raycaster",Xw),"touchmove"===e.type&&e.preventDefault()}),onCursorDown:function(e){this.isCursorDown=!0,"mouse"===this.data.rayOrigin&&"touchstart"===e.type&&(this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),e.preventDefault()),"xrselect"===this.data.rayOrigin&&"selectstart"===e.type&&(this.activeXRInput=e.inputSource,this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&void 0!==this.el.sceneEl.components["ar-hit-test"]&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",e),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){if(this.isCursorDown&&("xrselect"!==this.data.rayOrigin||this.activeXRInput===e.inputSource)){this.isCursorDown=!1;var t=this.data;this.twoWayEmit(Kw,e),!0===this.reenableARHitTest&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(Kw,this.intersectedEventDetail)),t.fuse&&"mouse"!==t.rayOrigin&&"xrselect"!==t.rayOrigin||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(Yw,e),"xrselect"===t.rayOrigin&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,"touchend"===e.type&&e.preventDefault()}},onIntersection:function(e){var t,n,i,r,o=this.el;n=e.detail.els[0]===o?1:0,r=e.detail.intersections[n],(i=e.detail.els[n])&&this.intersectedEl!==i&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl))&&t.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(e){-1!==e.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},onEnterVR:function(){var e=this.data.rayOrigin;this.clearCurrentIntersection(!0),"xrselect"!==e&&"entity"!==e||this.addWebXREventListeners()},setIntersection:function(e,t){var n=this.el,i=this.data,r=this;this.intersectedEl!==e&&(this.intersectedEl=e,n.addState(Zw),e.addState($w),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.add(nE),0!==i.fuseTimeout&&i.fuse&&"xrselect"!==i.rayOrigin&&"mouse"!==i.rayOrigin&&(n.addState(Jw),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){n.removeState(Jw),r.twoWayEmit(Yw)},i.fuseTimeout)))},clearCurrentIntersection:function(e){var t,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState($w),i.removeState(Zw),i.removeState(Jw),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.remove(nE),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==e&&0!==(n=this.el.components.raycaster.intersections).length&&(t=n[n[0].object.el===i?1:0])&&this.setIntersection(t.object.el,t))},twoWayEmit:function(e,t){var n,i=this.el,r=this.intersectedEl;function o(e,n){t instanceof MouseEvent?e.mouseEvent=t:"undefined"!=typeof TouchEvent&&t instanceof TouchEvent&&(e.touchEvent=t)}n=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=n,o(this.eventDetail),i.emit(e,this.eventDetail),r&&(this.intersectedEventDetail.intersection=n,o(this.intersectedEventDetail),r.emit(e,this.intersectedEventDetail))}}),new ev.BufferGeometry),rE=(I_("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:aw,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t,n=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(e),this.geometry=null),this.geometry=r.getOrCreateGeometry(n),(t=i.getObject3D("mesh"))?t.geometry=this.geometry:((t=new ev.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(t.material=new ev.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),i.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=iE,this.geometry=null},updateSchema:function(e){var t=this.oldData&&this.oldData.primitive,n=e.primitive,i=ow[n]&&ow[n].schema;if(!i)throw new Error("Unknown geometry schema `"+n+"`");t&&t===n||this.extendSchema(i)}}),"generic"),oE=(I_("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",function(t){t.detail.name!==e.name&&(e.wasControllerConnected=!0,e.removeEventListeners(),e.removeControllersUpdateListener())})},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t=e.hand?e.hand:void 0;tx(this,rE,{hand:t,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:rE,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},initDefaultModel:function(){var e=this.modelEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:.03}),e.setAttribute("material",{color:this.data.color}),this.el.appendChild(e),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),DA("components:gltf-model:warn"));I_("gltf-model",{schema:{type:"model"},init:function(){var e=this,t=this.system.getDRACOLoader(),n=this.system.getMeshoptDecoder(),i=this.system.getKTX2Loader();this.model=null,this.loader=new vv,t&&this.loader.setDRACOLoader(t),this.ready=n?n.then(function(t){e.loader.setMeshoptDecoder(t)}):Promise.resolve(),i&&this.loader.setKTX2Loader(i)},update:function(){var e=this,t=this.el,n=this.data;n&&(this.remove(),this.ready.then(function(){e.loader.load(n,function(n){e.model=n.scene||n.scenes[0],e.model.animations=n.animations,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})},void 0,function(e){var i=e&&e.message?e.message:"Failed to load glTF model";oE(i),t.emit("model-error",{format:"gltf",src:n})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),I_("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var aE,sE=MA+"controllers/oculus-hands/v4/left.glb",lE=MA+"controllers/oculus-hands/v4/right.glb",cE=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];I_("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!1},init:function(){var e=this.el.sceneEl,t=e.getAttribute("webxr"),n=t.optionalFeatures;-1===n.indexOf("hand-tracking")&&(n.push("hand-tracking"),e.setAttribute("webxr",t)),this.wristObject3D=new ev.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new ev.Vector3,wristRotation:new ev.Quaternion},this.indexTipPosition=new ev.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*cE.length),this.jointRadii=new Float32Array(cE.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(e){this.addChildEntity(e.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var e=this.jointEls,t=this.skinnedMesh,n=!(1===this.data.modelOpacity);t&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=n,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var i=0;i<e.length;i++)e[i].setAttribute("material",{color:this.data.modelColor,transparent:n,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var e=this,t=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,t){var n=e.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(n).then(function(t){e.referenceSpace=t}).catch(function(t){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,"tracked-controls-webxr uses reference space "+n),t})}},checkIfControllerPresent:function(){var e=this.data;tx(this,"",{hand:e.hand?e.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var e=this.el.sceneEl,t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,n=e.frame,i=this.el.components["tracked-controls"],r=this.referenceSpace;t&&n&&r&&i&&(this.hasPoses=!1,t.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=n.fillPoses(t.hand.values(),r,this.jointPoses)&&n.fillJointRadii(t.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(aE=new ev.Matrix4,function(){var e=this.wristObject3D;e&&this.hasPoses&&(aE.fromArray(this.jointPoses,0),e.position.setFromMatrixPosition(aE),e.quaternion.setFromRotationMatrix(aE))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,"dots"===this.data.modelStyle&&this.updateHandDotsModel(),"mesh"===this.data.modelStyle&&this.updateHandMeshModel()},getBone:function(e){for(var t=this.bones,n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},updateHandMeshModel:function(){var e=new ev.Matrix4;return function(){var t=0,n=this.jointPoses,i=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(i&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var r of i.hand.values()){var o=this.getBone(r.jointName);null!=o&&(this.mesh.visible=!0,e.fromArray(n,16*t),o.position.setFromMatrixPosition(e),o.quaternion.setFromRotationMatrix(e)),t++}}}(),updateHandDotsModel:function(){for(var e,t,n=this.jointPoses,i=this.jointRadii,r=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,o=0;o<r.hand.size;o++)t=(e=this.jointEls[o]).object3D,e.object3D.visible=this.hasPoses,this.hasPoses&&(t.matrix.fromArray(n,16*o),t.matrix.decompose(t.position,t.rotation,t.scale),e.setAttribute("scale",{x:i[o],y:i[o],z:i[o]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var e=new ev.Vector3,t=new ev.Matrix4;return function(){var n=this.indexTipPosition,i=this.pinchEventDetail;if(this.hasPoses){e.setFromMatrixPosition(t.fromArray(this.jointPoses,64)),n.setFromMatrixPosition(t.fromArray(this.jointPoses,144)),i.wristRotation.setFromRotationMatrix(t.fromArray(this.jointPoses,0));var r=n.distanceTo(e);r<.015&&!1===this.isPinched&&(this.isPinched=!0,i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchstarted",i)),r>.02&&!0===this.isPinched&&(this.isPinched=!1,i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchended",i)),this.isPinched&&(i.position.copy(n).add(e).multiplyScalar(.5),this.el.emit("pinchmoved",i))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{id:"",hand:t.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==e.getObject3D("mesh")&&e.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var e,t=this.el;this.checkIfControllerPresent(),e=t.components["tracked-controls"]&&t.components["tracked-controls"].controller,this.mesh&&e&&e.hand&&e.hand instanceof XRHand&&t.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var e=this.data;"dots"===e.modelStyle&&this.initDotsModel(),"mesh"===e.modelStyle&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(0===this.jointEls.length){for(var e=0;e<cE.length;++e){var t=this.jointEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:1}),t.object3D.visible=!1,this.el.appendChild(t),this.jointEls.push(t)}this.updateModelMaterial()}},initMeshHandModel:function(){var e="left"===this.data.hand?sE:lE;this.el.setAttribute("gltf-model",e)},onModelLoaded:function(){var e=this.mesh=this.el.getObject3D("mesh").children[0],t=this.skinnedMesh=e.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=t.skeleton.bones,this.el.removeObject3D("mesh"),e.position.set(0,0,0),e.rotation.set(0,0,0),t.frustumCulled=!1,t.material=new ev.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",e),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new ev.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var e=this.el.children,t=0;t<e.length;++t)e[t]instanceof W_&&this.addChildEntity(e[t])},addChildEntity:function(e){e instanceof W_&&this.wristObject3D.add(e.object3D)}}),I_("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var e,t=this.el,n=this.data;e="right"===n.hand?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",t.setAttribute("hand-tracking-controls",{hand:n.hand}),t.setAttribute("obb-collider",{trackedObject3D:e,size:.04}),this.auxMatrix=new ev.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var e,t=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),n=0;n<t.length;++n)(e=t[n].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===e.grabbedEl&&e.releaseGrabbedEntity();return!1},onCollisionStarted:function(e){var t=e.detail.withEl;this.collidedEl||t.getAttribute("grabbable")&&(this.collidedEl=t,this.grabbingObject3D=e.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(e){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var e=this.grabbedEl;if(e){var t=e.object3D,n=t.parent,i=this.originalParent;t.applyMatrix4(n.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),n.remove(t),i.add(t),this.el.emit("grabended",{grabbedEl:e}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var e=this.grabbedEl,t=e.object3D,n=t.parent;this.originalParent=n;var i=this.el.components["hand-tracking-controls"].wristObject3D;t.applyMatrix4(n.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),n.remove(t),i.add(t),this.el.emit("grabstarted",{grabbedEl:e})}});var uE={toonLeft:MA+"controllers/hands/leftHand.glb",toonRight:MA+"controllers/hands/rightHand.glb",lowPolyLeft:MA+"controllers/hands/leftHandLow.glb",lowPolyRight:MA+"controllers/hands/rightHandLow.glb",highPolyLeft:MA+"controllers/hands/leftHandHigh.glb",highPolyRight:MA+"controllers/hands/rightHandHigh.glb"},hE="Point",dE="Fist",pE="Thumb Up",fE={};function mE(e,t){var n;if(e)return"grip"===(n=fE[e])?n+(t?"close":"open"):"point"===n?n+(t?"up":"down"):"pointing"===n||"pistol"===n?n+(t?"start":"end"):void 0}fE[dE]="grip",fE[pE]="pistol",fE[hE]="pointing",I_("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var e=this,t=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new vv,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected),t.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(t/1e3)},onControllerConnected:function(e){var t=this.el,n=this.data.hand,i=this.el.getObject3D("mesh");t.object3D.visible=!0;var r="left"===n?Math.PI/2:-Math.PI/2,o=t.sceneEl.hasWebXR?-Math.PI/2:0;"pico-controls"===e.detail.name&&(o+=Math.PI/4),i.position.set(0,0,0),i.rotation.set(o,0,r)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,n=this.el,i=this.data.hand,r=this.data.handModelStyle,o=this.data.color,a=this;if(t={hand:i,model:!1},i!==e){var s=uE[r+i.charAt(0).toUpperCase()+i.slice(1)];this.loader.load(s,function(e){var i=e.scene.children[0];i.mixer=new ev.AnimationMixer(i),a.clips=e.animations,n.setObject3D("mesh",i),i.traverse(function(e){e.isMesh&&(e.material.color=new ev.Color(o))}),n.setAttribute("magicleap-controls",t),n.setAttribute("vive-controls",t),n.setAttribute("meta-touch-controls",t),n.setAttribute("pico-controls",t),n.setAttribute("windows-motion-controls",t),n.setAttribute("hp-mixed-reality-controls",t)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var n,i="down"===t,r="touchstart"===t;if(0===t.indexOf("touch")){if(r===this.touchedButtons[e])return;this.touchedButtons[e]=r}else{if(i===this.pressedButtons[e])return;this.pressedButtons[e]=i}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var e,t,n,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,o=this.pressedButtons.trackpad||this.touchedButtons.trackpad,a=this.pressedButtons.trigger||this.touchedButtons.trigger,s=this.touchedButtons.AorX||this.touchedButtons.BorY;return(n=(t=this.el.components["tracked-controls"])&&t.controller)&&(n.id&&0===n.id.indexOf("OpenVR ")||n.profiles&&n.profiles[0]&&"htc-vive"===n.profiles[0])?i||a?e=dE:o&&(e=hE):i?e=r||s||o?a?dE:hE:a?pE:"Point + Thumb":a&&(e="Hold"),e},getClip:function(e){var t,n;for(n=0;n<this.clips.length;n++)if((t=this.clips[n]).name===e)return t},animateGesture:function(e,t){e?this.playAnimation(e||"Open",t,!1):this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var n,i=this.el;t!==e&&((n=mE(t,!1))&&i.emit(n),(n=mE(e,!0))&&i.emit(n))},playAnimation:function(e,t,n){var i,r,o=this.el.getObject3D("mesh");if(o){if(i=this.getClip(e),r=o.mixer.clipAction(i),n)return r.paused=!1,void(r.timeScale=-1);if(r.clampWhenFinished=!0,r.loop=ev.LoopOnce,r.repetitions=0,r.timeScale=1,r.time=0,r.weight=1,!t)return o.mixer.stopAllAction(),void r.play();i=this.getClip(t),r.reset(),r.play(),o.mixer.clipAction(i).crossFadeTo(r,.15,!0)}}}),I_("hide-on-enter-ar",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",function(){e.el.sceneEl.is("ar-mode")&&(e.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){e.el.object3D.visible=!0})}}),I_("hide-on-enter-vr",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",function(){e.el.sceneEl.is("vr-mode")&&(e.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){e.el.object3D.visible=!0})}});var gE="hp-mixed-reality",vE=MA+"controllers/hp/mixed-reality/",yE={x:0,y:0,z:.06},AE={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},bE=(I_("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){ox(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e,e.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex="right"===e.hand?0:"left"===e.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;tx(this,gE,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:gE,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",vE+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&("trigger"===n&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t=e.detail.model;this.data.model&&(t.position.copy(yE),t.rotation.copy(AE),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new ev.Vector3(0,0,0)}))},onAxisMoved:function(e){rx(this,this.mapping.axes,e)}}),DA("components:layer:warn"));function xE(e,t,n){return(t.dot(e)-t.dot(n))/t.length()}I_("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var e=this.el.sceneEl.renderer.getContext();this.quaternion=new ev.Quaternion,this.position=new ev.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=e.createFramebuffer();var t=this.el.sceneEl.getAttribute("webxr"),n=t.requiredFeatures;-1===n.indexOf("layers")&&(n.push("layers"),this.el.sceneEl.setAttribute("webxr",t)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(e){this.data.src!==e.src&&this.updateSrc()},updateSrc:function(){var e=this.data.type;this.texture=void 0,"quad"!==e?"monocubemap"!==e&&"stereocubemap"!==e||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var e,t=this.xrGLFactory,n=this.el.sceneEl.frame,i=this.data.src,r=this.data.type;this.visibilityChanged=!1,this.layer&&("monocubemap"!==r&&"stereocubemap"!==r||(i.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,"monocubemap"===r?(e=t.getSubImage(this.layer,n),this.loadCubeMapImage(e.colorTexture,i,0)):(e=t.getSubImage(this.layer,n,"left"),this.loadCubeMapImage(e.colorTexture,i,0),e=t.getSubImage(this.layer,n,"right"),this.loadCubeMapImage(e.colorTexture,i,6))))},loadQuadImage:function(){var e=this.data.src,t=this;this.el.sceneEl.systems.material.loadTexture(e,{src:e},function(n){t.el.sceneEl.renderer.initTexture(n),t.texture=n,"VIDEO"===e.tagName&&setTimeout(function(){t.textureIsVideo=!0},1e3),t.layer&&(t.layer.height=t.data.height/2||t.texture.image.height/1e3,t.layer.width=t.data.width/2||t.texture.image.width/1e3,t.needsRedraw=!0),t.updateQuadPanel()})},preGenerateCubeMapTextures:function(e,t){"monocubemap"===this.data.type?this.generateCubeMapTextures(e,0,t):(this.generateCubeMapTextures(e,0,t),this.generateCubeMapTextures(e,6,t))},generateCubeMapTextures:function(e,t,n){for(var i,r,o=this.data,a=this.cubeFaceSize,s=Math.min(e.width,e.height),l=[],c=0;c<6;c++){var u=document.createElement("CANVAS");u.width=u.height=a;var h=u.getContext("2d");o.rotateCubemap&&(2!==c&&3!==c||(h.save(),h.translate(a,a),h.rotate(Math.PI))),h.drawImage(e,(c+t)*s,0,s,s,0,0,a,a),h.restore(),n&&n(),l.push(u)}return o.rotateCubemap&&(i=l[0],r=l[1],l[0]=r,l[1]=i,i=l[4],r=l[5],l[4]=r,l[5]=i),n&&n(),l},loadCubeMapImage:function(e,t,n){var i,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,e),i=!t.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(t,n);var o=0;i.forEach(function(e,t){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,r.RGBA,r.UNSIGNED_BYTE,e),o=r.getError()}),0!==o&&console.log("renderingError, WebGL Error Code: "+o),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&("quad"===this.data.type&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var e=this,t=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(t){e.visibilityChanged="hidden"!==t.session.visibilityState},"quad"!==t?"monocubemap"!==t&&"stereocubemap"!==t||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var e=this.el.sceneEl,t=e.renderer.getContext(),n=this.xrGLFactory=new XRWebGLBinding(e.xrSession,t);this.texture&&(this.layer=n.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),e.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var e=this.data.src,t=this.el.sceneEl,n=t.renderer.getContext(),i=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(i,Math.min(e.width,e.height)),o=this.xrGLFactory=new XRWebGLBinding(t.xrSession,n);this.layer=o.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:"monocubemap"===this.data.type?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),t.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var e=this.cubeFaceSize,t=this.loadingScreenImages=[],n=0;n<6;n++){var i=document.createElement("CANVAS");i.width=i.height=e;var r=i.getContext("2d");i.width=i.height=e,r.fillStyle="black",r.fillRect(0,0,e,e),2!==n&&3!==n&&(r.translate(e,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",e/2,e/2)),t.push(i)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(e){this.layerEnabled=e,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var e=this.quadPanelEl;this.quadPanelEl||(e=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(e)),e.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),e.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var e=this.el.sceneEl,t=this.el.sceneEl.renderer.getContext(),n=this.xrGLFactory.getSubImage(this.layer,e.frame),i=e.renderer.properties.get(this.texture).__webglTexture,r=t.getParameter(t.FRAMEBUFFER_BINDING);t.viewport(n.viewport.x,n.viewport.y,n.viewport.width,n.viewport.height),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n.colorTexture,0),function(e,t,n,i){var r=e.createFramebuffer(),o=n.viewport.x,a=n.viewport.y,s=n.viewport.x+n.viewport.width,l=n.viewport.y+n.viewport.height;"VIDEO"===i.tagName&&(e.bindTexture(e.TEXTURE_2D,t),e.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,e.RGB,e.UNSIGNED_BYTE,i)),e.bindFramebuffer(e.READ_FRAMEBUFFER,r),e.framebufferTexture2D(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.readBuffer(e.COLOR_ATTACHMENT0),e.blitFramebuffer(0,0,i.width,i.height,o,a,s,l,e.COLOR_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.deleteFramebuffer(r)}(t,i,n,this.data.src),t.bindFramebuffer(t.FRAMEBUFFER,r)},updateTransform:function(){var e=this.el,t=this.position,n=this.quaternion;e.object3D.updateMatrixWorld(),t.setFromMatrixPosition(e.object3D.matrixWorld),n.setFromRotationMatrix(e.object3D.matrixWorld),this.layerEnabled||t.set(0,0,1e8),this.layer.transform=new XRRigidTransform(t,n)},onEnterVR:function(){var e=this.el.sceneEl,t=e.xrSession;e.hasWebXR&&XRWebGLBinding&&t?(t.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):bE("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(e){this.referenceSpace=e}}),I_("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var e=this.config,t=this.data,n=this.el,i=this,r={hand:t.hand,model:t.model};function o(t){var r=e[t.detail.name];if(r){var o=mx({showLine:!0},r.raycaster||{});t.detail.rayOrigin&&(o.origin=t.detail.rayOrigin.origin,o.direction=t.detail.rayOrigin.direction,o.showLine=!0),t.detail.rayOrigin||!i.modelReady?n.setAttribute("raycaster",o):n.setAttribute("raycaster","showLine",!0),n.setAttribute("cursor",mx({fuse:!1},r.cursor))}}n.setAttribute("hp-mixed-reality-controls",r),n.setAttribute("magicleap-controls",r),n.setAttribute("oculus-go-controls",r),n.setAttribute("meta-touch-controls",r),n.setAttribute("pico-controls",r),n.setAttribute("valve-index-controls",r),n.setAttribute("vive-controls",r),n.setAttribute("vive-focus-controls",r),n.setAttribute("windows-motion-controls",r),n.setAttribute("generic-tracked-controller-controls",{hand:r.hand}),n.addEventListener("controllerconnected",o),n.addEventListener("controllerdisconnected",function(t){e[t.detail.name]&&n.setAttribute("raycaster","showLine",!1)}),n.addEventListener("controllermodelready",function(e){o(e),i.modelReady=!0})},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var _E,wE,EE,CE,SE,TE,IE,ME,kE,RE,LE=ev.MathUtils.degToRad,BE=DA("components:light:warn"),PE=new ev.CubeTextureLoader,DE={};function OE(e,t){return!(!e||!t)&&e.x===t.x&&e.y===t.y&&e.z===t.z}I_("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(e)},update:function(e){var t=this.data,n=xx(t,e),i=this.light,r=this;if(!i||"type"in n)this.setLight(this.data),this.updateShadow();else{var o=!1;Object.keys(n).forEach(function(e){var n=t[e];switch(e){case"color":i.color.set(n);break;case"groundColor":i.groundColor.set(n);break;case"angle":i.angle=LE(n);break;case"target":null===n?"spot"!==t.type&&"directional"!==t.type||(i.target=r.defaultTarget):n.hasLoaded?r.onSetTarget(n,i):n.addEventListener("loaded",r.onSetTarget.bind(r,n,i));break;case"envMap":r.updateProbeMap(t,i);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":o||(r.updateShadow(),o=!0);break;case"shadowCameraAutomatic":t.shadowCameraAutomatic?r.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(t.shadowCameraAutomatic)):r.shadowCameraAutomaticEls=[];break;default:i[e]=n}})}},tick:(_E=new ev.Box3,wE=new ev.Vector3,EE=new ev.Vector3,CE=new ev.Matrix4,SE=new ev.Sphere,TE=new ev.Vector3,function(){if("directional"===this.data.type&&this.light.shadow&&this.light.shadow.camera instanceof ev.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var e=this.light.shadow.camera;e.getWorldDirection(wE),e.getWorldPosition(EE),CE.copy(e.matrixWorld),CE.invert(),e.near=1,e.left=1e5,e.right=-1e5,e.top=-1e5,e.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(t){_E.setFromObject(t.object3D),_E.getBoundingSphere(SE);var n,i,r,o,a,s=xE(EE,wE,SE.center),l=(n=EE,i=wE,r=SE.center,o=TE,a=xE(n,i,r),o.copy(i),o.multiplyScalar(a),o.add(r),o).applyMatrix4(CE);e.near=Math.min(-s-SE.radius-1,e.near),e.left=Math.min(-SE.radius+l.x,e.left),e.right=Math.max(SE.radius+l.x,e.right),e.top=Math.max(SE.radius+l.y,e.top),e.bottom=Math.min(-SE.radius+l.y,e.bottom)}),e.updateProjectionMatrix()}}),setLight:function(e){var t=this.el,n=this.getLight(e);n&&(this.light&&t.removeObject3D("light"),this.light=n,this.light.el=t,t.setObject3D("light",this.light),"spot"!==e.type&&"directional"!==e.type&&"hemisphere"!==e.type||t.getObject3D("light").translateY(-1),"spot"===e.type&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)),e.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(e.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var e=this.el,t=this.data,n=this.light;n.castShadow=t.castShadow;var i=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!i?(i=new ev.CameraHelper(n.shadow.camera),e.setObject3D("cameraHelper",i)):!t.shadowCameraVisible&&i&&e.removeObject3D("cameraHelper"),!t.castShadow)return n;n.shadow.bias=t.shadowBias,n.shadow.radius=t.shadowRadius,n.shadow.mapSize.height=t.shadowMapHeight,n.shadow.mapSize.width=t.shadowMapWidth,n.shadow.camera.near=t.shadowCameraNear,n.shadow.camera.far=t.shadowCameraFar,n.shadow.camera instanceof ev.OrthographicCamera?(n.shadow.camera.top=t.shadowCameraTop,n.shadow.camera.right=t.shadowCameraRight,n.shadow.camera.bottom=t.shadowCameraBottom,n.shadow.camera.left=t.shadowCameraLeft):n.shadow.camera.fov=t.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(e){var t=e.angle,n=new ev.Color(e.color);n=n.getHex();var i=e.decay,r=e.distance,o=new ev.Color(e.groundColor);o=o.getHex();var a=e.intensity,s=e.type,l=e.target,c=null;switch(s.toLowerCase()){case"ambient":return new ev.AmbientLight(n,a);case"directional":return c=new ev.DirectionalLight(n,a),this.defaultTarget=c.target,l&&(l.hasLoaded?this.onSetTarget(l,c):l.addEventListener("loaded",this.onSetTarget.bind(this,l,c))),c;case"hemisphere":return new ev.HemisphereLight(n,o,a);case"point":return new ev.PointLight(n,a,r,i);case"spot":return c=new ev.SpotLight(n,a,r,LE(t),e.penumbra,i),this.defaultTarget=c.target,l&&(l.hasLoaded?this.onSetTarget(l,c):l.addEventListener("loaded",this.onSetTarget.bind(this,l,c))),c;case"probe":return c=new ev.LightProbe,this.updateProbeMap(e,c),c;default:BE("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",s)}},updateProbeMap:function(e,t){e.envMap?(void 0===DE[e.envMap]&&(DE[e.envMap]=new window.Promise(function(t){Lb(e.envMap,function(n){PE.load(n,function(n){var i=EA.fromCubeTexture(n);DE[e.envMap]=i,t(i)})})})),DE[e.envMap]instanceof window.Promise?DE[e.envMap].then(function(e){t.copy(e)}):DE[e.envMap]instanceof ev.LightProbe&&t.copy(DE[e.envMap])):t.copy(new ev.LightProbe)},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}}),I_("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,n=this.data;t=this.material=new ev.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),(e=this.geometry=new ev.BufferGeometry).setAttribute("position",new ev.BufferAttribute(new Float32Array(6),3)),this.line=new ev.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,n=this.geometry,i=!1,r=this.material,o=n.attributes.position.array;OE(t.start,e.start)||(o[0]=t.start.x,o[1]=t.start.y,o[2]=t.start.z,i=!0),OE(t.end,e.end)||(o[3]=t.end.x,o[4]=t.end.y,o[5]=t.end.z,i=!0),i&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=t.opacity<1,r.visible=t.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),I_("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new ev.Quaternion,this.hiddenEls=[]},update:function(e){var t,n,i=this.data,r=this.el;if(i.visualAspectEnabled){var o=this.el.getAttribute("scale");this.previewDistance=15*(o.x+o.y)/2,this.initVisualAspect(),t=i.highlighted?i.highlightedColor:i.backgroundColor,n=i.highlighted?i.highlightedColor:i.borderColor,r.setAttribute("material","backgroundColor",t),r.setAttribute("material","strokeColor",n),i.on!==e.on&&this.updateEventListener(),void 0!==e.peekMode&&i.peekMode!==e.peekMode&&this.updatePeekMode(),i.image&&e.image!==i.image&&r.setAttribute("material","pano","string"==typeof i.image?i.image:i.image.src)}},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,n,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(n=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),e=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),i.appendChild(n),e.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),e.setAttribute("rotation","0 180 0"),e.setAttribute("position","0 0 0"),e.setAttribute("visible",!1),i.appendChild(e),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),t.setAttribute("visible",!1),i.appendChild(t),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var e=new ev.Vector3,t=new ev.Vector3,n=new ev.Quaternion,i=new ev.Vector3;return function(){var r,o,a=this.el,s=a.object3D,l=a.sceneEl.camera,c=this.textEl;if(this.data.visualAspectEnabled)if(s.updateMatrixWorld(),l.parent.updateMatrixWorld(),l.updateMatrixWorld(),s.matrix.decompose(t,n,i),t.setFromMatrixPosition(s.matrixWorld),e.setFromMatrixPosition(l.matrixWorld),(o=t.distanceTo(e))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(n),this.previousQuaternion=this.quaternionClone),s.lookAt(e);else{if(r=this.calculateCameraPortalOrientation(),o<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;c.setAttribute("text","width",1.5),r<=0?(c.setAttribute("position","0 0 0.75"),c.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(c.setAttribute("position","0 0 -0.75"),c.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),a.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=r}else r<=0?c.setAttribute("rotation","0 180 0"):c.setAttribute("rotation","0 0 0"),c.setAttribute("text","width",5),c.setAttribute("position","0 1.5 0"),a.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(s.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var e=this.el,t=this.hiddenEls,n=this;t.length>0||e.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==e.sceneEl.object3D&&i.el!==e&&i.el!==n.sphereEl&&i.el!==e.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==n.textEl&&i.el!==n.semiSphereEl&&(i.el.setAttribute("visible",!1),t.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(e){e.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(IE=new ev.Matrix4,ME=new ev.Vector3,kE=new ev.Vector3(0,0,1),RE=new ev.Vector3(0,0,0),function(){var e=this.el,t=e.sceneEl.camera;return ME.set(0,0,0),kE.set(0,0,1),RE.set(0,0,0),e.object3D.matrixWorld.extractRotation(IE),kE.applyMatrix4(IE),e.object3D.updateMatrixWorld(),e.object3D.localToWorld(RE),t.parent.parent.updateMatrixWorld(),t.parent.updateMatrixWorld(),t.updateMatrixWorld(),t.localToWorld(ME),ME.sub(RE).normalize(),kE.normalize(),Math.sign(kE.dot(ME))}),remove:function(){this.removeEventListener()}}),xw("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","uniform float previewDistance;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));","}","}"].join("\n")});var NE="logitech-mx-ink",FE=MA+"controllers/logitech/",zE=(I_("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){ox(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.sceneEl.removeEventListener("enter-vr",this.onEnterVR),e.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),tx(this,NE,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var e=this.el,t=this.data,n=NE;e.setAttribute("tracked-controls",{id:n,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:t.orientationOffset}),this.loadModel()},loadModel:function(){var e=this.controllerObject3D;if(this.data.model)return e?(e.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",e)):void this.el.setAttribute("gltf-model",FE+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&("trigger"===n&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new ev.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(e){rx(this,this.mapping.axes,e)}}),Math.PI/2),UE=(I_("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new ev.Vector3,this.hmdQuaternion=new ev.Quaternion,this.magicWindowAbsoluteEuler=new ev.Euler,this.magicWindowDeltaEuler=new ev.Euler,this.position=new ev.Vector3,this.magicWindowObject=new ev.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new ev.Vector3,rotation:new ev.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var e,t=this.data;(YA()||eb())&&(e=this.magicWindowControls=new SA(this.magicWindowObject),"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission&&(e.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?e.enabled=t.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){e.enabled=t.magicWindowTrackingEnabled})))},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),e&&!t.magicWindowTrackingEnabled&&e.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=t.magicWindowTrackingEnabled),e&&!t.pointerLockEnabled!==e.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(e){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new ev.Object3D,this.yawObject=new ev.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;t?(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),e.addEventListener("enter-vr",this.onEnterVR),e.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):e.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var e=this.el.object3D,t=this.pitchObject,n=this.yawObject,i=this.el.sceneEl;(i.is("vr-mode")||i.is("ar-mode"))&&i.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),e.rotation.x=this.magicWindowDeltaEuler.x+t.rotation.x,e.rotation.y=this.magicWindowDeltaEuler.y+n.rotation.y,e.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var e=this.magicWindowAbsoluteEuler,t=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),e.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||0===e.y||(this.previousMagicWindowYaw=e.y),this.previousMagicWindowYaw&&(t.x=e.x,t.y+=e.y-this.previousMagicWindowYaw,t.z=e.z,this.previousMagicWindowYaw=e.y))},onMouseMove:function(e){var t,n,i,r=this.pitchObject,o=this.previousMouseEvent,a=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=e.movementX||e.mozMovementX||0,i=e.movementY||e.mozMovementY||0):(n=e.screenX-o.screenX,i=e.screenY-o.screenY),this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,t=this.data.reverseMouseDrag?1:-1,a.rotation.y+=.002*n*t,r.rotation.x+=.002*i*t,r.rotation.x=Math.max(-zE,Math.min(zE,r.rotation.x)))},onMouseDown:function(e){var t=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!t.is("vr-mode")&&!t.is("ar-mode")||!t.checkHeadsetConnected())&&0===e.button){var n=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(e){1!==e.touches.length||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,n,i=this.el.sceneEl.canvas,r=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(n=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/i.clientWidth,t=this.data.reverseTouchDrag?1:-1,r.rotation.y-=.5*n*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var e=this.el.sceneEl;e.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),e.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(e){var t=this.el.sceneEl;function n(){t.canvas.classList.add("a-grab-cursor")}function i(){t.canvas.classList.remove("a-grab-cursor")}t.canvas?e?n():i():e?t.addEventListener("render-target-loaded",n):t.addEventListener("render-target-loaded",i)},saveCameraPose:function(){var e=this.el;this.savedPose.position.copy(e.object3D.position),this.savedPose.rotation.copy(e.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var e=this.el,t=this.savedPose;this.hasSavedPose&&(e.object3D.position.copy(t.position),e.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),jE=MA+"controllers/magicleap/magicleap-one-controller.glb",VE=(I_("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex="right"===e.hand?0:"left"===e.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;tx(this,UE,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:UE,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",jE)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id];n&&("trigger"===n&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},updateModel:function(e,t){},setButtonColor:function(e,t){}}),DA("components:material:error"));function HE(e,t){e.dispose(),t.unregisterMaterial(e),Object.keys(e).filter(function(t){return e[t]&&e[t].isTexture}).forEach(function(t){e[t].dispose()})}I_("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:yw,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(e)},updateSchema:function(e){var t,n,i,r;n=e&&e.shader,t=this.oldData&&this.oldData.shader,(i=vw[r=n||t]&&vw[r].schema)||VE("Unknown shader schema "+r),t&&n===t||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var e,t,n=this.el.sceneEl,i=this.schema,r=this;function o(e,n){var i;for(i in t)t[i]=e;r.shader.update(t)}for(e in this.tick=void 0,t={},i)"time"===i[e].type&&(this.tick=o,t[e]=!0);n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(e){var t,n=this.data,i=vw[e]&&vw[e].Shader;if(!i)throw new Error("Unknown shader "+e);(t=this.shader=new i).el=this.el,t.init(n),this.setMaterial(t.material),this.updateSchema(n)},updateMaterial:function(e){var t,n=this.data,i=this.material;for(t in i.alphaTest=n.alphaTest,i.depthTest=!1!==n.depthTest,i.depthWrite=!1!==n.depthWrite,i.opacity=n.opacity,i.flatShading=n.flatShading,i.side=function(e){switch(e){case"back":return ev.BackSide;case"double":return ev.DoubleSide;default:return ev.FrontSide}}(n.side),i.transparent=!1!==n.transparent||n.opacity<1,i.vertexColors=n.vertexColorsEnabled,i.visible=n.visible,i.blending=function(e){switch(e){case"none":return ev.NoBlending;case"additive":return ev.AdditiveBlending;case"subtractive":return ev.SubtractiveBlending;case"multiply":return ev.MultiplyBlending;default:return ev.NormalBlending}}(n.blending),i.dithering=n.dithering,e)break;!t||e.alphaTest===n.alphaTest&&e.side===n.side&&e.vertexColorsEnabled===n.vertexColorsEnabled||(i.needsUpdate=!0)},remove:function(){var e=new ev.MeshBasicMaterial,t=this.material,n=this.el.getObject3D("mesh");n&&(n.material=e),HE(t,this.system)},setMaterial:function(e){var t,n=this.el,i=this.system;this.material&&HE(this.material,i),this.material=e,i.registerMaterial(e),(t=n.getObject3D("mesh"))?t.material=e:n.addEventListener("object3dset",function t(i){"mesh"===i.detail.type&&i.target===n&&(n.getObject3D("mesh").material=e,n.removeEventListener("object3dset",t))})}});var GE,QE,WE,qE,XE,YE="oculus-touch",KE=MA+"controllers/oculus/oculus-touch-controller-",JE=MA+"controllers/meta/",ZE={left:{modelUrl:KE+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new ev.Vector3(-.005,.036,-.037),modelPivotRotation:new ev.Euler(Math.PI/4.5,0,0)},right:{modelUrl:KE+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new ev.Vector3(.005,.036,-.037),modelPivotRotation:new ev.Euler(Math.PI/4.5,0,0)}},$E="oculus-touch",eC={"oculus-touch":ZE,"oculus-touch-v2":{left:{modelUrl:KE+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new ev.Vector3(0,-.007,-.021),modelPivotRotation:new ev.Euler(-Math.PI/4,0,0)},right:{modelUrl:KE+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new ev.Vector3(0,-.007,-.021),modelPivotRotation:new ev.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:KE+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)},right:{modelUrl:KE+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:JE+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)},right:{modelUrl:JE+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:JE+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)},right:{modelUrl:JE+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new ev.Vector3(0,0,0),modelPivotRotation:new ev.Euler(0,0,0)}}},tC={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonDown=function(t){ox(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){ox(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e,e.data.hand)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e,e.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new ev.Euler},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),tx(this,YE,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(e){var t,n=this.data;if(n.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=eC[n.controllerType]||eC[$E],"auto"===n.controllerType){t=$E;for(var i=Object.keys(eC),r=0;r<e.profiles.length;r++)if(-1!==i.indexOf(e.profiles[r])){t=e.profiles[r];break}this.displayModel=eC[t]}var o=this.displayModel[n.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===eC["oculus-touch-v3"]||this.displayModel===eC["meta-quest-touch-pro"]||this.displayModel===eC["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",o)}},injectTrackedControls:function(e){var t=this.data,n=YE;this.el.setAttribute("tracked-controls",{id:n,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(e)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping[this.data.hand].buttons[e.detail.id];if(t){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(e);else{var n,i=this.buttonMeshes;"trigger"!==t&&"grip"!==t||(n=e.detail.state.value),i&&("trigger"===t&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-n*(Math.PI/26)),"grip"===t&&i.grip&&(n*="left"===this.data.hand?-1:1,i.grip.position.x=this.originalXPositionGrip+.004*n))}this.el.emit(t+"changed",e.detail.state)}},onButtonChangedV3orPROorPlus:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id],i=this.buttonObjects;i&&i[n]&&(t=e.detail.state.value,i[n].quaternion.slerpQuaternions(this.buttonRanges[n].min.quaternion,this.buttonRanges[n].max.quaternion,t),i[n].position.lerpVectors(this.buttonRanges[n].min.position,this.buttonRanges[n].max.position,t))},onModelLoaded:function(e){if(e.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(e);else{var t,n=this.controllerObject3D=e.detail.model;(t=this.buttonMeshes={}).grip=n.getObjectByName("buttonHand"),this.originalXPositionGrip=t.grip&&t.grip.position.x,t.trigger=n.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=t.trigger&&t.trigger.rotation.x,t.thumbstick=n.getObjectByName("stick"),t.xbutton=n.getObjectByName("buttonX"),t.abutton=n.getObjectByName("buttonA"),t.ybutton=n.getObjectByName("buttonY"),t.bbutton=n.getObjectByName("buttonB")}for(var i in this.buttonMeshes)this.buttonMeshes[i]&&nC(this.buttonMeshes[i]);this.applyOffset(e.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(e){e.position.copy(this.displayModel[this.data.hand].modelPivotOffset),e.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(e){var t=this.controllerObject3D=e.detail.model,n=this.buttonObjects={},i=this.buttonMeshes={},r=this.buttonRanges={};i.grip=t.getObjectByName("squeeze"),n.grip=t.getObjectByName("xr_standard_squeeze_pressed_value"),r.grip={min:t.getObjectByName("xr_standard_squeeze_pressed_min"),max:t.getObjectByName("xr_standard_squeeze_pressed_max")},n.grip.minX=n.grip.position.x,i.thumbstick=t.getObjectByName("thumbstick"),n.thumbstick=t.getObjectByName("xr_standard_thumbstick_pressed_value"),r.thumbstick={min:t.getObjectByName("xr_standard_thumbstick_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_pressed_max")},n.thumbstickXAxis=t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),r.thumbstickXAxis={min:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},n.thumbstickYAxis=t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),r.thumbstickYAxis={min:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},i.trigger=t.getObjectByName("trigger"),n.trigger=t.getObjectByName("xr_standard_trigger_pressed_value"),r.trigger={min:t.getObjectByName("xr_standard_trigger_pressed_min"),max:t.getObjectByName("xr_standard_trigger_pressed_max")},r.trigger.diff={x:Math.abs(r.trigger.max.rotation.x)-Math.abs(r.trigger.min.rotation.x),y:Math.abs(r.trigger.max.rotation.y)-Math.abs(r.trigger.min.rotation.y),z:Math.abs(r.trigger.max.rotation.z)-Math.abs(r.trigger.min.rotation.z)};var o="left"===this.data.hand?"x":"a",a="left"===this.data.hand?"y":"b",s=o+"button",l=a+"button";i[s]=t.getObjectByName(o+"_button"),n[s]=t.getObjectByName(o+"_button_pressed_value"),r[s]={min:t.getObjectByName(o+"_button_pressed_min"),max:t.getObjectByName(o+"_button_pressed_max")},i[l]=t.getObjectByName(a+"_button"),n[l]=t.getObjectByName(a+"_button_pressed_value"),r[l]={min:t.getObjectByName(a+"_button_pressed_min"),max:t.getObjectByName(a+"_button_pressed_max")}},onAxisMoved:function(e){rx(this,this.mapping[this.data.hand].axes,e)},onThumbstickMoved:function(e){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(e);else for(var t in e.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[t]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[t]]-Math.PI/8*e.detail[t]*("y"===t||"right"===this.data.hand?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(e){var t=(e.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,t);var n=(e.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,n)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n,i=this.buttonMeshes;i&&i[e]&&(n="up"===t||"touchend"===t?i[e].originalColor||this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,i[e].material.color.set(n))}};function nC(e){e.traverse(function(t){var n;"Mesh"===t.type&&(n=t.material.clone(),e.originalColor=t.material.color,t.material.dispose(),t.material=n)})}I_("oculus-touch-controls",tC),I_("meta-touch-controls",tC),I_("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=(new ev.Vector3).copy(this.el.object3D.scale),this.auxEuler=new ev.Euler,this.boundingBox=new ev.Box3,this.boundingBoxSize=new ev.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var e,t=this.el,n=t.components["gltf-model"]&&t.components["gltf-model"].model;n&&(this.el.removeObject3D("mesh"),e=(new ev.Box3).setFromObject(n).getCenter(new ev.Vector3),n.position.x+=n.position.x-e.x,n.position.y+=n.position.y-e.y,n.position.z+=n.position.z-e.z,this.el.setObject3D("mesh",n))},updateCollider:function(){var e=this.el,t=this.boundingBoxSize,n=this.aabb=this.aabb||new sA;this.obb=this.obb||new sA,e.hasLoaded?(this.updateBoundingBox(),n.halfSize.copy(t).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):e.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var e=this.renderColliderMesh,t=this.boundingBoxSize;e?(e.geometry.dispose(),e.geometry=new ev.BoxGeometry(t.x,t.y,t.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var e,t,n;e=this.boundingBoxSize,t=this.renderColliderGeometry=new ev.BoxGeometry(e.x,e.y,e.z),(n=this.renderColliderMesh=new ev.Mesh(t,new ev.MeshLambertMaterial({color:65280,side:ev.DoubleSide}))).matrixAutoUpdate=!1,n.matrixWorldAutoUpdate=!1,n.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(n)},updateBoundingBox:(GE=new ev.Vector3,QE=new ev.Vector3,WE=new ev.Quaternion,qE=new ev.Quaternion,XE=new ev.Matrix4,function(){var e=this.auxEuler,t=this.boundingBox,n=this.data.size,i=this.trackedObject3D||this.el.object3D,r=this.boundingBoxSize,o=this.data.minimumColliderDimension;if(n)return this.boundingBoxSize.x=n,this.boundingBoxSize.y=n,void(this.boundingBoxSize.z=n);e.copy(i.rotation),i.rotation.set(0,0,0),i.parent.matrixWorld.decompose(GE,WE,QE),XE.compose(GE,qE,QE),i.parent.matrixWorld.copy(XE),t.setFromObject(i,!0),t.getSize(r),r.x=r.x<o?o:r.x,r.y=r.y<o?o:r.y,r.z=r.z<o?o:r.z,i.parent.matrixWorld.compose(GE,WE,QE),this.el.object3D.rotation.copy(e)}),checkTrackedObject:function(){var e,t=this.trackedObject3DPath;if(t&&t.length&&!this.trackedObject3D){e=this.el;for(var n=0;n<t.length&&(e=e[t[n]]);n++);e&&(this.trackedObject3D=e,this.updateCollider())}return this.trackedObject3D},tick:function(){var e=new ev.Vector3,t=new ev.Vector3,n=new ev.Quaternion,i=new ev.Matrix4;return function(){var r=this.obb,o=this.renderColliderMesh,a=this.checkTrackedObject()||this.el.object3D;a&&(a.updateMatrix(),a.updateMatrixWorld(!0),a.matrixWorld.decompose(e,n,t),(Math.abs(t.x-this.previousScale.x)>1e-4||Math.abs(t.y-this.previousScale.y)>1e-4||Math.abs(t.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(t),t.set(1,1,1),i.compose(e,n,t),o&&o.matrixWorld.copy(i),r.copy(this.aabb),r.applyMatrix4(i))}}()});var iC=DA("components:obj-model:warn"),rC=(I_("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var e=this;this.model=null,this.objLoader=new xA,this.mtlLoader=new _A(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(t){e.model&&"material"===t.detail.name&&e.applyMaterial()})},update:function(){var e=this.data;e.obj&&(this.resetMesh(),this.loadObj(e.obj,e.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(e,t){var n=this,i=this.el,r=this.mtlLoader,o=this.objLoader,a=this.el.sceneEl.systems.renderer,s=t.substr(0,t.lastIndexOf("/")+1);if(t)return i.hasAttribute("material")&&iC("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(s),void r.load(t,function(t){t.preload(),o.setMaterials(t),o.load(e,function(e){n.model=e,n.model.traverse(function(e){if(e.isMesh){var t=e.material;t.map&&a.applyColorCorrection(t.map),t.emissiveMap&&a.applyColorCorrection(t.emissiveMap)}}),i.setObject3D("mesh",e),i.emit("model-loaded",{format:"obj",model:e})})});o.load(e,function(e){n.model=e,n.applyMaterial(),i.setObject3D("mesh",e),i.emit("model-loaded",{format:"obj",model:e})})},applyMaterial:function(){var e=this.el.components.material;e&&this.model.traverse(function(t){t instanceof ev.Mesh&&(t.material=e.material)})}}),MA+"controllers/oculus/go/oculus-go-controller.gltf"),oC="oculus-go",aC=(I_("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){tx(this,oC,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:oC}),this.data.model&&this.el.setAttribute("gltf-model",rC)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=n.getObjectByName("oculus_go_button_trigger"),t.trackpad=n.getObjectByName("oculus_go_touchpad"),t.touchpad=n.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes;if(n&&n[e]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[e].material.color.set(i)}}}),"pico-4"),sC=MA+"controllers/pico/pico4/",lC=(I_("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){ox(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex="right"===e.hand?0:"left"===e.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;tx(this,aC,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:aC,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",sC+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id];n&&("trigger"===n&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new ev.Vector3(0,0,0)})},onAxisMoved:function(e){rx(this,this.mapping[this.data.hand].axes,e)}}),I_("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),DA("components:raycaster:warn")),cC=/^[\w\s-.,[\]#]*$/,uC={childList:!0,attributes:!0,subtree:!0},hC="raycaster-intersected-cleared",dC="raycaster-intersection-cleared";function pC(e,t){var n;for(e.length=t.length,n=0;n<t.length;n++)e[n]=t[n]}I_("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new ev.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new ev.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new ev.Vector3,this.otherLineEndVec3=new ev.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(e){var t=this.data,n=this.el,i=this.raycaster;i.far=t.far,i.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction&&e.showLine||(this.unitLineEndVec3.copy(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&n.removeAttribute("line"),t.objects===e.objects||cC.test(t.objects)||lC('[raycaster] Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.objects||lC('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),t.autoRefresh!==e.autoRefresh&&n.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),e.enabled&&!t.enabled&&this.clearAllIntersections(),t.objects!==e.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,uC),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(e),this.dirty=!1},tock:function(e){var t=this.data,n=this.prevCheckTime;t.enabled&&(n&&e-n<t.interval||(this.prevCheckTime=e,this.checkIntersections()))},checkIntersections:function(){var e,t,n=this.clearedIntersectedEls,i=this.el,r=this.data,o=this.intersectedEls,a=this.intersections,s=this.newIntersectedEls,l=this.newIntersections,c=this.prevIntersectedEls,u=this.rawIntersections;for(this.dirty&&this.refreshObjects(),pC(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),u.length=0,this.raycaster.intersectObjects(this.objects,!0,u),a.length=0,o.length=0,e=0;e<u.length;e++)t=u[e],r.showLine&&t.object===i.getObject3D("line")||t.object.el&&(a.push(t),o.push(t.object.el));for(l.length=0,s.length=0,e=0;e<a.length;e++)-1===c.indexOf(a[e].object.el)&&(l.push(a[e]),s.push(a[e].object.el));for(n.length=0,e=0;e<c.length;e++)-1===o.indexOf(c[e])&&(c[e].emit(hC,this.intersectedClearedDetail),n.push(c[e]));for(n.length&&i.emit(dC,this.intersectionClearedDetail),e=0;e<s.length;e++)s[e].emit("raycaster-intersected",this.intersectedDetail);l.length&&(this.intersectionDetail.els=s,this.intersectionDetail.intersections=l,i.emit("raycaster-intersection",this.intersectionDetail)),(0===c.length&&a.length>0||c.length>0&&0===a.length||c.length&&a.length&&c[0]!==a[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=a,i.emit("raycaster-closest-entity-changed",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var e,t=this.el,n=this.intersections;n.length&&(e=n[0].object.el===t&&n[1]?n[1].distance:n[0].distance),this.drawLine(e)},getIntersection:function(e){var t,n;for(t=0;t<this.intersections.length;t++)if((n=this.intersections[t]).object.el===e)return n;return null},updateOriginDirection:function(){var e=new ev.Vector3,t=new ev.Vector3;return function(){var n=this.el,i=this.data;i.useWorldCoordinates?this.raycaster.set(i.origin,i.direction):(n.object3D.updateMatrixWorld(),t.setFromMatrixPosition(n.object3D.matrixWorld),0===i.origin.x&&0===i.origin.y&&0===i.origin.z||(t=n.object3D.localToWorld(t.copy(i.origin))),e.copy(i.direction).transformDirection(n.object3D.matrixWorld).normalize(),this.raycaster.set(t,e))}}(),drawLine:function(e){var t,n=this.data,i=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===e&&(e=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(e).add(n.origin),this.lineData.color=n.lineColor,this.lineData.opacity=n.lineOpacity,i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(e){var t,n,i=this.objects,r=this.el.sceneEl.object3D;function o(e){return e.parent?o(e.parent):e===r}for(i.length=0,n=0;n<e.length;n++){var a=e[n];if(a.isEntity&&a.object3D&&o(a.object3D))for(t in a.object3DMap)i.push(a.getObject3D(t))}return i},clearAllIntersections:function(){var e;for(e=0;e<this.intersectedEls.length;e++)this.intersectedEls[e].emit(hC,this.intersectedClearedDetail);pC(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(dC,this.intersectionClearedDetail)}});var fC,mC,gC,vC,yC=ev.MathUtils.degToRad,AC=(I_("rotation",{schema:{type:"vec3"},update:function(){var e=this.data;this.el.object3D.rotation.set(yC(e.x),yC(e.y),yC(e.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),I_("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data;this.el.object3D.scale.set(e.x,e.y,e.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),I_("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var n=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof ev.Mesh&&(i.castShadow=e,i.receiveShadow=t,n.hasLoaded&&i.material))for(var r=Array.isArray(i.material)?i.material:[i.material],o=0;o<r.length;o++)r[o].needsUpdate=!0})}}),DA("components:sound:warn")),bC=(I_("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var e=this;this.listener=null,this.audioLoader=new ev.AudioLoader,this.pool=new ev.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){e.playSound()}},update:function(e){var t,n,i=this.data,r=i.src!==e.src;if(r){if(!i.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)n=this.pool.children[t],i.positional&&(n.setDistanceModel(i.distanceModel),n.setMaxDistance(i.maxDistance),n.setRefDistance(i.refDistance),n.setRolloffFactor(i.rolloffFactor)),n.setLoop(i.loop),n.setLoopStart(i.loopStart),0!==i.loopStart&&0===i.loopEnd?n.setLoopEnd(n.buffer.duration):n.setLoopEnd(i.loopEnd),n.setVolume(i.volume),n.isPaused=!1;if(i.on!==e.on&&this.updateEventListener(e.on),r){var o=this;this.loaded=!1,this.audioLoader.load(i.src,function(e){for(t=0;t<o.pool.children.length;t++)(n=o.pool.children[t]).setBuffer(e);o.loaded=!0,ev.Cache.remove(i.src),(o.data.autoplay||o.mustPlay)&&o.playSound(o.processSound),o.el.emit("sound-loaded",o.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var e;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(e=0;e<this.pool.children.length;e++)this.pool.children[e].disconnect()}catch(e){AC("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var e,t,n=this.el,i=n.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),n.removeObject3D("sound"));var o=this.listener=i.audioListener||new ev.AudioListener;for(i.audioListener=o,i.camera&&i.camera.add(o),i.addEventListener("camera-set-active",function(e){e.detail.cameraEl.getObject3D("camera").add(o)}),this.pool=new ev.Group,e=0;e<this.data.poolSize;e++)t=this.data.positional?new ev.PositionalAudio(o):new ev.Audio(o),this.pool.add(t);for(n.setObject3D(this.attrName,this.pool),e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(e){var t,n,i;if(!this.loaded)return AC("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=e);for(t=!1,this.isPlaying=!0,n=0;n<this.pool.children.length;n++)(i=this.pool.children[n]).isPlaying||!i.buffer||t||(e&&e(i),i.play(),i.isPaused=!1,t=!0);t?(this.mustPlay=!1,this.processSound=void 0):AC("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++){if(!(t=this.pool.children[e]).source||!t.source.buffer)return;t.stop()}}}),Em(4433)),xC=Em.n(bC),_C=Em(5751),wC=Em.n(_C),EC=DA("components:text:error"),CC=DA("components:text:warn"),SC=MA+"fonts/",TC={aileronsemibold:SC+"Aileron-Semibold.fnt",dejavu:SC+"DejaVu-sdf.fnt",exo2bold:SC+"Exo2Bold.fnt",exo2semibold:SC+"Exo2SemiBold.fnt",kelsonsans:SC+"KelsonSans.fnt",monoid:SC+"Monoid.fnt",mozillavr:SC+"mozillavr.fnt",roboto:SC+"Roboto-msdf.json",sourcecodepro:SC+"SourceCodePro.fnt"},IC=["roboto"],MC="roboto",kC=new function(){var e=this.cache={};this.get=function(t,n){return t in e||(e[t]=n()),e[t]}},RC={},LC={},BC=/^\w+:/;function PC(e,t,n){return e||(.5+t)*n}I_("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:MC},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:vw},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=xC()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(e){var t=this.data,n=this.currentFont;LC[t.font]?this.texture=LC[t.font]:(this.texture=LC[t.font]=new ev.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),e.font===t.font?n&&(this.updateGeometry(this.geometry,n),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,n,i=this.data,r=this.material,o=this.shaderData;if(n=i.shader,-1!==IC.indexOf(i.font)||i.font.indexOf("-msdf.")>=0?n="msdf":i.font in TC&&-1===IC.indexOf(i.font)&&(n="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==n,o.alphaTest=i.alphaTest,o.color=i.color,o.map=this.texture,o.opacity=i.opacity,o.side=function(e){switch(e){case"back":return ev.FrontSide;case"double":return ev.DoubleSide;default:return ev.BackSide}}(i.side),o.transparent=i.transparent,o.negate=i.negate,!e)return this.shaderObject.update(o),r.transparent=o.transparent,void(r.side=o.side);t=function(e,t,n){var i,r;return(r=new vw[t].Shader).el=e,r.init(n),r.update(n),(i=r.material).transparent=n.transparent,{material:i,shader:r}}(this.el,n,o),this.material=t.material,this.shaderObject=t.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,n=this.el,i=this.geometry,r=this;t.font||CC("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),e=this.lookupFont(t.font||MC)||t.font,kC.get(e,function(){return function(e,t){return new Promise(function(n,i){wC()(e,function(r,o){if(r)return EC("Error loading font",e),void i(r);e.indexOf("/Roboto-msdf.json")>=0&&(t=30),t&&o.chars.forEach(function(e){e.yoffset+=t}),n(o)})})}(e,t.yOffset)}).then(function(o){var a;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");RC[e]||(o.widthFactor=RC[o]=function(e){var t=0,n=0,i=0;return e.chars.forEach(function(e){t+=e.xadvance,e.id>=48&&e.id<=57&&(i++,n+=e.xadvance)}),i?n/i:t/e.chars.length}(o)),r.currentFont=o,a=r.getFontImageSrc(),kC.get(a,function(){return function(e){return new Promise(function(t,n){(new ev.ImageLoader).load(e,function(e){t(e)},void 0,function(){EC("Error loading font image",e),n(null)})})}(a)}).then(function(e){var a=r.texture;a&&(a.image=e,a.needsUpdate=!0,LC[t.font]=a,r.texture=a,r.initMesh(),r.currentFont=o,r.updateGeometry(i,o),r.updateLayout(),r.mesh.visible=!0,n.emit("textfontset",{font:t.font,fontObj:o}))}).catch(function(e){EC(e.message),EC(e.stack)})}).catch(function(e){EC(e.message),EC(e.stack)})},initMesh:function(){this.mesh||(this.mesh=new ev.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var e=this.lookupFont(this.data.font||MC)||this.data.font,t=this.currentFont.pages[0];return t.match(BC)&&0!==t.indexOf("http")?e.replace(/(\.fnt)|(\.json)/,".png"):ev.LoaderUtils.extractUrlBase(e)+t},updateLayout:function(){var e,t,n,i,r,o,a,s,l,c=this.el,u=this.data,h=this.geometry,d=this.mesh;if(d&&h.layout){if(n=c.getAttribute("geometry"),i=(o=(a=u.width||n&&n.width||1)/PC(u.wrapPixels,u.wrapCount,this.currentFont.widthFactor))*((r=h.layout).height+r.descender),n&&"plane"===n.primitive&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!n.width,this.hasExplicitGeoHeight=!!n.height),this.hasExplicitGeoWidth||c.setAttribute("geometry","width",a),this.hasExplicitGeoHeight||c.setAttribute("geometry","height",i)),"left"===(e="align"===u.anchor?u.align:u.anchor))s=0;else if("right"===e)s=-1*r.width;else{if("center"!==e)throw new TypeError("Invalid text.anchor property value",e);s=-1*r.width/2}if("bottom"===(t=u.baseline))l=0;else if("top"===t)l=-1*r.height+r.ascender;else{if("center"!==t)throw new TypeError("Invalid text.baseline property value",t);l=-1*r.height/2}d.position.x=s*o+u.xOffset,d.position.y=l*o,d.position.z=u.zOffset,d.scale.set(o,-1*o,o)}},lookupFont:function(e){return TC[e]},updateGeometry:(fC={},mC={},gC=/\\n/g,vC=/\\t/g,function(e,t){var n=this.data;mC.font=t,mC.lineHeight=n.lineHeight&&isFinite(n.lineHeight)?n.lineHeight:t.common.lineHeight,mC.text=n.value.toString().replace(gC,"\n").replace(vC,"\t"),mC.width=PC(n.wrapPixels,n.wrapCount,t.widthFactor),e.update(mx(fC,n,mC))})});var DC,OC,NC=(I_("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var e=this.el.sceneEl;this.updateController(),e.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(e){return!(!this.controller||this.controller.gamepad||"none"!==e.inputSource.handedness&&e.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=ix(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var e=this.el.sceneEl,t=this.controller,n=e.frame;this.data.autoHide&&(this.el.object3D.visible=!!t),t&&e.frame&&this.system.referenceSpace&&(t.hand||(this.pose=n.getPose(t.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var e=this.el.object3D,t=this.pose;t&&(e.matrix.elements=t.transform.matrix,e.matrix.decompose(e.position,e.rotation,e.scale))},updateButtons:function(){var e,t,n,i=this.controller;if(i&&i.gamepad){for(n=i.gamepad,t=0;t<n.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),e=n.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){return!!(this.handlePress(e,t)|this.handleTouch(e,t)|this.handleValue(e,t))&&(this.el.emit("buttonchanged",this.buttonEventDetails[e],!1),!0)},handleAxes:function(){var e,t=!1,n=this.controller.gamepad.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),e=0;e<n.length;++e)r.push(i[e]!==n[e]),r[e]&&(t=!0);if(!t)return!1;for(this.axis.splice(0,this.axis.length),e=0;e<n.length;e++)this.axis.push(n[e]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(e,t){var n,i=this.buttonStates[e];return t.pressed!==i.pressed&&(n=t.pressed?"buttondown":"buttonup",this.el.emit(n,this.buttonEventDetails[e],!1),i.pressed=t.pressed,!0)},handleTouch:function(e,t){var n,i=this.buttonStates[e];return t.touched!==i.touched&&(n=t.touched?"touchstart":"touchend",this.el.emit(n,this.buttonEventDetails[e],!1),i.touched=t.touched,!0)},handleValue:function(e,t){var n=this.buttonStates[e];return t.value!==n.value&&(n.value=t.value,!0)}}),I_("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),MA+"controllers/valve/index/valve-index-"),FC={left:NC+"left.glb",right:NC+"right.glb"},zC="valve",UC={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},jC={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},VC=(I_("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t="right"===e.hand?0:"left"===e.hand?1:2;tx(this,zC,{index:t,iterateControllerProfiles:!0,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:zC,controller:"right"===t.hand?1:"left"===t.hand?0:2,hand:t.hand}),this.loadModel()},loadModel:function(){var e=this.data;e.model&&this.el.setAttribute("gltf-model",""+FC[e.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id],i=this.buttonMeshes;n&&("trigger"===n&&(t=e.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=this.triggerOriginalRotationX-t*(Math.PI/40))),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model,i=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},t.menu=n.getObjectByName("menubutton"),t.system=n.getObjectByName("systembutton"),t.trackpad=n.getObjectByName("touchpad"),t.trigger=n.getObjectByName("trigger"),this.triggerOriginalRotationX=t.trigger.rotation.x,Object.keys(t).forEach(function(e){i.setButtonColor(e,i.data.buttonColor)}),n.position.copy(jC[this.data.hand]),n.rotation.copy(UC[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new ev.Vector3(0,0,0)}))},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},updateModel:function(e,t){var n;this.data.model&&(-1!==t.indexOf("touch")||(n="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,n)))},setButtonColor:function(e,t){}}),MA+"controllers/vive/vr_controller_vive.obj"),HC=MA+"controllers/vive/vr_controller_vive.mtl",GC="htc-vive",QC=(I_("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex="right"===e.hand?0:"left"===e.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;tx(this,GC,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:GC,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:VC,mtl:HC})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id],i=this.buttonMeshes;n&&("trigger"===n&&(t=e.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model,i=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},t.menu=n.getObjectByName("menubutton"),t.system=n.getObjectByName("systembutton"),t.trackpad=n.getObjectByName("touchpad"),t.touchpad=n.getObjectByName("touchpad"),t.trigger=n.getObjectByName("trigger"),Object.keys(t).forEach(function(e){i.setButtonColor(e,i.data.buttonColor)}),n.position.set(0,-.015,.04))},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},updateModel:function(e,t){var n;this.data.model&&(-1!==t.indexOf("touch")||(n="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,n)))},setButtonColor:function(e,t){var n=this.buttonMeshes;if(n)return"grip"===e?(n.grip.left.material.color.set(t),void n.grip.right.material.color.set(t)):void n[e].material.color.set(t)}}),MA+"controllers/vive/focus-controller/focus-controller.gltf"),WC="htc-vive-focus",qC=(I_("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){tx(this,WC,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:WC}),this.data.model&&this.el.setAttribute("gltf-model",QC)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=n.getObjectByName("BumperKey"),t.triggerPressed=n.getObjectByName("BumperKey_Press"),t.triggerPressed&&(t.triggerPressed.visible=!1),t.touchpad=n.getObjectByName("TouchPad"),t.touchpadPressed=n.getObjectByName("TouchPad_Press"),t.trackpad=n.getObjectByName("TouchPad"),t.trackpadPressed=n.getObjectByName("TouchPad_Press"),t.trackpadPressed&&(t.trackpadPressed.visible=!1))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){rx(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes,i=e+"Pressed";if(n&&n[e]&&n[i]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&n[i].material.color.set(r),n[i].visible=!!r,n[e].visible=!r}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),XC=_x,YC=1e-5,KC=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];I_("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new ev.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(e,t){var n=this.data,i=this.el,r=this.velocity;(r[n.adAxis]||r[n.wsAxis]||!function(e){var t;for(t in e)return!1;return!0}(this.keys))&&(t/=1e3,this.updateVelocity(t),(r[n.adAxis]||r[n.wsAxis])&&i.object3D.position.add(this.getMovementVector(t)))},update:function(e){e.adAxis!==this.data.adAxis&&(this.velocity[e.adAxis]=0),e.wsAxis!==this.data.wsAxis&&(this.velocity[e.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,n,i,r,o,a=this.data,s=this.keys,l=this.velocity;if(n=a.adAxis,r=a.wsAxis,e>.2)return l[n]=0,void(l[r]=0);var c=Math.pow(1/this.easing,60*e);0!==l[n]&&(l[n]=l[n]*c),0!==l[r]&&(l[r]=l[r]*c),Math.abs(l[n])<YC&&(l[n]=0),Math.abs(l[r])<YC&&(l[r]=0),a.enabled&&(t=a.acceleration,a.adEnabled&&(i=a.adInverted?-1:1,(s.KeyA||s.ArrowLeft)&&(l[n]-=i*t*e),(s.KeyD||s.ArrowRight)&&(l[n]+=i*t*e)),a.wsEnabled&&(o=a.wsInverted?-1:1,(s.KeyW||s.ArrowUp)&&(l[r]-=o*t*e),(s.KeyS||s.ArrowDown)&&(l[r]+=o*t*e)))},getMovementVector:(DC=new ev.Vector3(0,0,0),OC=new ev.Euler(0,0,0,"YXZ"),function(e){var t,n=this.el.getAttribute("rotation"),i=this.velocity;return DC.copy(i),DC.multiplyScalar(e),n?(t=this.data.fly?n.x:0,OC.set(ev.MathUtils.degToRad(t),ev.MathUtils.degToRad(n.y),0),DC.applyEuler(OC),DC):DC}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var e=Object.keys(this.keys),t=0;t<e.length;t++)delete this.keys[e[t]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;XC(e)&&(t=e.code||qC[e.keyCode],-1!==KC.indexOf(t)&&(this.keys[t]=!0))},onKeyUp:function(e){var t;t=e.code||qC[e.keyCode],delete this.keys[t]}});var JC,ZC,$C,eS=DA("components:windows-motion-controls:debug"),tS=DA("components:windows-motion-controls:warn"),nS=MA+"controllers/microsoft/",iS={left:"left.glb",right:"right.glb",default:"universal.glb"},rS="windows-mixed-reality",oS=(I_("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this,t=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){ox(t.detail.id,"down",e)},this.onButtonUp=function(t){ox(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){ox(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){ox(t.detail.id,"touchend",e)},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new ev.Vector3,direction:new ev.Vector3(0,0,-1),createdFromMesh:!1},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-error",this.onModelError),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-error",this.onModelError),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){tx(this,rS,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var e=this.createControllerModelUrl();this.loadModel(e)}else this.modelReady()},createControllerModelUrl:function(e){var t=this.data.hand;return nS+"default/"+(iS[t]||iS.default)},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{idPrefix:rS,controller:e.pair,hand:e.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(e){var t=this.createControllerModelUrl(!0);e.detail.src!==t?(tS("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):tS("Failed to load default controller model.")},loadModel:function(e){this.el.setAttribute("gltf-model","url("+e+")")},onModelLoaded:function(e){var t,n,i,r,o=this.controllerModel=e.detail.model,a=this.loadedMeshInfo;if(e.target===this.el){if(eS("Processing model"),a.buttonMeshes={},a.axisMeshes={},o){for(t=0;t<this.mapping.buttons.length;t++)(n=this.mapping.buttonMeshNames[this.mapping.buttons[t]])?(i=o.getObjectByName(n))?(r={index:t,value:s(i,"VALUE"),pressed:s(i,"PRESSED"),unpressed:s(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?a.buttonMeshes[this.mapping.buttons[t]]=r:tS("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):tS("Missing button mesh with name: "+n):eS("Skipping unknown button at index: "+t+" with mapped name: "+this.mapping.buttons[t]);for(t=0;t<this.mapping.axisMeshNames.length;t++)(n=this.mapping.axisMeshNames[t])?(i=o.getObjectByName(n))?(r={index:t,value:s(i,"VALUE"),min:s(i,"MIN"),max:s(i,"MAX")}).value&&r.min&&r.max?a.axisMeshes[t]=r:tS("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):tS("Missing axis mesh with name: "+n):eS("Skipping unknown axis at index: "+t);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}eS("Model load complete.")}function s(e,t){for(var n=0,i=e.children.length;n<i;n++){var r=e.children[n];if(r&&r.name===t)return r}}},calculateRayOriginFromMesh:function(){var e=new ev.Quaternion;return function(t){var n;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,n=t.getObjectByName(this.mapping.pointingPoseMeshName)){var i=t.parent;i&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=i),n.getWorldPosition(this.rayOrigin.origin),n.getWorldQuaternion(e),this.rayOrigin.direction.applyQuaternion(e),i&&t.updateMatrixWorld(!0)}else eS("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var e=new ev.Quaternion;return function(t,n){var i=this.loadedMeshInfo.axisMeshes[t];if(i){var r=i.min,o=i.max,a=i.value,s=.5*n+.5;a.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,s)),a.position.lerpVectors(r.position,o.position,s)}}}(),lerpButtonTransform:function(){var e=new ev.Quaternion;return function(t,n){var i=this.loadedMeshInfo.buttonMeshes[t];if(i){var r=i.unpressed,o=i.pressed,a=i.value;a.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,n)),a.position.lerpVectors(r.position,o.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,e.detail.state.value),this.el.emit(t+"changed",e.detail.state))},onAxisMoved:function(e){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<t;n++)this.lerpAxisTransform(n,e.detail.axis[n]||0);rx(this,this.mapping.axes,e)},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");this.controllerPresent&&(e=void 0!==e?e:this.modelVisible,this.modelVisible=e,t&&(t.visible=e))}}),JC=new ev.Quaternion,ZC=new ev.Vector3,function(e,t,n){t.position.copy(e.transform.position),t.quaternion.copy(e.transform.orientation),ZC.copy(n),JC.copy(e.transform.orientation),ZC.applyQuaternion(JC),t.position.sub(ZC)});function aS(e,t){this.renderer=e,this.xrHitTestSource=null,e.xr.addEventListener("sessionend",function(){this.xrHitTestSource=null}.bind(this)),e.xr.addEventListener("sessionstart",function(){this.sessionStart(t)}.bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(t)}function sS(e){console.warn(e.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}oS.tempFakePose={transform:{orientation:new ev.Quaternion,position:new ev.Vector3}},aS.prototype.previousFrameAnchors=new Set,aS.prototype.anchorToObject3D=new Map,aS.prototype.sessionStart=function(e){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?e.space?this.session.requestHitTestSource(e).then(function(e){this.xrHitTestSource=e}.bind(this)).catch(sS):e.profile&&this.session.requestHitTestSourceForTransientInput(e).then(function(e){this.xrHitTestSource=e,this.transient=!0}.bind(this)).catch(sS):sS({message:"No requestHitTestSource on the session."})},aS.prototype.anchorFromLastHitTestResult=function(e,t){var n=this.lastHitTest;if(n){var i={object3D:e,offset:t};Array.from(this.anchorToObject3D.entries()).forEach(function(t){var n=t[1].object3D,i=t[0];n===e&&(this.anchorToObject3D.delete(i),i.delete())}.bind(this)),n.createAnchor&&n.createAnchor().then(function(e){this.anchorToObject3D.set(e,i)}.bind(this)).catch(function(e){console.warn(e.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},aS.prototype.doHit=function(e){if(this.renderer.xr.isPresenting){var t,n,i=this.renderer.xr.getReferenceSpace(),r=e.getViewerPose(i);return this.xrHitTestSource&&r?this.transient?(t=e.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(n=t[0].results).length>0&&(this.lastHitTest=n[0],n[0].getPose(i)):(t=e.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=t[0],t[0].getPose(i)):void 0}},aS.updateAnchorPoses=function(e,t){var n=e.trackedAnchors||aS.prototype.previousFrameAnchors;aS.prototype.previousFrameAnchors.forEach(function(e){n.has(e)||aS.prototype.anchorToObject3D.delete(e)}),n.forEach(function(n){var i,r,o,a;try{if(i=e.getPose(n.anchorSpace,t)){if(!(r=aS.prototype.anchorToObject3D.get(n)))return;o=r.offset,a=r.object3D,oS(i,a,o)}}catch(e){console.error("while updating anchor poses:",e)}}),aS.prototype.previousFrameAnchors=n},I_("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new ev.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new ev.WebGLRenderTarget(512,512,{}),this.basicMaterial=new ev.MeshBasicMaterial({color:0,side:ev.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new ev.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var e=this.el.getAttribute("webxr"),t=e.optionalFeatures;t.includes("hit-test")&&t.includes("anchors")||(t.push("hit-test"),t.push("anchors"),this.el.setAttribute("webxr",e)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",function(){this.hitTest=null}.bind(this)),this.el.sceneEl.addEventListener("enter-vr",function(){if(this.el.is("ar-mode")){var e=this.el.sceneEl.renderer,t=this.session=e.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,$C||($C=new Map),t.requestReferenceSpace("viewer").then(function(t){this.viewerHitTest=this.hitTest=new aS(e,{space:t}),this.el.emit("ar-hit-test-start")}.bind(this));var n=this;this.el.sceneEl.addEventListener("controllersupdated",function(){var t=this.xrSession&&this.xrSession.inputSources;if(t)for(var i=0;i<t.length;++i)if("tracked-pointer"===t[i].targetRayMode){n.hitTest=new aS(e,{space:t[i].targetRaySpace}),$C.set(t[i],n.hitTest),n.viewerHitTest&&"function"==typeof n.viewerHitTest.cancel&&(n.viewerHitTest.cancel(),n.viewerHitTest=null);break}});var i="generic-touchscreen",r=new aS(e,{profile:i});t.addEventListener("selectstart",function(t){if(!0===this.data.enabled){var n=t.inputSource;this.bboxMesh.visible=!0,!0===this.hasPosedOnce&&(this.el.emit("ar-hit-test-select-start",{inputSource:n,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),n.profiles[0]===i?this.hitTest=r:(this.hitTest=$C.get(n)||new aS(e,{space:n.targetRaySpace}),$C.set(n,this.hitTest)))}}.bind(this)),t.addEventListener("selectend",function(e){if(this.hitTest&&!0===this.data.enabled){var t,n=e.inputSource;!0===this.hasPosedOnce&&(this.bboxMesh.visible=!1,this.data.target&&(t=this.data.target.object3D)&&(oS.tempFakePose.transform.position.copy(this.bboxMesh.position),oS.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),oS(oS.tempFakePose,t,this.bboxOffset),t.visible=!0,this.hitTest.anchorFromLastHitTestResult(t,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:n,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}.bind(this))}}.bind(this)),this.bboxOffset=new ev.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){!1===this.data.enabled&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse(function(e){e.layers.enable(21)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var e=new ev.PlaneGeometry(1,1),t=new ev.MeshBasicMaterial({transparent:!0,color:16777215});e.rotateX(-Math.PI/2),e.rotateY(-Math.PI/2),this.bbox=new ev.Box3,this.bboxMesh=new ev.Mesh(e,t),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var e,t,n,i=this.el.sceneEl.renderer,r=i.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),t=i.getRenderTarget(),i.setRenderTarget(this.textureTarget),i.xr.enabled=!1,n=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,i.render(this.el.object3D,this.orthoCam),this.el.object3D.background=n,this.el.object3D.overrideMaterial=null,i.xr.enabled=r,i.setRenderTarget(t),i.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),e=this.context.getImageData(0,0,512,512);for(var o=0;o<262144;o++)0!==e.data[4*o+3]&&255!==e.data[4*o+3]&&(e.data[4*o+3]=128);this.context.putImageData(e,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var e,t,n=this.el.sceneEl.frame,i=this.el.sceneEl.renderer;n&&aS.updateAnchorPoses(n,i.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&"map"!==this.data.type||(this.textureCache.has(this.data.src)?t=this.textureCache.get(this.data.src):(t=(new ev.TextureLoader).load(this.data.src),this.textureCache.set(this.data.src,t)),this.bboxMesh.material.map=t,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),"footprint"===this.data.type&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(e=this.hitTest.doHit(n))&&(!0!==this.hasPosedOnce&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(e.transform.position),this.bboxMesh.quaternion.copy(e.transform.orientation))}}),I_("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var e=this.data,t=this.el.object3D;e.transparent?t.background=null:t.background=new ev.Color(e.color)},remove:function(){this.el.object3D.background=null}}),I_("debug",{schema:{default:!0},sceneOnly:!0});var lS="a-dialog-buttons-container",cS="a-dialog-button";function uS(e,t){var n,i,r,o;return(n=document.createElement("div")).classList.add("a-modal"),n.setAttribute(kA,""),(i=document.createElement("div")).className="a-dialog",i.setAttribute(kA,""),n.appendChild(i),(r=document.createElement("div")).classList.add("a-dialog-text-container"),i.appendChild(r),(o=document.createElement("div")).classList.add("a-dialog-text"),o.innerHTML=e,r.appendChild(o),i.appendChild(t),n}I_("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var e=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0}).catch(function(){var t,n,i,r,o,a,s,l;e.devicePermissionDialogEl=(t=e.data.denyButtonText,n=e.data.allowButtonText,i=e.data.deviceMotionMessage,r=e.onDeviceMotionDialogAllowClicked,o=e.onDeviceMotionDialogDenyClicked,(a=document.createElement("div")).classList.add(lS),(s=document.createElement("button")).classList.add(cS,"a-dialog-deny-button"),s.setAttribute(kA,""),s.innerHTML=t,a.appendChild(s),(l=document.createElement("button")).classList.add(cS,"a-dialog-allow-button"),l.setAttribute(kA,""),l.innerHTML=n,a.appendChild(l),l.addEventListener("click",function(e){e.stopPropagation(),r()}),s.addEventListener("click",function(e){e.stopPropagation(),o()}),uS(i,a)),e.el.appendChild(e.devicePermissionDialogEl)})):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var e,t,n,i,r,o=this,a=(e=o.data.cancelButtonText,t=o.data.httpsMessage,n=function(){o.el.removeChild(a)},(i=document.createElement("div")).classList.add(lS),(r=document.createElement("button")).classList.add(cS,"a-dialog-ok-button"),r.setAttribute(kA,""),r.innerHTML=e,i.appendChild(r),r.addEventListener("click",function(e){e.stopPropagation(),n()}),uS(t,i));this.el.appendChild(a)},onDeviceMotionDialogAllowClicked:function(){var e=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t?(e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0):e.el.emit("deviceorientationpermissionrejected"),e.remove()}).catch(console.error)}}),I_("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");!0===this.data?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}});var hS="https://unpkg.com/aframe-inspector@"+function(){var e=Iw.split(".");return e[2]="x",e.join(".")}()+"/dist/aframe-inspector.min.js";I_("inspector",{schema:{url:{default:hS}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var e;this.firstPlay&&"false"!==(e=Cx("inspector"))&&e&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(e){73===e.keyCode&&(e.ctrlKey&&e.altKey||e.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){"INJECT_AFRAME_INSPECTOR"===e.data&&this.openInspector()},openInspector:function(e){var t,n=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(e):(this.showLoader(),(t=document.createElement("script")).src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(kA,""),t.onload=function(){AFRAME.INSPECTOR.open(e),n.hideLoader(),n.removeEventListeners()},t.onerror=function(){n.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),I_("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var e=this.data,t=this.el,n=this.el.object3D.fog;n&&e.type===n.name?Object.keys(this.schema).forEach(function(t){var i=e[t];"color"===t&&(i=new ev.Color(i)),n[t]=i}):t.object3D.fog=function(e){var t;return(t="exponential"===e.type?new ev.FogExp2(e.color,e.density):new ev.Fog(e.color,e.near,e.far)).name=e.type,t}(e)},remove:function(){var e=this.el;this.el.object3D.fog&&(e.object3D.fog=null)}}),I_("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(e){var t=this.el;_x(e)&&(this.data.enterVR&&70===e.keyCode&&t.enterVR(),this.data.exitVR&&27===e.keyCode&&t.exitVR())}});var dS=DA("components:pool:warn");I_("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var e;for(this.availableEls=[],this.usedEls=[],this.data.mixin||dS("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||dS("Container "+this.data.container+" not found.")),this.container=this.container||this.el,e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e;(e=document.createElement("a-entity")).play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.object3D.visible=!1,e.pause(),this.container.appendChild(e),this.availableEls.push(e);var t=this.usedEls;e.addEventListener("loaded",function(){-1===t.indexOf(e)&&(e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D))})},wrapPlay:function(e){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&e.call(this)}},requestEntity:function(){var e;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void dS("Requested entity from empty pool: "+this.attrName);dS("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.object3DParent&&(e.object3DParent.add(e.object3D),this.updateRaycasters()),e.object3D.visible=!0,e},returnEntity:function(e){var t=this.usedEls.indexOf(e);if(-1!==t)return this.usedEls.splice(t,1),this.availableEls.push(e),e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D),this.updateRaycasters(),e.object3D.visible=!1,e.pause(),e;dS("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach(function(e){e.components.raycaster.setDirty()})}}),I_("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var e=this.el.getAttribute("webxr"),t=e.requiredFeatures;-1===t.indexOf("mesh-detection")&&(t.push("mesh-detection"),this.el.setAttribute("webxr",e)),-1===t.indexOf("plane-detection")&&(t.push("plane-detection"),this.el.setAttribute("webxr",e)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var e,t,n,i=this.data,r=this.el,o=this.meshEntities,a=!1,s=[],l=this.data.filterLabels;e=(n=r.frame).detectedMeshes,t=n.detectedPlanes;for(var c=0;c<o.length;c++)o[c].present=!1;if(i.meshesEnabled)for(var u of e.values())if(!l.length||-1!==l.indexOf(u.semanticLabel)){for(c=0;c<o.length;c++)if(u===o[c].mesh){a=!0,o[c].present=!0,o[c].lastChangedTime<u.lastChangedTime&&this.updateMeshGeometry(o[c].el,u),o[c].lastChangedTime=u.lastChangedTime;break}a||s.push(u),a=!1}if(i.planesEnabled)for(u of t.values())if(!l.length||-1!==l.indexOf(u.semanticLabel)){for(c=0;c<o.length;c++)if(u===o[c].mesh){a=!0,o[c].present=!0,o[c].lastChangedTime<u.lastChangedTime&&this.updateMeshGeometry(o[c].el,u),o[c].lastChangedTime=u.lastChangedTime;break}a||s.push(u),a=!1}this.deleteMeshes(),this.createNewMeshes(s)},updateMeshes:function(){var e=new ev.Matrix4;return function(){for(var t,n,i,r=this.el,o=r.frame,a=this.meshEntities,s=r.renderer.xr.getReferenceSpace(),l=0;l<a.length;l++)i=a[l].mesh.meshSpace||a[l].mesh.planeSpace,t=o.getPose(i,s),(n=a[l].el).hasLoaded&&(e.fromArray(t.transform.matrix),e.decompose(n.object3D.position,n.object3D.quaternion,n.object3D.scale))}}(),deleteMeshes:function(){for(var e=this.meshEntities,t=[],n=0;n<e.length;n++)e[n].present?t.push(e[n]):this.el.removeChild(e[n]);this.meshEntities=t},createNewMeshes:function(e){for(var t,n=0;n<e.length;n++)t=document.createElement("a-entity"),this.meshEntities.push({mesh:e[n],el:t}),t.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(t)},initMeshGeometry:function(e){var t,n,i;if(e instanceof XRPlane){n=new ev.Shape,i=e.polygon;for(var r=0;r<i.length;++r)0===r?n.moveTo(i[r].x,i[r].z):n.lineTo(i[r].x,i[r].z);return(t=new ev.ShapeGeometry(n)).rotateX(Math.PI/2),t}return(t=new ev.BufferGeometry).setAttribute("position",new ev.BufferAttribute(e.vertices,3)),t.setIndex(new ev.BufferAttribute(e.indices,1)),t},initWorldMeshEntity:function(e){for(var t,n,i,r=e.target,o=this.meshEntities,a=0;a<o.length;a++)if(o[a].el===r){i=o[a];break}t=this.initMeshGeometry(i.mesh),n=new ev.Mesh(t,new ev.MeshBasicMaterial({color:16777215*Math.random(),side:ev.DoubleSide})),r.setObject3D("mesh",n),i.mesh instanceof XRPlane&&this.data.planeMixin?r.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&r.setAttribute("mixin",this.data.meshMixin),r.setAttribute("data-world-mesh",i.mesh.semanticLabel)},updateMeshGeometry:function(e,t){var n=e.getObject3D("mesh");n.geometry.dispose(),n.geometry=this.initMeshGeometry(t)}}),I_("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var e=this;this.cubeRenderTarget=new ev.WebGLCubeRenderTarget(16),this.cubeCamera=new ev.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new ev.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var t=this.el.getAttribute("webxr"),n=t.optionalFeatures;n.includes("light-estimation")||(n.push("light-estimation"),this.el.setAttribute("webxr",t)),this.el.addEventListener("enter-vr",function(){e.el.is("ar-mode")&&e.el.renderer.xr.getSession().requestLightProbe&&e.startLightProbe()}),this.el.addEventListener("exit-vr",function(){e.xrLightProbe&&e.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var e=this.el.renderer,t=e.xr.getSession(),n=this,i=e.getContext();if(!this.probeLight){var r=document.createElement("a-light");r.setAttribute("type","probe"),r.setAttribute("intensity",0),this.el.appendChild(r),this.probeLight=r}switch(t.preferredReflectionFormat){case"srgba8":i.getExtension("EXT_sRGB");break;case"rgba16f":i.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(t,i),i.getExtension("EXT_sRGB"),i.getExtension("OES_texture_half_float"),t.requestLightProbe().then(function(e){n.xrLightProbe=e,e.addEventListener("reflectionchange",n.updateXRCubeMap.bind(n))}).catch(function(e){console.warn("Lighting estimation not supported: "+e.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var e=this.el.renderer,t=this.glBinding.getReflectionCubeMap(this.xrLightProbe);t&&(e.properties.get(this.lightingEstimationTexture).__webglTexture=t,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var e=this.el.object3D,t=this.el.renderer,n=this.el.frame;if(n&&this.xrLightProbe){var i=n.getLightEstimate(this.xrLightProbe);i&&function(e,t,n,i){var r=Math.max(e.primaryLightIntensity.x,Math.max(e.primaryLightIntensity.y,e.primaryLightIntensity.z));t.sh.fromArray(e.sphericalHarmonicsCoefficients),t.intensity=3.14,n&&(n.color.setRGB(e.primaryLightIntensity.x/r,e.primaryLightIntensity.y/r,e.primaryLightIntensity.z/r),n.intensity=r,i.copy(e.primaryLightDirection))}(i,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(e.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(t,e),e.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&n&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var pS=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fS=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n"),mS=(I_("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var e=this.el;if(!this.canvas){var t=e.renderer.getContext();t&&(this.cubeMapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new ev.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:pS,fragmentShader:fS,side:ev.DoubleSide}),this.quad=new ev.Mesh(new ev.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new ev.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),e.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(e,t){return new ev.WebGLRenderTarget(e,t,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:ev.LinearFilter,magFilter:ev.LinearFilter,wrapS:ev.ClampToEdgeWrapping,wrapT:ev.ClampToEdgeWrapping,format:ev.RGBAFormat,type:ev.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){var t=83===e.keyCode&&e.ctrlKey&&e.altKey;if(this.data&&t){var n=e.shiftKey?"equirectangular":"perspective";this.capture(n)}},setCapture:function(e){var t,n,i,r,o=this.el;return"perspective"===e?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||o.camera,t={width:this.data.width,height:this.data.height}):(n=this.camera,r=new ev.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:ev.RGBFormat,generateMipmaps:!0,minFilter:ev.LinearMipmapLinearFilter,colorSpace:ev.SRGBColorSpace}),i=new ev.CubeCamera(o.camera.near,o.camera.far,r),o.camera.getWorldPosition(i.position),o.camera.getWorldQuaternion(i.quaternion),i.update(o.renderer,o.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:t,projection:e}},capture:function(e){var t,n=this.el.renderer.xr.enabled,i=this.el.renderer;this.setup(),i.xr.enabled=!1,t=this.setCapture(e),this.renderCapture(t.camera,t.size,t.projection),this.saveCapture(),i.xr.enabled=n},getCanvas:function(e){var t=this.el.renderer.xr.enabled,n=this.el.renderer;this.setup();var i=this.setCapture(e);return n.xr.enabled=!1,this.renderCapture(i.camera,i.size,i.projection),n.xr.enabled=t,this.canvas},renderCapture:function(e,t,n){var i,r,o,a=this.el.renderer.autoClear,s=this.el,l=s.renderer;r=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),l.autoClear=!0,l.clear(),l.setRenderTarget(r),l.render(s.object3D,e),l.autoClear=a,l.readRenderTargetPixels(r,0,0,t.width,t.height,o),l.setRenderTarget(null),"perspective"===n&&(o=this.flipPixelsVertically(o,t.width,t.height)),i=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(e,t,n){for(var i=e.slice(0),r=0;r<t;++r)for(var o=0;o<n;++o)i[4*r+o*t*4]=e[4*r+(n-o)*t*4],i[4*r+1+o*t*4]=e[4*r+1+(n-o)*t*4],i[4*r+2+o*t*4]=e[4*r+2+(n-o)*t*4],i[4*r+3+o*t*4]=e[4*r+3+(n-o)*t*4];return i},saveCapture:function(){this.canvas.toBlob(function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),i=URL.createObjectURL(e);n.href=i,n.setAttribute("download",t),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},1)},"image/png")}}),Em(282)),gS=Em.n(mS),vS=(Em(3729),Em(8132),window.aframeStats),yS="a-hidden",AS=window.threeStats;I_("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var e=this.el;"false"!==Cx("stats")&&(this.stats=function(e){var t=new AS(e.renderer),n=new vS(e),i=e.isMobile?[]:[t,n];return new(gS())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:i})}(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add(yS)},show:function(){this.statsEl.classList.remove(yS)}});var bS="a-hidden";function xS(e){e.addEventListener("touchstart",function(){e.classList.remove("resethover")},{passive:!0}),e.addEventListener("touchend",function(){e.classList.add("resethover")},{passive:!0})}I_("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var e=this,t=this.el;"false"!==Cx("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterInterfaces),t.addEventListener("exit-vr",this.updateEnterInterfaces),t.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(t){"loaderReady"===t.data.type&&(e.insideLoader=!0,e.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var e,t,n,i=this.data,r=this.el;if(!i.enabled||this.insideLoader||"false"===Cx("ui"))return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!i.enterVREnabled||"xr"!==i.XRMode&&"vr"!==i.XRMode||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(e=this.onEnterVRButtonClick,(n=document.createElement("div")).classList.add("a-enter-vr"),n.setAttribute(kA,""),(t=document.createElement("button")).className="a-enter-vr-button",t.setAttribute("title","Enter VR mode with a headset or fullscreen without"),t.setAttribute(kA,""),YA()&&xS(t),n.appendChild(t),t.addEventListener("click",function(t){e(),t.stopPropagation()}),n),r.appendChild(this.enterVREl))),this.enterAREl||!i.enterAREnabled||"xr"!==i.XRMode&&"ar"!==i.XRMode||(i.enterARButton?(this.enterAREl=document.querySelector(i.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=function(e,t){var n,i;return(i=document.createElement("div")).classList.add("a-enter-ar"),t&&i.classList.add("xr"),i.setAttribute(kA,""),(n=document.createElement("button")).className="a-enter-ar-button",n.setAttribute("title","Enter AR mode with a headset or handheld device."),n.setAttribute(kA,""),YA()&&xS(n),i.appendChild(n),n.addEventListener("click",function(t){e(),t.stopPropagation()}),i}(this.onEnterARButtonClick,"xr"===i.XRMode),r.appendChild(this.enterAREl))),this.orientationModalEl=function(e){var t=document.createElement("div");t.className="a-orientation-modal",t.classList.add(bS),t.setAttribute(kA,"");var n=document.createElement("button");return n.setAttribute(kA,""),n.innerHTML="Exit VR",n.addEventListener("click",e),t.appendChild(n),t}(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")||(e.isMobile||eb())&&!WA()?this.enterVREl.classList.add(bS):(WA()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(bS),e.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var e=this.el;this.enterAREl&&(e.is("vr-mode")||!QA()?this.enterAREl.classList.add(bS):(this.enterAREl.classList.remove(bS),e.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!ob()&&e.is("vr-mode")?t.classList.remove(bS):t.classList.add(bS))}}),lw("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new ev.BoxGeometry(e.width,e.height,e.depth,e.segmentsWidth,e.segmentsHeight,e.segmentsDepth)}});var _S=ev.MathUtils.degToRad;lw("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new ev.CircleGeometry(e.radius,e.segments,_S(e.thetaStart),_S(e.thetaLength))}});var wS=ev.MathUtils.degToRad;lw("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new ev.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,wS(e.thetaStart),wS(e.thetaLength))}});var ES=ev.MathUtils.degToRad;lw("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new ev.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,ES(e.thetaStart),ES(e.thetaLength))}}),lw("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new ev.DodecahedronGeometry(e.radius,e.detail)}}),lw("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new ev.IcosahedronGeometry(e.radius,e.detail)}}),lw("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new ev.OctahedronGeometry(e.radius,e.detail)}}),lw("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new ev.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}});var CS=ev.MathUtils.degToRad;lw("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new ev.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,CS(e.thetaStart),CS(e.thetaLength))}});var SS=ev.MathUtils.degToRad;lw("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new ev.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,SS(e.phiStart),SS(e.phiLength),SS(e.thetaStart),SS(e.thetaLength))}}),lw("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new ev.TetrahedronGeometry(e.radius,e.detail)}});var TS=ev.MathUtils.degToRad;lw("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new ev.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,TS(e.arc))}}),lw("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new ev.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}});var IS=new ev.Quaternion,MS=new ev.Vector3(0,0,1),kS=new ev.Vector2,RS=new ev.Vector2,LS=new ev.Vector2;function BS(e,t){return t.color.set(e.color),t.fog=e.fog,t.wireframe=e.wireframe,t.toneMapped=e.toneMapped,t.wireframeLinewidth=e.wireframeLinewidth,t}function PS(e,t){return t.color.set(e.color),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.metalness=e.metalness,t.roughness=e.roughness,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}function DS(e,t){switch(t.color.set(e.color),t.specular.set(e.specular),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.transparent=e.transparent,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.shininess=e.shininess,t.flatShading=e.flatShading,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.reflectivity=e.reflectivity,t.refractionRatio=e.refractionRatio,e.combine){case"mix":t.combine=ev.MixOperation;break;case"multiply":t.combine=ev.MultiplyOperation;break;case"add":t.combine=ev.AddOperation}return e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.bumpMap&&(t.bumpScale=e.bumpMapScale),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}lw("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,n,i,r,o,a,s,l,c;(i=new ev.Triangle).a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),i.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),i.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),n=i.getNormal(new ev.Vector3),IS.setFromUnitVectors(n,MS),r=i.a.clone().applyQuaternion(IS),o=i.b.clone().applyQuaternion(IS),a=i.c.clone().applyQuaternion(IS),kS.set(Math.min(r.x,o.x,a.x),Math.min(r.y,o.y,a.y)),RS.set(Math.max(r.x,o.x,a.x),Math.max(r.y,o.y,a.y)),LS.set(0,0).subVectors(RS,kS),r=(new ev.Vector2).subVectors(r,kS).divide(LS),o=(new ev.Vector2).subVectors(o,kS).divide(LS),a=(new ev.Vector2).subVectors(a,kS).divide(LS),t=this.geometry=new ev.BufferGeometry,s=[i.a.x,i.a.y,i.a.z,i.b.x,i.b.y,i.b.z,i.c.x,i.c.y,i.c.z],l=[n.x,n.y,n.z,n.x,n.y,n.z,n.x,n.y,n.z],c=[r.x,r.y,o.x,o.y,a.x,a.y],t.setAttribute("position",new ev.Float32BufferAttribute(s,3)),t.setAttribute("normal",new ev.Float32BufferAttribute(l,3)),t.setAttribute("uv",new ev.Float32BufferAttribute(c,2))}}),xw("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(e){this.materialData={color:new ev.Color},BS(e,this.materialData),this.material=new ev.MeshBasicMaterial(this.materialData)},update:function(e){this.updateMaterial(e),zb(this,e)},updateMaterial:function(e){var t;for(t in BS(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),xw("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.materialData={color:new ev.Color,emissive:new ev.Color},PS(e,this.materialData),this.material=new ev.MeshStandardMaterial(this.materialData)},update:function(e){this.updateMaterial(e),zb(this,e),Ub("normal",this,e),Ub("displacement",this,e),Ub("ambientOcclusion",this,e),Ub("metalness",this,e),Ub("roughness",this,e),Vb(this,e)},updateMaterial:function(e){var t,n=this.material;for(t in PS(e,this.materialData),this.materialData)n[t]=this.materialData[t]}}),xw("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(e){this.materialData={color:new ev.Color,specular:new ev.Color,emissive:new ev.Color},DS(e,this.materialData),this.material=new ev.MeshPhongMaterial(this.materialData);var t=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||t.object3D.environment},set:function(e){this._envMap=e}})},update:function(e){this.updateMaterial(e),zb(this,e),Ub("normal",this,e),Ub("displacement",this,e),Ub("ambientOcclusion",this,e),Ub("bump",this,e),Vb(this,e)},updateMaterial:function(e){var t;for(t in DS(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),xw("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join("\n"),init:function(){return this.uniforms=this.initUniforms(),ev.UniformsUtils&&(this.uniforms=ev.UniformsUtils.merge([ev.UniformsLib.fog,this.uniforms])),this.material=new ev.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),xw("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join("\n"),init:function(){return this.uniforms=this.initUniforms(),ev.UniformsUtils&&(this.uniforms=ev.UniformsUtils.merge([ev.UniformsLib.fog,this.uniforms])),this.material=new ev.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),xw("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(e){this.material=new ev.ShadowMaterial},update:function(e){this.material.opacity=e.opacity,this.material.alphaToCoverage=e.alphaToCoverage,this.material.transparent=e.transparent}});var OS="data-aframe-default-camera";function NS(e){var t=e.primitive,n=ow[t]&&ow[t].Geometry,i=new n;if(!n)throw new Error("Unknown geometry `"+t+"`");return i.init(e),i.geometry}O_("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var e,t,n=this.sceneEl,i=this;if(!n.camera||n.camera.el.getAttribute("camera").spectator)if((e=n.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=e.length,t=0;t<e.length;t++)e[t].addEventListener("object3dset",function(e){"camera"===e.detail.type&&i.checkUserCamera(this)}),e[t].isANode?e[t].load():e[t].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else n.emit("cameraready",{cameraEl:n.camera.el})},checkUserCamera:function(e){var t,n=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((t=e.getAttribute("camera")).active&&!t.spectator?(this.initialCameraFound=!0,n.camera=e.getObject3D("camera"),n.emit("cameraready",{cameraEl:e})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var e,t=this.sceneEl;(e=document.createElement("a-entity")).setAttribute("camera",{active:!0}),e.setAttribute("position",{x:0,y:1.6,z:0}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(kA,""),e.addEventListener("object3dset",function(n){"camera"===n.detail.type&&(t.camera=n.detail.object,t.emit("cameraready",{cameraEl:e}))}),t.appendChild(e)},disableActiveCamera:function(){var e;(e=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[e.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,n,i,r,o=this.activeCameraEl,a=this.sceneEl;if((r=e.getObject3D("camera"))&&e!==this.activeCameraEl){var s=a.querySelector("["+OS+"]");for(e!==(s&&s.querySelector(":not(a-mixin)[camera]"))&&function(e){var t;e.camera&&(t=e.querySelector("["+OS+"]"))&&e.removeChild(t)}(a),this.activeCameraEl=e,this.activeCameraEl.play(),a.camera=r,o&&o.setAttribute("camera","active",!1),n=a.querySelectorAll(":not(a-mixin)[camera]"),i=0;i<n.length;i++)(t=n[i]).isEntity&&e!==t&&(t.setAttribute("camera","active",!1),t.pause());a.emit("camera-set-active",{cameraEl:e})}},setSpectatorCamera:function(e){var t,n=this.spectatorCameraEl,i=this.sceneEl;e.getObject3D("camera")&&e!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),t=this.spectatorCameraEl=e,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),t.setAttribute("camera","active",!1),t.play(),i.emit("camera-set-spectator",{cameraEl:e}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(e,t){var n,i,r=this.sceneEl;n=r.renderer.xr.enabled,this.originalRender.call(r.renderer,e,t),this.spectatorCameraEl&&!r.isMobile&&n&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,e,i),r.renderer.xr.enabled=n)}}),O_("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,n,i=this.cache;return e.skipCache?NS(e):(t=i[n=this.hash(e)],function(e,t){e[t]=void 0===e[t]?1:e[t]+1}(this.cacheCount,n),t||(t=NS(e),i[n]=t,t))},unuseGeometry:function(e){var t,n=this.cache,i=this.cacheCount;e.skipCache||n[t=this.hash(e)]&&(function(e,t){e[t]--}(i,t),i[t]>0||(n[t].dispose(),delete n[t],delete i[t]))},hash:function(e){return JSON.stringify(e)}}),O_("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var e=this.data.dracoDecoderPath,t=this.data.basisTranscoderPath,n=this.data.meshoptDecoderPath;!this.dracoLoader&&e&&(this.dracoLoader=new nv,this.dracoLoader.setDecoderPath(e)),!this.ktx2Loader&&t&&(this.ktx2Loader=new Uy,this.ktx2Loader.setTranscoderPath(t).detectSupport(this.el.renderer)),!this.meshoptDecoder&&n&&(this.meshoptDecoder=function(e){return new Promise(function(t,n){var i=document.createElement("script");document.body.appendChild(i),i.onload=t,i.onerror=n,i.async=!0,i.src=e})}(n).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var FS="data-aframe-default-light",zS=(O_("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(e){e.hasAttribute(FS)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("["+FS+"]");for(var n=0;n<e.length;n++)t.removeChild(e[n]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((e=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute(FS,""),e.setAttribute(kA,""),n.appendChild(e),(t=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(FS,""),t.setAttribute(kA,""),n.appendChild(t),this.defaultLights=!0)}}),DA),US=zS("components:texture:error"),jS=zS("components:texture:warn"),VS=new ev.ImageLoader;O_("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(e,t,n){this.loadTextureSource(e,function(e){var i=Qb(e);Nb(i,t),n(i)})},loadTextureSource:function(e,t){var n=this,i=this.sourceCache,r=this.hash(e);function o(e){i[r]=Promise.resolve(e),i[r].then(t)}i[r]?i[r].then(t):"CANVAS"!==e.tagName?o(new Promise(function(t,i){kb(e,function(e){n.loadImage(e,t)},function(e){n.loadVideo(e,t)})})):o(new ev.Source(e))},loadCubeMapTexture:function(e,t){var n=this,i=0,r=new ev.CubeTexture;function o(o){n.loadTextureSource(e[o],function(e){r.images[o]=e.data,6==++i&&(r.needsUpdate=!0,t(r))})}if(r.colorSpace=ev.SRGBColorSpace,6===e.length)for(var a=0;a<e.length;a++)o(a);else jS("Cube map texture requires exactly 6 sources, got only %s sources",e.length)},loadImage:function(e,t){t("string"==typeof e?function(e){return new Promise(function(t,n){VS.load(e,function(e){t(new ev.Source(e))},function(){},function(e){US("`$s` could not be fetched (Error code: %s; Response: %s)",e.status,e.statusText)})})}(e):new ev.Source(e))},loadVideo:function(e,t){var n;"string"!=typeof e&&function(e){e.autoplay=e.hasAttribute("autoplay")&&"false"!==e.getAttribute("autoplay"),e.controls=e.hasAttribute("controls")&&"false"!==e.getAttribute("controls"),"false"===e.getAttribute("loop")&&e.removeAttribute("loop"),"false"===e.getAttribute("preload")&&(e.preload="none"),e.crossOrigin=e.crossOrigin||"anonymous",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")}(n=e),n=n||function(e){var t=document.createElement("video");return t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.autoplay=!0,t.loop=!0,t.crossOrigin="anonymous",t.addEventListener("error",function(){jS("`%s` is not a valid video",e)},!0),t.src=e,t}(e),t(new ev.Source(n))},hash:function(e){return e.tagName&&(e.id||e.src)||e},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid]}}),O_("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(e){this.colliderEls.push(e),this.data.showColliders?e.components["obb-collider"].showCollider():e.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(e){var t=this.colliderEls,n=t.indexOf(e);e.components["obb-collider"].hideCollider(),n>-1&&t.splice(n,1),0===t.length&&(this.tick=void 0)},registerCollision:function(e,t){var n=this.collisions,i=!1,r=e.obb,o=t.obb,a=e.renderColliderMesh,s=t.renderColliderMesh;a&&a.material.color.set(16711680),s&&s.material.color.set(16711680);for(var l=0;l<n.length;l++)if(n[l].componentA.obb===r&&n[l].componentB.obb===o||n[l].componentA.obb===o&&n[l].componentB.obb===r){i=!0,n[l].detected=!0;break}i||(n.push({componentA:e,componentB:t,detected:!0}),e.el.emit("obbcollisionstarted",{trackedObject3D:e.trackedObject3D,withEl:t.el}),t.el.emit("obbcollisionstarted",{trackedObject3D:t.trackedObject3D,withEl:e.el}))},resetCollisions:function(){for(var e=this.collisions,t=0;t<e.length;t++)e[t].detected=!1},clearCollisions:function(){for(var e,t,n,i,r=this.collisions,o=[],a=0;a<r.length;a++)r[a].detected?o.push(r[a]):(e=r[a].componentA,t=r[a].componentB,n=e.renderColliderMesh,i=t.renderColliderMesh,n&&n.material.color.set(65280),e.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:t.el}),i&&i.material.color.set(65280),t.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:e.el}));this.collisions=o},detectCollisions:function(){var e,t,n,i,r=this.colliderEls;if(!(r.length<2)){this.resetCollisions();for(var o=0;o<r.length;o++)if(n=r[o].components["obb-collider"],0!==(e=r[o].components["obb-collider"].obb).halfSize.x&&0!==e.halfSize.y&&0!==e.halfSize.z)for(var a=o+1;a<r.length;a++)0!==(t=(i=r[a].components["obb-collider"]).obb).halfSize.x&&0!==t.halfSize.y&&0!==t.halfSize.z&&e.intersectsOBB(t)&&this.registerCollision(n,i);this.clearCollisions()}}});var HS=DA("components:renderer:warn");function GS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z-t.z}function QS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder-t.renderOrder}function WS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:t.z-e.z}O_("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:tb()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var e=this.data,t=this.el,n=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),i=t.renderer;i.toneMapping=ev[n+"ToneMapping"],ev.Texture.DEFAULT_ANISOTROPY=e.anisotropy,ev.ColorManagement.enabled=e.colorManagement,i.outputColorSpace=e.colorManagement?ev.SRGBColorSpace:ev.LinearSRGBColorSpace,t.hasAttribute("antialias")&&HS('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),t.hasAttribute("logarithmicDepthBuffer")&&HS('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),i.sortObjects=!0,i.setOpaqueSort(GS)},update:function(){var e=this.data,t=this.el.renderer,n=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);t.toneMapping=ev[n+"ToneMapping"],t.toneMappingExposure=e.exposure,t.xr.setFoveation(e.foveationLevel),e.sortObjects&&HS('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),e.sortTransparentObjects?t.setTransparentSort(WS):t.setTransparentSort(QS)},applyColorCorrection:function(e){this.data.colorManagement&&e&&e.isTexture&&e.colorSpace!==ev.SRGBColorSpace&&(e.colorSpace=ev.SRGBColorSpace,e.needsUpdate=!0)},setWebXRFrameRate:function(e){var t,n=this.data,i=e.supportedFrameRates;i&&e.updateTargetFrameRate&&(t=i.includes(90)?n.highRefreshRate?90:72:n.highRefreshRate?72:60,e.updateTargetFrameRate(t).catch(function(e){console.warn("failed to set target frame rate of "+t+". Error info: "+e)}))}});var qS={basic:ev.BasicShadowMap,pcf:ev.PCFShadowMap,pcfsoft:ev.PCFSoftShadowMap};O_("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.renderer.shadowMap.type=qS[t.type],e.renderer.shadowMap.autoUpdate=t.autoUpdate},update:function(e){e.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(e){var t=this.sceneEl,n=this.sceneEl.renderer;this.shadowMapEnabled=e;var i=this.data.enabled&&this.shadowMapEnabled;n&&i!==n.shadowMap.enabled&&(n.shadowMap.enabled=i,function(e){e.hasLoaded&&e.object3D.traverse(function(e){if(e.material)for(var t=Array.isArray(e.material)?e.material:[e.material],n=0;n<t.length;n++)t[n].needsUpdate=!0})}(t))}}),O_("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var e=this,t=this.el.xrSession,n=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(n).then(function(t){e.referenceSpace=t}).catch(function(t){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,'tracked-controls uses reference space "'+n+'".'),t}),this.controllers=t.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var XS=DA("systems:webxr:warn"),YS=(O_("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var e=this.data;this.sessionConfiguration={requiredFeatures:e.requiredFeatures,optionalFeatures:e.optionalFeatures},this.sessionReferenceSpaceType=e.referenceSpaceType,e.overlayElement&&(e.overlayElement.classList.remove("a-dom-overlay"),e.optionalFeatures.includes("dom-overlay")||(e.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",e)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:e.overlayElement},e.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(e){return"viewer"===e||"local"===e||!(!this.sessionConfiguration.requiredFeatures.includes(e)&&!this.sessionConfiguration.optionalFeatures.includes(e))},warnIfFeatureNotRequested:function(e,t){this.wasFeatureRequested(e)||XS((t?t+" ":"")+'Please add the feature "'+e+"\" to a-scene's webxr system options in requiredFeatures/optionalFeatures.")}}),{});function KS(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===e&&(t="material-fog"),"visible"===e&&(t="material-visible"),YS[t]="material."+e}function JS(){return{defaultComponents:{material:{}},mappings:mx({},YS)}}Object.keys(d_.material.schema).forEach(KS),Object.keys(vw.standard.schema).forEach(KS);var ZS=new ev.Vector3,$S=new ev.Vector3;I_("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,n=t.object3D.parent,i=t.object3D,r=new ev.Group;ZS.copy(i.position),$S.copy(i.rotation),n.remove(i),r.add(i),n.add(r),t.object3D=r,i.position.set(-1*e.x,-1*e.y,-1*e.z),r.position.set(e.x+ZS.x,e.y+ZS.y,e.z+ZS.z),r.rotation.copy(i.rotation),i.rotation.set(0,0,0)}}),mw("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),mw("a-cursor",gx({},JS(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),mw("a-curvedimage",gx({},JS(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),mw("a-gltf-model",{mappings:{src:"gltf-model"}}),mw("a-image",gx({},JS(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),mw("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),mw("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),mw("a-obj-model",gx({},JS(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));const eT={},tT=eT;function nT(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var iT,rT;aw.forEach(function(e){var t=ow[e],n=nT(e),i={};Object.keys(t.schema).forEach(function(e){i[nT(e)]="geometry."+e});var r="a-"+n,o=mw(r,gx({},JS(),{defaultComponents:{geometry:{primitive:e}},mappings:i}));eT[r]=o}),mw("a-sky",gx({},JS(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:gx({},tT["a-sphere"].mappings)})),mw("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),iT={text:{anchor:"align",width:5}},rT=rT||{},Object.keys(iT).forEach(function(e){!function(e,t){var n=d_[e].schema;Object.keys(n).forEach(function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==t[i]&&(i=e+"-"+n),t[i]=e+"."+n})}(e,rT)}),mw("a-text",gx({},null,{defaultComponents:iT,mappings:rT})),mw("a-video",gx({},JS(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),mw("a-videosphere",gx({},JS(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var oT=DA,aT=oT("A-Frame:error"),sT=oT("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&sT("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||"file:"!==window.location.protocol||aT("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),ab&&(window.logs=oT,Em(7180),Em(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",IA.REVISION),window.AFRAME_ASYNC||("complete"!==document.readyState?document.addEventListener("readystatechange",function e(){"complete"===document.readyState&&(document.removeEventListener("readystatechange",e),L_())}):L_());const lT=globalThis.AFRAME={AComponent:S_,AEntity:W_,ANode:U_,ANIME:$g,AScene:ew,components:d_,coreComponents:Object.keys(d_),geometries:ow,registerComponent:I_,registerGeometry:lw,registerPrimitive:mw,registerShader:xw,registerSystem:O_,primitives:{getMeshMixin:JS,primitives:fw},scenes:Ux,schema:Om,shaders:vw,systems:P_,emitReady:L_,THREE:IA,utils:Dm,version:Iw};var cT=n(1688),uT=n(579);const hT=e=>{let{onSearch:t}=e;const[n,r]=(0,i.useState)(""),o=(0,cT.useHistory)(),a=()=>{o.push("".concat(n))};return(0,uT.jsxs)("form",{className:"search-bar-container",onSubmit:a,children:[(0,uT.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),className:"search-input",placeholder:"Enter Keyword here..."}),(0,uT.jsxs)("button",{type:"submit",className:"search-button",onClick:a,children:["SEARCH ",(0,uT.jsx)("i",{className:"fas fa-search"})]})]})},dT=n.p+"static/media/logoN.f23cf3f0d26cd2524d99.png";var pT=n(5540),fT=n(7321),mT=n(8168),gT=n(8587),vT=n(3404),yT=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=(0,fT.createBrowserHistory)(t.props),t}return(0,pT.A)(t,e),t.prototype.render=function(){return i.createElement(cT.Router,{history:this.history,children:this.props.children})},t}(i.Component);i.Component;var AT=function(e,t){return"function"===typeof e?e(t):e},bT=function(e,t){return"string"===typeof e?(0,fT.createLocation)(e,null,null,t):e},xT=function(e){return e},_T=i.forwardRef;"undefined"===typeof _T&&(_T=xT);var wT=_T(function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,a=(0,gT.A)(e,["innerRef","navigate","onClick"]),s=a.target,l=(0,mT.A)({},a,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=xT!==_T&&t||n,i.createElement("a",l)});var ET=_T(function(e,t){var n=e.component,r=void 0===n?wT:n,o=e.replace,a=e.to,s=e.innerRef,l=(0,gT.A)(e,["component","replace","to","innerRef"]);return i.createElement(cT.__RouterContext.Consumer,null,function(e){e||(0,vT.A)(!1);var n=e.history,c=bT(AT(a,e.location),e.location),u=c?n.createHref(c):"",h=(0,mT.A)({},l,{href:u,navigate:function(){var t=AT(a,e.location),i=(0,fT.createPath)(e.location)===(0,fT.createPath)(bT(t));(o||i?n.replace:n.push)(t)}});return xT!==_T?h.ref=t||s:h.innerRef=s,i.createElement(r,h)})}),CT=function(e){return e},ST=i.forwardRef;"undefined"===typeof ST&&(ST=CT);var TT=ST(function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,a=void 0===o?"active":o,s=e.activeStyle,l=e.className,c=e.exact,u=e.isActive,h=e.location,d=e.sensitive,p=e.strict,f=e.style,m=e.to,g=e.innerRef,v=(0,gT.A)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(cT.__RouterContext.Consumer,null,function(e){e||(0,vT.A)(!1);var n=h||e.location,o=bT(AT(m,n),n),y=o.pathname,A=y&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=A?(0,cT.matchPath)(n.pathname,{path:A,exact:c,sensitive:d,strict:p}):null,x=!!(u?u(b,n):b),_="function"===typeof l?l(x):l,w="function"===typeof f?f(x):f;x&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(_,a),w=(0,mT.A)({},w,s));var E=(0,mT.A)({"aria-current":x&&r||null,className:_,style:w,to:o},v);return CT!==ST?E.ref=t||g:E.innerRef=g,i.createElement(ET,E)})});function IT(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=IT(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const MT=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=IT(e))&&(i&&(i+=" "),i+=t);return i};var kT=n(3174),RT=n(8812),LT=n(8698),BT=n(8280),PT=n(9369);const DT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=i.useContext(PT.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},OT=(0,BT.A)();const NT=function(){return DT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:OT)},FT=["className","component"];const zT=e=>e,UT=(()=>{let e=zT;return{configure(t){e=t},generate:t=>e(t),reset(){e=zT}}})();var jT=n(7868),VT=n(9172),HT=n(7758);function GT(e,t){return(0,mT.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var QT=n(7266);const WT={black:"#000",white:"#fff"},qT={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},XT={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},YT={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},KT={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},JT={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ZT={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$T={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},eI=["mode","contrastThreshold","tonalOffset"],tI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:WT.white,default:WT.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},nI={text:{primary:WT.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:WT.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function iI(e,t,n,i){const r=i.light||i,o=i.dark||1.5*i;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,QT.a)(e.main,r):"dark"===t&&(e.dark=(0,QT.e$)(e.main,o)))}function rI(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,r=(0,gT.A)(e,eI),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:JT[200],light:JT[50],dark:JT[400]}:{main:JT[700],light:JT[400],dark:JT[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:XT[200],light:XT[50],dark:XT[400]}:{main:XT[500],light:XT[300],dark:XT[700]}}(t),s=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:YT[500],light:YT[300],dark:YT[700]}:{main:YT[700],light:YT[400],dark:YT[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ZT[400],light:ZT[300],dark:ZT[700]}:{main:ZT[700],light:ZT[500],dark:ZT[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$T[400],light:$T[300],dark:$T[700]}:{main:$T[800],light:$T[500],dark:$T[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:KT[400],light:KT[300],dark:KT[700]}:{main:"#ed6c02",light:KT[500],dark:KT[900]}}(t);function h(e){return(0,QT.eM)(e,nI.text.primary)>=n?nI.text.primary:tI.text.primary}const d=e=>{let{color:t,name:n,mainShade:r=500,lightShade:o=300,darkShade:a=700}=e;if(t=(0,mT.A)({},t),!t.main&&t[r]&&(t.main=t[r]),!t.hasOwnProperty("main"))throw new Error((0,jT.A)(11,n?" (".concat(n,")"):"",r));if("string"!==typeof t.main)throw new Error((0,jT.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return iI(t,"light",o,i),iI(t,"dark",a,i),t.contrastText||(t.contrastText=h(t.main)),t},p={dark:nI,light:tI};return(0,VT.A)((0,mT.A)({common:(0,mT.A)({},WT),mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:qT,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:i},p[t]),r)}const oI=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const aI={textTransform:"uppercase"},sI='"Roboto", "Helvetica", "Arial", sans-serif';function lI(e,t){const n="function"===typeof t?t(e):t,{fontFamily:i=sI,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,d=(0,gT.A)(n,oI);const p=r/14,f=h||(e=>"".concat(e/c*p,"rem")),m=(e,t,n,r,o)=>{return(0,mT.A)({fontFamily:i,fontWeight:e,fontSize:f(t),lineHeight:n},i===sI?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{},o,u);var a},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(s,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(s,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(s,14,1.75,.4,aI),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,aI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,VT.A)((0,mT.A)({htmlFontSize:c,pxToRem:f,fontFamily:i,fontSize:r,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},g),d,{clone:!1})}function cI(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const uI=["none",cI(0,2,1,-1,0,1,1,0,0,1,3,0),cI(0,3,1,-2,0,2,2,0,0,1,5,0),cI(0,3,3,-2,0,3,4,0,0,1,8,0),cI(0,2,4,-1,0,4,5,0,0,1,10,0),cI(0,3,5,-1,0,5,8,0,0,1,14,0),cI(0,3,5,-1,0,6,10,0,0,1,18,0),cI(0,4,5,-2,0,7,10,1,0,2,16,1),cI(0,5,5,-3,0,8,10,1,0,3,14,2),cI(0,5,6,-3,0,9,12,1,0,3,16,2),cI(0,6,6,-3,0,10,14,1,0,4,18,3),cI(0,6,7,-4,0,11,15,1,0,4,20,3),cI(0,7,8,-4,0,12,17,2,0,5,22,4),cI(0,7,8,-4,0,13,19,2,0,5,24,4),cI(0,7,9,-4,0,14,21,2,0,5,26,4),cI(0,8,9,-5,0,15,22,2,0,6,28,5),cI(0,8,10,-5,0,16,24,2,0,6,30,5),cI(0,8,11,-5,0,17,26,2,0,6,32,5),cI(0,9,11,-5,0,18,28,2,0,7,34,6),cI(0,9,12,-6,0,19,29,2,0,7,36,6),cI(0,10,13,-6,0,20,31,3,0,8,38,7),cI(0,10,13,-6,0,21,33,3,0,8,40,7),cI(0,10,14,-6,0,22,35,3,0,8,42,7),cI(0,11,14,-7,0,23,36,3,0,9,44,8),cI(0,11,15,-7,0,24,38,3,0,9,46,8)],hI=["duration","easing","delay"],dI={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},pI={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fI(e){return"".concat(Math.round(e),"ms")}function mI(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function gI(e){const t=(0,mT.A)({},dI,e.easing),n=(0,mT.A)({},pI,e.duration);return(0,mT.A)({getAutoHeightDuration:mI,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:r=n.standard,easing:o=t.easeInOut,delay:a=0}=i;(0,gT.A)(i,hI);return(Array.isArray(e)?e:[e]).map(e=>"".concat(e," ").concat("string"===typeof r?r:fI(r)," ").concat(o," ").concat("string"===typeof a?a:fI(a))).join(",")}},e,{easing:t,duration:n})}const vI={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},yI=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function AI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:i={},typography:r={}}=e,o=(0,gT.A)(e,yI);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,jT.A)(18));const a=rI(n),s=(0,BT.A)(e);let l=(0,VT.A)(s,{mixins:GT(s.breakpoints,t),palette:a,shadows:uI.slice(),typography:lI(a,r),transitions:gI(i),zIndex:(0,mT.A)({},vI)});l=(0,VT.A)(l,o);for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];return l=u.reduce((e,t)=>(0,VT.A)(e,t),l),l.unstable_sxConfig=(0,mT.A)({},HT.A,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return(0,RT.A)({sx:e,theme:this})},l}const bI=AI,xI="$$material",_I={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function wI(e,t){const n=_I[t];return n?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(n):"".concat(UT.generate(e),"-").concat(t)}function EI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach(t=>{i[t]=wI(e,t,n)}),i}const CI=EI("MuiBox",["root"]),SI=bI(),TI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:o}=e,a=(0,kT.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(RT.A),s=i.forwardRef(function(e,i){const s=NT(n),l=(0,LT.A)(e),{className:c,component:u="div"}=l,h=(0,gT.A)(l,FT);return(0,uT.jsx)(a,(0,mT.A)({as:u,ref:i,className:MT(c,o?o(r):r),theme:t&&s[t]||s},h))});return s}({themeId:xI,defaultTheme:SI,defaultClassName:CI.root,generateClassName:UT.generate}),II=TI,MI={};const kI=[];class RI{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new RI}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function LI(){const e=function(e,t){const n=i.useRef(MI);return n.current===MI&&(n.current=e(t)),n}(RI.create).current;return function(e){i.useEffect(e,kI)}(e.disposeEffect),e}function BI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={};return Object.keys(e).forEach(r=>{i[r]=e[r].reduce((e,i)=>{if(i){const r=t(i);""!==r&&e.push(r),n&&n[i]&&e.push(n[i])}return e},[]).join(" ")}),i}const PI=i.createContext();const DI=()=>{const e=i.useContext(PI);return null!=e&&e};const OI=function(e){return"string"===typeof e};const NI=function(e,t,n){return void 0===e||OI(e)?t:(0,mT.A)({},t,{ownerState:(0,mT.A)({},t.ownerState,n)})};function FI(e){var t;return parseInt(i.version,10)>=19?(null==e||null==(t=e.props)?void 0:t.ref)||null:(null==e?void 0:e.ref)||null}var zI=n(8052);const UI=bI();const jI=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},VI=e=>jI(e)&&"classes"!==e,HI=(0,zI.Ay)({themeId:xI,defaultTheme:UI,rootShouldForwardProp:VI});function GI(){const e=NT(UI);return e[xI]||e}function QI(e,t){const n=(0,mT.A)({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=(0,mT.A)({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=e[i]||{},o=t[i];n[i]={},o&&Object.keys(o)?r&&Object.keys(r)?(n[i]=(0,mT.A)({},o),Object.keys(r).forEach(e=>{n[i][e]=QI(r[e],o[e])})):n[i]=o:n[i]=r}else void 0===n[i]&&(n[i]=e[i])}),n}const WI=i.createContext(void 0);function qI(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:i}=e;if(!t||!t.components||!t.components[n])return i;const r=t.components[n];return r.defaultProps?QI(r.defaultProps,i):r.styleOverrides||r.variants?i:QI(r,i)}({props:t,name:n,theme:{components:i.useContext(WI)}})}function XI(e){return qI(e)}var YI=n(7598);const KI=YI.A;var JI=n(7950);const ZI=!1,$I=i.createContext(null);var eM="unmounted",tM="exited",nM="entering",iM="entered",rM="exiting",oM=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var r,o=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?o?(r=tM,i.appearStatus=nM):r=iM:r=t.unmountOnExit||t.mountOnEnter?eM:tM,i.state={status:r},i.nextCallback=null,i}(0,pT.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===eM?{status:tM}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==nM&&n!==iM&&(t=nM):n!==nM&&n!==iM||(t=rM)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===nM){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:JI.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===tM&&this.setState({status:eM})},n.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,r=this.props.nodeRef?[i]:[JI.findDOMNode(this),i],o=r[0],a=r[1],s=this.getTimeouts(),l=i?s.appear:s.enter;!e&&!n||ZI?this.safeSetState({status:iM},function(){t.props.onEntered(o)}):(this.props.onEnter(o,a),this.safeSetState({status:nM},function(){t.props.onEntering(o,a),t.onTransitionEnd(l,function(){t.safeSetState({status:iM},function(){t.props.onEntered(o,a)})})}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:JI.findDOMNode(this);t&&!ZI?(this.props.onExit(i),this.safeSetState({status:rM},function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:tM},function(){e.props.onExited(i)})})})):this.safeSetState({status:tM},function(){e.props.onExited(i)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:JI.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=r[0],a=r[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===eM)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,gT.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement($I.Provider,{value:null},"function"===typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function aM(){}oM.contextType=$I,oM.propTypes={},oM.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:aM,onEntering:aM,onEntered:aM,onExit:aM,onExiting:aM,onExited:aM},oM.UNMOUNTED=eM,oM.EXITED=tM,oM.ENTERING=nM,oM.ENTERED=iM,oM.EXITING=rM;const sM=oM,lM=e=>e.scrollTop;function cM(e,t){var n,i;const{timeout:r,easing:o,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof r?r:r[t.mode]||0,easing:null!=(i=a.transitionTimingFunction)?i:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}function uM(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function hM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>t.every(e=>null==e)?null:e=>{t.forEach(t=>{uM(t,e)})},t)}const dM=hM,pM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function fM(e){return"scale(".concat(e,", ").concat(e**2,")")}const mM={entering:{opacity:1,transform:fM(1)},entered:{opacity:1,transform:"none"}},gM="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),vM=i.forwardRef(function(e,t){const{addEndListener:n,appear:r=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=sM}=e,v=(0,gT.A)(e,pM),y=LI(),A=i.useRef(),b=GI(),x=i.useRef(null),_=dM(x,FI(o),t),w=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},E=w(u),C=w((e,t)=>{lM(e);const{duration:n,delay:i,easing:r}=cM({style:f,timeout:m,easing:a},{mode:"enter"});let o;"auto"===m?(o=b.transitions.getAutoHeightDuration(e.clientHeight),A.current=o):o=n,e.style.transition=[b.transitions.create("opacity",{duration:o,delay:i}),b.transitions.create("transform",{duration:gM?o:.666*o,delay:i,easing:r})].join(","),l&&l(e,t)}),S=w(c),T=w(p),I=w(e=>{const{duration:t,delay:n,easing:i}=cM({style:f,timeout:m,easing:a},{mode:"exit"});let r;"auto"===m?(r=b.transitions.getAutoHeightDuration(e.clientHeight),A.current=r):r=t,e.style.transition=[b.transitions.create("opacity",{duration:r,delay:n}),b.transitions.create("transform",{duration:gM?r:.666*r,delay:gM?n:n||.333*r,easing:i})].join(","),e.style.opacity=0,e.style.transform=fM(.75),h&&h(e)}),M=w(d);return(0,uT.jsx)(g,(0,mT.A)({appear:r,in:s,nodeRef:x,onEnter:C,onEntered:S,onEntering:E,onExit:I,onExited:M,onExiting:T,addEndListener:e=>{"auto"===m&&y.start(A.current||0,e),n&&n(x.current,e)},timeout:"auto"===m?null:m},v,{children:(e,t)=>i.cloneElement(o,(0,mT.A)({style:(0,mT.A)({opacity:0,transform:fM(.75),visibility:"exited"!==e||s?void 0:"hidden"},mM[e],f,o.props.style),ref:_},t))}))});vM.muiSupportAuto=!0;const yM=vM;var AM=n(2374);const bM="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function xM(e){return e&&e.ownerDocument||document}function _M(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function wM(e){return e instanceof _M(e).Element||e instanceof Element}function EM(e){return e instanceof _M(e).HTMLElement||e instanceof HTMLElement}function CM(e){return"undefined"!==typeof ShadowRoot&&(e instanceof _M(e).ShadowRoot||e instanceof ShadowRoot)}var SM=Math.max,TM=Math.min,IM=Math.round;function MM(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function kM(){return!/^((?!chrome|android).)*safari/i.test(MM())}function RM(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&EM(e)&&(r=e.offsetWidth>0&&IM(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&IM(i.height)/e.offsetHeight||1);var a=(wM(e)?_M(e):window).visualViewport,s=!kM()&&n,l=(i.left+(s&&a?a.offsetLeft:0))/r,c=(i.top+(s&&a?a.offsetTop:0))/o,u=i.width/r,h=i.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function LM(e){var t=_M(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function BM(e){return e?(e.nodeName||"").toLowerCase():null}function PM(e){return((wM(e)?e.ownerDocument:e.document)||window.document).documentElement}function DM(e){return RM(PM(e)).left+LM(e).scrollLeft}function OM(e){return _M(e).getComputedStyle(e)}function NM(e){var t=OM(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function FM(e,t,n){void 0===n&&(n=!1);var i=EM(t),r=EM(t)&&function(e){var t=e.getBoundingClientRect(),n=IM(t.width)/e.offsetWidth||1,i=IM(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),o=PM(t),a=RM(e,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==BM(t)||NM(o))&&(s=function(e){return e!==_M(e)&&EM(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:LM(e);var t}(t)),EM(t)?((l=RM(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=DM(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function zM(e){var t=RM(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function UM(e){return"html"===BM(e)?e:e.assignedSlot||e.parentNode||(CM(e)?e.host:null)||PM(e)}function jM(e){return["html","body","#document"].indexOf(BM(e))>=0?e.ownerDocument.body:EM(e)&&NM(e)?e:jM(UM(e))}function VM(e,t){var n;void 0===t&&(t=[]);var i=jM(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=_M(i),a=r?[o].concat(o.visualViewport||[],NM(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(VM(UM(a)))}function HM(e){return["table","td","th"].indexOf(BM(e))>=0}function GM(e){return EM(e)&&"fixed"!==OM(e).position?e.offsetParent:null}function QM(e){for(var t=_M(e),n=GM(e);n&&HM(n)&&"static"===OM(n).position;)n=GM(n);return n&&("html"===BM(n)||"body"===BM(n)&&"static"===OM(n).position)?t:n||function(e){var t=/firefox/i.test(MM());if(/Trident/i.test(MM())&&EM(e)&&"fixed"===OM(e).position)return null;var n=UM(e);for(CM(n)&&(n=n.host);EM(n)&&["html","body"].indexOf(BM(n))<0;){var i=OM(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var WM="top",qM="bottom",XM="right",YM="left",KM="auto",JM=[WM,qM,XM,YM],ZM="start",$M="end",ek="viewport",tk="popper",nk=JM.reduce(function(e,t){return e.concat([t+"-"+ZM,t+"-"+$M])},[]),ik=[].concat(JM,[KM]).reduce(function(e,t){return e.concat([t,t+"-"+ZM,t+"-"+$M])},[]),rk=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ok(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}}),i.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||r(e)}),i}function ak(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var sk={placement:"bottom",modifiers:[],strategy:"absolute"};function lk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"===typeof e.getBoundingClientRect)})}function ck(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?sk:r;return function(e,t,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},sk,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:r,setOptions:function(n){var s="function"===typeof n?n(r.options):n;c(),r.options=Object.assign({},o,r.options,s),r.scrollParents={reference:wM(e)?VM(e):e.contextElement?VM(e.contextElement):[],popper:VM(t)};var u=function(e){var t=ok(e);return rk.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(i,r.options.modifiers)));return r.orderedModifiers=u.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:r,name:t,instance:l,options:i}),c=function(){};a.push(s||c)}}),l.update()},forceUpdate:function(){if(!s){var e=r.elements,t=e.reference,n=e.popper;if(lk(t,n)){r.rects={reference:FM(t,QM(n),"fixed"===r.options.strategy),popper:zM(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],a=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof a&&(r=a({state:r,options:u,name:h,instance:l})||r)}else r.reset=!1,i=-1}}},update:ak(function(){return new Promise(function(e){l.forceUpdate(),e(r)})}),destroy:function(){c(),s=!0}};if(!lk(e,t))return l;function c(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}var uk={passive:!0};const hk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=_M(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,uk)}),s&&l.addEventListener("resize",n.update,uk),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,uk)}),s&&l.removeEventListener("resize",n.update,uk)}},data:{}};function dk(e){return e.split("-")[0]}function pk(e){return e.split("-")[1]}function fk(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function mk(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?dk(r):null,a=r?pk(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case WM:t={x:s,y:n.y-i.height};break;case qM:t={x:s,y:n.y+n.height};break;case XM:t={x:n.x+n.width,y:l};break;case YM:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?fk(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case ZM:t[c]=t[c]-(n[u]/2-i[u]/2);break;case $M:t[c]=t[c]+(n[u]/2-i[u]/2)}}return t}const gk={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=mk({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var vk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yk(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),A=YM,b=WM,x=window;if(c){var _=QM(n),w="clientHeight",E="clientWidth";if(_===_M(n)&&"static"!==OM(_=PM(n)).position&&"absolute"===s&&(w="scrollHeight",E="scrollWidth"),r===WM||(r===YM||r===XM)&&o===$M)b=qM,m-=(h&&_===x&&x.visualViewport?x.visualViewport.height:_[w])-i.height,m*=l?1:-1;if(r===YM||(r===WM||r===qM)&&o===$M)A=XM,p-=(h&&_===x&&x.visualViewport?x.visualViewport.width:_[E])-i.width,p*=l?1:-1}var C,S=Object.assign({position:s},c&&vk),T=!0===u?function(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:IM(n*r)/r||0,y:IM(i*r)/r||0}}({x:p,y:m},_M(n)):{x:p,y:m};return p=T.x,m=T.y,l?Object.assign({},S,((C={})[b]=y?"0":"",C[A]=v?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},S,((t={})[b]=y?m+"px":"",t[A]=v?p+"px":"",t.transform="",t))}const Ak={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];EM(r)&&BM(r)&&(Object.assign(r.style,n),Object.keys(i).forEach(function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});EM(i)&&BM(i)&&(Object.assign(i.style,o),Object.keys(r).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]};const bk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,a=ik.reduce(function(e,n){return e[n]=function(e,t,n){var i=dk(e),r=[YM,WM].indexOf(i)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[YM,XM].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e},{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}};var xk={left:"right",right:"left",bottom:"top",top:"bottom"};function _k(e){return e.replace(/left|right|bottom|top/g,function(e){return xk[e]})}var wk={start:"end",end:"start"};function Ek(e){return e.replace(/start|end/g,function(e){return wk[e]})}function Ck(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&CM(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Sk(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Tk(e,t,n){return t===ek?Sk(function(e,t){var n=_M(e),i=PM(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var c=kM();(c||!c&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+DM(e),y:l}}(e,n)):wM(t)?function(e,t){var n=RM(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Sk(function(e){var t,n=PM(e),i=LM(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=SM(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=SM(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+DM(e),l=-i.scrollTop;return"rtl"===OM(r||n).direction&&(s+=SM(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(PM(e)))}function Ik(e,t,n,i){var r="clippingParents"===t?function(e){var t=VM(UM(e)),n=["absolute","fixed"].indexOf(OM(e).position)>=0&&EM(e)?QM(e):e;return wM(n)?t.filter(function(e){return wM(e)&&Ck(e,n)&&"body"!==BM(e)}):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(t,n){var r=Tk(e,n,i);return t.top=SM(r.top,t.top),t.right=TM(r.right,t.right),t.bottom=TM(r.bottom,t.bottom),t.left=SM(r.left,t.left),t},Tk(e,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Mk(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function kk(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function Rk(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?ek:c,h=n.elementContext,d=void 0===h?tk:h,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=Mk("number"!==typeof g?g:kk(g,JM)),y=d===tk?"reference":tk,A=e.rects.popper,b=e.elements[f?y:d],x=Ik(wM(b)?b:b.contextElement||PM(e.elements.popper),l,u,a),_=RM(e.elements.reference),w=mk({reference:_,element:A,strategy:"absolute",placement:r}),E=Sk(Object.assign({},A,w)),C=d===tk?E:_,S={top:x.top-C.top+v.top,bottom:C.bottom-x.bottom+v.bottom,left:x.left-C.left+v.left,right:C.right-x.right+v.right},T=e.modifiersData.offset;if(d===tk&&T){var I=T[r];Object.keys(S).forEach(function(e){var t=[XM,qM].indexOf(e)>=0?1:-1,n=[WM,qM].indexOf(e)>=0?"y":"x";S[e]+=I[n]*t})}return S}const Lk={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=dk(g),y=l||(v===g||!f?[_k(g)]:function(e){if(dk(e)===KM)return[];var t=_k(e);return[Ek(e),t,Ek(t)]}(g)),A=[g].concat(y).reduce(function(e,n){return e.concat(dk(n)===KM?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?ik:l,u=pk(i),h=u?s?nk:nk.filter(function(e){return pk(e)===u}):JM,d=h.filter(function(e){return c.indexOf(e)>=0});0===d.length&&(d=h);var p=d.reduce(function(t,n){return t[n]=Rk(e,{placement:n,boundary:r,rootBoundary:o,padding:a})[dk(n)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)},[]),b=t.rects.reference,x=t.rects.popper,_=new Map,w=!0,E=A[0],C=0;C<A.length;C++){var S=A[C],T=dk(S),I=pk(S)===ZM,M=[WM,qM].indexOf(T)>=0,k=M?"width":"height",R=Rk(t,{placement:S,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),L=M?I?XM:YM:I?qM:WM;b[k]>x[k]&&(L=_k(L));var B=_k(L),P=[];if(o&&P.push(R[T]<=0),s&&P.push(R[L]<=0,R[B]<=0),P.every(function(e){return e})){E=S,w=!1;break}_.set(S,P)}if(w)for(var D=function(e){var t=A.find(function(t){var n=_.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return E=t,"break"},O=f?3:1;O>0;O--){if("break"===D(O))break}t.placement!==E&&(t.modifiersData[i]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Bk(e,t,n){return SM(e,TM(t,n))}const Pk={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=Rk(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=dk(t.placement),y=pk(t.placement),A=!y,b=fk(v),x="x"===b?"y":"x",_=t.modifiersData.popperOffsets,w=t.rects.reference,E=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,S="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(_){if(o){var M,k="y"===b?WM:YM,R="y"===b?qM:XM,L="y"===b?"height":"width",B=_[b],P=B+g[k],D=B-g[R],O=p?-E[L]/2:0,N=y===ZM?w[L]:E[L],F=y===ZM?-E[L]:-w[L],z=t.elements.arrow,U=p&&z?zM(z):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=j[k],H=j[R],G=Bk(0,w[L],U[L]),Q=A?w[L]/2-O-G-V-S.mainAxis:N-G-V-S.mainAxis,W=A?-w[L]/2+O+G+H+S.mainAxis:F+G+H+S.mainAxis,q=t.elements.arrow&&QM(t.elements.arrow),X=q?"y"===b?q.clientTop||0:q.clientLeft||0:0,Y=null!=(M=null==T?void 0:T[b])?M:0,K=B+W-Y,J=Bk(p?TM(P,B+Q-Y-X):P,B,p?SM(D,K):D);_[b]=J,I[b]=J-B}if(s){var Z,$="x"===b?WM:YM,ee="x"===b?qM:XM,te=_[x],ne="y"===x?"height":"width",ie=te+g[$],re=te-g[ee],oe=-1!==[WM,YM].indexOf(v),ae=null!=(Z=null==T?void 0:T[x])?Z:0,se=oe?ie:te-w[ne]-E[ne]-ae+S.altAxis,le=oe?te+w[ne]+E[ne]-ae-S.altAxis:re,ce=p&&oe?function(e,t,n){var i=Bk(e,t,n);return i>n?n:i}(se,te,le):Bk(p?se:ie,te,p?le:re);_[x]=ce,I[x]=ce-te}t.modifiersData[i]=I}},requiresIfExists:["offset"]};const Dk={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=dk(n.placement),l=fk(s),c=[YM,XM].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return Mk("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:kk(e,JM))}(r.padding,n),h=zM(o),d="y"===l?WM:YM,p="y"===l?qM:XM,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=QM(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,A=u[d],b=v-h[c]-u[p],x=v/2-h[c]/2+y,_=Bk(A,x,b),w=l;n.modifiersData[i]=((t={})[w]=_,t.centerOffset=_-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i)))&&Ck(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ok(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Nk(e){return[WM,XM,qM,YM].some(function(t){return e[t]>=0})}const Fk={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=Rk(t,{elementContext:"reference"}),s=Rk(t,{altBoundary:!0}),l=Ok(a,i),c=Ok(s,r,o),u=Nk(l),h=Nk(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}};var zk=ck({defaultModifiers:[hk,gk,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:dk(t.placement),variation:pk(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,yk(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,yk(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Ak,bk,Lk,Pk,Dk,Fk]});const Uk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)).forEach(t=>{n[t]=e[t]}),n};const jk=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])).forEach(n=>{t[n]=e[n]}),t};const Vk=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:o}=e;if(!t){const e=MT(null==n?void 0:n.className,o,null==r?void 0:r.className,null==i?void 0:i.className),t=(0,mT.A)({},null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),a=(0,mT.A)({},n,r,i);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=Uk((0,mT.A)({},r,i)),s=jk(i),l=jk(r),c=t(a),u=MT(null==c?void 0:c.className,null==n?void 0:n.className,o,null==r?void 0:r.className,null==i?void 0:i.className),h=(0,mT.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),d=(0,mT.A)({},c,n,l,s);return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}};const Hk=function(e,t,n){return"function"===typeof e?e(t,n):e},Gk=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const Qk=function(e){var t;const{elementType:n,externalSlotProps:i,ownerState:r,skipResolvingSlotProps:o=!1}=e,a=(0,gT.A)(e,Gk),s=o?{}:Hk(i,r),{props:l,internalRef:c}=Vk((0,mT.A)({},a,{externalSlotProps:s})),u=hM(c,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref);return NI(n,(0,mT.A)({},l,{ref:u}),r)};const Wk=i.forwardRef(function(e,t){const{children:n,container:r,disablePortal:o=!1}=e,[a,s]=i.useState(null),l=hM(i.isValidElement(n)?FI(n):null,t);if(bM(()=>{o||s(function(e){return"function"===typeof e?e():e}(r)||document.body)},[r,o]),bM(()=>{if(a&&!o)return uM(t,a),()=>{uM(t,null)}},[t,a,o]),o){if(i.isValidElement(n)){const e={ref:l};return i.cloneElement(n,e)}return(0,uT.jsx)(i.Fragment,{children:n})}return(0,uT.jsx)(i.Fragment,{children:a?JI.createPortal(n,a):a})});function qk(e){return wI("MuiPopper",e)}EI("MuiPopper",["root"]);const Xk=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Yk=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Kk(e){return"function"===typeof e?e():e}function Jk(e){return void 0!==e.nodeType}const Zk={},$k=i.forwardRef(function(e,t){var n;const{anchorEl:r,children:o,direction:a,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:h,popperRef:d,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,gT.A)(e,Xk),v=i.useRef(null),y=hM(v,t),A=i.useRef(null),b=hM(A,d),x=i.useRef(b);bM(()=>{x.current=b},[b]),i.useImperativeHandle(d,()=>A.current,[]);const _=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,a),[w,E]=i.useState(_),[C,S]=i.useState(Kk(r));i.useEffect(()=>{A.current&&A.current.forceUpdate()}),i.useEffect(()=>{r&&S(Kk(r))},[r]),bM(()=>{if(!C||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;E(t.placement)}}];null!=l&&(e=e.concat(l)),h&&null!=h.modifiers&&(e=e.concat(h.modifiers));const t=zk(C,v.current,(0,mT.A)({placement:_},h,{modifiers:e}));return x.current(t),()=>{t.destroy(),x.current(null)}},[C,s,l,c,h,_]);const T={placement:w};null!==m&&(T.TransitionProps=m);const I=(e=>{const{classes:t}=e;return BI({root:["root"]},qk,t)})(e),M=null!=(n=f.root)?n:"div",k=Qk({elementType:M,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:I.root});return(0,uT.jsx)(M,(0,mT.A)({},k,{children:"function"===typeof o?o(T):o}))}),eR=i.forwardRef(function(e,t){const{anchorEl:n,children:r,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:h="bottom",popperOptions:d=Zk,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=(0,gT.A)(e,Yk),[A,b]=i.useState(!0);if(!l&&!u&&(!m||A))return null;let x;if(o)x=o;else if(n){const e=Kk(n);x=e&&Jk(e)?xM(e).body:xM(null).body}const _=u||!l||m&&!A?void 0:"none",w=m?{in:u,onEnter:()=>{b(!1)},onExited:()=>{b(!0)}}:void 0;return(0,uT.jsx)(Wk,{disablePortal:s,container:x,children:(0,uT.jsx)($k,(0,mT.A)({anchorEl:n,direction:a,disablePortal:s,modifiers:c,ref:t,open:m?!A:u,placement:h,popperOptions:d,popperRef:p,slotProps:g,slots:v},y,{style:(0,mT.A)({position:"fixed",top:0,left:0,display:_},f),TransitionProps:w,children:r}))})}),tR=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],nR=HI(eR,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),iR=i.forwardRef(function(e,t){var n;const i=(0,AM.A)(),r=XI({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:s,componentsProps:l,container:c,disablePortal:u,keepMounted:h,modifiers:d,open:p,placement:f,popperOptions:m,popperRef:g,transition:v,slots:y,slotProps:A}=r,b=(0,gT.A)(r,tR),x=null!=(n=null==y?void 0:y.root)?n:null==s?void 0:s.Root,_=(0,mT.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:h,modifiers:d,open:p,placement:f,popperOptions:m,popperRef:g,transition:v},b);return(0,uT.jsx)(nR,(0,mT.A)({as:a,direction:null==i?void 0:i.direction,slots:{root:x},slotProps:null!=A?A:l},_,{ref:t}))}),rR=iR;const oR=function(e){const t=i.useRef(e);return bM(()=>{t.current=e}),i.useRef(function(){return(0,t.current)(...arguments)}).current},aR=oR;let sR=0;const lR=r["useId".toString()];function cR(e){if(void 0!==lR){const t=lR();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect(()=>{null==t&&(sR+=1,n("mui-".concat(sR)))},[t]),r}(e)}const uR=cR;let hR=!0,dR=!1;const pR=new RI,fR={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function mR(e){e.metaKey||e.altKey||e.ctrlKey||(hR=!0)}function gR(){hR=!1}function vR(){"hidden"===this.visibilityState&&dR&&(hR=!0)}function yR(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return hR||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!fR[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const AR=function(){const e=i.useCallback(e=>{null!=e&&function(e){e.addEventListener("keydown",mR,!0),e.addEventListener("mousedown",gR,!0),e.addEventListener("pointerdown",gR,!0),e.addEventListener("touchstart",gR,!0),e.addEventListener("visibilitychange",vR,!0)}(e.ownerDocument)},[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!yR(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(dR=!0,pR.start(100,()=>{dR=!1}),t.current=!1,!0)},ref:e}};const bR=function(e){let{controlled:t,default:n,name:r,state:o="value"}=e;const{current:a}=i.useRef(void 0!==t),[s,l]=i.useState(n);return[a?t:s,i.useCallback(e=>{a||l(e)},[])]};function xR(e){return wI("MuiTooltip",e)}const _R=EI("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),wR=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const ER=HI(rR,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(e=>{let{theme:t,ownerState:n,open:i}=e;return(0,mT.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},n.arrow&&{['&[data-popper-placement*="bottom"] .'.concat(_R.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(_R.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(_R.arrow)]:(0,mT.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),['&[data-popper-placement*="left"] .'.concat(_R.arrow)]:(0,mT.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})}),CR=HI("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat(KI(n.placement.split("-")[0]))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,QT.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:"".concat((i=16/14,Math.round(1e5*i)/1e5),"em"),fontWeight:t.typography.fontWeightRegular},{[".".concat(_R.popper,'[data-popper-placement*="left"] &')]:(0,mT.A)({transformOrigin:"right center"},n.isRtl?(0,mT.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,mT.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[".".concat(_R.popper,'[data-popper-placement*="right"] &')]:(0,mT.A)({transformOrigin:"left center"},n.isRtl?(0,mT.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,mT.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[".".concat(_R.popper,'[data-popper-placement*="top"] &')]:(0,mT.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[".".concat(_R.popper,'[data-popper-placement*="bottom"] &')]:(0,mT.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var i}),SR=HI("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,QT.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}});let TR=!1;const IR=new RI;let MR={x:0,y:0};function kR(e,t){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t&&t(n,...r),e(n,...r)}}const RR=i.forwardRef(function(e,t){var n,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x;const _=XI({props:e,name:"MuiTooltip"}),{arrow:w=!1,children:E,components:C={},componentsProps:S={},describeChild:T=!1,disableFocusListener:I=!1,disableHoverListener:M=!1,disableInteractive:k=!1,disableTouchListener:R=!1,enterDelay:L=100,enterNextDelay:B=0,enterTouchDelay:P=700,followCursor:D=!1,id:O,leaveDelay:N=0,leaveTouchDelay:F=1500,onClose:z,onOpen:U,open:j,placement:V="bottom",PopperComponent:H,PopperProps:G={},slotProps:Q={},slots:W={},title:q,TransitionComponent:X=yM,TransitionProps:Y}=_,K=(0,gT.A)(_,wR),J=i.isValidElement(E)?E:(0,uT.jsx)("span",{children:E}),Z=GI(),$=DI(),[ee,te]=i.useState(),[ne,ie]=i.useState(null),re=i.useRef(!1),oe=k||D,ae=LI(),se=LI(),le=LI(),ce=LI(),[ue,he]=bR({controlled:j,default:!1,name:"Tooltip",state:"open"});let de=ue;const pe=uR(O),fe=i.useRef(),me=aR(()=>{void 0!==fe.current&&(document.body.style.WebkitUserSelect=fe.current,fe.current=void 0),ce.clear()});i.useEffect(()=>me,[me]);const ge=e=>{IR.clear(),TR=!0,he(!0),U&&!de&&U(e)},ve=aR(e=>{IR.start(800+N,()=>{TR=!1}),he(!1),z&&de&&z(e),ae.start(Z.transitions.duration.shortest,()=>{re.current=!1})}),ye=e=>{re.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),se.clear(),le.clear(),L||TR&&B?se.start(TR?B:L,()=>{ge(e)}):ge(e))},Ae=e=>{se.clear(),le.start(N,()=>{ve(e)})},{isFocusVisibleRef:be,onBlur:xe,onFocus:_e,ref:we}=AR(),[,Ee]=i.useState(!1),Ce=e=>{xe(e),!1===be.current&&(Ee(!1),Ae(e))},Se=e=>{ee||te(e.currentTarget),_e(e),!0===be.current&&(Ee(!0),ye(e))},Te=e=>{re.current=!0;const t=J.props;t.onTouchStart&&t.onTouchStart(e)},Ie=e=>{Te(e),le.clear(),ae.clear(),me(),fe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(P,()=>{document.body.style.WebkitUserSelect=fe.current,ye(e)})},Me=e=>{J.props.onTouchEnd&&J.props.onTouchEnd(e),me(),le.start(F,()=>{ve(e)})};i.useEffect(()=>{if(de)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}},[ve,de]);const ke=dM(FI(J),we,te,t);q||0===q||(de=!1);const Re=i.useRef(),Le={},Be="string"===typeof q;T?(Le.title=de||!Be||M?null:q,Le["aria-describedby"]=de?pe:null):(Le["aria-label"]=Be?q:null,Le["aria-labelledby"]=de&&!Be?pe:null);const Pe=(0,mT.A)({},Le,K,J.props,{className:MT(K.className,J.props.className),onTouchStart:Te,ref:ke},D?{onMouseMove:e=>{const t=J.props;t.onMouseMove&&t.onMouseMove(e),MR={x:e.clientX,y:e.clientY},Re.current&&Re.current.update()}}:{});const De={};R||(Pe.onTouchStart=Ie,Pe.onTouchEnd=Me),M||(Pe.onMouseOver=kR(ye,Pe.onMouseOver),Pe.onMouseLeave=kR(Ae,Pe.onMouseLeave),oe||(De.onMouseOver=ye,De.onMouseLeave=Ae)),I||(Pe.onFocus=kR(Se,Pe.onFocus),Pe.onBlur=kR(Ce,Pe.onBlur),oe||(De.onFocus=Se,De.onBlur=Ce));const Oe=i.useMemo(()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=G.popperOptions)&&e.modifiers&&(t=t.concat(G.popperOptions.modifiers)),(0,mT.A)({},G.popperOptions,{modifiers:t})},[ne,G]),Ne=(0,mT.A)({},_,{isRtl:$,arrow:w,disableInteractive:oe,placement:V,PopperComponentProp:H,touch:re.current}),Fe=(e=>{const{classes:t,disableInteractive:n,arrow:i,touch:r,placement:o}=e;return BI({popper:["popper",!n&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",r&&"touch","tooltipPlacement".concat(KI(o.split("-")[0]))],arrow:["arrow"]},xR,t)})(Ne),ze=null!=(n=null!=(r=W.popper)?r:C.Popper)?n:ER,Ue=null!=(o=null!=(a=null!=(s=W.transition)?s:C.Transition)?a:X)?o:yM,je=null!=(l=null!=(c=W.tooltip)?c:C.Tooltip)?l:CR,Ve=null!=(u=null!=(h=W.arrow)?h:C.Arrow)?u:SR,He=NI(ze,(0,mT.A)({},G,null!=(d=Q.popper)?d:S.popper,{className:MT(Fe.popper,null==G?void 0:G.className,null==(p=null!=(f=Q.popper)?f:S.popper)?void 0:p.className)}),Ne),Ge=NI(Ue,(0,mT.A)({},Y,null!=(m=Q.transition)?m:S.transition),Ne),Qe=NI(je,(0,mT.A)({},null!=(g=Q.tooltip)?g:S.tooltip,{className:MT(Fe.tooltip,null==(v=null!=(y=Q.tooltip)?y:S.tooltip)?void 0:v.className)}),Ne),We=NI(Ve,(0,mT.A)({},null!=(A=Q.arrow)?A:S.arrow,{className:MT(Fe.arrow,null==(b=null!=(x=Q.arrow)?x:S.arrow)?void 0:b.className)}),Ne);return(0,uT.jsxs)(i.Fragment,{children:[i.cloneElement(J,Pe),(0,uT.jsx)(ze,(0,mT.A)({as:null!=H?H:rR,placement:V,anchorEl:D?{getBoundingClientRect:()=>({top:MR.y,left:MR.x,right:MR.x,bottom:MR.y,width:0,height:0})}:ee,popperRef:Re,open:!!ee&&de,id:pe,transition:!0},De,He,{popperOptions:Oe,children:e=>{let{TransitionProps:t}=e;return(0,uT.jsx)(Ue,(0,mT.A)({timeout:Z.transitions.duration.shorter},t,Ge,{children:(0,uT.jsxs)(je,(0,mT.A)({},Qe,{children:[q,w?(0,uT.jsx)(Ve,(0,mT.A)({},We,{ref:ie})):null]}))}))}}))]})}),LR=RR;function BR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function PR(e,t){var n=Object.create(null);return e&&i.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&(0,i.isValidElement)(e)?t(e):e}(e)}),n}function DR(e,t,n){return null!=n[t]?n[t]:e.props[t]}function OR(e,t,n){var r=PR(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var i,r=Object.create(null),o=[];for(var a in e)a in t?o.length&&(r[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];s[r[l][i]]=n(c)}s[l]=n(l)}for(i=0;i<o.length;i++)s[o[i]]=n(o[i]);return s}(t,r);return Object.keys(o).forEach(function(a){var s=o[a];if((0,i.isValidElement)(s)){var l=a in t,c=a in r,u=t[a],h=(0,i.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,i.isValidElement)(u)&&(o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:DR(s,"exit",e),enter:DR(s,"enter",e)})):o[a]=(0,i.cloneElement)(s,{in:!1}):o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:DR(s,"exit",e),enter:DR(s,"enter",e)})}}),o}var NR=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},FR=function(e){function t(t,n){var i,r=(i=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}(0,pT.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,PR(n.children,function(e){return(0,i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:DR(e,"appear",n),enter:DR(e,"enter",n),exit:DR(e,"exit",n)})})):OR(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=PR(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=(0,mT.A)({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,gT.A)(e,["component","childFactory"]),o=this.state.contextValue,a=NR(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.createElement($I.Provider,{value:o},a):i.createElement($I.Provider,{value:o},i.createElement(t,r,a))},t}(i.Component);FR.propTypes={},FR.defaultProps={component:"div",childFactory:function(e){return e}};const zR=FR;var UR=n(3290);const jR=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[h,d]=i.useState(!1),p=MT(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+o},m=MT(n.child,h&&n.childLeaving,r&&n.childPulsate);return l||h||d(!0),i.useEffect(()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}},[c,l,u]),(0,uT.jsx)("span",{className:p,style:f,children:(0,uT.jsx)("span",{className:m})})};const VR=EI("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var HR,GR,QR,WR;const qR=["center","classes","className"];let XR,YR,KR,JR;const ZR=(0,UR.i7)(XR||(XR=HR||(HR=BR(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),$R=(0,UR.i7)(YR||(YR=GR||(GR=BR(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),eL=(0,UR.i7)(KR||(KR=QR||(QR=BR(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),tL=HI("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nL=HI(jR,{name:"MuiTouchRipple",slot:"Ripple"})(JR||(JR=WR||(WR=BR(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),VR.rippleVisible,ZR,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},VR.ripplePulsate,e=>{let{theme:t}=e;return t.transitions.duration.shorter},VR.child,VR.childLeaving,$R,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},VR.childPulsate,eL,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),iL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:o={},className:a}=n,s=(0,gT.A)(n,qR),[l,c]=i.useState([]),u=i.useRef(0),h=i.useRef(null);i.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=i.useRef(!1),p=LI(),f=i.useRef(null),m=i.useRef(null),g=i.useCallback(e=>{const{pulsate:t,rippleX:n,rippleY:i,rippleSize:r,cb:a}=e;c(e=>[...e,(0,uT.jsx)(nL,{classes:{ripple:MT(o.ripple,VR.ripple),rippleVisible:MT(o.rippleVisible,VR.rippleVisible),ripplePulsate:MT(o.ripplePulsate,VR.ripplePulsate),child:MT(o.child,VR.child),childLeaving:MT(o.childLeaving,VR.childLeaving),childPulsate:MT(o.childPulsate,VR.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:i,rippleSize:r},u.current)]),u.current+=1,h.current=a},[o]),v=i.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const s=a?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})},p.start(80,()=>{f.current&&(f.current(),f.current=null)})):g({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})},[r,g,p]),y=i.useCallback(()=>{v({},{pulsate:!0})},[v]),A=i.useCallback((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,()=>{A(e,t)});f.current=null,c(e=>e.length>0?e.slice(1):e),h.current=t},[p]);return i.useImperativeHandle(t,()=>({pulsate:y,start:v,stop:A}),[y,v,A]),(0,uT.jsx)(tL,(0,mT.A)({className:MT(VR.root,o.root,a),ref:m},s,{children:(0,uT.jsx)(zR,{component:null,exit:!0,children:l})}))}),rL=iL;function oL(e){return wI("MuiButtonBase",e)}const aL=EI("MuiButtonBase",["root","disabled","focusVisible"]),sL=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],lL=HI("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(aL.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:A,onKeyDown:b,onKeyUp:x,onMouseDown:_,onMouseLeave:w,onMouseUp:E,onTouchEnd:C,onTouchMove:S,onTouchStart:T,tabIndex:I=0,TouchRippleProps:M,touchRippleRef:k,type:R}=n,L=(0,gT.A)(n,sL),B=i.useRef(null),P=i.useRef(null),D=dM(P,k),{isFocusVisibleRef:O,onFocus:N,onBlur:F,ref:z}=AR(),[U,j]=i.useState(!1);c&&U&&j(!1),i.useImperativeHandle(r,()=>({focusVisible:()=>{j(!0),B.current.focus()}}),[]);const[V,H]=i.useState(!1);i.useEffect(()=>{H(!0)},[]);const G=V&&!u&&!c;function Q(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return aR(i=>{t&&t(i);return!n&&P.current&&P.current[e](i),!0})}i.useEffect(()=>{U&&d&&!u&&V&&P.current.pulsate()},[u,d,U,V]);const W=Q("start",_),q=Q("stop",g),X=Q("stop",v),Y=Q("stop",E),K=Q("stop",e=>{U&&e.preventDefault(),w&&w(e)}),J=Q("start",T),Z=Q("stop",C),$=Q("stop",S),ee=Q("stop",e=>{F(e),!1===O.current&&j(!1),f&&f(e)},!1),te=aR(e=>{B.current||(B.current=e.currentTarget),N(e),!0===O.current&&(j(!0),A&&A(e)),y&&y(e)}),ne=()=>{const e=B.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},ie=i.useRef(!1),re=aR(e=>{d&&!ie.current&&U&&P.current&&" "===e.key&&(ie.current=!0,P.current.stop(e,()=>{P.current.start(e)})),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))}),oe=aR(e=>{d&&" "===e.key&&P.current&&U&&!e.defaultPrevented&&(ie.current=!1,P.current.stop(e,()=>{P.current.pulsate(e)})),x&&x(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)});let ae=l;"button"===ae&&(L.href||L.to)&&(ae=p);const se={};"button"===ae?(se.type=void 0===R?"button":R,se.disabled=c):(L.href||L.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=dM(t,z,B);const ce=(0,mT.A)({},n,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:I,focusVisible:U}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:r}=e,o=BI({root:["root",t&&"disabled",n&&"focusVisible"]},oL,r);return n&&i&&(o.root+=" ".concat(i)),o})(ce);return(0,uT.jsxs)(lL,(0,mT.A)({as:ae,className:MT(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:q,onFocus:te,onKeyDown:re,onKeyUp:oe,onMouseDown:W,onMouseLeave:K,onMouseUp:Y,onDragLeave:X,onTouchEnd:Z,onTouchMove:$,onTouchStart:J,ref:le,tabIndex:c?-1:I,type:R},se,L,{children:[a,G?(0,uT.jsx)(rL,(0,mT.A)({ref:D,center:o},M)):null]}))}),uL=cL;function hL(e){return wI("MuiIconButton",e)}const dL=EI("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),pL=["edge","children","className","color","disabled","disableFocusRipple","size"],fL=HI(uL,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat(KI(n.color))],n.edge&&t["edge".concat(KI(n.edge))],t["size".concat(KI(n.size))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})},e=>{let{theme:t,ownerState:n}=e;var i;const r=null==(i=(t.vars||t).palette)?void 0:i[n.color];return(0,mT.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,mT.A)({color:null==r?void 0:r.main},!n.disableRipple&&{"&:hover":(0,mT.A)({},r&&{backgroundColor:t.vars?"rgba(".concat(r.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(dL.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),mL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiIconButton"}),{edge:i=!1,children:r,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,gT.A)(n,pL),h=(0,mT.A)({},n,{edge:i,color:a,disabled:s,disableFocusRipple:l,size:c}),d=(e=>{const{classes:t,disabled:n,color:i,edge:r,size:o}=e;return BI({root:["root",n&&"disabled","default"!==i&&"color".concat(KI(i)),r&&"edge".concat(KI(r)),"size".concat(KI(o))]},hL,t)})(h);return(0,uT.jsx)(fL,(0,mT.A)({className:MT(d.root,o),centerRipple:!0,focusRipple:!l,disabled:s,ref:t},u,{ownerState:h,children:r}))}),gL=mL;function vL(e){return wI("MuiSvgIcon",e)}EI("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const yL=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],AL=HI("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(KI(n.color))],t["fontSize".concat(KI(n.fontSize))]]}})(e=>{let{theme:t,ownerState:n}=e;var i,r,o,a,s,l,c,u,h,d,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(i=t.transitions)||null==(r=i.create)?void 0:r.call(i,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(h=u.pxToRem)?void 0:h.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?d:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}}),bL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiSvgIcon"}),{children:r,className:o,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24"}=n,p=(0,gT.A)(n,yL),f=i.isValidElement(r)&&"svg"===r.type,m=(0,mT.A)({},n,{color:a,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:f}),g={};u||(g.viewBox=d);const v=(e=>{const{color:t,fontSize:n,classes:i}=e;return BI({root:["root","inherit"!==t&&"color".concat(KI(t)),"fontSize".concat(KI(n))]},vL,i)})(m);return(0,uT.jsxs)(AL,(0,mT.A)({as:s,className:MT(v.root,o),focusable:"false",color:c,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},g,p,f&&r.props,{ownerState:m,children:[f?r.props.children:r,h?(0,uT.jsx)("title",{children:h}):null]}))});bL.muiName="SvgIcon";const xL=bL;function _L(e,t){function n(n,i){return(0,uT.jsx)(xL,(0,mT.A)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=xL.muiName,i.memo(i.forwardRef(n))}const wL=_L((0,uT.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function EL(e){return wI("MuiAvatar",e)}EI("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const CL=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],SL=["component","slots","slotProps"],TL=["component"];function IL(e,t){const{className:n,elementType:i,ownerState:r,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s}=t,l=(0,gT.A)(t,CL),{component:c,slots:u={[e]:void 0},slotProps:h={[e]:void 0}}=o,d=(0,gT.A)(o,SL),p=u[e]||i,f=Hk(h[e],r),m=Vk((0,mT.A)({className:n},l,{externalForwardedProps:"root"===e?d:void 0,externalSlotProps:f})),{props:{component:g},internalRef:v}=m,y=(0,gT.A)(m.props,TL),A=hM(v,null==f?void 0:f.ref,t.ref),b=a?a(y):{},x=(0,mT.A)({},r,b),_="root"===e?g||c:g,w=NI(p,(0,mT.A)({},"root"===e&&!c&&!u[e]&&s,"root"!==e&&!u[e]&&s,y,_&&{as:_},{ref:A}),x);return Object.keys(b).forEach(e=>{delete w[e]}),[p,w]}const ML=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],kL=HI("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,mT.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,mT.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}}),RL=HI("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),LL=HI(wL,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const BL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiAvatar"}),{alt:r,children:o,className:a,component:s="div",slots:l={},slotProps:c={},imgProps:u,sizes:h,src:d,srcSet:p,variant:f="circular"}=n,m=(0,gT.A)(n,ML);let g=null;const v=function(e){let{crossOrigin:t,referrerPolicy:n,src:r,srcSet:o}=e;const[a,s]=i.useState(!1);return i.useEffect(()=>{if(!r&&!o)return;s(!1);let e=!0;const i=new Image;return i.onload=()=>{e&&s("loaded")},i.onerror=()=>{e&&s("error")},i.crossOrigin=t,i.referrerPolicy=n,i.src=r,o&&(i.srcset=o),()=>{e=!1}},[t,n,r,o]),a}((0,mT.A)({},u,{src:d,srcSet:p})),y=d||p,A=y&&"error"!==v,b=(0,mT.A)({},n,{colorDefault:!A,component:s,variant:f}),x=(e=>{const{classes:t,variant:n,colorDefault:i}=e;return BI({root:["root",n,i&&"colorDefault"],img:["img"],fallback:["fallback"]},EL,t)})(b),[_,w]=IL("img",{className:x.img,elementType:RL,externalForwardedProps:{slots:l,slotProps:{img:(0,mT.A)({},u,c.img)}},additionalProps:{alt:r,src:d,srcSet:p,sizes:h},ownerState:b});return g=A?(0,uT.jsx)(_,(0,mT.A)({},w)):o||0===o?o:y&&r?r[0]:(0,uT.jsx)(LL,{ownerState:b,className:x.fallback}),(0,uT.jsx)(kL,(0,mT.A)({as:s,ownerState:b,className:MT(x.root,a),ref:t},m,{children:g}))}),PL=BL;class DL extends Error{}function OL(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(t)}catch(n){return atob(t)}}function NL(e,t){if("string"!==typeof e)throw new DL("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,i=e.split(".")[n];if("string"!==typeof i)throw new DL("Invalid token specified: missing part #".concat(n+1));let r;try{r=OL(i)}catch(QJ){throw new DL("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(QJ.message,")"))}try{return JSON.parse(r)}catch(QJ){throw new DL("Invalid token specified: invalid json for part #".concat(n+1," (").concat(QJ.message,")"))}}DL.prototype.name="InvalidTokenError";const FL=()=>{const{state:{currentUser:e},dispatch:t}=Uae();(0,i.useEffect)(()=>{if(e){1e3*NL(e.token).exp<(new Date).getTime()&&t({type:"UPDATE_USER",payload:null})}},[])},zL=_L((0,uT.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),UL=_L((0,uT.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),jL=xM;const VL=i.createContext({});function HL(e){return wI("MuiList",e)}EI("MuiList",["root","padding","dense","subheader"]);const GL=["children","className","component","dense","disablePadding","subheader"],QL=HI("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})}),WL=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiList"}),{children:r,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=n,u=(0,gT.A)(n,GL),h=i.useMemo(()=>({dense:s}),[s]),d=(0,mT.A)({},n,{component:a,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:i,subheader:r}=e;return BI({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},HL,t)})(d);return(0,uT.jsx)(VL.Provider,{value:h,children:(0,uT.jsxs)(QL,(0,mT.A)({as:a,className:MT(p.root,o),ref:t,ownerState:d},u,{children:[c,r]}))})}),qL=WL;function XL(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const YL=XL,KL=bM,JL=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function ZL(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function $L(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function eB(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function tB(e,t,n,i,r,o){let a=!1,s=r(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!i&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&eB(s,o)&&!t)return s.focus(),!0;s=r(e,s,n)}return!1}const nB=i.forwardRef(function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,d=(0,gT.A)(e,JL),p=i.useRef(null),f=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});KL(()=>{r&&p.current.focus()},[r]),i.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const i=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&i){const t="".concat(YL(jL(e)),"px");p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width="calc(100% + ".concat(t,")")}return p.current}}),[]);const m=dM(p,t);let g=-1;i.Children.forEach(a,(e,t)=>{i.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=a.length&&(g=-1))):g===t&&(g+=1,g>=a.length&&(g=-1))});const v=i.Children.map(a,(e,t)=>{if(t===g){const t={};return o&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(t.tabIndex=0),i.cloneElement(e,t)}return e});return(0,uT.jsx)(qL,(0,mT.A)({role:"menu",ref:m,className:s,onKeyDown:e=>{const t=p.current,n=e.key,i=jL(t).activeElement;if("ArrowDown"===n)e.preventDefault(),tB(t,i,c,l,ZL);else if("ArrowUp"===n)e.preventDefault(),tB(t,i,c,l,$L);else if("Home"===n)e.preventDefault(),tB(t,null,c,l,ZL);else if("End"===n)e.preventDefault(),tB(t,null,c,l,$L);else if(1===n.length){const r=f.current,o=n.toLowerCase(),a=performance.now();r.keys.length>0&&(a-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&o!==r.keys[0]&&(r.repeating=!1)),r.lastTime=a,r.keys.push(o);const s=i&&!r.repeating&&eB(i,r);r.previousKeyMatched&&(s||tB(t,i,!1,l,ZL,r))?e.preventDefault():r.previousKeyMatched=!1}u&&u(e)},tabIndex:r?0:-1},d,{children:v}))}),iB=nB;function rB(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout(()=>{e.apply(this,r)},n)}return i.clear=()=>{clearTimeout(t)},i}const oB=rB;function aB(e){return xM(e).defaultView||window}const sB=aB,lB=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function cB(e){const t=[],n=[];return Array.from(e.querySelectorAll(lB)).forEach((e,i)=>{const r=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==r&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===r?t.push(e):n.push({documentOrder:i,tabIndex:r,node:e}))}),n.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(t)}function uB(){return!0}const hB=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:a=cB,isEnabled:s=uB,open:l}=e,c=i.useRef(!1),u=i.useRef(null),h=i.useRef(null),d=i.useRef(null),p=i.useRef(null),f=i.useRef(!1),m=i.useRef(null),g=hM(FI(t),m),v=i.useRef(null);i.useEffect(()=>{l&&m.current&&(f.current=!n)},[n,l]),i.useEffect(()=>{if(!l||!m.current)return;const e=xM(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{o||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}},[l]),i.useEffect(()=>{if(!l||!m.current)return;const e=xM(m.current),t=t=>{v.current=t,!r&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,h.current&&h.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==u.current&&e.activeElement!==h.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==h.current||(n=a(m.current)),n.length>0){var i,o;const e=Boolean((null==(i=v.current)?void 0:i.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval(()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()},50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}},[n,r,o,s,l,a]);const y=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,uT.jsxs)(i.Fragment,{children:[(0,uT.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),i.cloneElement(t,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,uT.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:h,"data-testid":"sentinelEnd"})]})},dB=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],pB={entering:{opacity:1},entered:{opacity:1}},fB=i.forwardRef(function(e,t){const n=GI(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=r,TransitionComponent:y=sM}=e,A=(0,gT.A)(e,dB),b=i.useRef(null),x=dM(b,FI(s),t),_=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},w=_(d),E=_((e,t)=>{lM(e);const i=cM({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",i),e.style.transition=n.transitions.create("opacity",i),u&&u(e,t)}),C=_(h),S=_(m),T=_(e=>{const t=cM({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)}),I=_(f);return(0,uT.jsx)(y,(0,mT.A)({appear:a,in:c,nodeRef:b,onEnter:E,onEntered:C,onEntering:w,onExit:T,onExited:I,onExiting:S,addEndListener:e=>{o&&o(b.current,e)},timeout:v},A,{children:(e,t)=>i.cloneElement(s,(0,mT.A)({style:(0,mT.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},pB[e],g,s.props.style),ref:x},t))}))}),mB=fB;function gB(e){return wI("MuiBackdrop",e)}EI("MuiBackdrop",["root","invisible"]);const vB=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],yB=HI("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})}),AB=i.forwardRef(function(e,t){var n,i,r;const o=XI({props:e,name:"MuiBackdrop"}),{children:a,className:s,component:l="div",components:c={},componentsProps:u={},invisible:h=!1,open:d,slotProps:p={},slots:f={},TransitionComponent:m=mB,transitionDuration:g}=o,v=(0,gT.A)(o,vB),y=(0,mT.A)({},o,{component:l,invisible:h}),A=(e=>{const{classes:t,invisible:n}=e;return BI({root:["root",n&&"invisible"]},gB,t)})(y),b=null!=(n=p.root)?n:u.root;return(0,uT.jsx)(m,(0,mT.A)({in:d,timeout:g},v,{children:(0,uT.jsx)(yB,(0,mT.A)({"aria-hidden":!0},b,{as:null!=(i=null!=(r=f.root)?r:c.Root)?i:l,className:MT(A.root,s,null==b?void 0:b.className),ownerState:(0,mT.A)({},y,null==b?void 0:b.ownerState),classes:A,ref:t,children:a}))}))}),bB=AB;function xB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>null==t?e:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)},()=>{})}function _B(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function wB(e){return parseInt(aB(e).getComputedStyle(e).paddingRight,10)||0}function EB(e,t,n,i,r){const o=[t,n,...i];[].forEach.call(e.children,e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&_B(e,r)})}function CB(e,t){let n=-1;return e.some((e,i)=>!!t(e)&&(n=i,!0)),n}function SB(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(function(e){const t=xM(e);return t.body===e?aB(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(i)){const e=XL(xM(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight="".concat(wB(i)+e,"px");const t=xM(i).querySelectorAll(".mui-fixed");[].forEach.call(t,t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(wB(t)+e,"px")})}let e;if(i.parentNode instanceof DocumentFragment)e=xM(i).body;else{const t=i.parentElement,n=aB(i);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:i}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach(e=>{let{value:t,el:n,property:i}=e;t?n.style.setProperty(i,t):n.style.removeProperty(i)})}}const TB=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&_B(e.modalRef,!1);const i=function(e){const t=[];return[].forEach.call(e.children,e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)}),t}(t);EB(t,e.mount,e.modalRef,i,!0);const r=CB(this.containers,e=>e.container===t);return-1!==r?(this.containers[r].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),n)}mount(e,t){const n=CB(this.containers,t=>-1!==t.modals.indexOf(e)),i=this.containers[n];i.restore||(i.restore=SB(i,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const i=CB(this.containers,t=>-1!==t.modals.indexOf(e)),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&_B(e.modalRef,t),EB(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const e=r.modals[r.modals.length-1];e.modalRef&&_B(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const IB=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:o=TB,closeAfterTransition:a=!1,onTransitionEnter:s,onTransitionExited:l,children:c,onClose:u,open:h,rootRef:d}=e,p=i.useRef({}),f=i.useRef(null),m=i.useRef(null),g=hM(m,d),[v,y]=i.useState(!h),A=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const x=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),_=()=>{o.mount(x(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},w=oR(()=>{const e=function(e){return"function"===typeof e?e():e}(t)||xM(f.current).body;o.add(x(),e),m.current&&_()}),E=i.useCallback(()=>o.isTopModal(x()),[o]),C=oR(e=>{f.current=e,e&&(h&&E()?_():m.current&&_B(m.current,b))}),S=i.useCallback(()=>{o.remove(x(),b)},[b,o]);i.useEffect(()=>()=>{S()},[S]),i.useEffect(()=>{h?w():A&&a||S()},[h,S,A,a,w]);const T=e=>t=>{var i;null==(i=e.onKeyDown)||i.call(e,t),"Escape"===t.key&&229!==t.which&&E()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},I=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Uk(e);delete n.onTransitionEnter,delete n.onTransitionExited;const i=(0,mT.A)({},n,t);return(0,mT.A)({role:"presentation"},i,{onKeyDown:T(i),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,mT.A)({"aria-hidden":!0},e,{onClick:I(e),open:h})},getTransitionProps:()=>({onEnter:xB(()=>{y(!1),s&&s()},null==c?void 0:c.props.onEnter),onExited:xB(()=>{y(!0),l&&l(),a&&S()},null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:C,isTopModal:E,exited:v,hasTransition:A}};function MB(e){return wI("MuiModal",e)}EI("MuiModal",["root","hidden","backdrop"]);const kB=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],RB=HI("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})}),LB=HI(bB,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),BB=i.forwardRef(function(e,t){var n,r,o,a,s,l;const c=XI({name:"MuiModal",props:e}),{BackdropComponent:u=LB,BackdropProps:h,className:d,closeAfterTransition:p=!1,children:f,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:A=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:x=!1,disablePortal:_=!1,disableRestoreFocus:w=!1,disableScrollLock:E=!1,hideBackdrop:C=!1,keepMounted:S=!1,onBackdropClick:T,open:I,slotProps:M,slots:k}=c,R=(0,gT.A)(c,kB),L=(0,mT.A)({},c,{closeAfterTransition:p,disableAutoFocus:A,disableEnforceFocus:b,disableEscapeKeyDown:x,disablePortal:_,disableRestoreFocus:w,disableScrollLock:E,hideBackdrop:C,keepMounted:S}),{getRootProps:B,getBackdropProps:P,getTransitionProps:D,portalRef:O,isTopModal:N,exited:F,hasTransition:z}=IB((0,mT.A)({},L,{rootRef:t})),U=(0,mT.A)({},L,{exited:F}),j=(e=>{const{open:t,exited:n,classes:i}=e;return BI({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},MB,i)})(U),V={};if(void 0===f.props.tabIndex&&(V.tabIndex="-1"),z){const{onEnter:e,onExited:t}=D();V.onEnter=e,V.onExited=t}const H=null!=(n=null!=(r=null==k?void 0:k.root)?r:v.Root)?n:RB,G=null!=(o=null!=(a=null==k?void 0:k.backdrop)?a:v.Backdrop)?o:u,Q=null!=(s=null==M?void 0:M.root)?s:y.root,W=null!=(l=null==M?void 0:M.backdrop)?l:y.backdrop,q=Qk({elementType:H,externalSlotProps:Q,externalForwardedProps:R,getSlotProps:B,additionalProps:{ref:t,as:g},ownerState:U,className:MT(d,null==Q?void 0:Q.className,null==j?void 0:j.root,!U.open&&U.exited&&(null==j?void 0:j.hidden))}),X=Qk({elementType:G,externalSlotProps:W,additionalProps:h,getSlotProps:e=>P((0,mT.A)({},e,{onClick:t=>{T&&T(t),null!=e&&e.onClick&&e.onClick(t)}})),className:MT(null==W?void 0:W.className,null==h?void 0:h.className,null==j?void 0:j.backdrop),ownerState:U});return S||I||z&&!F?(0,uT.jsx)(Wk,{ref:O,container:m,disablePortal:_,children:(0,uT.jsxs)(H,(0,mT.A)({},q,{children:[!C&&u?(0,uT.jsx)(G,(0,mT.A)({},X)):null,(0,uT.jsx)(hB,{disableEnforceFocus:b,disableAutoFocus:A,disableRestoreFocus:w,isEnabled:N,open:I,children:i.cloneElement(f,V)})]}))}):null}),PB=BB,DB=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function OB(e){return wI("MuiPaper",e)}EI("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const NB=["className","component","elevation","square","variant"],FB=HI("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(e=>{let{theme:t,ownerState:n}=e;var i;return(0,mT.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,mT.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,QT.X4)("#fff",DB(n.elevation)),", ").concat((0,QT.X4)("#fff",DB(n.elevation)),")")},t.vars&&{backgroundImage:null==(i=t.vars.overlays)?void 0:i[n.elevation]}))}),zB=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiPaper"}),{className:i,component:r="div",elevation:o=1,square:a=!1,variant:s="elevation"}=n,l=(0,gT.A)(n,NB),c=(0,mT.A)({},n,{component:r,elevation:o,square:a,variant:s}),u=(e=>{const{square:t,elevation:n,variant:i,classes:r}=e;return BI({root:["root",i,!t&&"rounded","elevation"===i&&"elevation".concat(n)]},OB,r)})(c);return(0,uT.jsx)(FB,(0,mT.A)({as:r,ownerState:c,className:MT(u.root,i),ref:t},l))}),UB=zB;function jB(e){return wI("MuiPopover",e)}EI("MuiPopover",["root","paper"]);const VB=["onEntering"],HB=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],GB=["slotProps"];function QB(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function WB(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function qB(e){return[e.horizontal,e.vertical].map(e=>"number"===typeof e?"".concat(e,"px"):e).join(" ")}function XB(e){return"function"===typeof e?e():e}const YB=HI(PB,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),KB=HI(UB,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),JB=i.forwardRef(function(e,t){var n,r,o;const a=XI({props:e,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:d,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:A,slotProps:b,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:_=yM,transitionDuration:w="auto",TransitionProps:{onEntering:E}={},disableScrollLock:C=!1}=a,S=(0,gT.A)(a.TransitionProps,VB),T=(0,gT.A)(a,HB),I=null!=(n=null==b?void 0:b.paper)?n:y,M=i.useRef(),k=dM(M,I.ref),R=(0,mT.A)({},a,{anchorOrigin:c,anchorReference:h,elevation:m,marginThreshold:g,externalPaperSlotProps:I,transformOrigin:x,TransitionComponent:_,transitionDuration:w,TransitionProps:S}),L=(e=>{const{classes:t}=e;return BI({root:["root"],paper:["paper"]},jB,t)})(R),B=i.useCallback(()=>{if("anchorPosition"===h)return u;const e=XB(l),t=(e&&1===e.nodeType?e:jL(M.current).body).getBoundingClientRect();return{top:t.top+QB(t,c.vertical),left:t.left+WB(t,c.horizontal)}},[l,c.horizontal,c.vertical,u,h]),P=i.useCallback(e=>({vertical:QB(e,x.vertical),horizontal:WB(e,x.horizontal)}),[x.horizontal,x.vertical]),D=i.useCallback(e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=P(t);if("none"===h)return{top:null,left:null,transformOrigin:qB(n)};const i=B();let r=i.top-n.vertical,o=i.left-n.horizontal;const a=r+t.height,s=o+t.width,c=sB(XB(l)),u=c.innerHeight-g,d=c.innerWidth-g;if(null!==g&&r<g){const e=r-g;r-=e,n.vertical+=e}else if(null!==g&&a>u){const e=a-u;r-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(s>d){const e=s-d;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:qB(n)}},[l,h,B,P,g]),[O,N]=i.useState(v),F=i.useCallback(()=>{const e=M.current;if(!e)return;const t=D(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,N(!0)},[D]);i.useEffect(()=>(C&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)),[l,C,F]);i.useEffect(()=>{v&&F()}),i.useImperativeHandle(s,()=>v?{updatePosition:()=>{F()}}:null,[v,F]),i.useEffect(()=>{if(!v)return;const e=oB(()=>{F()}),t=sB(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[l,v,F]);let z=w;"auto"!==w||_.muiSupportAuto||(z=void 0);const U=f||(l?jL(XB(l)).body:void 0),j=null!=(r=null==A?void 0:A.root)?r:YB,V=null!=(o=null==A?void 0:A.paper)?o:KB,H=Qk({elementType:V,externalSlotProps:(0,mT.A)({},I,{style:O?I.style:(0,mT.A)({},I.style,{opacity:0})}),additionalProps:{elevation:m,ref:k},ownerState:R,className:MT(L.paper,null==I?void 0:I.className)}),G=Qk({elementType:j,externalSlotProps:(null==b?void 0:b.root)||{},externalForwardedProps:T,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:U,open:v},ownerState:R,className:MT(L.root,p)}),{slotProps:Q}=G,W=(0,gT.A)(G,GB);return(0,uT.jsx)(j,(0,mT.A)({},W,!OI(j)&&{slotProps:Q,disableScrollLock:C},{children:(0,uT.jsx)(_,(0,mT.A)({appear:!0,in:v,onEntering:(e,t)=>{E&&E(e,t),F()},onExited:()=>{N(!1)},timeout:z},S,{children:(0,uT.jsx)(V,(0,mT.A)({},H,{children:d}))}))}))}),ZB=JB;function $B(e){return wI("MuiMenu",e)}EI("MuiMenu",["root","paper","list"]);const eP=["onEntering"],tP=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],nP={vertical:"top",horizontal:"right"},iP={vertical:"top",horizontal:"left"},rP=HI(ZB,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),oP=HI(KB,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),aP=HI(iB,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),sP=i.forwardRef(function(e,t){var n,r;const o=XI({props:e,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:h,open:d,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:A={}}=o,b=(0,gT.A)(o.TransitionProps,eP),x=(0,gT.A)(o,tP),_=DI(),w=(0,mT.A)({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:b,variant:v}),E=(e=>{const{classes:t}=e;return BI({root:["root"],paper:["paper"],list:["list"]},$B,t)})(w),C=a&&!c&&d,S=i.useRef(null);let T=-1;i.Children.map(s,(e,t)=>{i.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===T)&&(T=t))});const I=null!=(n=y.paper)?n:oP,M=null!=(r=A.paper)?r:p,k=Qk({elementType:y.root,externalSlotProps:A.root,ownerState:w,className:[E.root,l]}),R=Qk({elementType:I,externalSlotProps:M,ownerState:w,className:E.paper});return(0,uT.jsx)(rP,(0,mT.A)({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?nP:iP,slots:{paper:I,root:y.root},slotProps:{root:k,paper:R},open:d,ref:t,transitionDuration:m,TransitionProps:(0,mT.A)({onEntering:(e,t)=>{S.current&&S.current.adjustStyleForScrollbar(e,{direction:_?"rtl":"ltr"}),g&&g(e,t)}},b),ownerState:w},x,{classes:f,children:(0,uT.jsx)(aP,(0,mT.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:S,autoFocus:a&&(-1===T||c),autoFocusItem:C,variant:v},u,{className:MT(E.list,u.className),children:s}))}))}),lP=sP;const cP=EI("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function uP(e){return wI("MuiListItemIcon",e)}const hP=EI("MuiListItemIcon",["root","alignItemsFlexStart"]);const dP=EI("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function pP(e){return wI("MuiMenuItem",e)}const fP=EI("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),mP=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],gP=HI(uL,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(fP.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,QT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(fP.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,QT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(fP.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,QT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,QT.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(fP.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(fP.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(cP.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(cP.inset)]:{marginLeft:52},["& .".concat(dP.root)]:{marginTop:0,marginBottom:0},["& .".concat(dP.inset)]:{paddingLeft:36},["& .".concat(hP.root)]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,mT.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(hP.root," svg")]:{fontSize:"1.25rem"}}))}),vP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:h,className:d}=n,p=(0,gT.A)(n,mP),f=i.useContext(VL),m=i.useMemo(()=>({dense:a||f.dense||!1,disableGutters:l}),[f.dense,a,l]),g=i.useRef(null);KL(()=>{r&&g.current&&g.current.focus()},[r]);const v=(0,mT.A)({},n,{dense:m.dense,divider:s,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:i,disableGutters:r,selected:o,classes:a}=e,s=BI({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",i&&"divider",o&&"selected"]},pP,a);return(0,mT.A)({},a,s)})(n),A=dM(g,t);let b;return n.disabled||(b=void 0!==h?h:-1),(0,uT.jsx)(VL.Provider,{value:m,children:(0,uT.jsx)(gP,(0,mT.A)({ref:A,role:u,tabIndex:b,component:o,focusVisibleClassName:MT(y.focusVisible,c),className:MT(y.root,d)},p,{ownerState:v,classes:y}))})}),yP=vP,AP=["className"],bP=HI("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})}),xP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiListItemIcon"}),{className:r}=n,o=(0,gT.A)(n,AP),a=i.useContext(VL),s=(0,mT.A)({},n,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e;return BI({root:["root","flex-start"===t&&"alignItemsFlexStart"]},uP,n)})(s);return(0,uT.jsx)(bP,(0,mT.A)({className:MT(l.root,r),ownerState:s,ref:t},o))}),_P=xP;function wP(e){return wI("MuiDialog",e)}const EP=EI("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const CP=i.createContext({}),SP=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],TP=HI(bB,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),IP=HI(PB,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),MP=HI("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat(KI(n.scroll))]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})}),kP=HI(UB,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat(KI(n.scroll))],t["paperWidth".concat(KI(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(EP.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit),["&.".concat(EP.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(EP.paperScrollBody)]:{margin:0,maxWidth:"100%"}})}),RP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiDialog"}),r=GI(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:h,disableEscapeKeyDown:d=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:v,onClose:y,open:A,PaperComponent:b=UB,PaperProps:x={},scroll:_="paper",TransitionComponent:w=mB,transitionDuration:E=o,TransitionProps:C}=n,S=(0,gT.A)(n,SP),T=(0,mT.A)({},n,{disableEscapeKeyDown:d,fullScreen:p,fullWidth:f,maxWidth:m,scroll:_}),I=(e=>{const{classes:t,scroll:n,maxWidth:i,fullWidth:r,fullScreen:o}=e;return BI({root:["root"],container:["container","scroll".concat(KI(n))],paper:["paper","paperScroll".concat(KI(n)),"paperWidth".concat(KI(String(i))),r&&"paperFullWidth",o&&"paperFullScreen"]},wP,t)})(T),M=i.useRef(),k=cR(s),R=i.useMemo(()=>({titleId:k}),[k]);return(0,uT.jsx)(IP,(0,mT.A)({className:MT(I.root,h),closeAfterTransition:!0,components:{Backdrop:TP},componentsProps:{backdrop:(0,mT.A)({transitionDuration:E,as:l},c)},disableEscapeKeyDown:d,onClose:y,open:A,ref:t,onClick:e=>{v&&v(e),M.current&&(M.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:T},S,{children:(0,uT.jsx)(w,(0,mT.A)({appear:!0,in:A,timeout:E,role:"presentation"},C,{children:(0,uT.jsx)(MP,{className:MT(I.container),onMouseDown:e=>{M.current=e.target===e.currentTarget},ownerState:T,children:(0,uT.jsx)(kP,(0,mT.A)({as:b,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":k},x,{className:MT(I.paper,x.className),ownerState:T,children:(0,uT.jsx)(CP.Provider,{value:R,children:u})}))})}))}))}),LP=RP;function BP(e){return wI("MuiTypography",e)}EI("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const PP=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],DP=HI("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(KI(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})}),OP={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},NP={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},FP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiTypography"}),i=(e=>NP[e]||e)(n.color),r=(0,LT.A)((0,mT.A)({},n,{color:i})),{align:o="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:h="body1",variantMapping:d=OP}=r,p=(0,gT.A)(r,PP),f=(0,mT.A)({},r,{align:o,color:i,className:a,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:h,variantMapping:d}),m=s||(u?"p":d[h]||OP[h])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:i,paragraph:r,variant:o,classes:a}=e;return BI({root:["root",o,"inherit"!==e.align&&"align".concat(KI(t)),n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]},BP,a)})(f);return(0,uT.jsx)(DP,(0,mT.A)({as:m,ref:t,ownerState:f,className:MT(g.root,a)},p))}),zP=FP;function UP(e){return wI("MuiDialogTitle",e)}const jP=EI("MuiDialogTitle",["root"]),VP=["className","id"],HP=HI(zP,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),GP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiDialogTitle"}),{className:r,id:o}=n,a=(0,gT.A)(n,VP),s=n,l=(e=>{const{classes:t}=e;return BI({root:["root"]},UP,t)})(s),{titleId:c=o}=i.useContext(CP);return(0,uT.jsx)(HP,(0,mT.A)({component:"h2",className:MT(l.root,r),ownerState:s,ref:t,variant:"h6",id:null!=o?o:c},a))}),QP=GP;function WP(e){return wI("MuiDialogContent",e)}EI("MuiDialogContent",["root","dividers"]);const qP=["className","dividers"],XP=HI("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(jP.root," + &")]:{paddingTop:0}})}),YP=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiDialogContent"}),{className:i,dividers:r=!1}=n,o=(0,gT.A)(n,qP),a=(0,mT.A)({},n,{dividers:r}),s=(e=>{const{classes:t,dividers:n}=e;return BI({root:["root",n&&"dividers"]},WP,t)})(a);return(0,uT.jsx)(XP,(0,mT.A)({className:MT(s.root,i),ownerState:a,ref:t},o))}),KP=YP;function JP(e){return wI("MuiDialogContentText",e)}EI("MuiDialogContentText",["root"]);const ZP=["children","className"],$P=HI(zP,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),eD=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiDialogContentText"}),{className:i}=n,r=(0,gT.A)(n,ZP),o=(e=>{const{classes:t}=e,n=BI({root:["root"]},JP,t);return(0,mT.A)({},t,n)})(r);return(0,uT.jsx)($P,(0,mT.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:r,className:MT(o.root,i)},n,{classes:o}))}),tD=eD,nD=["onChange","maxRows","minRows","style","value"];function iD(e){return parseInt(e,10)||0}const rD={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function oD(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const aD=i.forwardRef(function(e,t){const{onChange:n,maxRows:r,minRows:o=1,style:a,value:s}=e,l=(0,gT.A)(e,nD),{current:c}=i.useRef(null!=s),u=i.useRef(null),h=hM(t,u),d=i.useRef(null),p=i.useRef(null),f=i.useCallback(()=>{const t=u.current,n=p.current;if(!t||!n)return;const i=aB(t).getComputedStyle(t);if("0px"===i.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=i.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=i.boxSizing,s=iD(i.paddingBottom)+iD(i.paddingTop),l=iD(i.borderBottomWidth)+iD(i.borderTopWidth),c=n.scrollHeight;n.value="x";const h=n.scrollHeight;let d=c;o&&(d=Math.max(Number(o)*h,d)),r&&(d=Math.min(Number(r)*h,d)),d=Math.max(d,h);return{outerHeightStyle:d+("border-box"===a?s+l:0),overflowing:Math.abs(d-c)<=1}},[r,o,e.placeholder]),m=oR(()=>{const e=u.current,t=f();if(!e||!t||oD(t))return!1;const n=t.outerHeightStyle;return null!=d.current&&d.current!==n}),g=i.useCallback(()=>{const e=u.current,t=f();if(!e||!t||oD(t))return;const n=t.outerHeightStyle;d.current!==n&&(d.current=n,e.style.height="".concat(n,"px")),e.style.overflow=t.overflowing?"hidden":""},[f]),v=i.useRef(-1);bM(()=>{const e=rB(g),t=null==u?void 0:u.current;if(!t)return;const n=aB(t);let i;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(i=new ResizeObserver(()=>{m()&&(i.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame(()=>{i.observe(t)}))}),i.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),i&&i.disconnect()}},[f,g,m]),bM(()=>{g()});return(0,uT.jsxs)(i.Fragment,{children:[(0,uT.jsx)("textarea",(0,mT.A)({value:s,onChange:e=>{c||g(),n&&n(e)},ref:h,rows:o,style:a},l)),(0,uT.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,mT.A)({},rD,a,{paddingTop:0,paddingBottom:0})})]})}),sD=aD;function lD(e){let{props:t,states:n,muiFormControl:i}=e;return n.reduce((e,n)=>(e[n]=t[n],i&&"undefined"===typeof t[n]&&(e[n]=i[n]),e),{})}const cD=i.createContext(void 0);function uD(){return i.useContext(cD)}var hD=n(869);function dD(e){const t=(0,kT.internal_serializeStyles)(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles="@layer global{".concat(t.styles,"}")),t):e}const pD=function(e){let{styles:t,themeId:n,defaultTheme:i={}}=e;const r=NT(i),o=n&&r[n]||r;let a="function"===typeof t?t(o):t;return o.modularCssLayers&&(a=Array.isArray(a)?a.map(e=>dD("function"===typeof e?e(o):e)):dD(a)),(0,uT.jsx)(hD.A,{styles:a})};const fD=function(e){return(0,uT.jsx)(pD,(0,mT.A)({},e,{defaultTheme:UI,themeId:xI}))};function mD(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function gD(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(mD(e.value)&&""!==e.value||t&&mD(e.defaultValue)&&""!==e.defaultValue)}function vD(e){return wI("MuiInputBase",e)}const yD=EI("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),AD=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],bD=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(KI(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},xD=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},_D=HI("div",{name:"MuiInputBase",slot:"Root",overridesResolver:bD})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(yD.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,mT.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})}),wD=HI("input",{name:"MuiInputBase",slot:"Input",overridesResolver:xD})(e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode,r=(0,mT.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},a=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,mT.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(yD.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},["&.".concat(yD.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})}),ED=(0,uT.jsx)(fD,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),CD=i.forwardRef(function(e,t){var n;const r=XI({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:A,maxRows:b,minRows:x,multiline:_=!1,name:w,onBlur:E,onChange:C,onClick:S,onFocus:T,onKeyDown:I,onKeyUp:M,placeholder:k,readOnly:R,renderSuffix:L,rows:B,slotProps:P={},slots:D={},startAdornment:O,type:N="text",value:F}=r,z=(0,gT.A)(r,AD),U=null!=y.value?y.value:F,{current:j}=i.useRef(null!=U),V=i.useRef(),H=i.useCallback(e=>{0},[]),G=dM(V,A,y.ref,H),[Q,W]=i.useState(!1),q=uD();const X=lD({props:r,muiFormControl:q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=q?q.focused:Q,i.useEffect(()=>{!q&&d&&Q&&(W(!1),E&&E())},[q,d,Q,E]);const Y=q&&q.onFilled,K=q&&q.onEmpty,J=i.useCallback(e=>{gD(e)?Y&&Y():K&&K()},[Y,K]);KL(()=>{j&&J({value:U})},[U,J,j]);i.useEffect(()=>{J(V.current)},[]);let Z=v,$=y;_&&"input"===Z&&($=B?(0,mT.A)({type:void 0,minRows:B,maxRows:B},$):(0,mT.A)({type:void 0,maxRows:b,minRows:x},$),Z=sD);i.useEffect(()=>{q&&q.setAdornedStart(Boolean(O))},[q,O]);const ee=(0,mT.A)({},r,{color:X.color||"primary",disabled:X.disabled,endAdornment:f,error:X.error,focused:X.focused,formControl:q,fullWidth:m,hiddenLabel:X.hiddenLabel,multiline:_,size:X.size,startAdornment:O,type:N}),te=(e=>{const{classes:t,color:n,disabled:i,error:r,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:p,type:f}=e;return BI({root:["root","color".concat(KI(n)),i&&"disabled",r&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&"medium"!==d&&"size".concat(KI(d)),u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",i&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]},vD,t)})(ee),ne=D.root||c.Root||_D,ie=P.root||u.root||{},re=D.input||c.Input||wD;return $=(0,mT.A)({},$,null!=(n=P.input)?n:u.input),(0,uT.jsxs)(i.Fragment,{children:[!p&&ED,(0,uT.jsxs)(ne,(0,mT.A)({},ie,!OI(ne)&&{ownerState:(0,mT.A)({},ee,ie.ownerState)},{ref:t,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),S&&S(e)}},z,{className:MT(te.root,ie.className,l,R&&"MuiInputBase-readOnly"),children:[O,(0,uT.jsx)(cD.Provider,{value:null,children:(0,uT.jsx)(re,(0,mT.A)({ownerState:ee,"aria-invalid":X.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:h,disabled:X.disabled,id:g,onAnimationStart:e=>{J("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:w,placeholder:k,readOnly:R,required:X.required,rows:B,value:U,onKeyDown:I,onKeyUp:M,type:N},$,!OI(re)&&{as:Z,ownerState:(0,mT.A)({},ee,$.ownerState)},{ref:G,className:MT(te.input,$.className,R&&"MuiInputBase-readOnly"),onBlur:e=>{E&&E(e),y.onBlur&&y.onBlur(e),q&&q.onBlur?q.onBlur(e):W(!1)},onChange:function(e){if(!j){const t=e.target||V.current;if(null==t)throw new Error((0,jT.A)(1));J({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];y.onChange&&y.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{X.disabled?e.stopPropagation():(T&&T(e),y.onFocus&&y.onFocus(e),q&&q.onFocus?q.onFocus(e):W(!0))}}))}),f,L?L((0,mT.A)({},X,{startAdornment:O})):null]}))]})}),SD=CD;function TD(e){return wI("MuiInput",e)}const ID=(0,mT.A)({},yD,EI("MuiInput",["root","underline","input"])),MD=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],kD=HI(_D,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...bD(e,t),!n.disableUnderline&&t.underline]}})(e=>{let{theme:t,ownerState:n}=e;let i="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(i="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,mT.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(ID.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(ID.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(ID.disabled,", .").concat(ID.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(ID.disabled,":before")]:{borderBottomStyle:"dotted"}})}),RD=HI(wD,{name:"MuiInput",slot:"Input",overridesResolver:xD})({}),LD=i.forwardRef(function(e,t){var n,i,r,o;const a=XI({props:e,name:"MuiInput"}),{disableUnderline:s,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:d=!1,slotProps:p,slots:f={},type:m="text"}=a,g=(0,gT.A)(a,MD),v=(e=>{const{classes:t,disableUnderline:n}=e,i=BI({root:["root",!n&&"underline"],input:["input"]},TD,t);return(0,mT.A)({},t,i)})(a),y={root:{ownerState:{disableUnderline:s}}},A=(null!=p?p:c)?(0,VT.A)(null!=p?p:c,y):y,b=null!=(n=null!=(i=f.root)?i:l.Root)?n:kD,x=null!=(r=null!=(o=f.input)?o:l.Input)?r:RD;return(0,uT.jsx)(SD,(0,mT.A)({slots:{root:b,input:x},slotProps:A,fullWidth:u,inputComponent:h,multiline:d,ref:t,type:m},g,{classes:v}))});LD.muiName="Input";const BD=LD;function PD(e){return wI("MuiFilledInput",e)}const DD=(0,mT.A)({},yD,EI("MuiFilledInput",["root","underline","input"])),OD=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],ND=HI(_D,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...bD(e,t),!n.disableUnderline&&t.underline]}})(e=>{let{theme:t,ownerState:n}=e;var i;const r="light"===t.palette.mode,o=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,mT.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a}},["&.".concat(DD.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a},["&.".concat(DD.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(i=(t.vars||t).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(DD.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(DD.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(DD.disabled,", .").concat(DD.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(DD.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,mT.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))}),FD=HI(wD,{name:"MuiFilledInput",slot:"Input",overridesResolver:xD})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})}),zD=i.forwardRef(function(e,t){var n,i,r,o;const a=XI({props:e,name:"MuiFilledInput"}),{components:s={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:h=!1,slotProps:d,slots:p={},type:f="text"}=a,m=(0,gT.A)(a,OD),g=(0,mT.A)({},a,{fullWidth:c,inputComponent:u,multiline:h,type:f}),v=(e=>{const{classes:t,disableUnderline:n}=e,i=BI({root:["root",!n&&"underline"],input:["input"]},PD,t);return(0,mT.A)({},t,i)})(a),y={root:{ownerState:g},input:{ownerState:g}},A=(null!=d?d:l)?(0,VT.A)(y,null!=d?d:l):y,b=null!=(n=null!=(i=p.root)?i:s.Root)?n:ND,x=null!=(r=null!=(o=p.input)?o:s.Input)?r:FD;return(0,uT.jsx)(SD,(0,mT.A)({slots:{root:b,input:x},componentsProps:A,fullWidth:c,inputComponent:u,multiline:h,ref:t,type:f},m,{classes:v}))});zD.muiName="Input";const UD=zD;var jD;const VD=["children","classes","className","label","notched"],HD=HI("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:VI})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),GD=HI("legend",{name:"MuiNotchedOutlined",shouldForwardProp:VI})(e=>{let{ownerState:t,theme:n}=e;return(0,mT.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,mT.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))});function QD(e){return wI("MuiOutlinedInput",e)}const WD=(0,mT.A)({},yD,EI("MuiOutlinedInput",["root","notchedOutline","input"])),qD=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],XD=HI(_D,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:bD})(e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,mT.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(WD.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(WD.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(WD.focused," .").concat(WD.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(WD.error," .").concat(WD.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(WD.disabled," .").concat(WD.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,mT.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))}),YD=HI(function(e){const{className:t,label:n,notched:i}=e,r=(0,gT.A)(e,VD),o=null!=n&&""!==n,a=(0,mT.A)({},e,{notched:i,withLabel:o});return(0,uT.jsx)(HD,(0,mT.A)({"aria-hidden":!0,className:t,ownerState:a},r,{children:(0,uT.jsx)(GD,{ownerState:a,children:o?(0,uT.jsx)("span",{children:n}):jD||(jD=(0,uT.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))},{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}),KD=HI(wD,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:xD})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})}),JD=i.forwardRef(function(e,t){var n,r,o,a,s;const l=XI({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:h="input",label:d,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,v=(0,gT.A)(l,qD),y=(e=>{const{classes:t}=e,n=BI({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},QD,t);return(0,mT.A)({},t,n)})(l),A=uD(),b=lD({props:l,muiFormControl:A,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=(0,mT.A)({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:A,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:p,size:b.size,type:g}),_=null!=(n=null!=(r=m.root)?r:c.Root)?n:XD,w=null!=(o=null!=(a=m.input)?a:c.Input)?o:KD;return(0,uT.jsx)(SD,(0,mT.A)({slots:{root:_,input:w},renderSuffix:e=>(0,uT.jsx)(YD,{ownerState:x,className:y.notchedOutline,label:null!=d&&""!==d&&b.required?s||(s=(0,uT.jsxs)(i.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:h,multiline:p,ref:t,type:g},v,{classes:(0,mT.A)({},y,{notchedOutline:null})}))});JD.muiName="Input";const ZD=JD;function $D(e){return wI("MuiFormLabel",e)}const eO=EI("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),tO=["children","className","color","component","disabled","error","filled","focused","required"],nO=HI("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,mT.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(eO.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(eO.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(eO.error)]:{color:(t.vars||t).palette.error.main}})}),iO=HI("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(e=>{let{theme:t}=e;return{["&.".concat(eO.error)]:{color:(t.vars||t).palette.error.main}}}),rO=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiFormLabel"}),{children:i,className:r,component:o="label"}=n,a=(0,gT.A)(n,tO),s=lD({props:n,muiFormControl:uD(),states:["color","required","focused","disabled","error","filled"]}),l=(0,mT.A)({},n,{color:s.color||"primary",component:o,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:i,disabled:r,error:o,filled:a,required:s}=e;return BI({root:["root","color".concat(KI(n)),r&&"disabled",o&&"error",a&&"filled",i&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},$D,t)})(l);return(0,uT.jsxs)(nO,(0,mT.A)({as:o,ownerState:l,className:MT(c.root,r),ref:t},a,{children:[i,s.required&&(0,uT.jsxs)(iO,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))}),oO=rO;function aO(e){return wI("MuiInputLabel",e)}EI("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const sO=["disableAnimation","margin","shrink","variant","className"],lO=HI(oO,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(eO.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,mT.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,mT.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,mT.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))}),cO=i.forwardRef(function(e,t){const n=XI({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:r,className:o}=n,a=(0,gT.A)(n,sO),s=uD();let l=r;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);const c=lD({props:n,muiFormControl:s,states:["size","variant","required","focused"]}),u=(0,mT.A)({},n,{disableAnimation:i,formControl:s,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),h=(e=>{const{classes:t,formControl:n,size:i,shrink:r,disableAnimation:o,variant:a,required:s}=e,l=BI({root:["root",n&&"formControl",!o&&"animated",r&&"shrink",i&&"normal"!==i&&"size".concat(KI(i)),a],asterisk:[s&&"asterisk"]},aO,t);return(0,mT.A)({},t,l)})(u);return(0,uT.jsx)(lO,(0,mT.A)({"data-shrink":l,ownerState:u,ref:t,className:MT(h.root,o)},a,{classes:h}))}),uO=cO;const hO=function(e,t){var n,r;return i.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)};function dO(e){return wI("MuiFormControl",e)}EI("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const pO=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],fO=HI("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,mT.A)({},t.root,t["margin".concat(KI(n.margin))],n.fullWidth&&t.fullWidth)}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})}),mO=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiFormControl"}),{children:r,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=n,v=(0,gT.A)(n,pO),y=(0,mT.A)({},n,{color:a,component:s,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:p,required:f,size:m,variant:g}),A=(e=>{const{classes:t,margin:n,fullWidth:i}=e;return BI({root:["root","none"!==n&&"margin".concat(KI(n)),i&&"fullWidth"]},dO,t)})(y),[b,x]=i.useState(()=>{let e=!1;return r&&i.Children.forEach(r,t=>{if(!hO(t,["Input","Select"]))return;const n=hO(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}),e}),[_,w]=i.useState(()=>{let e=!1;return r&&i.Children.forEach(r,t=>{hO(t,["Input","Select"])&&(gD(t.props,!0)||gD(t.props.inputProps,!0))&&(e=!0)}),e}),[E,C]=i.useState(!1);l&&E&&C(!1);const S=void 0===u||l?E:u;let T;const I=i.useMemo(()=>({adornedStart:b,setAdornedStart:x,color:a,disabled:l,error:c,filled:_,focused:S,fullWidth:h,hiddenLabel:d,size:m,onBlur:()=>{C(!1)},onEmpty:()=>{w(!1)},onFilled:()=>{w(!0)},onFocus:()=>{C(!0)},registerEffect:T,required:f,variant:g}),[b,a,l,c,_,S,h,d,T,f,m,g]);return(0,uT.jsx)(cD.Provider,{value:I,children:(0,uT.jsx)(fO,(0,mT.A)({as:s,ownerState:y,className:MT(A.root,o),ref:t},v,{children:r}))})}),gO=mO;function vO(e){return wI("MuiFormHelperText",e)}const yO=EI("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var AO;const bO=["children","className","component","disabled","error","filled","focused","margin","required","variant"],xO=HI("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(KI(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(yO.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(yO.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})}),_O=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiFormHelperText"}),{children:i,className:r,component:o="p"}=n,a=(0,gT.A)(n,bO),s=lD({props:n,muiFormControl:uD(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,mT.A)({},n,{component:o,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:i,disabled:r,error:o,filled:a,focused:s,required:l}=e;return BI({root:["root",r&&"disabled",o&&"error",i&&"size".concat(KI(i)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]},vO,t)})(l);return(0,uT.jsx)(xO,(0,mT.A)({as:o,ownerState:l,className:MT(c.root,r),ref:t},a,{children:" "===i?AO||(AO=(0,uT.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))}),wO=_O;function EO(e){return wI("MuiNativeSelect",e)}const CO=EI("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),SO=["className","disabled","error","IconComponent","inputRef","variant"],TO=e=>{let{ownerState:t,theme:n}=e;return(0,mT.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,mT.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(CO.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},IO=HI("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:VI,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(CO.multiple)]:t.multiple}]}})(TO),MO=e=>{let{ownerState:t,theme:n}=e;return(0,mT.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(CO.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},kO=HI("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(KI(n.variant))],n.open&&t.iconOpen]}})(MO),RO=i.forwardRef(function(e,t){const{className:n,disabled:r,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=e,c=(0,gT.A)(e,SO),u=(0,mT.A)({},e,{disabled:r,variant:l,error:o}),h=(e=>{const{classes:t,variant:n,disabled:i,multiple:r,open:o,error:a}=e;return BI({select:["select",n,i&&"disabled",r&&"multiple",a&&"error"],icon:["icon","icon".concat(KI(n)),o&&"iconOpen",i&&"disabled"]},EO,t)})(u);return(0,uT.jsxs)(i.Fragment,{children:[(0,uT.jsx)(IO,(0,mT.A)({ownerState:u,className:MT(h.select,n),disabled:r,ref:s||t},c)),e.multiple?null:(0,uT.jsx)(kO,{as:a,ownerState:u,className:h.icon})]})}),LO=RO;function BO(e){return wI("MuiSelect",e)}const PO=EI("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var DO;const OO=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],NO=HI("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(PO.select)]:t.select},{["&.".concat(PO.select)]:t[n.variant]},{["&.".concat(PO.error)]:t.error},{["&.".concat(PO.multiple)]:t.multiple}]}})(TO,{["&.".concat(PO.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),FO=HI("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(KI(n.variant))],n.open&&t.iconOpen]}})(MO),zO=HI("input",{shouldForwardProp:e=>jI(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function UO(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function jO(e){return null==e||"string"===typeof e&&!e.trim()}const VO=i.forwardRef(function(e,t){var n;const{"aria-describedby":r,"aria-label":o,autoFocus:a,autoWidth:s,children:l,className:c,defaultOpen:u,defaultValue:h,disabled:d,displayEmpty:p,error:f=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:A,name:b,onBlur:x,onChange:_,onClose:w,onFocus:E,onOpen:C,open:S,readOnly:T,renderValue:I,SelectDisplayProps:M={},tabIndex:k,value:R,variant:L="standard"}=e,B=(0,gT.A)(e,OO),[P,D]=bR({controlled:R,default:h,name:"Select"}),[O,N]=bR({controlled:S,default:u,name:"Select"}),F=i.useRef(null),z=i.useRef(null),[U,j]=i.useState(null),{current:V}=i.useRef(null!=S),[H,G]=i.useState(),Q=dM(t,g),W=i.useCallback(e=>{z.current=e,e&&j(e)},[]),q=null==U?void 0:U.parentNode;i.useImperativeHandle(Q,()=>({focus:()=>{z.current.focus()},node:F.current,value:P}),[P]),i.useEffect(()=>{u&&O&&U&&!V&&(G(s?null:q.clientWidth),z.current.focus())},[U,s]),i.useEffect(()=>{a&&z.current.focus()},[a]),i.useEffect(()=>{if(!v)return;const e=jL(z.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&z.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}},[v]);const X=(e,t)=>{e?C&&C(t):w&&w(t),V||(G(s?null:q.clientWidth),N(e))},Y=i.Children.toArray(l),K=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(A){n=Array.isArray(P)?P.slice():[];const t=P.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),P!==n&&(D(n),_)){const i=t.nativeEvent||t,r=new i.constructor(i.type,i);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:b}}),_(r,e)}A||X(!1,t)}},J=null!==U&&O;let Z,$;delete B["aria-invalid"];const ee=[];let te=!1,ne=!1;(gD({value:P})||p)&&(I?Z=I(P):te=!0);const ie=Y.map(e=>{if(!i.isValidElement(e))return null;let t;if(A){if(!Array.isArray(P))throw new Error((0,jT.A)(2));t=P.some(t=>UO(t,e.props.value)),t&&te&&ee.push(e.props.children)}else t=UO(P,e.props.value),t&&te&&($=e.props.children);return t&&(ne=!0),i.cloneElement(e,{"aria-selected":t?"true":"false",onClick:K(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})});te&&(Z=A?0===ee.length?null:ee.reduce((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e),[]):$);let re,oe=H;!s&&V&&U&&(oe=q.clientWidth),re="undefined"!==typeof k?k:d?null:0;const ae=M.id||(b?"mui-component-select-".concat(b):void 0),se=(0,mT.A)({},e,{variant:L,value:P,open:J,error:f}),le=(e=>{const{classes:t,variant:n,disabled:i,multiple:r,open:o,error:a}=e;return BI({select:["select",n,i&&"disabled",r&&"multiple",a&&"error"],icon:["icon","icon".concat(KI(n)),o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]},BO,t)})(se),ce=(0,mT.A)({},y.PaperProps,null==(n=y.slotProps)?void 0:n.paper),ue=cR();return(0,uT.jsxs)(i.Fragment,{children:[(0,uT.jsx)(NO,(0,mT.A)({ref:W,tabIndex:re,role:"combobox","aria-controls":ue,"aria-disabled":d?"true":void 0,"aria-expanded":J?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:e=>{if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),X(!0,e))}},onMouseDown:d||T?null:e=>{0===e.button&&(e.preventDefault(),z.current.focus(),X(!0,e))},onBlur:e=>{!J&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:P,name:b}}),x(e))},onFocus:E},M,{ownerState:se,className:MT(M.className,le.select,c),id:ae,children:jO(Z)?DO||(DO=(0,uT.jsx)("span",{className:"notranslate",children:"\u200b"})):Z})),(0,uT.jsx)(zO,(0,mT.A)({"aria-invalid":f,value:Array.isArray(P)?P.join(","):P,name:b,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find(t=>t.props.value===e.target.value);void 0!==t&&(D(t.props.value),_&&_(e,t))},tabIndex:-1,disabled:d,className:le.nativeInput,autoFocus:a,ownerState:se},B)),(0,uT.jsx)(FO,{as:m,className:le.icon,ownerState:se}),(0,uT.jsx)(lP,(0,mT.A)({id:"menu-".concat(b||""),anchorEl:q,open:J,onClose:e=>{X(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,mT.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":A?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,mT.A)({},y.slotProps,{paper:(0,mT.A)({},ce,{style:(0,mT.A)({minWidth:oe},null!=ce?ce.style:null)})}),children:ie}))]})}),HO=VO,GO=_L((0,uT.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),QO=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],WO=["root"],qO={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>VI(e)&&"variant"!==e,slot:"Root"},XO=HI(BD,qO)(""),YO=HI(ZD,qO)(""),KO=HI(UD,qO)(""),JO=i.forwardRef(function(e,t){const n=XI({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=GO,id:h,input:d,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:A,onOpen:b,open:x,renderValue:_,SelectDisplayProps:w,variant:E="outlined"}=n,C=(0,gT.A)(n,QO),S=y?LO:HO,T=lD({props:n,muiFormControl:uD(),states:["variant","error"]}),I=T.variant||E,M=(0,mT.A)({},n,{variant:I,classes:a}),k=(e=>{const{classes:t}=e;return t})(M),R=(0,gT.A)(k,WO),L=d||{standard:(0,uT.jsx)(XO,{ownerState:M}),outlined:(0,uT.jsx)(YO,{label:f,ownerState:M}),filled:(0,uT.jsx)(KO,{ownerState:M})}[I],B=dM(t,FI(L));return(0,uT.jsx)(i.Fragment,{children:i.cloneElement(L,(0,mT.A)({inputComponent:S,inputProps:(0,mT.A)({children:o,error:T.error,IconComponent:u,variant:I,type:void 0,multiple:v},y?{id:h}:{autoWidth:r,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:A,onOpen:b,open:x,renderValue:_,SelectDisplayProps:(0,mT.A)({id:h},w)},p,{classes:p?(0,VT.A)(R,p.classes):R},d?d.props.inputProps:{})},(v&&y||c)&&"outlined"===I?{notched:!0}:{},{ref:B,className:MT(L.props.className,s,k.root)},!d&&{variant:I},C))})});JO.muiName="Select";const ZO=JO;function $O(e){return wI("MuiTextField",e)}EI("MuiTextField",["root"]);const eN=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],tN={standard:BD,filled:UD,outlined:ZD},nN=HI(gO,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),iN=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:A,maxRows:b,minRows:x,multiline:_=!1,name:w,onBlur:E,onChange:C,onFocus:S,placeholder:T,required:I=!1,rows:M,select:k=!1,SelectProps:R,type:L,value:B,variant:P="outlined"}=n,D=(0,gT.A)(n,eN),O=(0,mT.A)({},n,{autoFocus:r,color:s,disabled:c,error:u,fullWidth:d,multiline:_,required:I,select:k,variant:P}),N=(e=>{const{classes:t}=e;return BI({root:["root"]},$O,t)})(O);const F={};"outlined"===P&&(m&&"undefined"!==typeof m.shrink&&(F.notched=m.shrink),F.label=A),k&&(R&&R.native||(F.id=void 0),F["aria-describedby"]=void 0);const z=cR(f),U=p&&z?"".concat(z,"-helper-text"):void 0,j=A&&z?"".concat(z,"-label"):void 0,V=tN[P],H=(0,uT.jsx)(V,(0,mT.A)({"aria-describedby":U,autoComplete:i,autoFocus:r,defaultValue:l,fullWidth:d,multiline:_,name:w,rows:M,maxRows:b,minRows:x,type:L,value:B,id:z,inputRef:y,onBlur:E,onChange:C,onFocus:S,placeholder:T,inputProps:g},F,v));return(0,uT.jsxs)(nN,(0,mT.A)({className:MT(N.root,a),disabled:c,error:u,fullWidth:d,ref:t,required:I,color:s,variant:P,ownerState:O},D,{children:[null!=A&&""!==A&&(0,uT.jsx)(uO,(0,mT.A)({htmlFor:z,id:j},m,{children:A})),k?(0,uT.jsx)(ZO,(0,mT.A)({"aria-describedby":U,id:z,labelId:j,value:B,input:H},R,{children:o})):H,p&&(0,uT.jsx)(wO,(0,mT.A)({id:U},h,{children:p}))]}))}),rN=iN;function oN(e){return wI("MuiDialogActions",e)}EI("MuiDialogActions",["root","spacing"]);const aN=["className","disableSpacing"],sN=HI("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}),lN=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:r=!1}=n,o=(0,gT.A)(n,aN),a=(0,mT.A)({},n,{disableSpacing:r}),s=(e=>{const{classes:t,disableSpacing:n}=e;return BI({root:["root",!n&&"spacing"]},oN,t)})(a);return(0,uT.jsx)(sN,(0,mT.A)({className:MT(s.root,i),ownerState:a,ref:t},o))}),cN=lN;function uN(e){return wI("MuiButton",e)}const hN=EI("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const dN=i.createContext({});const pN=i.createContext(void 0),fN=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],mN=e=>(0,mT.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),gN=HI(uL,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(KI(n.color))],t["size".concat(KI(n.size))],t["".concat(n.variant,"Size").concat(KI(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(e=>{let{theme:t,ownerState:n}=e;var i,r;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],a="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,mT.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,mT.A)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,mT.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(hN.focusVisible)]:(0,mT.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(hN.disabled)]:(0,mT.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,QT.X4)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(i=(r=t.palette).getContrastText)?void 0:i.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})},e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(hN.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(hN.disabled)]:{boxShadow:"none"}}}),vN=HI("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat(KI(n.size))]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},mN(t))}),yN=HI("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat(KI(n.size))]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},mN(t))}),AN=i.forwardRef(function(e,t){const n=i.useContext(dN),r=i.useContext(pN),o=XI({props:QI(n,e),name:"MuiButton"}),{children:a,color:s="primary",component:l="button",className:c,disabled:u=!1,disableElevation:h=!1,disableFocusRipple:d=!1,endIcon:p,focusVisibleClassName:f,fullWidth:m=!1,size:g="medium",startIcon:v,type:y,variant:A="text"}=o,b=(0,gT.A)(o,fN),x=(0,mT.A)({},o,{color:s,component:l,disabled:u,disableElevation:h,disableFocusRipple:d,fullWidth:m,size:g,type:y,variant:A}),_=(e=>{const{color:t,disableElevation:n,fullWidth:i,size:r,variant:o,classes:a}=e,s=BI({root:["root",o,"".concat(o).concat(KI(t)),"size".concat(KI(r)),"".concat(o,"Size").concat(KI(r)),"color".concat(KI(t)),n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat(KI(r))],endIcon:["icon","endIcon","iconSize".concat(KI(r))]},uN,a);return(0,mT.A)({},a,s)})(x),w=v&&(0,uT.jsx)(vN,{className:_.startIcon,ownerState:x,children:v}),E=p&&(0,uT.jsx)(yN,{className:_.endIcon,ownerState:x,children:p}),C=r||"";return(0,uT.jsxs)(gN,(0,mT.A)({ownerState:x,className:MT(n.className,_.root,c,C),component:l,disabled:u,focusRipple:!d,focusVisibleClassName:MT(_.focusVisible,f),ref:t,type:y},b,{classes:_,children:[w,a,E]}))}),bN=AN,xN=_L((0,uT.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_N=_L((0,uT.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),wN=async(e,t)=>{let{url:n,method:i="POST",token:r="",body:o=null}=e;const a=r?{"Content-Type":"application/json",authorization:"Bearer ".concat(r)}:{"Content-Type":"application/json"};console.log("Headers:",a),o=o?{body:JSON.stringify(o)}:{};try{const e=await fetch(n,u({method:i,headers:a},o)),r=await e.json();if(!r.success)throw 401===e.status&&t({type:"UPDATE_USER",payload:null}),new Error(r.message);return r.result}catch(s){return console.warn("API Error:",s.message),"Failed to fetch"!==s.message&&t({type:"UPDATE_ALERT",payload:{open:!0,severity:"error",message:s.message}}),console.log(s),null}};var EN,CN=new Uint8Array(16);function SN(){if(!EN&&!(EN="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return EN(CN)}const TN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const IN=function(e){return"string"===typeof e&&TN.test(e)};for(var MN=[],kN=0;kN<256;++kN)MN.push((kN+256).toString(16).substr(1));const RN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(MN[e[t+0]]+MN[e[t+1]]+MN[e[t+2]]+MN[e[t+3]]+"-"+MN[e[t+4]]+MN[e[t+5]]+"-"+MN[e[t+6]]+MN[e[t+7]]+"-"+MN[e[t+8]]+MN[e[t+9]]+"-"+MN[e[t+10]]+MN[e[t+11]]+MN[e[t+12]]+MN[e[t+13]]+MN[e[t+14]]+MN[e[t+15]]).toLowerCase();if(!IN(n))throw TypeError("Stringified UUID is invalid");return n};const LN=function(e,t,n){var i=(e=e||{}).random||(e.rng||SN)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return RN(i)},BN=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},PN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],o=r+1<e.length,a=o?e[r+1]:0,s=r+2<e.length,l=s?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(BN(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],o=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const s=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==o||null==a||null==s)throw new DN;const l=t<<2|o>>4;if(i.push(l),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==s){const e=a<<6&192|s;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ON=function(e){return function(e){const t=BN(e);return PN.encodeByteArray(t,!0)}(e).replace(/\./g,"")},NN=function(e){try{return PN.decodeString(e,!0)}catch(QJ){console.error("base64Decode failed: ",QJ)}return null};const FN=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,zN=()=>{try{return FN()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(QJ){return}const t=e&&NN(e[1]);return t&&JSON.parse(t)})()}catch(QJ){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(QJ))}},UN=e=>{var t,n;return null===(n=null===(t=zN())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},jN=e=>{const t=UN(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},VN=()=>{var e;return null===(e=zN())||void 0===e?void 0:e.config},HN=e=>{var t;return null===(t=zN())||void 0===t?void 0:t["_".concat(e)]};class GN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function QN(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ON(JSON.stringify({alg:"none",type:"JWT"})),ON(JSON.stringify(o)),""].join(".")}function WN(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qN(){return!function(){var e;const t=null===(e=zN())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(QJ){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XN(){try{return"object"===typeof indexedDB}catch(QJ){return!1}}class YN extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,YN.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KN.prototype.create)}}class KN{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(JN,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",o="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new YN(n,o,t)}}const JN=/\{\$([^}]+)}/g;function ZN(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if($N(n)&&$N(o)){if(!ZN(n,o))return!1}else if(n!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function $N(e){return null!==e&&"object"===typeof e}function eF(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function tF(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function nF(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class iF{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=rF),void 0===i.error&&(i.error=rF),void 0===i.complete&&(i.complete=rF);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(QJ){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(QJ){"undefined"!==typeof console&&console.error&&console.error(QJ)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rF(){}function oF(e){return e&&e._delegate?e._delegate:e}class aF{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sF="[DEFAULT]";class lF{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new GN;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(QJ){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(QJ){if(i)return null;throw QJ}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sF})}catch(QJ){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(QJ){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sF;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sF;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sF;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&o.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(aE){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cF(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(aE){}return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sF;return this.component?this.component.multipleInstances?e:sF:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function cF(e){return e===sF?void 0:e}class uF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lF(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const hF=[];var dF;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dF||(dF={}));const pF={debug:dF.DEBUG,verbose:dF.VERBOSE,info:dF.INFO,warn:dF.WARN,error:dF.ERROR,silent:dF.SILENT},fF=dF.INFO,mF={[dF.DEBUG]:"log",[dF.VERBOSE]:"log",[dF.INFO]:"info",[dF.WARN]:"warn",[dF.ERROR]:"error"},gF=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=mF[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...o)};class vF{constructor(e){this.name=e,this._logLevel=fF,this._logHandler=gF,this._userLogHandler=null,hF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dF))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dF.DEBUG,...t),this._logHandler(this,dF.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dF.VERBOSE,...t),this._logHandler(this,dF.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dF.INFO,...t),this._logHandler(this,dF.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dF.WARN,...t),this._logHandler(this,dF.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dF.ERROR,...t),this._logHandler(this,dF.ERROR,...t)}}let yF,AF;const bF=new WeakMap,xF=new WeakMap,_F=new WeakMap,wF=new WeakMap,EF=new WeakMap;let CF={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xF.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_F.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return IF(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function SF(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(AF||(AF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(MF(this),n),IF(bF.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return IF(e.apply(MF(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const o=e.call(MF(this),t,...i);return _F.set(o,t.sort?t.sort():[t]),IF(o)}}function TF(e){return"function"===typeof e?SF(e):(e instanceof IDBTransaction&&function(e){if(xF.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});xF.set(e,t)}(e),t=e,(yF||(yF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,CF):e);var t}function IF(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(IF(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&bF.set(t,e)}).catch(()=>{}),EF.set(t,e),t}(e);if(wF.has(e))return wF.get(e);const t=TF(e);return t!==e&&(wF.set(e,t),EF.set(t,e)),t}const MF=e=>EF.get(e);const kF=["get","getKey","getAll","getAllKeys","count"],RF=["put","add","delete","clear"],LF=new Map;function BF(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(LF.get(t))return LF.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=RF.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!kF.includes(n))return;const o=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return i&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),r&&t.done]))[0]};return LF.set(t,o),o}CF=(e=>u(u({},e),{},{get:(t,n,i)=>BF(t,n)||e.get(t,n,i),has:(t,n)=>!!BF(t,n)||e.has(t,n)}))(CF);class PF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const DF="@firebase/app",OF="0.10.13",NF=new vF("@firebase/app"),FF="@firebase/app-compat",zF="@firebase/analytics-compat",UF="@firebase/analytics",jF="@firebase/app-check-compat",VF="@firebase/app-check",HF="@firebase/auth",GF="@firebase/auth-compat",QF="@firebase/database",WF="@firebase/data-connect",qF="@firebase/database-compat",XF="@firebase/functions",YF="@firebase/functions-compat",KF="@firebase/installations",JF="@firebase/installations-compat",ZF="@firebase/messaging",$F="@firebase/messaging-compat",ez="@firebase/performance",tz="@firebase/performance-compat",nz="@firebase/remote-config",iz="@firebase/remote-config-compat",rz="@firebase/storage",oz="@firebase/storage-compat",az="@firebase/firestore",sz="@firebase/vertexai-preview",lz="@firebase/firestore-compat",cz="firebase",uz="[DEFAULT]",hz={[DF]:"fire-core",[FF]:"fire-core-compat",[UF]:"fire-analytics",[zF]:"fire-analytics-compat",[VF]:"fire-app-check",[jF]:"fire-app-check-compat",[HF]:"fire-auth",[GF]:"fire-auth-compat",[QF]:"fire-rtdb",[WF]:"fire-data-connect",[qF]:"fire-rtdb-compat",[XF]:"fire-fn",[YF]:"fire-fn-compat",[KF]:"fire-iid",[JF]:"fire-iid-compat",[ZF]:"fire-fcm",[$F]:"fire-fcm-compat",[ez]:"fire-perf",[tz]:"fire-perf-compat",[nz]:"fire-rc",[iz]:"fire-rc-compat",[rz]:"fire-gcs",[oz]:"fire-gcs-compat",[az]:"fire-fst",[lz]:"fire-fst-compat",[sz]:"fire-vertex","fire-js":"fire-js",[cz]:"fire-js-all"},dz=new Map,pz=new Map,fz=new Map;function mz(e,t){try{e.container.addComponent(t)}catch(QJ){NF.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),QJ)}}function gz(e){const t=e.name;if(fz.has(t))return NF.debug("There were multiple attempts to register component ".concat(t,".")),!1;fz.set(t,e);for(const n of dz.values())mz(n,e);for(const n of pz.values())mz(n,e);return!0}function vz(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yz(e){return void 0!==e.settings}const Az=new KN("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class bz{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new aF("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Az.create("app-deleted",{appName:this._name})}}const xz="10.14.1";function _z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:uz,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Az.create("bad-app-name",{appName:String(r)});if(n||(n=VN()),!n)throw Az.create("no-options");const o=dz.get(r);if(o){if(ZN(n,o.options)&&ZN(i,o.config))return o;throw Az.create("duplicate-app",{appName:r})}const a=new uF(r);for(const l of fz.values())a.addComponent(l);const s=new bz(n,i,a);return dz.set(r,s),s}function wz(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;const t=dz.get(e);if(!t&&e===uz&&VN())return _z();if(!t)throw Az.create("no-app",{appName:e});return t}function Ez(e,t,n){var i;let r=null!==(i=hz[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void NF.warn(e.join(" "))}gz(new aF("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const Cz="firebase-heartbeat-store";let Sz=null;function Tz(){return Sz||(Sz=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=IF(a);return i&&a.addEventListener("upgradeneeded",e=>{i(IF(a.result),e.oldVersion,e.newVersion,IF(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Cz)}catch(QJ){console.warn(QJ)}}}).catch(e=>{throw Az.create("idb-open",{originalErrorMessage:e.message})})),Sz}async function Iz(e,t){try{const n=(await Tz()).transaction(Cz,"readwrite"),i=n.objectStore(Cz);await i.put(t,Mz(e)),await n.done}catch(QJ){if(QJ instanceof YN)NF.warn(QJ.message);else{const t=Az.create("idb-set",{originalErrorMessage:null===QJ||void 0===QJ?void 0:QJ.message});NF.warn(t.message)}}}function Mz(e){return"".concat(e.name,"!").concat(e.options.appId)}class kz{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Lz(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rz();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(QJ){NF.warn(QJ)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Rz(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Bz(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bz(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=ON(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(QJ){return NF.warn(QJ),""}}}function Rz(){return(new Date).toISOString().substring(0,10)}class Lz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!XN()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Tz()).transaction(Cz),n=await t.objectStore(Cz).get(Mz(e));return await t.done,n}catch(QJ){if(QJ instanceof YN)NF.warn(QJ.message);else{const t=Az.create("idb-get",{originalErrorMessage:null===QJ||void 0===QJ?void 0:QJ.message});NF.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Iz(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Iz(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bz(e){return ON(JSON.stringify({version:2,heartbeats:e})).length}var Pz;Pz="",gz(new aF("platform-logger",e=>new PF(e),"PRIVATE")),gz(new aF("heartbeat",e=>new kz(e),"PRIVATE")),Ez(DF,OF,Pz),Ez(DF,OF,"esm2017"),Ez("fire-js","");const Dz="firebasestorage.googleapis.com",Oz="storageBucket";class Nz extends YN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Uz(e),"Firebase Storage: ".concat(t," (").concat(Uz(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nz.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uz(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Fz,zz;function Uz(e){return"storage/"+e}function jz(){return new Nz(Fz.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Vz(){return new Nz(Fz.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hz(){return new Nz(Fz.CANCELED,"User canceled the upload/download.")}function Gz(){return new Nz(Fz.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qz(e){return new Nz(Fz.INVALID_ARGUMENT,e)}function Wz(){return new Nz(Fz.APP_DELETED,"The Firebase app was deleted.")}function qz(e,t){return new Nz(Fz.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xz(e){throw new Nz(Fz.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Fz||(Fz={}));class Yz{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Yz.makeFromUrl(e,t)}catch(QJ){return new Yz(e,"")}if(""===n.path)return n;throw i=e,new Nz(Fz.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Dz?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new Yz(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Nz(Fz.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Kz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Jz(e){return"string"===typeof e||e instanceof String}function Zz(e){return $z()&&e instanceof Blob}function $z(){return"undefined"!==typeof Blob}function eU(e,t,n,i){if(i<t)throw Qz("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw Qz("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function tU(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function nU(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function iU(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(zz||(zz={}));class rU{constructor(e,t,n,i,r,o,a,s,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new oU(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===zz.NO_ERROR,r=n.getStatus();if(!t||iU(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===zz.ABORT;return void e(!1,new oU(!1,null,t))}const o=-1!==this.successCodes_.indexOf(r);e(!0,new oU(o,n))})},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(QJ){i(QJ)}else if(null!==r){const e=jz();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?Wz():Hz())}else{i(Vz())}};this.canceled_?t(0,new oU(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout(()=>{r=null,e(p,l())},t)}function d(){o&&clearTimeout(o)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void u.call(null,e,...n);if(l()||a)return d(),void u.call(null,e,...n);let o;i<64&&(i*=2),1===s?(s=2,o=0):o=1e3*(i+Math.random()),h(o)}let f=!1;function m(e){f||(f=!0,d(),c||(null!==r?(e||(s=2),clearTimeout(r),h(0)):e||(s=1)))}return h(0),o=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class oU{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function aU(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sU(){const e=aU();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if($z())return new Blob(n);throw new Nz(Fz.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function lU(e){if("undefined"===typeof atob)throw t="base-64",new Nz(Fz.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const cU="raw",uU="base64",hU="base64url",dU="data_url";class pU{constructor(e,t){this.data=e,this.contentType=t||null}}function fU(e,t){switch(e){case cU:return new pU(mU(t));case uU:case hU:return new pU(gU(e,t));case dU:return new pU(function(e){const t=new vU(e);return t.base64?gU(uU,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(QJ){throw qz(dU,"Malformed data URL.")}return mU(t)}(t.rest)}(t),new vU(t).contentType)}throw jz()}function mU(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function gU(e,t){switch(e){case uU:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw qz(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case hU:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw qz(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lU(t)}catch(QJ){if(QJ.message.includes("polyfill"))throw QJ;throw qz(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class vU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw qz(dU,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class yU{constructor(e,t){let n=0,i="";Zz(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Zz(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new yU(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new yU(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if($z()){const e=t.map(e=>e instanceof yU?e.data_:e);return new yU(sU.apply(null,e))}{const e=t.map(e=>Jz(e)?fU(cU,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const i=new Uint8Array(n);let r=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]}),new yU(i,!0)}}uploadData(){return this.data_}}function AU(e){let t;try{t=JSON.parse(e)}catch(QJ){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function bU(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function xU(e,t){return t}class _U{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||xU}}let wU=null;function EU(){if(wU)return wU;const e=[];e.push(new _U("bucket")),e.push(new _U("generation")),e.push(new _U("metageneration")),e.push(new _U("name","fullPath",!0));const t=new _U("name");t.xform=function(e,t){return function(e){return!Jz(e)||e.length<2?e:bU(e)}(t)},e.push(t);const n=new _U("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new _U("timeCreated")),e.push(new _U("updated")),e.push(new _U("md5Hash",null,!0)),e.push(new _U("cacheControl",null,!0)),e.push(new _U("contentDisposition",null,!0)),e.push(new _U("contentEncoding",null,!0)),e.push(new _U("contentLanguage",null,!0)),e.push(new _U("contentType",null,!0)),e.push(new _U("metadata","customMetadata",!0)),wU=e,wU}function CU(e,t,n){const i={type:"file"},r=n.length;for(let o=0;o<r;o++){const e=n[o];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new Yz(n,i);return t._makeStorageReference(r)}})}(i,e),i}function SU(e,t,n){const i=AU(t);if(null===i)return null;return CU(e,i,n)}function TU(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class IU{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function MU(e){if(!e)throw jz()}function kU(e,t){return function(n,i){const r=SU(e,i,t);return MU(null!==r),r}}function RU(e,t){return function(n,i){const r=SU(e,i,t);return MU(null!==r),function(e,t,n,i){const r=AU(t);if(null===r)return null;if(!Jz(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map(t=>{const r=e.bucket,o=e.fullPath;return tU("/b/"+a(r)+"/o/"+a(o),n,i)+nU({alt:"media",token:t})})[0]}(r,i,e.host,e._protocol)}}function LU(e){return function(t,n){let i;var r,o;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new Nz(Fz.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Nz(Fz.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,i=new Nz(Fz.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new Nz(Fz.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function BU(e){const t=LU(e);return function(n,i){let r=t(n,i);var o;return 404===n.getStatus()&&(o=e.path,r=new Nz(Fz.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function PU(e,t,n){const i=tU(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,o=new IU(i,"GET",kU(e,n),r);return o.errorHandler=BU(t),o}function DU(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function OU(e,t,n,i,r){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=DU(t,i,r),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+TU(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",h=yU.getBlob(c,i,u);if(null===h)throw Gz();const d={name:l.fullPath},p=tU(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new IU(p,"POST",kU(e,n),f);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=LU(t),m}class NU{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function FU(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(QJ){MU(!1)}return MU(!!n&&-1!==(t||["active"]).indexOf(n)),n}const zU=262144;function UU(e,t,n,i,r,o,a,s){const l=new NU(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw new Nz(Fz.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const h=l.current,d=h+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":"".concat(l.current)},m=i.slice(h,d);if(null===m)throw Gz();const g=t.maxUploadRetryTime,v=new IU(n,"POST",function(e,n){const r=FU(e,["active","final"]),a=l.current+u,s=i.size();let c;return c="final"===r?kU(t,o)(e,n):null,new NU(a,s,"final"===r,c)},g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=s||null,v.errorHandler=LU(e),v}const jU="running",VU="paused",HU="success",GU="canceled",QU="error";function WU(e){switch(e){case"running":case"pausing":case"canceling":return jU;case"paused":return VU;case"success":return HU;case"canceled":return GU;default:return QU}}class qU{constructor(e,t,n){const i=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(i)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function XU(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Promise.resolve().then(()=>e(...n))}}class YU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zz.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zz.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zz.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw Xz("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xz("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xz("cannot .getStatus() before sending");try{return this.xhr_.status}catch(QJ){return-1}}getResponse(){if(!this.sent_)throw Xz("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xz("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class KU extends YU{initXhr(){this.xhr_.responseType="text"}}function JU(){return new KU}class ZU{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=EU(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Fz.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(iU(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Vz()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Fz.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(t=>{let[n,i]=t;switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,i,r){const o=t.bucketOnlyServerUrl(),a=DU(t,i,r),s={name:a.fullPath},l=tU(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(i.size()),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=TU(a,n),h=e.maxUploadRetryTime,d=new IU(l,"POST",function(e){let t;FU(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(QJ){MU(!1)}return MU(Jz(t)),t},h);return d.urlParams=s,d.headers=c,d.body=u,d.errorHandler=LU(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,JU,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function(e,t,n,i){const r=e.maxUploadRetryTime,o=new IU(n,"POST",function(e){const t=FU(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(QJ){MU(!1)}n||MU(!1);const r=Number(n);return MU(!isNaN(r)),new NU(r,i.size(),"final"===t)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=LU(t),o}(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,JU,t,n);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=zU*this._chunkMultiplier,t=new NU(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,r)=>{let o;try{o=UU(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(QJ){return this._error=QJ,void this._transition("error")}const a=this._ref.storage._makeRequest(o,JU,i,r,!1);this._request=a,a.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(zU*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=PU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,JU,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=OU(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,JU,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hz(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const r=new qU(t||void 0,n||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WU(this._state)){case HU:XU(this._resolve.bind(null,this.snapshot))();break;case GU:case QU:XU(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WU(this._state)){case jU:case VU:e.next&&XU(e.next.bind(e,this.snapshot))();break;case HU:e.complete&&XU(e.complete.bind(e))();break;default:e.error&&XU(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class $U{constructor(e,t){this._service=e,this._location=t instanceof Yz?t:Yz.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $U(e,t)}get root(){const e=new Yz(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bU(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Yz(this._location.bucket,e);return new $U(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Nz(Fz.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ej(e,t,n){e._throwIfRoot("uploadBytes");const i=OU(e.storage,e._location,EU(),new yU(t,!0),n);return e.storage.makeRequestWithTokens(i,JU).then(t=>({metadata:t,ref:e}))}function tj(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=tU(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,o=new IU(i,"GET",RU(e,n),r);return o.errorHandler=BU(t),o}(e.storage,e._location,EU());return e.storage.makeRequestWithTokens(t,JU).then(e=>{if(null===e)throw new Nz(Fz.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function nj(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=tU(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,r=new IU(n,"DELETE",function(e,t){},i);return r.successCodes=[200,204],r.errorHandler=BU(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,JU)}function ij(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new Yz(e._location.bucket,n);return new $U(e.storage,i)}function rj(e,t){if(e instanceof sj){const n=e;if(null==n._bucket)throw new Nz(Fz.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Oz+"' property when initializing the app?");const i=new $U(n,n._bucket);return null!=t?rj(i,t):i}return void 0!==t?ij(e,t):e}function oj(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof sj)return function(e,t){return new $U(e,t)}(e,t);throw Qz("To use ref(service, url), the first argument must be a Storage instance.")}return rj(e,t)}function aj(e,t){const n=null===t||void 0===t?void 0:t[Oz];return null==n?null:Yz.makeFromBucketSpec(n,e)}class sj{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Dz,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Yz.makeFromBucketSpec(i,this._host):aj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Yz.makeFromBucketSpec(this._url,e):this._bucket=aj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $U(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Kz(Wz());{const o=function(e,t,n,i,r,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=nU(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new rU(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const lj="@firebase/storage",cj="0.13.2",uj="storage";function hj(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ZU(e,new yU(t),n)}(e=oF(e),t,n)}function dj(e){return tj(e=oF(e))}function pj(e,t){return oj(e=oF(e),t)}function fj(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new sj(i,r,o,n,xz)}gz(new aF(uj,fj,"PUBLIC").setMultipleInstances(!0)),Ez(lj,cj,""),Ez(lj,cj,"esm2017");Ez("firebase","10.14.1","app");var mj,gj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vj={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var o=e.g[3],a=t+(o^n&(r^o))+i[0]+3614090360&4294967295;a=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=(n=(r=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^o&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(o^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(r^o))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^o&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(o^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(r^o))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^o&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(o^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(r^o))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^o&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(o^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^o&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(o^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(r^o))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^o&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(o^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(r^o))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^o&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(o^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(r^o))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^o&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(o^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(r^o))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^o)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(o^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^o^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^o)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(o^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^o^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^o)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(o^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^o^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^o)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(o^t^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^o^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~o))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(o|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~o))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(o|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~o))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(o|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(r^(n|~o))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=o+((a=r+(t^(o|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var o=0|e[r];i&&o==t||(n[r]=o,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=i;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,r),o=0;break}}else for(;a<t;)if(r[o++]=e[a++],o==this.blockSize){n(this,r),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function o(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return d(a(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=v(n),i=v(i);var r=y(n,1),o=y(i,1);for(i=y(i,2),n=y(n,2);!u(i);){var c=o.add(i);0>=c.l(e)&&(r=r.add(n),o=c),i=y(i,1),n=y(n,1)}return t=p(e,r.j(t)),new m(r,t)}for(r=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(o=a(n)).j(t);h(c)||0<c.l(e);)c=(o=a(n-=i)).j(t);u(o)&&(o=l),r=r.add(o),e=p(e,c)}return new m(r,e)}function v(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,o=[],a=0;a<r;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(o,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,i="";;){var r=g(n,t).g,o=((0<(n=p(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,o=0;o<=t;o++){var a=r+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);r=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<e.g.length;o++){var l=this.i(r)>>>16,p=65535&this.i(r),m=e.i(o)>>>16,g=65535&e.i(o);n[2*r+2*o]+=p*g,f(n,2*r+2*o),n[2*r+2*o+1]+=l*g,f(n,2*r+2*o+1),n[2*r+2*o+1]+=p*m,f(n,2*r+2*o+1),n[2*r+2*o+2]+=l*m,f(n,2*r+2*o+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,vj.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),r=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),r=r.j(l).add(a(c))):r=(r=r.j(i)).add(a(c))}return r},mj=vj.Integer=i}).apply("undefined"!==typeof gj?gj:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var yj,Aj,bj,xj,_j,wj,Ej,Cj,Sj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Tj={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Sj&&Sj];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in r))break e;r=r[a]}(i=i(o=r[e=e[e.length-1]]))!=o&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});var i=i||{},r=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function w(e){r.setTimeout(()=>{throw e},0)}function E(){var e=M;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,M=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},k=()=>{const e=r.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(Rm){w(Rm)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function L(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(Rm){}return e}();function D(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var r=!0;break e}catch(Nm){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}h(D,B);var O={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],o=Array.prototype.indexOf.call(r,t,void 0);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==i)return r}return-1}j.prototype.add=function(e,t,n,i,r){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=H(e,t,i,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,o,!!i,r)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),Q={};function W(e,t,n,i,r){if(i&&i.once)return X(e,t,n,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)W(e,t[o],n,i,r);return null}return n=te(n),e&&e[N]?e.K(t,n,a(i)?!!i.capture:!!i,r):q(e,t,n,!1,i,r)}function q(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var s=a(r)?!!r.capture:!!r,l=$(e);if(l||(e[G]=l=new j(e)),(n=l.add(t,n,i,s,o)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)P||(r=s),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(J(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function X(e,t,n,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)X(e,t[o],n,i,r);return null}return n=te(n),e&&e[N]?e.L(t,n,a(i)?!!i.capture:!!i,r):q(e,t,n,!0,i,r)}function Y(e,t,n,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,i,r);else i=a(i)?!!i.capture:!!i,n=te(n),e&&e[N]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(o=e.g[t],n,i,r))&&(U(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,i,r)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])V(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(J(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=$(t))?(V(n,e),0==n.h&&(n.src=null,t[G]=null)):U(e)}}}function J(e){return e in Q?Q[e]:Q[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&K(e),e=n.call(i,t)}return e}function $(e){return(e=e[G])instanceof j?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){L.call(this),this.i=new j(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var r=t;x(t=new B(i,e),r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];r=re(a,i,!0,t)&&r}if(r=re(a=t.g=e,i,!0,t)&&r,r=re(a,i,!1,t)&&r,n)for(o=0;o<n.length;o++)r=re(a=t.g=n[o],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),r=!1!==s.call(l,i)&&r}}return r&&!i.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function ae(e){e.g=oe(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,L),ne.prototype[N]=!0,ne.prototype.removeEventListener=function(e,t,n,i){Y(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)U(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){L.call(this),this.h=e,this.g={}}h(le,L);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=r.JSON.stringify,de=r.JSON.parse,pe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){B.call(this,"d")}function Ae(){B.call(this,"c")}h(ye,B),h(Ae,B);var be={},xe=null;function _e(){return xe=xe||new ne}function we(e){B.call(this,be.La,e)}function Ee(e){const t=_e();ie(t,new we(t))}function Ce(e,t){B.call(this,be.STAT_EVENT,e),this.stat=t}function Se(e){const t=_e();ie(t,new Ce(t,e))}function Te(e,t){B.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function Me(){this.g=!0}function ke(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<r.length;a++)r[a]=""}}}return he(n)}catch(Fm){return t}}(e,n)+(i?" "+i:"")})}be.La="serverreachability",h(we,B),be.STAT_EVENT="statevent",h(Ce,B),be.Ma="timingevent",h(Te,B),Me.prototype.xa=function(){this.g=!1},Me.prototype.info=function(){};var Re,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function De(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(Pe,fe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Re=new Pe;var Ne={},Fe={};function ze(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=at(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Et(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Oe,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var o=0;o<r.length;o++){var a=W(n,r[o],i||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,i,r,o){e.info(function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function je(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Fe:(n=Number(t.substring(n,i)),isNaN(n)?Ne:(i+=1)+n>t.length?Fe:(t=t.slice(i,i+n),e.C=i+n,t))}function He(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function Qe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||sn(e.j,e)}function qe(e){Qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(km){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Se(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(km){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=i.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ut(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((i=n).qa=hn(i,i.J?i.ia:null,i.W),a.K){tt(i.h,a);var s=a,l=i.L;l&&(s.I=l),s.B&&(Qe(s),He(s)),i.g=a}else tn(i);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(km){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Qt(this.g)))){this.J||4!=d||7==t||Ee(),Qe(this);var n=this.g.Z();this.X=n;t:if(je(this)){var i=Qt(this.g);e="";var o=i.length,a=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qe(this),We(this);var s="";break t}this.h.i=new r.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(a&&t==o-1)});i.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,o,a){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),qe(this),We(this);break e}ke(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ve(this,s),e==Fe){4==d&&(this.s=4,Se(14),n=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ne){this.s=4,Se(15),ke(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}ke(this.i,this.l,e,null),Xe(this,e)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(h),h.M=!0,Se(11))}}else ke(this.i,this.l,s,"[Invalid Chunked Response]"),qe(this),We(this)}else ke(this.i,this.l,s,null),Xe(this,s);4==d&&qe(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(f(e[i]))continue;var n=_(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[r]||[];t[r]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),qe(this),We(this)}}}catch(Wm){}},De.prototype.cancel=function(){this.J=!0,qe(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Se(17)),qe(this),this.s=2,We(this)):Ge(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,a=0;a<r;a++)t.call(void 0,i[a],n&&n[a],e)}Ke.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,At)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,At=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){xt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return xt(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(Nm){}}function Tt(){this.g=new pe}function It(e,t,n){const i=n||"";try{it(e,function(e,n){let r=e;a(e)&&(r=he(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(QJ){throw t.push(i+"type="+encodeURIComponent("_badmap")),QJ}}function Mt(e){this.l=e.Ub||null,this.j=e.eb||!1}function kt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Bt(e)}function Bt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Dt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Pt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ot(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){xt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)wt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,wt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const o=encodeURIComponent(String(i)),a=this.V(i);for(i=0;i<a.length;i++){var r=o;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),e.push(r)}}return this.i=e.join("&")},h(Mt,fe),Mt.prototype.g=function(){return new kt(this.l,this.j)},Mt.prototype.i=function(e){return function(){return e}}({}),h(kt,ne),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Bt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Bt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ot,ne);var Nt=/^https?$/i,Ft=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Vt(e)}function Ut(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function jt(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))oe(e.Ea,0,e);else if(ie(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===i){var a=String(e.D).match(rt)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),o=!Nt.test(a?a.toLowerCase():"")}n=o}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var s=2<Gt(e)?e.g.statusText:""}catch(Fm){s=""}e.l=s+" ["+e.Z()+"]",Ut(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Ht(e);const n=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{n.onreadystatechange=i}catch(QJ){}}}function Ht(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Hm){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.Aa=0,this.i=[],this.j=new Me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if(Kt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),$t(e,n),(t=new De(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(Bm){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Kt(e){Yt(e),e.u&&(r.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||k(),I||(T(),I=!0),M.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const i=at(e.I);ut(i,"SID",e.K),ut(i,"RID",n),ut(i,"AID",e.T),$t(e,i),e.m&&e.o&&Dt(i,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,i,t)}function $t(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&it({},function(e,n){ut(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const s=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),o=!1;else try{It(s,e,"req"+n+"_")}catch(Wm){i&&i(s)}}if(o){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||k(),I||(T(),I=!0),M.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function on(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),$t(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var i=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=_e(),new Te(i,n)),Jt(e)}else tn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==i&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new ot(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||st(i,"https"),ht(i),t?function(e,t){const n=new Me;if(r.Image){const i=new Image;i.onload=u(St,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(St,n,"TestLoadImage: error",!1,t,i),i.onabort=u(St,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Me;const n=new AbortController,i=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(i),St(0,0,!1,t)})}(i.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),un(e),Kt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var i=n instanceof ot?at(n):new ot(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var o=r.location;i=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);i&&st(a,i),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),i=a}return n=e.D,t=e.ya,n&&t&&ut(i,n,t),ut(i,"VER",e.la),$t(e,i),i}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new Mt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function pn(){}function fn(){}function mn(e,t){ne.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){Ae.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Nm){return void zt(this,Nm)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var o in i)n.set(o,i[o]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||i||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(Nm){zt(this,Nm)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?jt(this):this.bb())},e.bb=function(){jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(Im){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Im){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Se(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new De(this,this.j,e);let o=this.o;if(this.S&&(o?(o=A(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(r.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,r,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),$t(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Pt(o)))+"&"+t:this.m&&Dt(n,this.m,o)),et(this.h,r),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),r.T=!0,ze(r,n,null)):ze(r,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Xt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,mn.aa.N.call(this)},h(gn,ye),h(vn,Ae),h(yn,pn),yn.prototype.ua=function(){ie(this.g,"a")},yn.prototype.ta=function(e){ie(this.g,new gn(e))},yn.prototype.sa=function(e){ie(this.g,new vn)},yn.prototype.ra=function(){ie(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Cj=Tj.createWebChannelTransport=function(){return new fn},Ej=Tj.getStatEventTarget=function(){return _e()},wj=Tj.Event=be,_j=Tj.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,xj=Tj.ErrorCode=Le,Be.COMPLETE="complete",bj=Tj.EventType=Be,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Aj=Tj.WebChannel=ge,Tj.FetchXmlHttpFactory=Mt,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,yj=Tj.XhrIo=Ot}).apply("undefined"!==typeof Sj?Sj:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ij="@firebase/firestore";class Mj{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mj.UNAUTHENTICATED=new Mj(null),Mj.GOOGLE_CREDENTIALS=new Mj("google-credentials-uid"),Mj.FIRST_PARTY=new Mj("first-party-uid"),Mj.MOCK_USER=new Mj("mock-user");let kj="10.14.0";const Rj=new vF("@firebase/firestore");function Lj(){return Rj.logLevel}function Bj(e){if(Rj.logLevel<=dF.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oj);Rj.debug("Firestore (".concat(kj,"): ").concat(e),...r)}}function Pj(e){if(Rj.logLevel<=dF.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oj);Rj.error("Firestore (".concat(kj,"): ").concat(e),...r)}}function Dj(e){if(Rj.logLevel<=dF.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oj);Rj.warn("Firestore (".concat(kj,"): ").concat(e),...r)}}function Oj(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(_m){return e}}function Nj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(kj,") INTERNAL ASSERTION FAILED: ")+e;throw Pj(t),new Error(t)}function Fj(e,t){e||Nj()}function zj(e,t){return e}const Uj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jj extends YN{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vj{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Gj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mj.UNAUTHENTICATED))}shutdown(){}}class Qj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wj{constructor(e){this.t=e,this.currentUser=Mj.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fj(void 0===this.o);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Vj;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Vj,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},a=e=>{Bj("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Bj("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Vj)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bj("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Fj("string"==typeof t.accessToken),new Hj(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fj(null===e||"string"==typeof e),new Mj(e)}}class qj{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mj.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xj{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new qj(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mj.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Fj(void 0===this.o);const n=e=>{null!=e.error&&Bj("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Bj("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{Bj("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):Bj("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Fj("string"==typeof e.token),this.R=e.token,new Yj(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Jj(e,t){return e<t?-1:e>t?1:0}function Zj(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}class $j{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jj(Uj.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jj(Uj.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jj(Uj.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jj(Uj.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $j.fromMillis(Date.now())}static fromDate(e){return $j.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new $j(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jj(this.nanoseconds,e.nanoseconds):Jj(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class eV{constructor(e){this.timestamp=e}static fromTimestamp(e){return new eV(e)}static min(){return new eV(new $j(0,0))}static max(){return new eV(new $j(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tV{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nj(),void 0===n?n=e.length-t:n>e.length-t&&Nj(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===tV.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tV?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nV extends tV{construct(e,t,n){return new nV(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new jj(Uj.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new nV(e)}static emptyPath(){return new nV([])}}const iV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rV extends tV{construct(e,t,n){return new rV(e,t,n)}static isValidIdentifier(e){return iV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rV.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rV(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new jj(Uj.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new jj(Uj.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new jj(Uj.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(o=!o,i++):"."!==t||o?(n+=t,i++):(r(),i++)}if(r(),o)throw new jj(Uj.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rV(t)}static emptyPath(){return new rV([])}}class oV{constructor(e){this.path=e}static fromPath(e){return new oV(nV.fromString(e))}static fromName(e){return new oV(nV.fromString(e).popFirst(5))}static empty(){return new oV(nV.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nV.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nV.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oV(new nV(e.slice()))}}class aV{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}aV.UNKNOWN_ID=-1;function sV(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=eV.fromTimestamp(1e9===i?new $j(n+1,0):new $j(n,i));return new cV(r,oV.empty(),t)}function lV(e){return new cV(e.readTime,e.key,-1)}class cV{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new cV(eV.min(),oV.empty(),-1)}static max(){return new cV(eV.max(),oV.empty(),-1)}}function uV(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=oV.comparator(e.documentKey,t.documentKey),0!==n?n:Jj(e.largestBatchId,t.largestBatchId))}class hV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class dV{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nj(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dV((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof dV?t:dV.resolve(t)}catch(e){return dV.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dV.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dV.reject(t)}static resolve(e){return new dV((t,n)=>{t(e)})}static reject(e){return new dV((t,n)=>{n(e)})}static waitFor(e){return new dV((t,n)=>{let i=0,r=0,o=!1;e.forEach(e=>{++i,e.next(()=>{++r,o&&r===i&&t()},e=>n(e))}),o=!0,r===i&&t()})}static or(e){let t=dV.resolve(!1);for(const n of e)t=t.next(e=>e?dV.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new dV((n,i)=>{const r=e.length,o=new Array(r);let a=0;for(let s=0;s<r;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===r&&n(o)},e=>i(e))}})}static doWhile(e,t){return new dV((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function pV(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fV(e){return"IndexedDbTransactionError"===e.name}class mV{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function gV(e){return null==e}function vV(e){return 0===e&&1/e==-1/0}mV.oe=-1;const yV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bV=AV,xV=[...bV,"indexConfiguration","indexState","indexEntries"];function _V(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wV(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EV(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class CV{constructor(e,t){this.comparator=e,this.root=t||TV.EMPTY}insert(e,t){return new CV(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,TV.BLACK,null,null))}remove(e){return new CV(this.comparator,this.root.remove(e,this.comparator).copy(null,null,TV.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SV(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SV(this.root,e,this.comparator,!1)}getReverseIterator(){return new SV(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SV(this.root,e,this.comparator,!0)}}class SV{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class TV{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:TV.RED,this.left=null!=i?i:TV.EMPTY,this.right=null!=r?r:TV.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new TV(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return TV.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return TV.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,TV.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,TV.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nj();if(this.right.isRed())throw Nj();const e=this.left.check();if(e!==this.right.check())throw Nj();return e+(this.isRed()?0:1)}}TV.EMPTY=null,TV.RED=!0,TV.BLACK=!1,TV.EMPTY=new class{constructor(){this.size=0}get key(){throw Nj()}get value(){throw Nj()}get color(){throw Nj()}get left(){throw Nj()}get right(){throw Nj()}copy(e,t,n,i,r){return this}insert(e,t,n){return new TV(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class IV{constructor(e){this.comparator=e,this.data=new CV(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MV(this.data.getIterator())}getIteratorFrom(e){return new MV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof IV))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new IV(this.comparator);return t.data=e,t}}class MV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kV{constructor(e){this.fields=e,e.sort(rV.comparator)}static empty(){return new kV([])}unionWith(e){let t=new IV(rV.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kV(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zj(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class RV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class LV{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new RV("Invalid base64 string: "+e):e}}(e);return new LV(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new LV(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jj(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}LV.EMPTY_BYTE_STRING=new LV("");const BV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function PV(e){if(Fj(!!e),"string"==typeof e){let t=0;const n=BV.exec(e);if(Fj(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:DV(e.seconds),nanos:DV(e.nanos)}}function DV(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function OV(e){return"string"==typeof e?LV.fromBase64String(e):LV.fromUint8Array(e)}function NV(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function FV(e){const t=e.mapValue.fields.__previous_value__;return NV(t)?FV(t):t}function zV(e){const t=PV(e.mapValue.fields.__local_write_time__.timestampValue);return new $j(t.seconds,t.nanos)}class UV{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new UV("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof UV&&e.projectId===this.projectId&&e.database===this.database}}const jV={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function VV(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?NV(e)?4:tH(e)?9007199254740991:$V(e)?10:11:Nj()}function HV(e,t){if(e===t)return!0;const n=VV(e);if(n!==VV(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zV(e).isEqual(zV(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=PV(e.timestampValue),i=PV(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return OV(e.bytesValue).isEqual(OV(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return DV(e.geoPointValue.latitude)===DV(t.geoPointValue.latitude)&&DV(e.geoPointValue.longitude)===DV(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return DV(e.integerValue)===DV(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=DV(e.doubleValue),i=DV(t.doubleValue);return n===i?vV(n)===vV(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Zj(e.arrayValue.values||[],t.arrayValue.values||[],HV);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(_V(n)!==_V(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!HV(n[r],i[r])))return!1;return!0}(e,t);default:return Nj()}}function GV(e,t){return void 0!==(e.values||[]).find(e=>HV(e,t))}function QV(e,t){if(e===t)return 0;const n=VV(e),i=VV(t);if(n!==i)return Jj(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jj(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=DV(e.integerValue||e.doubleValue),i=DV(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return WV(e.timestampValue,t.timestampValue);case 4:return WV(zV(e),zV(t));case 5:return Jj(e.stringValue,t.stringValue);case 6:return function(e,t){const n=OV(e),i=OV(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Jj(n[r],i[r]);if(0!==e)return e}return Jj(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Jj(DV(e.latitude),DV(t.latitude));return 0!==n?n:Jj(DV(e.longitude),DV(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qV(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(i=s.value)||void 0===i?void 0:i.arrayValue,u=Jj((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:qV(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===jV.mapValue&&t===jV.mapValue)return 0;if(e===jV.mapValue)return 1;if(t===jV.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let a=0;a<i.length&&a<o.length;++a){const e=Jj(i[a],o[a]);if(0!==e)return e;const t=QV(n[i[a]],r[o[a]]);if(0!==t)return t}return Jj(i.length,o.length)}(e.mapValue,t.mapValue);default:throw Nj()}}function WV(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jj(e,t);const n=PV(e),i=PV(t),r=Jj(n.seconds,i.seconds);return 0!==r?r:Jj(n.nanos,i.nanos)}function qV(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=QV(n[r],i[r]);if(e)return e}return Jj(n.length,i.length)}function XV(e){return YV(e)}function YV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=PV(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return OV(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return oV.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=YV(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(YV(e.fields[r]));return n+"}"}(e.mapValue):Nj()}function KV(e){return!!e&&"integerValue"in e}function JV(e){return!!e&&"arrayValue"in e}function ZV(e){return!!e&&"mapValue"in e}function $V(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eH(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wV(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=eH(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=eH(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tH(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class nH{constructor(e){this.value=e}static empty(){return new nH({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ZV(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eH(t)}setAll(e){let t=rV.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=eH(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());ZV(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return HV(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];ZV(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){wV(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new nH(eH(this.value))}}class iH{constructor(e,t,n,i,r,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new iH(e,0,eV.min(),eV.min(),eV.min(),nH.empty(),0)}static newFoundDocument(e,t,n,i){return new iH(e,1,t,eV.min(),n,i,0)}static newNoDocument(e,t){return new iH(e,2,t,eV.min(),eV.min(),nH.empty(),0)}static newUnknownDocument(e,t){return new iH(e,3,t,eV.min(),eV.min(),nH.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(eV.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nH.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nH.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=eV.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof iH&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new iH(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rH{constructor(e,t){this.position=e,this.inclusive=t}}function oH(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const o=t[r],a=e.position[r];if(i=o.field.isKeyField()?oV.comparator(oV.fromName(a.referenceValue),n.key):QV(a,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function aH(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!HV(e.position[n],t.position[n]))return!1;return!0}class sH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function lH(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cH{}class uH extends cH{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new yH(e,t,n):"array-contains"===t?new _H(e,n):"in"===t?new wH(e,n):"not-in"===t?new EH(e,n):"array-contains-any"===t?new CH(e,n):new uH(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new AH(e,n):new bH(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(QV(t,this.value)):null!==t&&VV(this.value)===VV(t)&&this.matchesComparison(QV(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nj()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hH extends cH{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new hH(e,t)}matches(e){return dH(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dH(e){return"and"===e.op}function pH(e){return fH(e)&&dH(e)}function fH(e){for(const t of e.filters)if(t instanceof hH)return!1;return!0}function mH(e){if(e instanceof uH)return e.field.canonicalString()+e.op.toString()+XV(e.value);if(pH(e))return e.filters.map(e=>mH(e)).join(",");{const t=e.filters.map(e=>mH(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function gH(e,t){return e instanceof uH?function(e,t){return t instanceof uH&&e.op===t.op&&e.field.isEqual(t.field)&&HV(e.value,t.value)}(e,t):e instanceof hH?function(e,t){return t instanceof hH&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&gH(n,t.filters[i]),!0)}(e,t):void Nj()}function vH(e){return e instanceof uH?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(XV(e.value))}(e):e instanceof hH?function(e){return e.op.toString()+" {"+e.getFilters().map(vH).join(" ,")+"}"}(e):"Filter"}class yH extends uH{constructor(e,t,n){super(e,t,n),this.key=oV.fromName(n.referenceValue)}matches(e){const t=oV.comparator(e.key,this.key);return this.matchesComparison(t)}}class AH extends uH{constructor(e,t){super(e,"in",t),this.keys=xH("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bH extends uH{constructor(e,t){super(e,"not-in",t),this.keys=xH("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xH(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>oV.fromName(e.referenceValue))}class _H extends uH{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return JV(t)&&GV(t.arrayValue,this.value)}}class wH extends uH{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&GV(this.value.arrayValue,t)}}class EH extends uH{constructor(e,t){super(e,"not-in",t)}matches(e){if(GV(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!GV(this.value.arrayValue,t)}}class CH extends uH{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!JV(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>GV(this.value.arrayValue,e))}}class SH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}}function TH(e){return new SH(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function IH(e){const t=zj(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>mH(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),gV(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>XV(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>XV(e)).join(",")),t.ue=e}return t.ue}function MH(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lH(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gH(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!aH(e.startAt,t.startAt)&&aH(e.endAt,t.endAt)}class kH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function RH(e,t,n,i,r,o,a,s){return new kH(e,t,n,i,r,o,a,s)}function LH(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function BH(e){return null!==e.collectionGroup}function PH(e){const t=zj(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new IV(rV.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);i.forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new sH(i,n))}),e.has(rV.keyField().canonicalString())||t.ce.push(new sH(rV.keyField(),n))}return t.ce}function DH(e){const t=zj(e);return t.le||(t.le=OH(t,PH(e))),t.le}function OH(e,t){if("F"===e.limitType)return TH(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new sH(e.field,t)});const n=e.endAt?new rH(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new rH(e.startAt.position,e.startAt.inclusive):null;return TH(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function NH(e,t,n){return new kH(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function FH(e,t){return MH(DH(e),DH(t))&&e.limitType===t.limitType}function zH(e){return"".concat(IH(DH(e)),"|lt:").concat(e.limitType)}function UH(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>vH(e)).join(", "),"]")),gV(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>XV(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>XV(e)).join(",")),"Target(".concat(t,")")}(DH(e)),"; limitType=").concat(e.limitType,")")}function jH(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):oV.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of PH(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=oH(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,PH(e),t))&&!(e.endAt&&!function(e,t,n){const i=oH(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,PH(e),t))}(e,t)}function VH(e){return(t,n)=>{let i=!1;for(const r of PH(e)){const e=HH(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function HH(e,t,n){const i=e.field.isKeyField()?oV.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?QV(i,r):Nj()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Nj()}}class GH{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wV(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return EV(this.inner)}size(){return this.innerSize}}const QH=new CV(oV.comparator);function WH(){return QH}const qH=new CV(oV.comparator);function XH(){let e=qH;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function YH(e){let t=qH;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function KH(){return ZH()}function JH(){return ZH()}function ZH(){return new GH(e=>e.toString(),(e,t)=>e.isEqual(t))}new CV(oV.comparator);const $H=new IV(oV.comparator);function eG(){let e=$H;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const tG=new IV(Jj);function nG(){return tG}function iG(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vV(t)?"-0":t}}function rG(e){return{integerValue:""+e}}class oG{constructor(){this._=void 0}}function aG(e,t,n){return e instanceof cG?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&NV(t)&&(t=FV(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof uG?hG(e,t):e instanceof dG?pG(e,t):function(e,t){const n=lG(e,t),i=mG(n)+mG(e.Pe);return KV(n)&&KV(e.Pe)?rG(i):iG(e.serializer,i)}(e,t)}function sG(e,t,n){return e instanceof uG?hG(e,t):e instanceof dG?pG(e,t):n}function lG(e,t){return e instanceof fG?function(e){return KV(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class cG extends oG{}class uG extends oG{constructor(e){super(),this.elements=e}}function hG(e,t){const n=gG(t);for(const i of e.elements)n.some(e=>HV(e,i))||n.push(i);return{arrayValue:{values:n}}}class dG extends oG{constructor(e){super(),this.elements=e}}function pG(e,t){let n=gG(t);for(const i of e.elements)n=n.filter(e=>!HV(e,i));return{arrayValue:{values:n}}}class fG extends oG{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function mG(e){return DV(e.integerValue||e.doubleValue)}function gG(e){return JV(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vG{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vG}static exists(e){return new vG(void 0,e)}static updateTime(e){return new vG(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yG(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class AG{}function bG(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new MG(e.key,vG.none()):new EG(e.key,e.data,vG.none());{const n=e.data,i=nH.empty();let r=new IV(rV.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new CG(e.key,i,new kV(r.toArray()),vG.none())}}function xG(e,t,n){e instanceof EG?function(e,t,n){const i=e.value.clone(),r=TG(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof CG?function(e,t,n){if(!yG(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=TG(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(SG(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _G(e,t,n,i){return e instanceof EG?function(e,t,n,i){if(!yG(e.precondition,t))return n;const r=e.value.clone(),o=IG(e.fieldTransforms,i,t);return r.setAll(o),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof CG?function(e,t,n,i){if(!yG(e.precondition,t))return n;const r=IG(e.fieldTransforms,i,t),o=t.data;return o.setAll(SG(e)),o.setAll(r),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return yG(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function wG(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zj(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof uG&&t instanceof uG||e instanceof dG&&t instanceof dG?Zj(e.elements,t.elements,HV):e instanceof fG&&t instanceof fG?HV(e.Pe,t.Pe):e instanceof cG&&t instanceof cG}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class EG extends AG{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class CG extends AG{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function SG(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function TG(e,t,n){const i=new Map;Fj(e.length===n.length);for(let r=0;r<n.length;r++){const o=e[r],a=o.transform,s=t.data.field(o.field);i.set(o.field,sG(a,s,n[r]))}return i}function IG(e,t,n){const i=new Map;for(const r of e){const e=r.transform,o=n.data.field(r.field);i.set(r.field,aG(e,o,t))}return i}class MG extends AG{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kG{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&xG(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=_G(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=_G(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=JH();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(i.key)?null:a;const s=bG(o,a);null!==s&&n.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(eV.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),eG())}isEqual(e){return this.batchId===e.batchId&&Zj(this.mutations,e.mutations,(e,t)=>wG(e,t))&&Zj(this.baseMutations,e.baseMutations,(e,t)=>wG(e,t))}}class RG{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var LG,BG;function PG(e){if(void 0===e)return Pj("GRPC error has no .code"),Uj.UNKNOWN;switch(e){case LG.OK:return Uj.OK;case LG.CANCELLED:return Uj.CANCELLED;case LG.UNKNOWN:return Uj.UNKNOWN;case LG.DEADLINE_EXCEEDED:return Uj.DEADLINE_EXCEEDED;case LG.RESOURCE_EXHAUSTED:return Uj.RESOURCE_EXHAUSTED;case LG.INTERNAL:return Uj.INTERNAL;case LG.UNAVAILABLE:return Uj.UNAVAILABLE;case LG.UNAUTHENTICATED:return Uj.UNAUTHENTICATED;case LG.INVALID_ARGUMENT:return Uj.INVALID_ARGUMENT;case LG.NOT_FOUND:return Uj.NOT_FOUND;case LG.ALREADY_EXISTS:return Uj.ALREADY_EXISTS;case LG.PERMISSION_DENIED:return Uj.PERMISSION_DENIED;case LG.FAILED_PRECONDITION:return Uj.FAILED_PRECONDITION;case LG.ABORTED:return Uj.ABORTED;case LG.OUT_OF_RANGE:return Uj.OUT_OF_RANGE;case LG.UNIMPLEMENTED:return Uj.UNIMPLEMENTED;case LG.DATA_LOSS:return Uj.DATA_LOSS;default:return Nj()}}(BG=LG||(LG={}))[BG.OK=0]="OK",BG[BG.CANCELLED=1]="CANCELLED",BG[BG.UNKNOWN=2]="UNKNOWN",BG[BG.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",BG[BG.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",BG[BG.NOT_FOUND=5]="NOT_FOUND",BG[BG.ALREADY_EXISTS=6]="ALREADY_EXISTS",BG[BG.PERMISSION_DENIED=7]="PERMISSION_DENIED",BG[BG.UNAUTHENTICATED=16]="UNAUTHENTICATED",BG[BG.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",BG[BG.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",BG[BG.ABORTED=10]="ABORTED",BG[BG.OUT_OF_RANGE=11]="OUT_OF_RANGE",BG[BG.UNIMPLEMENTED=12]="UNIMPLEMENTED",BG[BG.INTERNAL=13]="INTERNAL",BG[BG.UNAVAILABLE=14]="UNAVAILABLE",BG[BG.DATA_LOSS=15]="DATA_LOSS";new mj([4294967295,4294967295],0);Error;class DG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function OG(e){return Fj(!!e),eV.fromTimestamp(function(e){const t=PV(e);return new $j(t.seconds,t.nanos)}(e))}function NG(e,t){const n=function(e){return new nV(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function FG(e){const t=nV.fromString(e);return Fj(GG(t)),t}function zG(e){const t=FG(e);return 4===t.length?nV.emptyPath():UG(t)}function UG(e){return Fj(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jG(e){let t=zG(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Fj(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=VG(e);return t instanceof hH&&pH(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new sH(HG(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,gV(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rH(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rH(n,t)}(n.endAt)),RH(t,r,a,o,s,"F",l,c)}function VG(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=HG(e.unaryFilter.field);return uH.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=HG(e.unaryFilter.field);return uH.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=HG(e.unaryFilter.field);return uH.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=HG(e.unaryFilter.field);return uH.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Nj()}}(e):void 0!==e.fieldFilter?function(e){return uH.create(HG(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nj()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hH.create(e.compositeFilter.filters.map(e=>VG(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nj()}}(e.compositeFilter.op))}(e):Nj()}function HG(e){return rV.fromServerFormat(e.fieldPath)}function GG(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class QG{constructor(e){this.ct=e}}function WG(e){const t=jG({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?NH(t,t.limit,"L"):t}class qG{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(DV(e.integerValue));else if("doubleValue"in e){const n=DV(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),vV(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=PV(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(OV(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?tH(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$V(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Nj()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const r=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(n=r[o].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(DV(a)),this.Vt(o,t),this.Tt(r[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),oV.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qG.vt=new qG;class XG{constructor(){this.un=new YG}addToCollectionParentIndex(e,t){return this.un.add(t),dV.resolve()}getCollectionParents(e,t){return dV.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return dV.resolve()}deleteFieldIndex(e,t){return dV.resolve()}deleteAllFieldIndexes(e){return dV.resolve()}createTargetIndexes(e,t){return dV.resolve()}getDocumentsMatchingTarget(e,t){return dV.resolve(null)}getIndexType(e,t){return dV.resolve(0)}getFieldIndexes(e,t){return dV.resolve([])}getNextCollectionGroupToUpdate(e){return dV.resolve(null)}getMinOffset(e,t){return dV.resolve(cV.min())}getMinOffsetFromCollectionGroup(e,t){return dV.resolve(cV.min())}updateCollectionGroup(e,t,n){return dV.resolve()}updateIndexEntries(e,t){return dV.resolve()}}class YG{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new IV(nV.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new IV(nV.comparator)).toArray()}}new Uint8Array(0);class KG{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new KG(e,KG.DEFAULT_COLLECTION_PERCENTILE,KG.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}KG.DEFAULT_COLLECTION_PERCENTILE=10,KG.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,KG.DEFAULT=new KG(41943040,KG.DEFAULT_COLLECTION_PERCENTILE,KG.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),KG.DISABLED=new KG(-1,0,0);class JG{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new JG(0)}static kn(){return new JG(-1)}}class ZG{constructor(){this.changes=new GH(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,iH.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dV.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $G{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eQ{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&_G(n.mutation,e,kV.empty(),$j.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,eG()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eG();const i=KH();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=XH();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=KH();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,eG()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=WH();const o=ZH(),a=ZH();return t.forEach((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof CG)?r=r.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),_G(a.mutation,t,a.mutation.getFieldMask(),$j.now())):o.set(t.key,kV.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new $G(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ZH();let i=new CV((e,t)=>e-t),r=eG();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||kV.empty();a=r.applyToLocalView(o,a),n.set(e,a);const s=(i.get(r.batchId)||eG()).add(e);i=i.insert(r.batchId,s)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),s=i.key,l=i.value,c=JH();l.forEach(e=>{if(!r.has(e)){const i=bG(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return dV.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return oV.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BH(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):dV.resolve(KH());let a=-1,s=r;return o.next(t=>dV.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?dV.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,s,t,eG())).next(e=>({batchId:a,changes:YH(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oV(t)).next(e=>{let t=XH();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let o=XH();return this.indexManager.getCollectionParents(e,r).next(a=>dV.forEach(a,a=>{const s=function(e,t){return new kH(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n,i).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i))).next(e=>{r.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,iH.newInvalidDocument(i)))});let n=XH();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&_G(o.mutation,i,kV.empty(),$j.now()),jH(t,i)&&(n=n.insert(e,i))}),n})}}class tQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return dV.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:OG(e.createTime)}}(t)),dV.resolve()}getNamedQuery(e,t){return dV.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:WG(e.bundledQuery),readTime:OG(e.readTime)}}(t)),dV.resolve()}}class nQ{constructor(){this.overlays=new CV(oV.comparator),this.Ir=new Map}getOverlay(e,t){return dV.resolve(this.overlays.get(t))}getOverlays(e,t){const n=KH();return dV.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.ht(e,t,i)}),dV.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),dV.resolve()}getOverlaysForCollection(e,t,n){const i=KH(),r=t.length+1,o=new oV(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return dV.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new CV((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=KH(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=KH(),s=r.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=i)););return dV.resolve(a)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new RG(t,n));let r=this.Ir.get(t);void 0===r&&(r=eG(),this.Ir.set(t,r)),this.Ir.set(t,r.add(n.key))}}class iQ{constructor(){this.sessionToken=LV.EMPTY_BYTE_STRING}getSessionToken(e){return dV.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,dV.resolve()}}class rQ{constructor(){this.Tr=new IV(oQ.Er),this.dr=new IV(oQ.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new oQ(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new oQ(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new oV(new nV([])),n=new oQ(t,e),i=new oQ(t,e+1),r=[];return this.dr.forEachInRange([n,i],e=>{this.Vr(e),r.push(e.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new oV(new nV([])),n=new oQ(t,e),i=new oQ(t,e+1);let r=eG();return this.dr.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new oQ(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class oQ{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return oV.comparator(e.key,t.key)||Jj(e.wr,t.wr)}static Ar(e,t){return Jj(e.wr,t.wr)||oV.comparator(e.key,t.key)}}class aQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new IV(oQ.Er)}checkEmpty(e){return dV.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kG(r,t,n,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new oQ(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return dV.resolve(o)}lookupMutationBatch(e,t){return dV.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),r=i<0?0:i;return dV.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return dV.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return dV.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new oQ(t,0),i=new oQ(t,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([n,i],e=>{const t=this.Dr(e.wr);r.push(t)}),dV.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new IV(Jj);return t.forEach(e=>{const t=new oQ(e,0),i=new oQ(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,i],e=>{n=n.add(e.wr)})}),dV.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;oV.isDocumentKey(r)||(r=r.child(""));const o=new oQ(new oV(r),0);let a=new IV(Jj);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.wr)),!0)},o),dV.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Fj(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return dV.forEach(t.mutations,i=>{const r=new oQ(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new oQ(t,0),i=this.br.firstAfterOrEqual(n);return dV.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,dV.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sQ{constructor(e){this.Mr=e,this.docs=new CV(oV.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dV.resolve(n?n.document.mutableCopy():iH.newInvalidDocument(t))}getEntries(e,t){let n=WH();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():iH.newInvalidDocument(e))}),dV.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=WH();const o=t.path,a=new oV(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||uV(lV(a),n)<=0||(i.has(a.key)||jH(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return dV.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Nj()}Or(e,t){return dV.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new lQ(this)}getSize(e){return dV.resolve(this.size)}}class lQ extends ZG{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),dV.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class cQ{constructor(e){this.persistence=e,this.Nr=new GH(e=>IH(e),MH),this.lastRemoteSnapshotVersion=eV.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rQ,this.targetCount=0,this.kr=JG.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),dV.resolve()}getLastRemoteSnapshotVersion(e){return dV.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dV.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),dV.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),dV.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new JG(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,dV.resolve()}updateTargetData(e,t){return this.Kn(t),dV.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,dV.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),dV.waitFor(r).next(()=>i)}getTargetCount(e){return dV.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return dV.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),dV.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),dV.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),dV.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return dV.resolve(n)}containsKey(e,t){return dV.resolve(this.Br.containsKey(t))}}class uQ{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mV(0),this.Kr=!1,this.Kr=!0,this.$r=new iQ,this.referenceDelegate=e(this),this.Ur=new cQ(this),this.indexManager=new XG,this.remoteDocumentCache=function(e){return new sQ(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new QG(t),this.Gr=new tQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new aQ(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Bj("MemoryPersistence","Starting transaction:",e);const i=new hQ(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(e=>this.referenceDelegate.jr(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Hr(e,t){return dV.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class hQ extends hV{constructor(e){super(),this.currentSequenceNumber=e}}class dQ{constructor(e){this.persistence=e,this.Jr=new rQ,this.Yr=null}static Zr(e){return new dQ(e)}get Xr(){if(this.Yr)return this.Yr;throw Nj()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),dV.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),dV.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),dV.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dV.forEach(this.Xr,n=>{const i=oV.fromPath(n);return this.ei(e,i).next(e=>{e||t.removeEntry(i,eV.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return dV.or([()=>dV.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class pQ{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=eG(),i=eG();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new pQ(e,t.fromCache,n,i)}}class fQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mQ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=qN()?8:pV(WN())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.Yi(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.Zi(e,t,i,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new fQ;return this.Xi(e,t,n).next(i=>{if(r.result=i,this.zi)return this.es(e,t,n,i.size)})}).next(()=>r.result)}es(e,t,n,i){return n.documentReadCount<this.ji?(Lj()<=dF.DEBUG&&Bj("QueryEngine","SDK will not create cache indexes for query:",UH(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),dV.resolve()):(Lj()<=dF.DEBUG&&Bj("QueryEngine","Query:",UH(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Lj()<=dF.DEBUG&&Bj("QueryEngine","The SDK decides to create cache indexes for query:",UH(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,DH(t))):dV.resolve())}Yi(e,t){if(LH(t))return dV.resolve(null);let n=DH(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=NH(t,null,"F"),n=DH(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=eG(...i);return this.Ji.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ts(t,i);return this.ns(t,o,r,n.readTime)?this.Yi(e,NH(t,null,"F")):this.rs(e,o,t,n)}))})))}Zi(e,t,n,i){return LH(t)||i.isEqual(eV.min())?dV.resolve(null):this.Ji.getDocuments(e,n).next(r=>{const o=this.ts(t,r);return this.ns(t,o,n,i)?dV.resolve(null):(Lj()<=dF.DEBUG&&Bj("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),UH(t)),this.rs(e,o,t,sV(i,-1)).next(e=>e))})}ts(e,t){let n=new IV(VH(e));return t.forEach((t,i)=>{jH(e,i)&&(n=n.add(i))}),n}ns(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Xi(e,t,n){return Lj()<=dF.DEBUG&&Bj("QueryEngine","Using full collection scan to execute query:",UH(t)),this.Ji.getDocumentsMatchingQuery(e,t,cV.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class gQ{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new CV(Jj),this._s=new GH(e=>IH(e),MH),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eQ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function vQ(e,t,n,i){return new gQ(e,t,n,i)}async function yQ(e,t){const n=zj(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],o=[];let a=eG();for(const e of i){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:r,addedBatchIds:o}))})})}class AQ{constructor(){this.activeTargetIds=nG()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bQ{constructor(){this.so=new AQ,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new AQ,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xQ{_o(e){}shutdown(){}}class _Q{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Bj("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Bj("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wQ=null;function EQ(){return null===wQ?wQ=268435456+Math.round(2147483648*Math.random()):wQ++,"0x"+wQ.toString(16)}const CQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SQ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const TQ="WebChannelConnection";class IQ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Fo(){return!1}Mo(e,t,n,i,r){const o=EQ(),a=this.xo(e,t.toUriEncodedString());Bj("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,i,r),this.No(e,a,s,n).then(t=>(Bj("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Dj("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,i,r,o){return this.Mo(e,t,n,i,r)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kj,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=CQ[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const r=EQ();return new Promise((o,a)=>{const s=new yj;s.setWithCredentials(!0),s.listenOnce(bj.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case xj.NO_ERROR:const t=s.getResponseJson();Bj(TQ,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),o(t);break;case xj.TIMEOUT:Bj(TQ,"RPC '".concat(e,"' ").concat(r," timed out")),a(new jj(Uj.DEADLINE_EXCEEDED,"Request time out"));break;case xj.HTTP_ERROR:const n=s.getStatus();if(Bj(TQ,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Uj).indexOf(t)>=0?t:Uj.UNKNOWN}(t.status);a(new jj(e,t.message))}else a(new jj(Uj.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new jj(Uj.UNAVAILABLE,"Connection failed."));break;default:Nj()}}finally{Bj(TQ,"RPC '".concat(e,"' ").concat(r," completed."))}});const l=JSON.stringify(i);Bj(TQ,"RPC '".concat(e,"' ").concat(r," sending request:"),i),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const i=EQ(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Cj(),a=Ej(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=r.join("");Bj(TQ,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),s);const u=o.createWebChannel(c,s);let h=!1,d=!1;const p=new SQ({Io:t=>{d?Bj(TQ,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(Bj(TQ,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},To:()=>u.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(u,Aj.EventType.OPEN,()=>{d||(Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),p.yo())}),f(u,Aj.EventType.CLOSE,()=>{d||(d=!0,Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," transport closed")),p.So())}),f(u,Aj.EventType.ERROR,t=>{d||(d=!0,Dj(TQ,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),p.So(new jj(Uj.UNAVAILABLE,"The operation could not be completed")))}),f(u,Aj.EventType.MESSAGE,t=>{var n;if(!d){const r=t.data[0];Fj(!!r);const o=r,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," received error:"),a);const t=a.status;let n=function(e){const t=LG[e];if(void 0!==t)return PG(t)}(t),r=a.message;void 0===n&&(n=Uj.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),d=!0,p.So(new jj(n,r)),u.close()}else Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," received:"),r),p.bo(r)}}),f(a,wj.STAT_EVENT,t=>{t.stat===_j.PROXY?Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===_j.NOPROXY&&Bj(TQ,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{p.wo()},0),p}}function MQ(){return"undefined"!=typeof document?document:null}function kQ(e){return new DG(e,!0)}class RQ{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&Bj("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class LQ extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new jj(Uj.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[o,a]=r;return this.connection.Mo(e,NG(t,n),i,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Uj.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jj(Uj.UNKNOWN,e.toString())})}Lo(e,t,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Lo(e,NG(t,n),i,a,s,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Uj.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jj(Uj.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BQ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Pj(t),this.D_=!1):Bj("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class PQ{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(e=>{n.enqueueAndForget(async()=>{NQ(this)&&(Bj("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=zj(e);t.L_.add(4),await OQ(t),t.q_.set("Unknown"),t.L_.delete(4),await DQ(t)}(this))})}),this.q_=new BQ(n,i)}}async function DQ(e){if(NQ(e))for(const t of e.B_)await t(!0)}async function OQ(e){for(const t of e.B_)await t(!1)}function NQ(e){return 0===zj(e).L_.size}async function FQ(e,t){const n=zj(e);t?(n.L_.delete(2),await DQ(n)):t||(n.L_.add(2),await OQ(n),n.q_.set("Unknown"))}class zQ{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Vj,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const o=Date.now()+n,a=new zQ(e,t,o,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jj(Uj.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class UQ{constructor(){this.queries=jQ(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=zj(e),i=n.queries;n.queries=jQ(),i.forEach((e,n)=>{for(const i of n.j_)i.onError(t)})}(this,new jj(Uj.ABORTED,"Firestore shutting down"))}}function jQ(){return new GH(e=>zH(e),FH)}function VQ(e){e.Y_.forEach(e=>{e.next()})}var HQ,GQ;(GQ=HQ||(HQ={})).ea="default",GQ.Cache="cache";class QQ{constructor(e,t,n,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new GH(e=>zH(e),FH),this.Ma=new Map,this.xa=new Set,this.Oa=new CV(oV.comparator),this.Na=new Map,this.La=new rQ,this.Ba={},this.ka=new Map,this.qa=JG.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function WQ(e,t,n){const i=zj(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Fa.forEach((n,i)=>{const r=i.view.Z_(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=zj(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.j_)r.Z_(t)&&(i=!0)}),i&&VQ(n)}(i.eventManager,t),e.length&&i.Ca.d_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function qQ(e,t,n){const i=zj(e),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((e,s)=>{a.push(i.Ka(s,t,n).then(e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(s.targetId,r?"current":"not-current")}if(e){r.push(e);const t=pQ.Wi(s.targetId,e);o.push(t)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(e,t){const n=zj(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>dV.forEach(t,t=>dV.forEach(t.$i,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>dV.forEach(t.Ui,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!fV(e))throw e;Bj("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.os=n.os.insert(e,r)}}}(i.localStore,o))}async function XQ(e,t){const n=zj(e);if(!n.currentUser.isEqual(t)){Bj("SyncEngine","User change. New user:",t.toKey());const e=await yQ(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new jj(Uj.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await qQ(n,e.hs)}}class YQ{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kQ(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return vQ(this.persistence,new mQ,e.initialUser,this.serializer)}Ga(e){return new uQ(dQ.Zr,this.serializer)}Wa(e){return new bQ}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}YQ.provider={build:()=>new YQ};class KQ{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>WQ(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=XQ.bind(null,this.syncEngine),await FQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new UQ}createDatastore(e){const t=kQ(e.databaseInfo.databaseId),n=function(e){return new IQ(e)}(e.databaseInfo);return function(e,t,n,i){return new LQ(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new PQ(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,e=>WQ(this.syncEngine,e,0),_Q.D()?new _Q:new xQ)}createSyncEngine(e,t){return function(e,t,n,i,r,o,a){const s=new QQ(e,t,n,i,r,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=zj(e);Bj("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await OQ(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}KQ.provider={build:()=>new KQ};function JQ(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ZQ=new Map;function $Q(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Nj()}function eW(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jj(Uj.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$Q(e);throw new jj(Uj.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class tW{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new jj(Uj.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jj(Uj.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new jj(Uj.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JQ(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new jj(Uj.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new jj(Uj.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new jj(Uj.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nW{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tW({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new jj(Uj.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jj(Uj.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tW(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gj;switch(e.type){case"firstParty":return new Xj(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jj(Uj.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ZQ.get(e);t&&(Bj("ComponentProvider","Removing Datastore"),ZQ.delete(e),t.terminate())}(this),Promise.resolve()}}class iW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new RQ(this,"async_queue_retry"),this.Vu=()=>{const e=MQ();e&&Bj("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=MQ();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=MQ();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Vj;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(QJ){if(!fV(QJ))throw QJ;Bj("AsyncQueue","Operation failed with retryable error: "+QJ)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Pj("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=zQ.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(i),i}fu(){this.Eu&&Nj()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class rW extends nW{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new iW,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iW(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kj=e}(xz),gz(new aF("firestore",(e,n)=>{let{instanceIdentifier:i,options:r}=n;const o=e.getProvider("app").getImmediate(),a=new rW(new Wj(e.getProvider("auth-internal")),new Kj(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jj(Uj.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new UV(e.options.projectId,t)}(o,i),o);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Ez(Ij,"4.7.3",e),Ez(Ij,"4.7.3","esm2017")}();function oW(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function aW(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(QJ){o(QJ)}}function s(e){try{l(i.throw(e))}catch(QJ){o(QJ)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function sW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lW=sW,cW=new KN("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),uW=new vF("@firebase/auth");function hW(e){if(uW.logLevel<=dF.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];uW.error("Auth (".concat(xz,"): ").concat(e),...n)}}function dW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw gW(e,...n)}function pW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return gW(e,...n)}function fW(e,t,n){const i=Object.assign(Object.assign({},lW()),{[t]:n});return new KN("auth","Firebase",i).create(t,{appName:e.name})}function mW(e){return fW(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return cW.create(e,...n)}function vW(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw gW(t,...i)}}function yW(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hW(t),new Error(t)}function AW(e,t){e||yW(t)}function bW(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xW(){return"http:"===_W()||"https:"===_W()}function _W(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function wW(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xW()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class EW{constructor(e,t){this.shortDelay=e,this.longDelay=t,AW(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(WN())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return wW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function CW(e,t){AW(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class SW{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void yW("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void yW("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void yW("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const TW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},IW=new EW(3e4,6e4);function MW(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kW(e,t,n,i){return RW(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},o={};i&&("GET"===t?o=i:r={body:JSON.stringify(i)});const a=eF(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),SW.fetch()(BW(e,e.config.apiHost,n,a),l)})}async function RW(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},TW),t);try{const t=new DW(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw OW(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw OW(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw OW(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw OW(e,"user-disabled",o);const s=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw fW(e,s,a);dW(e,s)}}catch(QJ){if(QJ instanceof YN)throw QJ;dW(e,"network-request-failed",{message:String(QJ)})}}async function LW(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await kW(e,t,n,i,r);return"mfaPendingCredential"in o&&dW(e,"multi-factor-auth-required",{_serverResponse:o}),o}function BW(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?CW(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function PW(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DW{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pW(this.auth,"network-request-failed")),IW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function OW(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=pW(e,t,i);return r.customData._tokenResponse=n,r}function NW(e){return void 0!==e&&void 0!==e.enterprise}class FW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PW(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function zW(e,t){return kW(e,"GET","/v2/recaptchaConfig",MW(e,t))}async function UW(e,t){return kW(e,"POST","/v1/accounts:lookup",t)}function jW(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(QJ){}}function VW(e){return 1e3*Number(e)}function HW(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return hW("JWT malformed, contained fewer than 3 sections"),null;try{const e=NN(n);return e?JSON.parse(e):(hW("Failed to decode base64 JWT payload"),null)}catch(QJ){return hW("Caught error parsing JWT payload as JSON",null===QJ||void 0===QJ?void 0:QJ.toString()),null}}function GW(e){const t=HW(e);return vW(t,"internal-error"),vW("undefined"!==typeof t.exp,"internal-error"),vW("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function QW(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(QJ){throw QJ instanceof YN&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(QJ)&&e.auth.currentUser===e&&await e.auth.signOut(),QJ}}class WW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(QJ){return void((null===QJ||void 0===QJ?void 0:QJ.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class qW{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jW(this.lastLoginAt),this.creationTime=jW(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function XW(e){var t;const n=e.auth,i=await e.getIdToken(),r=await QW(e,UW(n,{idToken:i}));vW(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const o=r.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?YW(o.providerUserInfo):[],s=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new qW(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function YW(e){return e.map(e=>{var{providerId:t}=e,n=oW(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class KW{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vW(e.idToken,"internal-error"),vW("undefined"!==typeof e.idToken,"internal-error"),vW("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):GW(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vW(0!==e.length,"internal-error");const t=GW(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vW(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await RW(e,{},async()=>{const n=eF({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=BW(e,i,"/v1/token","key=".concat(r)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",SW.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,o=new KW;return n&&(vW("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),i&&(vW("string"===typeof i,"internal-error",{appName:e}),o.accessToken=i),r&&(vW("number"===typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new KW,this.toJSON())}_performRefresh(){return yW("not implemented")}}function JW(e,t){vW("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ZW{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=oW(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new qW(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await QW(this,this.stsTokenManager.getToken(this.auth,e));return vW(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=oF(e),i=await n.getIdToken(t),r=HW(i);vW(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"===typeof r.firebase?r.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:jW(VW(r.auth_time)),issuedAtTime:jW(VW(r.iat)),expirationTime:jW(VW(r.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=oF(e);await XW(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vW(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ZW(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vW(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await XW(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yz(this.auth.app))return Promise.reject(mW(this.auth));const e=await this.getIdToken();return await QW(this,async function(e,t){return kW(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:A,isAnonymous:b,providerData:x,stsTokenManager:_}=t;vW(y&&_,e,"internal-error");const w=KW.fromJSON(this.name,_);vW("string"===typeof y,e,"internal-error"),JW(u,e.name),JW(h,e.name),vW("boolean"===typeof A,e,"internal-error"),vW("boolean"===typeof b,e,"internal-error"),JW(d,e.name),JW(p,e.name),JW(f,e.name),JW(m,e.name),JW(g,e.name),JW(v,e.name);const E=new ZW({uid:y,auth:e,email:h,emailVerified:A,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:w,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new KW;i.updateFromServerResponse(t);const r=new ZW({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await XW(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];vW(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?YW(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),a=new KW;a.updateFromIdToken(n);const s=new ZW({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new qW(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(s,l),s}}const $W=new Map;function eq(e){AW(e instanceof Function,"Expected a class definition");let t=$W.get(e);return t?(AW(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$W.set(e,t),t)}class tq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tq.type="NONE";const nq=tq;function iq(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class rq{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=iq(this.userKey,i.apiKey,r),this.fullPersistenceKey=iq("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ZW._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new rq(eq(nq),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||eq(nq);const o=iq(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){const n=ZW._fromJSON(e,t);l!==r&&(a=n),r=l;break}}catch(aE){}const s=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&s.length?(r=s[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(o)}catch(aE){}})),new rq(r,e,n)):new rq(r,e,n)}}function oq(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cq(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aq(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hq(t))return"Blackberry";if(dq(t))return"Webos";if(sq(t))return"Safari";if((t.includes("chrome/")||lq(t))&&!t.includes("edge/"))return"Chrome";if(uq(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function aq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/firefox\//i.test(e)}function sq(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/crios\//i.test(e)}function cq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/iemobile/i.test(e)}function uq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/android/i.test(e)}function hq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/blackberry/i.test(e)}function dq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/webos/i.test(e)}function pq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fq(){return function(){const e=WN();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN();return pq(e)||uq(e)||dq(e)||hq(e)||/windows phone/i.test(e)||cq(e)}function gq(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oq(WN());break;case"Worker":t="".concat(oq(WN()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xz,"/").concat(i)}class vq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(QJ){i(QJ)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(QJ){t.reverse();for(const n of t)try{n()}catch(cg){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===QJ||void 0===QJ?void 0:QJ.message})}}}class yq{constructor(e){var t,n,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(i=s.containsLowercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(r=s.containsUppercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Aq{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xq(this),this.idTokenSubscription=new xq(this),this.beforeStateQueue=new vq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eq(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await rq.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(QJ){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await UW(this,{idToken:e}),n=await ZW._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yz(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(QJ){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(QJ))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return vW(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(QJ){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await XW(e)}catch(QJ){if((null===QJ||void 0===QJ?void 0:QJ.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yz(this.app))return Promise.reject(mW(this));const t=e?oF(e):null;return t&&vW(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vW(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yz(this.app)?Promise.reject(mW(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yz(this.app)?Promise.reject(mW(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eq(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return kW(e,"GET","/v2/passwordPolicy",MW(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new yq(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new KN("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return kW(e,"POST","/v2/accounts:revokeToken",MW(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&eq(e)||this._popupRedirectResolver;vW(t,this,"argument-error"),this.redirectPersistenceManager=await rq.create(this,[eq(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vW(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{o=!0,r()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vW(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(uW.logLevel<=dF.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];uW.warn("Auth (".concat(xz,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function bq(e){return oF(e)}class xq{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new iF(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return vW(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _q={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wq(e){return _q.loadJS(e)}function Eq(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Cq{constructor(e){this.type="recaptcha-enterprise",this.auth=bq(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;NW(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{zW(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new FW(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&NW(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=_q.recaptchaEnterpriseScript;0!==t.length&&(t+=r),wq(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Sq(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Cq(e);let o;try{o=await r.verify(n)}catch(s){o=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Tq(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Sq(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Sq(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}function Iq(e,t,n){const i=bq(e);vW(i._canInitEmulator,i,"emulator-config-failed"),vW(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Mq(t),{host:a,port:s}=function(e){const t=Mq(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:kq(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:kq(t)}}}(t),l=null===s?"":":".concat(s);i.config.emulator={url:"".concat(o,"//").concat(a).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Mq(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kq(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Rq{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yW("not implemented")}_getIdTokenResponse(e){return yW("not implemented")}_linkToIdToken(e,t){return yW("not implemented")}_getReauthenticationResolver(e){return yW("not implemented")}}async function Lq(e,t){return kW(e,"POST","/v1/accounts:signUp",t)}async function Bq(e,t){return LW(e,"POST","/v1/accounts:signInWithPassword",MW(e,t))}class Pq extends Rq{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Pq(e,t,"password")}static _fromEmailAndCode(e,t){return new Pq(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Tq(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bq);case"emailLink":return async function(e,t){return LW(e,"POST","/v1/accounts:signInWithEmailLink",MW(e,t))}(e,{email:this._email,oobCode:this._password});default:dW(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Tq(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lq);case"emailLink":return async function(e,t){return LW(e,"POST","/v1/accounts:signInWithEmailLink",MW(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:dW(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dq(e,t){return LW(e,"POST","/v1/accounts:signInWithIdp",MW(e,t))}class Oq extends Rq{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oq(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dW("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=oW(t,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Oq(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){return Dq(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Dq(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dq(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eF(t)}return e}}const Nq={USER_NOT_FOUND:"user-not-found"};class Fq extends Rq{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Fq({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Fq({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return LW(e,"POST","/v1/accounts:signInWithPhoneNumber",MW(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await LW(e,"POST","/v1/accounts:signInWithPhoneNumber",MW(e,t));if(n.temporaryProof)throw OW(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return LW(e,"POST","/v1/accounts:signInWithPhoneNumber",MW(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Nq)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Fq({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class zq{constructor(e){var t,n,i,r,o,a;const s=tF(nF(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);vW(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=s.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=tF(nF(e)).link,n=t?tF(nF(t)).deep_link_id:null,i=tF(nF(e)).deep_link_id;return(i?tF(nF(i)).link:null)||i||n||t||e}(e);try{return new zq(t)}catch(aE){return null}}}class Uq{constructor(){this.providerId=Uq.PROVIDER_ID}static credential(e,t){return Pq._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zq.parseLink(t);return vW(n,"argument-error"),Pq._fromEmailAndCode(e,n.code,n.tenantId)}}Uq.PROVIDER_ID="password",Uq.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Uq.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jq{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vq extends jq{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hq extends Vq{constructor(){super("facebook.com")}static credential(e){return Oq._fromParams({providerId:Hq.PROVIDER_ID,signInMethod:Hq.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hq.credentialFromTaggedObject(e)}static credentialFromError(e){return Hq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hq.credential(t.oauthAccessToken)}catch(aE){return null}}}Hq.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hq.PROVIDER_ID="facebook.com";class Gq extends Vq{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oq._fromParams({providerId:Gq.PROVIDER_ID,signInMethod:Gq.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gq.credentialFromTaggedObject(e)}static credentialFromError(e){return Gq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Gq.credential(n,i)}catch(aE){return null}}}Gq.GOOGLE_SIGN_IN_METHOD="google.com",Gq.PROVIDER_ID="google.com";class Qq extends Vq{constructor(){super("github.com")}static credential(e){return Oq._fromParams({providerId:Qq.PROVIDER_ID,signInMethod:Qq.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qq.credentialFromTaggedObject(e)}static credentialFromError(e){return Qq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qq.credential(t.oauthAccessToken)}catch(aE){return null}}}Qq.GITHUB_SIGN_IN_METHOD="github.com",Qq.PROVIDER_ID="github.com";class Wq extends Vq{constructor(){super("twitter.com")}static credential(e,t){return Oq._fromParams({providerId:Wq.PROVIDER_ID,signInMethod:Wq.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wq.credentialFromTaggedObject(e)}static credentialFromError(e){return Wq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Wq.credential(n,i)}catch(aE){return null}}}Wq.TWITTER_SIGN_IN_METHOD="twitter.com",Wq.PROVIDER_ID="twitter.com";class qq{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await ZW._fromIdTokenResponse(e,n,i),o=Xq(n);return new qq({user:r,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Xq(n);return new qq({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Xq(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Yq extends YN{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Yq.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Yq(e,t,n,i)}}function Kq(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Yq._fromErrorAndOperation(e,n,t,i);throw n})}async function Jq(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await QW(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qq._forOperation(e,"link",i)}async function Zq(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(yz(i.app))return Promise.reject(mW(i));const r="reauthenticate";try{const o=await QW(e,Kq(i,r,t,e),n);vW(o.idToken,i,"internal-error");const a=HW(o.idToken);vW(a,i,"internal-error");const{sub:s}=a;return vW(e.uid===s,i,"user-mismatch"),qq._forOperation(e,r,o)}catch(QJ){throw(null===QJ||void 0===QJ?void 0:QJ.code)==="auth/".concat("user-not-found")&&dW(i,"user-mismatch"),QJ}}async function $q(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yz(e.app))return Promise.reject(mW(e));const i="signIn",r=await Kq(e,i,t),o=await qq._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(o.user),o}new WeakMap;const eX="__sak";class tX{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eX,"1"),this.storage.removeItem(eX),Promise.resolve(!0)):Promise.resolve(!1)}catch(aE){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class nX extends tX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mq(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);fq()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nX.type="LOCAL";const iX=nX;class rX extends tX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rX.type="SESSION";const oX=rX;class aX{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new aX(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map(async e=>e(t.origin,r)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function sX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}aX.receivers=[];class lX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,s)=>{const l=sX("",20);i.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),s(new Error("invalid_response"))}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function cX(){return window}function uX(){return"undefined"!==typeof cX().WorkerGlobalScope&&"function"===typeof cX().importScripts}const hX="firebaseLocalStorageDb",dX="firebaseLocalStorage",pX="fbase_key";class fX{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mX(e,t){return e.transaction([dX],t?"readwrite":"readonly").objectStore(dX)}function gX(){const e=indexedDB.open(hX,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(dX,{keyPath:pX})}catch(QJ){n(QJ)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(dX)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hX);return new fX(e).toPromise()}(),t(await gX()))})})}async function vX(e,t,n){const i=mX(e,!0).put({[pX]:t,value:n});return new fX(i).toPromise()}function yX(e,t){const n=mX(e,!0).delete(t);return new fX(n).toPromise()}class AX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await gX()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(QJ){if(t++>3)throw QJ;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=aX._getInstance(uX()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new lX(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(aE){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gX();return await vX(e,eX,"1"),await yX(e,eX),!0}catch(aE){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vX(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=mX(e,!1).get(t),i=await new fX(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yX(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=mX(e,!1).getAll();return new fX(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}AX.type="LOCAL";const bX=AX;Eq("rcb"),new EW(3e4,6e4);const xX="recaptcha";async function _X(e,t,n){var i;const r=await n.verify();try{let o;if(vW("string"===typeof r,e,"argument-error"),vW(n.type===xX,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){vW("enroll"===t.type,e,"internal-error");const n=await function(e,t){return kW(e,"POST","/v2/accounts/mfaEnrollment:start",MW(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{vW("signin"===t.type,e,"internal-error");const n=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid;vW(n,e,"missing-multi-factor-info");const a=await function(e,t){return kW(e,"POST","/v2/accounts/mfaSignIn:start",MW(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return kW(e,"POST","/v1/accounts:sendVerificationCode",MW(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class wX{constructor(e){this.providerId=wX.PROVIDER_ID,this.auth=bq(e)}verifyPhoneNumber(e,t){return _X(this.auth,e,oF(t))}static credential(e,t){return Fq._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wX.credentialFromTaggedObject(t)}static credentialFromError(e){return wX.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Fq._fromTokenResponse(n,i):null}}function EX(e,t){return t?eq(t):(vW(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wX.PROVIDER_ID="phone",wX.PHONE_SIGN_IN_METHOD="phone";class CX extends Rq{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dq(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dq(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dq(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function SX(e){return $q(e.auth,new CX(e),e.bypassAuthState)}function TX(e){const{auth:t,user:n}=e;return vW(n,t,"internal-error"),Zq(n,new CX(e),e.bypassAuthState)}async function IX(e){const{auth:t,user:n}=e;return vW(n,t,"internal-error"),Jq(n,new CX(e),e.bypassAuthState)}class MX{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(QJ){this.reject(QJ)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(QJ){this.reject(QJ)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SX;case"linkViaPopup":case"linkViaRedirect":return IX;case"reauthViaPopup":case"reauthViaRedirect":return TX;default:dW(this.auth,"internal-error")}}resolve(e){AW(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){AW(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kX=new EW(2e3,1e4);class RX extends MX{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,RX.currentPopupAction&&RX.currentPopupAction.cancel(),RX.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vW(e,this.auth,"internal-error"),e}async onExecution(){AW(1===this.filter.length,"Popup operations only handle one event");const e=sX();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pW(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pW(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,RX.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pW(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,kX.get())};e()}}RX.currentPopupAction=null;const LX=new Map;class BX extends MX{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=LX.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=OX(t),i=DX(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(QJ){e=()=>Promise.reject(QJ)}LX.set(this.auth._key(),e)}return this.bypassAuthState||LX.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function PX(e,t){LX.set(e._key(),t)}function DX(e){return eq(e._redirectPersistence)}function OX(e){return iq("pendingRedirect",e.config.apiKey,e.name)}async function NX(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yz(e.app))return Promise.reject(mW(e));const i=bq(e),r=EX(i,t),o=new BX(i,r,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class FX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UX(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!UX(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pW(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zX(e))}saveEventToCache(e){this.cachedEventUids.add(zX(e)),this.lastProcessedEventTime=Date.now()}}function zX(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function UX(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const jX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VX=/^https?/;async function HX(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return kW(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(GX(n))return}catch(aE){}dW(e,"unauthorized-domain")}function GX(e){const t=bW(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!VX.test(n))return!1;if(jX.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const QX=new EW(3e4,6e4);function WX(){const e=cX().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function qX(e){return new Promise((t,n)=>{var i,r,o;function a(){WX(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{WX(),n(pW(e,"network-request-failed"))},timeout:QX.get()})}if(null===(r=null===(i=cX().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=cX().gapi)||void 0===o?void 0:o.load)){const t=Eq("iframefcb");return cX()[t]=()=>{gapi.load?a():n(pW(e,"network-request-failed"))},wq("".concat(_q.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw XX=null,e})}let XX=null;const YX=new EW(5e3,15e3),KX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZX(e){const t=e.config;vW(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?CW(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:xz},r=JX.get(e.config.apiHost);r&&(i.eid=r);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),"".concat(n,"?").concat(eF(i).slice(1))}async function $X(e){const t=await function(e){return XX=XX||qX(e),XX}(e),n=cX().gapi;return vW(n,e,"internal-error"),t.open({where:document.body,url:ZX(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KX,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=pW(e,"network-request-failed"),o=cX().setTimeout(()=>{i(r)},YX.get());function a(){cX().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{i(r)})}))}const eY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tY{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(QJ){}}}function nY(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let s="";const l=Object.assign(Object.assign({},eY),{width:i.toString(),height:r.toString(),top:o,left:a}),c=WN().toLowerCase();n&&(s=lq(c)?"_blank":n),aq(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return pq(arguments.length>0&&void 0!==arguments[0]?arguments[0]:WN())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",s),new tY(null);const h=window.open(t||"",s,u);vW(h,e,"popup-blocked");try{h.focus()}catch(QJ){}return new tY(h)}const iY="__/auth/handler",rY="emulator/auth/handler",oY=encodeURIComponent("fac");async function aY(e,t,n,i,r,o){vW(e.config.authDomain,e,"auth-domain-config-required"),vW(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:xz,eventId:r};if(t instanceof jq){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof Vq){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(oY,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(iY);return CW(t,rY)}(e),"?").concat(eF(s).slice(1)).concat(c)}const sY="webStorageSupport";const lY=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oX,this._completeRedirectFn=NX,this._overrideRedirectResult=PX}async _openPopup(e,t,n,i){var r;AW(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return nY(e,await aY(e,t,n,bW(),i),sX())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){cX().location.href=e}(await aY(e,t,n,bW(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(AW(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await $X(e),n=new FX(e);return t.register("authEvent",t=>{vW(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sY,{type:sY},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[sY];void 0!==r&&t(!!r),dW(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mq()||sq()||pq()}};var cY="@firebase/auth",uY="1.7.9";class hY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vW(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const dY=HN("authIdTokenMaxAge")||300;let pY=null;var fY;!function(e){_q=e}({loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=pW("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),fY="Browser",gz(new aF("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=i.options;vW(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:s,clientPlatform:fY,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gq(fY)},c=new Aq(i,r,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(eq);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),gz(new aF("auth-internal",e=>(e=>new hY(e))(bq(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ez(cY,uY,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(fY)),Ez(cY,uY,"esm2017");_z({apiKey:"AIzaSyC99UZ88KKqHzGcr9hECmxvxABsGglw704",authDomain:"proj6-ce4f9.firebaseapp.com",projectId:"proj6-ce4f9",storageBucket:"proj6-ce4f9.appspot.com",messagingSenderId:"972237565230",appId:"1:972237565230:web:f7ee5dd6b4c1722c025ebf"});const mY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wz(),t=arguments.length>1?arguments[1]:void 0;e=oF(e);const n=vz(e,uj).getImmediate({identifier:t}),i=jN("storage");return i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:QN(r,e.app.options.projectId))}(e,t,n,i)}(n,...i),n}(),gY=(function(e,t){const n="string"==typeof e?e:t||"(default)",i=vz("object"==typeof e?e:wz(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=jN("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const o=(e=eW(e,nW))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&Dj("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Mj.MOCK_USER;else{t=QN(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new jj(Uj.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Mj(o)}e._authCredentials=new Qj(new Hj(t,n))}}(i,...e)}}(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wz();const t=vz(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vz(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ZN(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;dW(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:lY,persistence:[bX,iX,oX]}),i=HN("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>dY)return;const r=null===n||void 0===n?void 0:n.token;pY!==r&&(pY=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))})(e.toString());!function(e,t,n){oF(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){oF(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}const r=UN("auth");r&&Iq(n,"http://".concat(r))}(),(e,t)=>new Promise(async(n,i)=>{const r=pj(mY,t);try{await function(e,t,n){return ej(e=oF(e),t,n)}(r,e);n(await dj(r))}catch(o){i(o)}})),vY="http://localhost:4000/user",yY=()=>{const{state:{profile:e,currentUser:t},dispatch:n}=Uae(),r=(0,i.useRef)(),o=()=>{n({type:"UPDATE_PROFILE",payload:u(u({},e),{},{open:!1})})};return(0,uT.jsxs)(LP,{open:e.open,onClose:o,children:[(0,uT.jsxs)(QP,{children:["Profile",(0,uT.jsx)(gL,{sx:{position:"absolute",top:8,right:8,color:e=>e.palette.grey[500]},onClick:o,children:(0,uT.jsx)(xN,{})})]}),(0,uT.jsxs)("form",{onSubmit:i=>{i.preventDefault();const o=r.current.value;(async(e,t,n)=>{n({type:"START_LOADING"});const{name:i,file:r}=t;let o={name:i};try{if(r){var a,s;const t=LN()+"."+(null===r||void 0===r||null===(a=r.name)||void 0===a||null===(s=a.split("."))||void 0===s?void 0:s.pop()),n=await gY(r,"profile/".concat(null===e||void 0===e?void 0:e.id,"/").concat(t));o=u(u({},o),{},{photoURL:n})}const t=await wN({url:vY+"/updateProfile",method:"PATCH",body:o,token:e.token},n);t&&(n({type:"UPDATE_USER",payload:u(u({},e),t)}),n({type:"UPDATE_ALERT",payload:{open:!0,severity:"success",message:"Your profile has been updated successfully"}}),n({type:"UPDATE_PROFILE",payload:{open:!1,file:null,photoURL:t.photoURL}}))}catch(l){n({type:"UPDATE_ALERT",payload:{open:!0,severity:"error",message:l.message}}),console.log(l)}n({type:"END_LOADING"})})(t,{name:o,file:e.file},n)},children:[(0,uT.jsxs)(KP,{dividers:!0,children:[(0,uT.jsx)(tD,{children:"You can update your profile by updating these fields:"}),(0,uT.jsx)(rN,{autoFocus:!0,margin:"normal",variant:"standard",id:"name",label:"Name",type:"text",fullWidth:!0,inputRef:r,inputProps:{minLength:2},required:!0,defaultValue:null===t||void 0===t?void 0:t.name}),(0,uT.jsxs)("label",{htmlFor:"profilePhoto",children:[(0,uT.jsx)("input",{accept:"image/*",id:"profilePhoto",type:"file",style:{display:"none"},onChange:t=>{const i=t.target.files[0];if(i){const t=URL.createObjectURL(i);n({type:"UPDATE_PROFILE",payload:u(u({},e),{},{file:i,photoURL:t})})}}}),(0,uT.jsx)(PL,{src:e.photoURL,sx:{width:75,height:75,cursor:"pointer"}})]})]}),(0,uT.jsx)(cN,{sx:{px:"19px"},children:(0,uT.jsx)(bN,{type:"submit",variant:"contained",endIcon:(0,uT.jsx)(_N,{}),children:"Update"})})]})]})},AY=e=>{let{anchorUserMenu:t,setAnchorUserMenu:n}=e;FL();const{dispatch:i,state:{currentUser:r}}=Uae(),o=()=>{n(null)};return(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsxs)(lP,{anchorEl:t,open:Boolean(t),onClose:o,onClick:o,children:[!r.google&&(0,uT.jsxs)(yP,{onClick:()=>i({type:"UPDATE_PROFILE",payload:{open:!0,file:null,photoURL:null===r||void 0===r?void 0:r.photoURL}}),children:[(0,uT.jsx)(_P,{children:(0,uT.jsx)(zL,{fontSize:"small"})}),"Profile"]}),(0,uT.jsxs)(yP,{onClick:()=>i({type:"UPDATE_USER",payload:null}),children:[(0,uT.jsx)(_P,{children:(0,uT.jsx)(UL,{fontSize:"small"})}),"Logout"]})]}),(0,uT.jsx)(yY,{})]})},bY=()=>{var e;FL();const{state:{currentUser:t}}=Uae(),[n,r]=(0,i.useState)(null);return(0,uT.jsxs)(II,{children:[(0,uT.jsx)(LR,{title:"Open User Settings",children:(0,uT.jsx)(gL,{onClick:e=>r(e.currentTarget),children:(0,uT.jsx)(PL,{src:null===t||void 0===t?void 0:t.photoURL,alt:null===t||void 0===t?void 0:t.name,children:null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})})}),(0,uT.jsx)(AY,{anchorUserMenu:n,setAnchorUserMenu:r})]})},xY=_L((0,uT.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),_Y=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!1),{state:{currentUser:o},dispatch:a}=Uae(),[s,l]=(0,i.useState)(!1),{pathname:c}=(0,cT.useLocation)(),u=(0,cT.useHistory)(),h=()=>{window.scrollY>0?r(!0):r(!1)};return(0,i.useEffect)(()=>(window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}),[]),(0,uT.jsx)(uT.Fragment,{children:(0,uT.jsxs)("nav",{className:n?"main-nav sticky":"main-nav",children:[(0,uT.jsx)("div",{className:"logo",children:(0,uT.jsx)("img",{src:dT,alt:"logo",className:"logo-img"})}),(0,uT.jsx)("div",{className:e?"menu-link mobile-menu-link":"menu-link",children:(0,uT.jsxs)("ul",{children:[(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/",children:"Home"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/addlocation",children:"Location"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/about",children:"About"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/blog",children:"Blog"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/contact",children:"Contact"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/pilgrimage",children:"Pilgrimages"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/name",children:"Gautam"})}),(0,uT.jsx)("li",{children:(0,uT.jsxs)("button",{className:"nav-button donate-button",onClick:()=>{u.push("/Razor")},children:[(0,uT.jsx)("span",{className:"plus-icon",children:"+"}),(0,uT.jsx)("span",{className:"donate-text",children:"Donate Now!"})]})}),o?(0,uT.jsx)(bY,{}):(0,uT.jsx)(bN,{sx:{marginLeft:"50px"},color:"inherit",startIcon:(0,uT.jsx)(xY,{}),onClick:()=>a({type:"OPEN_LOGIN"}),children:"Login"})]})})]})})},wY=()=>((0,i.useEffect)(()=>{const e=document.createElement("script");e.src="https://cdn.botpress.cloud/webchat/v1/inject.js",e.async=!0,document.body.appendChild(e);const t=document.createElement("script");return t.src="https://mediafiles.botpress.cloud/829bcb46-f42f-499b-b681-83795937937d/webchat/config.js",t.defer=!0,document.body.appendChild(t),()=>{document.body.removeChild(e),document.body.removeChild(t)}},[]),(0,uT.jsx)("div",{id:"webchat"}));var EY={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},CY=i.createContext&&i.createContext(EY),SY=["attr","size","title"];function TY(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IY(){return IY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},IY.apply(this,arguments)}function MY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MY(Object(n),!0).forEach(function(t){RY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LY(e){return e&&e.map((e,t)=>i.createElement(e.tag,kY({key:t},e.attr),LY(e.child)))}function BY(e){return t=>i.createElement(PY,IY({attr:kY({},e.attr)},t),LY(e.child))}function PY(e){var t=t=>{var n,{attr:r,size:o,title:a}=e,s=TY(e,SY),l=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",IY({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:kY(kY({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&i.createElement("title",null,a),e.children)};return void 0!==CY?i.createElement(CY.Consumer,null,e=>t(e)):t(EY)}function DY(e){return BY({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(e)}function OY(e){return BY({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function NY(e){return BY({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function FY(e){return BY({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function zY(e){return BY({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function UY(e){return BY({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function jY(e){return BY({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function VY(e){return BY({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}const HY=()=>(0,uT.jsxs)("footer",{className:"footer",children:[(0,uT.jsxs)("div",{className:"container grid grid-four-column",children:[(0,uT.jsxs)("div",{className:"footer-about",children:[(0,uT.jsx)("h3",{children:"VR Brahman"}),(0,uT.jsx)("p",{children:"VRTOUR is a unique digital platform which offers 360 degree immersive experience which give the viewers real-life Experience. The portal is completely devoted to meet every requirement of the viewers."})]}),(0,uT.jsxs)("div",{className:"footer-subscribe",children:[(0,uT.jsx)("h3",{children:"Subscribe to get important updates"}),(0,uT.jsxs)("form",{action:"#",children:[(0,uT.jsx)("input",{type:"email",name:"email",placeholder:"Enter e-mail address"}),(0,uT.jsx)("input",{type:"submit",value:"Subscribe",className:"search-button"})]})]}),(0,uT.jsxs)("div",{className:"footer-social",children:[(0,uT.jsx)("h3",{children:"Follow Us"}),(0,uT.jsxs)("div",{className:"footer-social--icons",children:[(0,uT.jsx)("div",{children:(0,uT.jsx)(DY,{className:"icons"})}),(0,uT.jsx)("div",{children:(0,uT.jsx)(NY,{className:"icons"})}),(0,uT.jsx)("div",{children:(0,uT.jsx)("a",{href:"https://www.youtube.com/channel/UCwfaAHy4zQUb2APNOGXUCCA",target:"_blank",rel:"noreferrer",children:(0,uT.jsx)(UY,{className:"icons"})})})]})]}),(0,uT.jsxs)("div",{className:"footer-contact",children:[(0,uT.jsx)("h3",{children:"Quick Links"}),(0,uT.jsxs)("ul",{children:[(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/about",children:"About US"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/blog",children:"Blog & Articles"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/pilgrimage",children:"Pilgrimages"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/contact",children:"Contact Us"})})]})]})]}),(0,uT.jsxs)("div",{className:"footer-bottom--section",children:[(0,uT.jsx)("hr",{}),(0,uT.jsxs)("div",{className:"container2 grid grid-two-column ",children:[(0,uT.jsxs)("p",{children:["@",(new Date).getFullYear(),"All Rights served by VRTOUR"]}),(0,uT.jsx)("div",{className:"footer-last",children:(0,uT.jsxs)("ul",{children:[(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/about",children:"Terms of Use"})}),(0,uT.jsx)("li",{children:(0,uT.jsx)(TT,{to:"/about",children:"Privacy Policy"})})]})})]})]})]}),GY=n.p+"static/media/collage.0846a37624f59003b13e.png",QY=n.p+"static/media/cut-sphere.b65e78e25943915cf40e.png",WY=n.p+"static/media/builing.7e321f7689c75251babc.png";const qY=n.p+"static/media/curly-lines.91c27addfad6dbb28ae008cd8200f7c9.svg",XY=n.p+"static/media/curly.c9edcf12e5b64ec4a386.png",YY=n.p+"static/media/curly-left.b348ce6badf5994b169a.png",KY=n.p+"static/media/hero.e6a6effd533696cef003.jpeg",JY=()=>(0,uT.jsxs)("a-scene",{embedded:!0,style:{width:"100%",height:"575px !important"},children:[(0,uT.jsx)("a-sky",{src:KY,rotation:"0 -130 0",animation:"property: rotation; to: 0 230 0; dur: 25000; loop: true;"}),(0,uT.jsx)("a-camera",{position:"0 0 0",zoom:"1"})]}),ZY=()=>(0,uT.jsxs)("div",{className:"image-container",children:[(0,uT.jsx)("h3",{className:"reveal",children:"Experience Virtual Reality"}),(0,uT.jsx)(JY,{})]});function $Y(e){return BY({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0 0 25.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"192",r:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(e)}const eK=e=>(0,uT.jsx)("div",{className:"data",children:(0,uT.jsx)("div",{className:"data-details",children:(0,uT.jsxs)("div",{className:"data-details-left",children:[(0,uT.jsx)("div",{className:"img",children:(0,uT.jsx)("img",{src:e.src,alt:e.alt,className:"zoom-img"})}),(0,uT.jsx)("button",{id:"top-but",children:e.topbut}),(0,uT.jsxs)("p",{id:"amount",children:[(0,uT.jsx)(jY,{}),e.amount,(0,uT.jsx)("span",{children:e.person})]}),(0,uT.jsx)("button",{id:"img-but",children:e.temple}),(0,uT.jsx)("b",{children:e.templename}),(0,uT.jsxs)("p",{id:"location",children:[(0,uT.jsx)($Y,{}),e.locations]})]})})}),tK=n.p+"static/media/akshardham.3ee4cef367e91adc6f96.jpg",nK=n.p+"static/media/lotus-temple.7b68b5a485c91c4b968a.jpg",iK=n.p+"static/media/tirupati-balaji-temple.2fa3dcb32e55937e3d2f.jpg",rK=n.p+"static/media/golden-temple.20f624d46810c89bb773.jpg",oK=n.p+"static/media/ram-mandir.520bd323b80483db1561.jpg",aK=n.p+"static/media/siddhivinayak.23f7c7212f7adf5e3907.jpg",sK=()=>(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsxs)("div",{className:"religious-upper",children:[(0,uT.jsx)("center",{children:(0,uT.jsx)("h2",{children:"MOST VIEWED"})}),(0,uT.jsx)("center",{children:(0,uT.jsx)("h1",{children:"RELIGIOUS PLACES"})}),(0,uT.jsx)(eK,{src:tK,alt:"",topbut:"Visit Now",amount:"250/",person:"person",temple:"Temple",templename:"AksharDham Temple",locations:"New Delhi,India"}),(0,uT.jsx)(eK,{src:nK,alt:"",topbut:"Visit Now",amount:"Free",person:"",temple:"Temple",templename:"Lotus Temple",locations:"New Delhi,India"}),(0,uT.jsx)(eK,{src:oK,alt:"",topbut:"Visit Now",amount:"Free",person:"",temple:"Mandir",templename:"Ram Mandir",locations:"Uttar Pradesh,India"}),(0,uT.jsx)(eK,{src:rK,alt:"",topbut:"Visit Now",amount:"Free",person:"",temple:"Gurudwara",templename:"Golden Temple",locations:"Amritsar,India"}),(0,uT.jsx)(eK,{src:iK,alt:"",topbut:"Visit Now",amount:"Free",person:"",temple:"Church",templename:"Tirupati  Balaji Temple",locations:"Andhra Pradesh,India"}),(0,uT.jsx)(eK,{src:aK,alt:"",topbut:"Visit Now",amount:"100/",person:"person",temple:"temple",templename:"Shree Shiddhivinayak Temple",locations:"Mumbai,India"})]}),(0,uT.jsx)("div",{className:"viewAll",children:(0,uT.jsx)("button",{className:"viewAll-button",type:"button",onClick:()=>{console.log("View all locations clicked")},children:"View All Locations"})})]}),lK=n.p+"static/media/relgious-left.b4b6faa81e2715efd309.png",cK=n.p+"static/media/full-img.75f6e93f960399f403ff.png",uK=()=>{const e=(0,cT.useHistory)();return(0,uT.jsxs)("div",{className:"religous-main",children:[(0,uT.jsx)("div",{className:"religous-left",children:(0,uT.jsx)("img",{src:lK,alt:"About Us Image",className:"relgious-img"})}),(0,uT.jsxs)("div",{className:"religous-right",children:[(0,uT.jsxs)("div",{className:"rel-right-upper",children:[(0,uT.jsx)("h1",{children:"WHO WE ARE"}),(0,uT.jsx)("h3",{children:"We are Offering The Best immersive experience for all Pilgrimages."}),(0,uT.jsx)("p",{children:"Experience places in a smarter way with Virtual reality. Explore future at your home with all details and a seamless experience."})]}),(0,uT.jsxs)("div",{className:"rel-right-bottom",children:[(0,uT.jsx)("img",{src:cK,alt:"Image 1",className:"full_img"}),(0,uT.jsx)("p",{children:"The promise to use best-in-className technology to reduce the time and friction of visiting different places around the country."}),(0,uT.jsx)("div",{className:"contact-us",children:(0,uT.jsx)("button",{className:"waw-button",type:"button",onClick:()=>{e.push("/contact")},children:"Contact With Us"})})]})]})]})},hK=()=>(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsxs)("div",{className:"main",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsxs)("div",{className:"home-container",children:[(0,uT.jsxs)("div",{className:"tag-line",children:[(0,uT.jsx)("img",{src:QY,alt:"desg1",className:"sphere-img"}),(0,uT.jsx)("img",{src:qY,alt:"desg2",className:"curly-img"}),(0,uT.jsx)("h1",{children:"A journey becomes a pilgrimage as we discover, day by day"}),(0,uT.jsx)(hT,{onSearch:e=>{console.log("Searching for:",e)}}),(0,uT.jsx)("img",{src:WY,alt:"desg3",className:"building-img"})]}),(0,uT.jsxs)("div",{className:"collage",children:[(0,uT.jsx)("img",{src:YY,className:"snakeL-img",alt:"curve-line"}),(0,uT.jsx)("img",{src:GY,alt:"Pilgrimage-collage",className:"collage-img"}),(0,uT.jsx)("img",{src:XY,className:"snake-img",alt:"curve-line"})]})]}),(0,uT.jsx)("div",{className:"image-container",children:(0,uT.jsx)(ZY,{})}),(0,uT.jsx)("div",{className:"religious-places",children:(0,uT.jsx)(sK,{})}),(0,uT.jsx)("div",{className:"mid-container",children:(0,uT.jsx)(uK,{})}),(0,uT.jsx)("div",{}),(0,uT.jsx)("div",{className:"chatbot",children:(0,uT.jsx)(wY,{})})]}),(0,uT.jsx)(HY,{})]}),dK=n.p+"static/media/ram.72494038bd28dad5d011.jpg",pK=()=>(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(_Y,{}),(0,uT.jsxs)("div",{className:"about-main",children:[(0,uT.jsx)("div",{className:"about-left",children:(0,uT.jsx)("img",{src:dK,alt:"About Us Image",class:"ram-img"})}),(0,uT.jsxs)("div",{className:"about-right",children:[(0,uT.jsxs)("div",{className:"right-upper",children:[(0,uT.jsx)("h1",{children:"ABOUT US"}),(0,uT.jsx)("h3",{children:"We're on a Mission to Change View of Monuments/Temples."}),(0,uT.jsx)("p",{children:"VRTOUR is a unique digital platform which offers 360 degree view solution to our visitors for all their travel issues. The portal is completely devoted to meet every requirement of the visitor."})]}),(0,uT.jsxs)("div",{className:"right-bottom",children:[(0,uT.jsxs)("div",{className:"bottm-left",children:[(0,uT.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABcCAYAAAD0zUKRAAAAAXNSR0IArs4c6QAAIABJREFUeF7tfAeYVdW972+t3U6fzjCNYRiqQ5MmglQVDRYSRaLGGxPz8lJeuia+XHPvi3neJF9ibu67Sd5LjIl5poAtRgUVCxOQ3osUGWBghmlML6fsut73X+cMEoIw5zjE8tjfx3c4c9Zee6/f/u9//f0Xw6XjoiDALsqslybFJWAvkhBcAvYSsBcJgYs07SWJvQTsRULgIk17SWIvAfvuEOjd9+oywdEYqbp2/bubaWBn/38hsR2HNtx/eNMrPwyFQhg+bXFRqKKqeWDwZD7qQw+sEIK9Wb1iXbR231W6rqNs0oLPF0yc96vMIRvYmR9+YBsbA0jUhTveWrtL07UV4dEzH0Kp2cPYAmdgEGU26kMNbNuBdR81euqWifa64nhzzbxIKAA1b9gmM1hczwvH/iQwYvrWzGC78FkfWmCb92wYUndwU4vSWYshagxBpxt9vd1w1QBi/iJ0hysx6677L9r6L9rEF36mF3eEENVq987ub7lNb342YLYN72muRUFOFlggDOErXO0Mn/kdfeyi7RfrLj60wJpHqsf3Ht76SNhuL1OdntJYTwccMwruODC1HLQFx6Do8kWX51TN3n0xwP1QAivq6/2ta//jsNr5VimHCdu1YCmAzgWCpgnbM2AHhyORN3pn6bLvTL0E7AAR6Hz9Tw+rx1bdyzproOoaTOHCUjlUhSNgmRA2g61kIxosQe6MG2fol9+6bYBTD3jY+0piO+oPTexuaXiwYtrVHxvwCs4aGD+wobxh0zOH8mLHfDzRAk1T4AoXAgxcYWCCAZ6A63H08SyIokmdxQvvHMaGVPVles1znfe+Afb43q2fMLsaH+RWZ6k/lLeqdObNt2ay0LbXfv673rfW3R02OxBUbAjmSSC5K+CBwVUUgHNonoWYp6NDGYKCy2/4H1lzP/m9TK73Tue8b4AVtbXZx05s3DOiLPfru7ftfXryx7+lMMZEOovtqnm9smPjH4+E+urAYwkEDRWea0MBg+ZyOIIjrnIwxYNfxOBAQVRkwy6c1B2YdWdFdvnEznSud76x7wtghRD86BtPryoNiJfdzvq74wkbeaOvWcTGTGtLZ6H1L/3nJvvYizNzRCe4xaFxBcIl+BTowgcXHDFFANyEIfoghICn5KBNGYrghJu/nz/3jgfSud77Hli6wX0rf+G6dbt4vtcLARWlMz7yX9mMu3490IXGdzy/sGHvi68HoocR9HqgQgF3k/qUCwUCAYApcBQXnohBEXFw+UIE0IUIEnlVKLxicWlgzNUNA73mBwLYrn2rpjXveHlbVrQNiYQFr6ASBRPmfyxy+eK/DGShXS/9eFX3kY2LA6IdhohCBZfAaooCx2awhA9MUcG4A08koMIBVwDXYbB4CJ0sG9kTrn4+Z+EXlwzkehca875QBf032br+sX+x6mq+F1DVPe0JZ1Kno6B00uwvFU29/hfnW4g4trnw+Cu/bA5bjdDgQGUWPNeECgHFVeFBgc190ngpsMFA+RcBMA+eC6iaD7024AwZj5zZ9wz3j5hy4kLAXej39xWwDTtWfbdAwVHNKVwBoyu3tbPlB41NTZ8umXjFmIJxcw6/02JOvfbI0/bhV24NJFqgMhVgDjhzIDwHqtCkq2VxFeRpqR5AGkB6C8yD4zgI+HywLAs9vqEQY2/8WcnCz3zlQsBd6Pf3FbBHdq3/UVDT3iwaf8XjdOOittZ35M3naiK5eWsLZ//TXedajGjcnr//xccaCsw63Wd2QBEaQDKqCziOBQ5VnuZxFx6pB/pdcDB4cpzj2fAZOmDH0CPC6Miuwpg5d2WxUTN7LgTeB0LH0k3u2rrxp/5gYO/YqsmPSWBbD4Vr3nj6ZFYkcrTwmq9MOddCzD1/vv1I9fLlQ9QeBJw4Cau09szHpDRy6Wx5ENyEAIcn/OBCBRcksQ4EZxCeDc1NwNVDaEY+hky76cvhWff8/EMD7O4dW34Wzs7dVVk56re0qJZ9G2c1bPrDhpKSknWFNzww71wL7Vz946diRzYs1a0ehBQAliWBha7C8cjBYhQWgJPeBYcDApYkN6kKCFjPc6C4cWi+CDocA6xs+pHCW/9t1IcG2IM7N/+S+0M7xowbL92srv0bltavf/yp4rKSZ/MW/+st51pow+OfbwrHTg5N9HQjZKhgTkICK1QyVqRdnSSwBCQAhxkAKQgv+d1mDIoiwO0EBOOwmB+9kRFu6bVfGsaGTWnMFNz3lY49vmP1IzDytg4fP+1RCeyh9dMa1jy2LTc32xw6945cVjwtduZCRd364hMrf9YwxG2FGU/A0FXAM8EYg8d8ScllplQF9PpLXZuagJMlA5fAcg6orgXXdeEpBjqMEuTNvvu60OTFr3xgga0/enBCWeW4fbSAht2v/dxEZPOIyTP+QN97Tm7Ja1v7bEtfb5eSO+n6B0qv/Oj3z1xo/euP/pAfWnl/JNECxhQJEBNJvQmhwfU8cE6ulQfukVFD0iWQ8HJyDZKqwLFlSpFUBQHbijwEJ93wWP78z9zzgQS2o+No1omNa3ZOHjNiERt19dH6vRt/ENci20ePG/9M/4KaNvzu4eNHjtw7fOpHZhSNn/036b0Df/xOc07HnsKI03HG+vvTC/0v49nfpVkkhKEIAY15cB0TiqbCEgoSzIe4UYC+cEXj6Lt+VPKBBLZu03NfaNm/9n+PLC+tzi6bsaSxK/b1btW397Jpc/8m2qrbu3puMDzayquo2Ny/UFFb7Tu4ekU836pH0O3OaP0cAppw4VKiRtNhCi6BTWgRmIFiVFx1o4+NWmxmMvl7pmNju1bOati34QU1ejJXZQylVdO/4/gLdMufuyNYtej5Cy1GHHppYn31E3tCZqMMYTM/yAUT4JzLyMwUgKUEkTCGoGLmTVPZpFt3ZjL3PxzYztpd2dnBLqdl3dpq0XZ0mt/uRiIRB4sUYsiYCf8Of3ZL1CjeHZp803kNh9jy+G1NW55/Muh2QUU8k7VLv5YSPi65ZKSgAbieLcPfmJqDgokL7gvN+dxPMpn8Hwps595X5rXtq3652HBqelobJrBYO4JOH3x+Hd2OhkBBEaLCg5VVvqdkyUOTz7cg9/WfPtC9b+1DmugFRyKTtScDBjAIpsGV3gEHnARcriPGQghWztyYe8N/n53J5P8wYKPHtxfFDlQ/Gju8fnGukoCmabDjUfg9Sy4owXXYqoY+OwEvVIrCqhu/qM3kjzC2zD3XwpxV//ZM9OiWWxS3lzIBmaxdnsMFhbsKLKGBqRzciQNcR5T7wQontQ1d9v2CTCb/hwDbuev5JdaRzY+7zQcjIa8bqh0DFQdoUYqiI2bZEJoGV5H5KFjCgOvPh1445s2CSVfOYRULus5eXM+TD+yO122fFFAoH5AZsIpwoQoHYAwx5pclG+6aYKqOmOeDmTc6VjL/jnxWNittXXPRgY0fenlB7drn12SbdQg7PdAVD8yOQ3guNE1HwlGg+IMwXQeuAFTFgOsKWI4Dx58LrWTK7vwZi2afHRx0PvPAMbdpb4Xm9EEVmQNriIRMgPcJHUzVZOTGFA0xBBCNjMSwaz5bkkkEdlGBtQ++dmXNX1esz7FbecjrguaZMmxkwoMqqNAH+QqSU+7RJ2k9BmgK5VFtJDwgqmVDlEzeVzzhk9PZqFGnXZ/6P93fqLYfKAq46QFLUZn0ZIUASSwBS9GuqQZAmW/KGdiCw9Kz0R2qRO7MT42JjLviHVOW76QmLiqwJ5767nalee/UsNsNVSTkQgjYZACUTNtB0+AJDs8zQBEoOe8Ks6F6Mbl4WzEQDZbDqfjI/SXXfPJH/Qs58cd7O3zth3J8XiwtiZVhbuqgIJeknf7mcB9lE6F5Cdgeg6nnoCs4ElnzPzMxt3KajAzTOS4asKKxOr/uhd/V+802n+4lkvE6kpJKhyWTIR4MJMA9Fw4oIa3LUBTMBee9snwCR0FUzUNrzoT4yE8+HGKMMtTA4d98Lpofrw1ojglOevI8x5lSKhM0lFZkTP6j0Fb+jaSV7sKLwfUY4noeOgOVKLzmy1OCw6t2pQOqFJx0TxjIeKq6YvtvJjVsWb3T7/ZCFck3mIAlEMjNsbgBDhc+N5r6GxX8dID54cKFUKhu5UCnehUPo9koQfnCj89n425eS3Md+9WnnDzzuKK45IX2p1b+/u7OBPXMX+nvdB/0QGWAwIQs6ehuTL5BCTUHnYHhyJ5xx9TsSVenHSS8a2CJMX1kzfJHigvCqwKI9dUd2PuHsOq25GSHV518a/e3/U4vDBE/rV9JUl1GiVNAEzYMqkEJm2QZYCqEYHA8ElSScBdBogcJDa0iC1mjZ610iy5fnlNa+lzb8z/s1ntrFZUqgheQVi+VIpQPl3MpqbL0LRQ4TIPH6KGTh2CB3i7y72wljF69CMVzb5/Cqpbs6ji6PatX1Xn5ALkH7x7YAy8X1excc1zEOnUR60JAUPqO0kwaXCcBn0hA90wY0nABJieJVKWUKSS9VJdiXOo3KXe0SsbgSiPnQnM9CFVFVOgwA/nwskc0lZWXXt+z46XtaqJV40yRp7zTcaZO7QeWPpPAMnicVBIdxD+ghLcl75PSjnEtG/mTr/08SiY8Ubt3/86s0lHP5E297psDeWszBlbs36/39uy+0zq2+dtO29HRhkp+qQtFeHCsREp/AQrhJEGkbL6XKuQBLqNQUoMjVJlZ8rgN1zLBPSpZp8rUnoCwDSgGeQ4OojZJdhA54TC8zmZonHRz8lmcD1iSUhlV0VjPk/+kHqRoiwKE1PkyMZ7SvxJqZiCOLATzSlob23sKyqfM/T/GnJFfGQjNPiNgG/dtGneq/ti6eP3u/JHiBPRonSzZKQqDKxhc20Y4GEAsFgNXyY1KLiCZC5WlPthMh8kDEOESAc2/CaJ7mtnbpXPLQoCTto1B2BYUJQtCktp6AGFC4wYcy4WuqBIQKV1noSpI4qFLlWMzP4TmA9f8bUK4+cKKgVtR6LDgZy6YmzSmtkzC0HykeYk8J/0TJGwVajgfna6OuK8IxojpLxZWTb8nVDii5bwqaCBifa4xx7avva9p719/XNS1EyV6L1wrKqWCpFBRFLiJPsn0SzhERmHwGQYSLoepBOFpYdiU/AiVHB2+6M7ZGDK+Fcd2hJtO7Hy66a0914TsThTqcdi9HVA0P1TPQkiNwbGi8FwO3R9E1BbgiiYLgVS7MlRNlrCltdcD6LJ1mEYu1KKqXXmjJ97nr7p5jaitzm6vr/129PiurxodNUa26IOhMCTMGEymgGmk5z1ZxeWc5lbgOhxxXy56IpVRJ1IqeiwWCheWvzZ+zuJF5+OWZSSxKR2ltO144dPOnj//2ug6hpDBZVXUcpOvv+JZ8hWHEUafKWC6gJFThNzKKz6GUP7h9u7uh6JKdk353Nvu739wtTvWXMd6T32lPFv/OuyGypZdW15MxKIIcAsBqw1BnUG45DNwxIQuQ1CVpI7MjZvkCGj+ILosBSxnOIIVUx8KhWd+j02blhTL1CH2Pj22+9DWbT3Hd4TyNaqHJQCfIaM/zig/KyA8FYz54AoVesn4vaHpN14Hf24vPFugiCo6fzvn2cKXMbApcLm58l+eaN3/xtKsgA7hJKS3SmUOcrEogmmzNChZJbB9OTCGjHqhePHXlvQ/aSEEMQrPmWSh+dte/cVDTfW1DwSIi9VegzzdgcYp3HUBLSANHPeITejAcy0wriEu/LAChQhXXvnjyDVf+tY76t791aHWIxu2uUc3jzXsdvgjASQSUSruwnNdCJcCsTDiahby5318JJtw+9F03u53BawEd+fvb27e9fpzaqwVhheXll5KEICo8CMeGY68kdM/rxRUrEloQS971OwB32Dfsc2FTl9fUIueqnLqdzyWaDqQF6AythUH1/2wbRuc3DIiEJIaUgPocPwonjDvx8bCr70jqP0AJWo2VHZvfuaw3biHh4MMrtULncJpQXMqMHkYnawAw5Z9KsSGXpdWNv1dA0s32bf+kU/0vVn9h4jdAt3ulQtOGNno9pWhYPbSG4MTlqxK52mfa6zY++S8I2uf/WuW6IZBvrHK4FgmPDI6TAM0P7pcH3zFEw8UzrlqxkCBiO989ur2HS+9ZliN0J1OKB4R5gCN6+hwQmjSypA9adELw+bdfnM6axgUYHtr1l3WvOb3+7N6jyKH9chESkzLRZNeYo5a+M9ZZyZP0rm5v9GLNS9GDq1e3p3jtiPg9cFPr6xD7peQXADyOdtFGJct+PhMVnXDlnSuc+rFn/7Oqn3j7ojbBubEoJGN4H60e9kQoxYeDlbOmhUZd0V7OnMOCrCkK+teeHiLOL5par7bioDiykCggeWjYM7di7MmLn4pnZs6p8Tu+OMn6rau+kPE6YLmRGU+l/SqwTwklBDalaEwKqY+V3zDvR9N91q9e6rHd2x+bF8kfhyaMCUpyYWBaKAcwSm3XBua/tHX0p1zUICVurbmxcr2bau2qy37szWrG8wIok0dgtaCK05NGX9jGauqyixpmlpR/TMP7nZObJ8kqw/ClC6c8CwYwkJcjaBZH47R1909g1XOT7sDhsLy5t9/6YS/80CZQfxZz5P+q5M/3o3M+fQIf+W0uvcO2ObVwebVzxwLddQM0Z1uuMQo0YYi68o7l4Wn3fZUujd29nix7dF/OvnGs49nsxgM7sLymOTABpiDqJKFZv9olC+8a6QvDeN45jVOLb+3VmnZNdzHbUBRETcV2HmXITD9ztFZl82sSff+B09ia1cNbap+tibSXRPyUeME13FKLULZzV8rYcOuypgDddr33PHYzMYNz23KFr0wmE18bKJjQ/USEtimwFiUz1la4R+34Hi6IND41hXfOMGadg3jwgTjqpRYr6CqrfiaL45lpePS0q803+AB++YLN51c/9TzWdFakEuUUPxoUosx9Lr/VhgeOftUJov9G+O1+8kZjRuf2+KPN0gdS+6VoUquO/rUCFr8ozBs7rKMgW1f8dUTomXfMPKLpevm6WBDx6OndP5Phs9Zcl+69z9owNqHXpld98Yz68kzCCIOh+lo0Yai8qNfLWOlM0+me2N/pwp2Pnll05bnNwbNptPAyhSgS6oggpZABUbPv62Sjb7mWCbXal/x5TrReqCMmDH9wKpFE1cFJ9x8Bxt7VW+6cw4asGL//tD+XU8cD3fX5BGXinKwPWo2lAk3/UfBvM9+Pd0bO3t895r/fLB33+v/moseGNxDwlNlCEtqIcZDaPeXY+TC20cSByyTa51a8eU63nqgjPISlG+wbA1s6MQ+35TblobGzVqd7pyDB2z9Rv/+DdUnAx0Hc7PsNgTcXsTUbFijrlld9JGvX5/ujZ09vu+1/7W872D17QGrXUZ3tuKXQwxhIs6DaCWJXbAsY2Cbl3+1TmndV6ZT3gAMcccPDJ1gaxOWzMubOH9Tuvc/qMAeWffCyWDHodyQ1Sa7V7rVPBQu+sJENu6GtItxZy/EfuOX1/ceWvuS1tsARlxWLZjUsVaflNhTgUoMX7B0pC9DiW144t4649TOMupYpHJ4FLlgJdM2FNzy3avSBXVwjdeh9eET256ojXQezvNL9h9Hu1qIaPnCEwVVV07KrZyWGSUwme3nrSt/tD1Ru/XyiNcNgyX9WNex4OMe+pQwTvlHvytgG5+8r844tbvMsLtl9SOqFUAtm7Eu7+ZzU/QvBPagSax14JmZjZtXbop0HUSA2TLv2qEMhVkyq27MpCVjWEVFZgSrJLCs89WfrWk9sGl+RHQgoiQAsw8+WdC10KtmoykwBsPn35GxxDat+MYJvWXvMCqneySxWj7YsOlrCm/656svBOK5fh80YHt3PLmwY/fK13P7jkATccRFAH3aEJTOWrIEOeV74YW9hGkynz/AoLiKaTvc8Cncsh1ZMxEqd0l1Ci3gCNt0PEdzQ+gjDruCeNSwT755bXvd/kd0sxMG8bUS3dA5pQwFetRcNAdGYfiCT4zyjVxwJBMgWlbcd0Jt2TtMd3rhMVXuwqFUzHg178bvLMpkvkEDlrLzzRv+8lao48AQ3e6A43E4Rhi2vxA2N2DayZqXphAf1ZFkX1XVZYI6VRiX+VUqqyQLOIS3B4WqAwq1EsRgx3qgMwd+zqBR8YXIgbaJXnK3gpWoWLAsY2Bbn/jmCaXlzWGqndy2wNECMCpmvBK86X9e954Ca+57bWLzthfWZ/XVhH1OFzyqV/l8iJNbRG3tzJNJZCqlUJsQgagwBapHyWpK/SXrV9RXnKySvr0cSook61ACnuPKCqtKjcdUvOSQAUKrfwQqFt7yboCtU04dLJMJHniS9qSXT13tW/KDjDyaQZPY5pf/74auw3+dVSDa4UcUjh2HqiYLfpTUUKk6xxxYlOqjdnfdkDUlw6GeqxSI1P1GJT1iwqT6sOhc6mZRGdXSNEmcg1DAmSrnpaaOXjWCdv8wVFy1dLTvsnlpx/V09aYV36wzWg+WUYKHeS5swaCWTnolfNu/v7cSK3Y9O7xl96u70HUi288SUBiVNxyoVADzXNnNIl8xRj1YBizVB9ty4RNcZuzpCVNPFpUjaWyqZgpN1+E6dG6SDkQqhrq3CFDbJYq7iqgSQod/GMYsXDqKZahjG5ffV2e07i+TtE7hwfQ4WPFEGNPvvClSOXVluupgUCRWUooO/rksuvvVDdHmoyUUDRkalTpM2ZlCEiBr+FTbV1Q4TEGMabA9KnMnuQjJqj8RgakskuQfSKPmptoyZc8WETuItpLkXUkyhqDNHcLo9JVh9FW3jmaXLcpIYpv/9I2TWuubJaqg/QwAk+ngZdM3Drn1e+8No5tcobdW/Xola9y62BetQ1j1oFNYSK+048BH8bwAXHq1ie4CyAYK4vmrfgOe3SellBQrk83DkDq3/5D6NKVSqD+AWDJUoqYNdJJ9WgoSPIweoxgjZ99SxaoWH0hXumh82/Iv16ktB8roIXtcha0GoZdPr47c+MDCTOYbFInt2PbU59p2/OWX2XYz/LCgeI6UUu4R5YEYMpJneFoiSe8SZ4pa2xkjwhxJnpKkeAriYtEn6Wd67fv1b5KWIU7r4eTmOY6rwNYjiGlDUDFr8XQ2YWlGu7/Fn/rSUatu3wgqzzLNhwTT4auYXh256cH3Dtj2bU9+pmvb049GzEb4YEtapiKtPgOjGj0jmUxypBSicVJzMIhzleT7kcEiZSDIIFGzhVQMRJt/W3KTRo1URP8nzUvSq8HTgujxAhg6avKvvGDhW47q91zuTzJwiW5LFyN+KHM5PNehllkuXEswblqeYvutLp93dN3DrLsupKTUlekwiMKxNdlTPraAZbCdyaBIbNf2v/yXvq0rfh0xT0r+FpHZyLhIVgqpAWiS6kOSKq0uHOlSSUchpR7ou2xvPaPftf87jevnfSUNXbJ/Qaob2vNF0dFjMwhfGKZCjBsBVffBcS1Zv5Itn0TVTBGe+x+XTXreyJKkD19PvewXow16ZHbLsmCHhoJXzPotiq64N+fyv++DOJ+KGBRgO7f+5dPxbX/6bZbVJF99eklp+YwWTTByFSYLSuAoKlNAjD4ioNEYUhEkrUlI5c4Xkuj2NiNL+gHyIZDEJztd5PeUsaOeAWLdUmchGceEa8Pn0+VGEEnCswD3+h9Ov3vHJH+MWIzEKtW9GHRy80ggSAE5JkwlhGZWAFY62S6cdH1JeNSU1oHq28EBduOf74lt++NvSMcSb0vyTUltkrtFhgYKTMUn9aWG6Gl1IDlSsnm4X4a804AKQuK0BTvtM5yWcOrelgxacr/oAam0I5wDxdCRSMRg+DS4LnXU0CP2oKS2LCF9n7xe8nwClSh3Un+nmIayxxY2aFeZqJaHntAIFM1dNtw/YvaA94oZFGB7tj13T2zz47+JJBohFP30ay750p4rjRCVw0kKdRGVG94k5fNMYFNASkl9G1QZgZ0Gg9RFsmu7PwzW9ECKEYNUmKwiYcUl81Gat5TKOB2EJE2oZDySW6fR20MRneqDaXvyPNLjFCnKsFyPoMNfivL5nxnJ0ihUDgqw0a1PfDa+bfkjIfOUtPY2vbJyxyABXdCWIQri3H9aFZApkyGsfEmTIPX7raRD6ZDfTzuz1D2Y0r/956W+E3FZuKkchONK1yyJe9K7oNb6pNF7W4cnOxK5NJxEiCZD66h+JEwXhkGSnizPSK9DqOgLDUPx3Hv+ccA2Hdw235doz1JO7ftY4sCrd4fRJ9slbTcZDNBTV53kliGUiKFPBSnjJfVqPyc1iWHSuKT+L4FN+b6pT4/LhiWph2VIwWgfAvJAUvtrWck3QeGqDH2Jcs8omXD6IB3ef02K+BxZPyP1RV0zMZN2NEpywmTvAie+rwIrVIjQxOu+0aEM3V067frqgejZjCXWrFl32d71r+zPjjUg4nbA5/VBJek5w/eUYWpKAqkZWHoCqd2Dkjd3hp96Vsk4KaypDRtSn0nDlsx6SRufksTTEn7Wivtbn84E9sxrknciG0+kHTBkw3L/XEn4k9RQN5CLNmSjz1eCsQuWjvZVXphnkDGwoqZ65u7q5zblJRrg9/qkhe+39B+UT0r2MCQb+QQ18MketCT7nNxGUhW6piLhcfQIH6xQMUqn3jAlOHnxBduT0ga2+dCeij1bqw+pdp8eQgxhsw26iEtrLSOpD9inkPtxkaGjHrOUvk/1TJCqgHBkNs5mPvQIP5xIKYaMuPxHI2dff5owfS7VkDawQgi19/CO7LBmKPB6BCjLbysufIoLJ+7BtQXciIBjnX+L0oLU725ecpxDGYTU4cTf+VzV//Y9qwaD0p783qqffy3qWb8rPQwK8QpJu2gMXjh5TdcRcg39B43TAhyqj0MXal9UYaHKWe3nI0xLdTIQRXxpTPoIXAI2fcwGdMYlYAcEU/qDLgGbPmYDOuMSsAOCKf1Bl4BNH7MBnXEJ2AHBlP6gS8CmidnKF9d9YfeePVfs37Pv2uMNdS3WovfTAAAAEElEQVQb1700rX9zijOn+n+YljA+CUMNoQAAAABJRU5ErkJggg==",alt:"Image 1",className:"img1"}),(0,uT.jsx)("h3",{children:"Temples"}),(0,uT.jsx)("p",{children:"We provide credible information about pilgrimages"})]}),(0,uT.jsxs)("div",{className:"bottom-right",children:[(0,uT.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABgCAYAAAAejVzyAAAAAXNSR0IArs4c6QAAIABJREFUeF7tnXlgFFW2/7+3tt47nX0hG1khIZgQdgKCCAiyb6MOiqDiqKOOs8/8Zp7OG5ffG+e5IC4IiKKgBtkXQZYoskrYCQlJIITsJN2dTu/dVXV/vwrKgA9JhyG+RKh/Oum+davqfO4599xzz71FcOvo9BIgnf4Ob90gbkHqAo3gFqRbkLqABLrALd7SpFuQuoAEusAt3tKkW5C6gAS6wC3edJpEKwpM5wu/XmRrrpoeFZf6YviY3/2VECJ3ZlY3DSRKC3nsXPdE3Yl1L/H+JrVGL8DiIFAHZ1eF9x0/m2Q/VNBZQf3kIVFKievQpzn2ki1LvPVHsrW0CWoNgYcRbG4fE8SJatipAaGZt68PTR32MEkd1/h9WApgQvr6rwaR0nyWkJlSRwL+SUOilV8H2wqXL3BW7rtP8NnAqHRwGZIR1nPIXHVE1gqnvWGm+ei6ZeqW85DdFjCGaERkT/09hox47Tso9Pjy3IaTezbpSYvL53Z4GGMwfF4Xob4LRIQgwJiqMaUNn6DLml7YUaB+kpAoLRIcBw4+cu7wpn9EiGe1nGgDURmgj+/zAd97yjMkYbz1O4HS4tWhvoov5jcXFdzHQEYLHwcmLO1sYvboqcgMLsKWlUtrju6cpWZESDLgU5kgy34Eq1yQGAYNPj0i+0xdYxr252mEENoRoH5ykOjxN7Iajn2x1Ft/OlfFEbRQDYyxWcXBycOmqXIfKf4hIdLy5bk1hdvWmM+XxGmJCL2KICoh4mP4mkzWmrqxbjYYQdE9Sixu3kBlmQ8RvC2WCxUpEtyI6jVyveaONybfgtRGE6Xmzcbawztf8pTtfVztaYSaIfAyekT3nfgkom9fTLqP8LTVymlVvkY+V/R0/ck9L/H281DDBiJ4YJc5eLRp6D5mngaJD3qBlTxOAdaiVbuaa44MiMsatoG/c/HEtuq/3t+7vCYpps2zb+U9zeVfvyE21xoljwhGHYGIlKFrVD2GPgMprZ6kpnrbIyB6Or+b+8j2D5tqDo0gqILaEASLmIj0x7ddIa/az+Yd8dQWZkd0z96on/DehPZcoz1luywkxWtDyebU6kOfLPVbTw9mfDYILIOw8IQmvufg6QhNrrJUuh7kwzO3GHsO3huIUCilTMOBZRMi/bZQhETlw3Vy6PnjO9dY3KJKMOX4Mme9rbq8nrP5j5+Qaw72ikvrt0F191u3NOly4dDG3QZ5/8cvNZz+6gmGeiDyejg1SUhJy/4Tkxa7HGeOj687uWeBm2iZehKPwZNn6UnUGGdboHxVOweUrnlxfzjMCAmOKuWyB0+GOvesHY4+fuiLQlPHtVxeR/2GXx8Xz+zPiknOXc9MeGNSW/Vf7+9dSpMopRyOfTC1fO/Kd/XOsiAtJ8IHAWHdb9uAzFHPQhTVzUe/XmBrOttHw7tg8XHQpYxeH5c6d2YgJo/W74k4tf6FGp2riuMoDyfVQZcy4KNuOXc+TeLusnxfyGeWP3pSaDiUGdM9O5+dsvhn1wuhrfO6DCRa/Ema5+gX77Wc2z2E5XxwCCFQhSU0RGXfcR90TB2K9v3ZXnpwFogPLZSD05Bmj+w98uGgfmPWEpLpa0sQl1xy836js2Lfs2d27/i1ATaomRZIah5hPfP+os4b/DIhMy/VVb3qt+We8jXJyVm5a8m4/CmBXqO95To9JFq1V+OtOPB87aFNv9Z6aqAjbhCdFrrsvN+ie69Pcd5yT23ZqRdIY5HAii0QVQaE9hi8WNVr+h+u1voDEVBrf1exOb7p0JY1npp9OYzcDKfMQh2X02jqPW2yseeM1j6uet0fv5Rrdt7uF11gYvMOBicP/pnptgcqArlGe8p0Wki0sJCHqnBq1c6Pl+loi+ChXrgkAcnpeZtJ3z6/w4UzxsairxdRS1Mvn1dGCzHCEJ99Kq7XnVNJj5mn2yOEHxw70QIOR6vHVxZuWqNtPg0V40MLwyEkJXuTNmfSbPhtfO3uLWvhrBkgey4AvA5hKcNXqJNyHyOps67ov/6d++l0kJRYGMqR3lT89Qfm07v6xnIO+HwO6KJT6oXbbp8FbUy9q+jUs3U1R2awsIPxyOCDutHgzOFz1cbJK0hm4KYtUMHRss1GlOx8zVxcMIdyNrgYghY+Gr36DPkrotIW4NyBu13lez5yNJshCuHwaRIR2nPkbw0hI9+4EffTqSDR2oIwx/ENLzrLdz2i8dWAJxJ8ah2CeuS+iYQB76KmekbzoT1/IfDARyjMog6RvSYvD07M+hVJn9AUqNCvtxw9tTy1/nTBlsbKg0k6qRFatQ6sNq4hvNeAaTCYmmjp4Xfqyg8PZ2QZHB8BGBIsYX3HzkLW4J2EtG+sdvk9dhpItqMb+ttKvzigqt0Dg/ccWLkZPsjgu6VD5kJrmuulbpJXAss4wWrUkDSRZ6IHTb2X9Jp38HqFfj3nUVrAeQ8dfMR8YvNbXnMtWEYPltPCGBbWZNBgB9zVY32N1UaX1QmqjkCLLh5iXPb+sJyp40wJQy/FDNtz7U4BiVZUqG1ly79pOLQuK8jfgGC9DIlRApgyfCIgegj0XDDcvAkWYzd/SEbeb0P5kW+TvlefPmiPAK63LC3eHmqtLHzFUbTpAbX7PDRaL0Dd8Hm80PACVCwDkdHAJmvRpE5C8t2/n65KHLXqeq7XOSBRyvi/WTTPUXHgVc7vslPG4/eIbqjVFILf4VOL7kSPuQr1fj0S7/nPGJJ4f931PGxHnEP3vjCy5cDy7aKvCiERkRdErpvNRzUshSjKhIXMqjUNYoghZtCcNEPqsP8xVxXIPXUKSJfGKJQSJZLc6gJDya49xKL6LOc5vuEVR8XGX9hoMJJ/uYQnZIQYyMP9GGVoxVJTydpFVhbNSB0+6W5kT9sG2CkwXL5R0/KdCtLVhKrE03y7/7a4peidOU5iQMIdr6tJ6rh2BUw7Ehatyg85sXGpWU08SM0dezfp9/vNN/p6nR9SUZFgr1u9yLznnw/AEIrECQs6F6SKNaZj69+wquBFj2FTppCc3669KSG56j9fSIsWPmiTCWImLdQEMjd0owX1gwPeM/lBRZvebeaJD2mDJk4hfW9SSM21a96Rjy+a4yFqxEx5p3NBqlhqOrn+IysPEelDJk9B7q/W3egZ2s5v7mgB11yw+x35yOKHOiWkyuXBJ9e+ZxGojLTbJ09G9lPrb0pI1h173qTHFs1rhTTh1c7VJ92CBCgjfGvB7gX0yOJHOz2kvIk3r7mz7tw9nx5d/FgrpDGrVYEGLVtOF4QZnKdvA3Ew4I2MKDEEnBec4gWILCAwFKKftn7hVbx6FbwykVU5Pb8MdCxGL9ekoZOnos9Ta29Wc/c6Pbbo8fZAokVFQl3Npq2Oks3DGX9za0jJTViwDIWKYUA9PiiJdIQj4BiAeL1geQEeXovu/Sb8h67/k38PxENUBrOK49DaJw2dMg19nlxzC1KAmkTLylRlh145panbncRSJ1q08bDJKlCGQmA5MG4/OLDwiRQqliKY98PjtsHHsQjLHLEy7M5/zGw3pGGTpiPn6dU3ISTKWguef50eWfxEqyYNWy4EElhV+rKyTz86qa76Kj0uvtsx3DZuKNgsH1IcFLBSHAKgCSbQhjNwNcoItnLmL9acttobYk0pQz4OH7vgvvZDmjIDOU+uujkh7XzhNXp00S/bC6l8ZX6RumZvWnBwTJn+wc/T2hJ66fszLZKzIjgyrf+KkFFv/ryt8srvV5i7YTcvJMa68/nX6NHFT7arT6L5bNnKncW66gOp+uD4KuODaxOu1cKVGGHxslk2zn5aH53ad4VhzDu3IAXSSltbKqWMZcffX8WxJU+1F9KZlVuLDVX7UvUhSed1czYmXOuaSuS9/IMZNrXttCEyte8Kfux7swIxW1dq0s3bJxHLzudfxdHFT7cPEmUqVs4t0VftSdWFJJ3TzdnSvS1IZ9+fYdXYioMiU/uvYMZdB6ShU6aR3KdWB9oAAy3XBcJC9LohnVk5r9hY9VWaNjSxQv/gF0ltQGLK3p9l0diKgiLSBiwXxr7zQCDzQd8fJ5Hcp9cEKvxAy3UNSDv+/lr7zR1lzuQ/UWys+jJNHR5fYZy9pQ1I+WzJB5vM2uaioKjUASuEcQsUSG2u4LsCUp4SBX/mJpyqoJRYdz7/+vU4DhWf7DtlrNqZpg6PPaefs6kNc6dA2mAxWEuM0SkDVjDj32g/pNsnTyY5T68LVEMCLdcVNIlp3vHSfPnooovjpLs+CygspOTvnVtxoNhQ82WqOjy2Uvfg2qRrmS+lfMmydVaD5bQhKrXfJ+zdbymOQ9uaVLHGVLTuLauKikjJmzqJ9HtyfaDCD7Rcl4DU8sU/35BPLHrczagQ/cxS4YcWGV/+0IpXWP3xr0o0tXtT+ZBulcY59yVfawGyAunMh6ubWfNJfULm0JVk1Ih7A1mwTCvWmEo3vmclHjtSh06ZTAbenJrEKpDEYwsf83IaRA9bGmDEgTJ1nz5VwlXvT2VCup0PnXNfUluQyj9caePMxbrYrLzPuJFv/ywgx0GBtP5dq0ryImHopMmk380JiXHtevlN/zdv/sLP6RA2emWA5o4y55bPK1FdOJrKhXWrCr//6aRrRbYVTSpdtsrGNp3WRfbIW6UfN+2eQCLh9Pjy4LLtSywCJyFh6NSbt09q2fnCm9Kht3/hJRpETV8U0PS5IvSzH31+Wmg8kSyExNVFzH4+8VpLYJRYX+nSRXbWUqaOzMxbo7/rlZmEkDZTx2j16tCTK19rUsOLlOHTJ5Oc392UjgNx7Hj+bfHY0kfdEovo373ABdJXKP1T2bLZRVzD8YygyOTKkAc+S2yroz77wVwrtZSaInr2/VQ/5tV7A4o4VOWHHNn4rlnltiBj+JRJpM9fbz7HQRGsZduzC9miFfMopQga/1wQUgQnkNM6d4fyy0TPcRcdocSDfpxz8s4jX+x2VRTmBocnHOdy5w2BO8mLSB8HMZoC5wCVgQHDE0T6fTh0iG88trGI2CoTw9JylmPA1McQNtEFfEmURMdvkzUZQENQLhBw1QSJw70ofjGq+OuttYzDgfTh904kub/b0FZjaO/vnd67Ux6o+cu/v+s/tPARuJoQlHLnkRZZpaHEowH1QWBVkP0UaoaTJZlCYlgG1OtWweFy1JX0CaFmUEYFpyHdbRd1gixSVtlUgxDSOuHn8LuVPRv8wcTnlpvrjGq/DcQYLtpN6SVuxsgLVGZZGRRgGYkwjMQQwkAEAyfhqdepFYjPXGfOdvsMiB31wHiS8/im9kJoq3yXgNSw781/Og4s/Y3acwGyNgqSTEBFKzQ8A4C5mCQv8BCprORewy+J4DkGguSAzn9xRUwzgkAEPThZAksBWSKQIUMSvAARwfllqCiFRvbBz6pgZowgggGM3wmWKieoIBEWEuEulocLCizqJRAZE9xMFFJGzhpNcu7b1pbQ2/t7l4DkOLs/0lFa8InbUpHqY7SEYRiWF52EZxgiMRzrF72ESG6wHCdTXiXLlBEliYq85FOLzdXhDPHDx2sggwEviWBkCioJkBgRssoFkfgBSYCymFnFcGAEdb1PY1IWGRG16CEslSGJPJGoAJlREYZnKAM3JNkvE4mVCWsSjOFJa4ONfZ8IZELyJwnp4pRFIY9qpT/xUoixFCi7+Kyc5mJDE90X9/VJSaDAt3+3fqEhOFV0pVwE/cVzWs89B4iRF89V/udUpPUa331eXrdPqft7R4bSLwoEKSn+QMZV7QWklO9QTaJFe0M8/rLbOGJnwIOBRAgnUgoqU0XsYJVPZTcZxQfQA5wOLmJq1mVMPHw9D9OVzlES/eG03+awuYg+JvXotRZhdxgkZdxRvb6guOXCwRTIzfDKLCAz0EsMeEohyTL8xA+WB6jsBy8CHqqBR9cNqYOnZBiy7vnBzZq6EozL71UJVVmPf3y3ufLQXzx1Z/pLLit0aiVBWYO07DufY6J6/9fV8tw7DlJRvnBq51Iv5y0Dx0vwsOGQJA1UIgsODMDKEIkEERI0rBcmr601Bc6ljUHCHfdPJL0eDtiVVRoETtdHwN2S47db0kSnI4ZlWCoI2kqEhh8Gz5WiR7wN+Eom5Ln/la086YllPe1FOz5w1h/tB/jg5YPhF2VwYguUNbaixMKUlrc/ZMojw74fm+w4SJSS4leHyCHqJkTGJe5Dt4H/DTbKD5HnQGUZjCSDFSlYAfDVq3Cq4HlH7fl0s2xEwqjZE0nur38QUusis/LPBa/kGVFzonCev6VuksthZRjqhYbI4CQflM6eEBZOnwjK84DAgWj0dZwhrFKjD6/QmSKLVFpTkTakWxk0pBLhjW5ghrLw64buWUfrj+kaT25+0XZq+1Ma7wVoVQxYXUitKi57pSo2+VWIjgTr4W2rpIbTYZI+Gqq+82YHD3hk2eUa2KGQSl6/XaZiDZJ7D/lQGDVn7g/Fwih9jhHXlm6zV566wyrqkDRi1gSS+9jG75s1JeERdPcQ97kjv7BVH5vpdljBaELgltXwyWqwrBYaja5JUDFm0e/i3B57sggKRnG7ZRE89YOnEnjZBU52ArIPLkWveA0EtcEjaE3VKl1YtcYYUszqg4uhiz4CPvwbkvmvXVACNbWtWx2ctEyqOrD8Y8ZnFryKBdEnIjhp5DxDWt5yEtPX9V1dtHR5UsO6Z89QyQcmY9a2yIkvjv6RID3HnHhtp6TjWpCQcfv73MjX51zrAVtWzylwnj883COpkTh8euvIXbHhwCmupaw4p/ns6Yeba0vncM5aVpCaoaYecCoDjHGZm7RRaa/BlHAMKafMwLMU+BtRPluXdp7JD4LLnuq3m3uLdmu27DL3FFsuJEjOmji/26qmDAHDKCmsHETKwk8JJJkBlL9ZNaghCmGpg/4R1n3QcyRusDsQSLR8bZy1aNeKutJdeWrO0rpaPiih/zpT4sSHSM+p5qvV4V48sEK0NSQ2hY4tS5z9Zs/L57I6UJPy2aNvLRRDxEZ06zF0BTfmYh4bPZufLteUTmFkqoc+ejfJfXiL8r1t7dztzWW7RqoEAZF5o6dBHXXa1VT/WGPlwXv8Tluo5NYBrB6SRgeVKX5/aNLg/zJFDt2K2FhvoK7vxbW4hy6Gk1rDO5UEVO7mdTSn+xyWXi6HJdvltvfyOa2J1Gk2Mp4GaGkj/Co9SPyYtYnj+06/5nSHsouLdeV/1Bdt/4vfZ4ZPpYMc07s2MXvUBD6l94lrbbZree1vIuN1QUqbUxA65a8jLze7HQrpyFvviaHeesT3yF1Fxi2Z3njk40fqDn7yrs7XAG+LFyp9HHTdB62PHJD8c8++z1a2VB+5i3W7wGsMklk2sW5JApHNUKv0MARnngqLz3oF0SmfISnJFcjEXyCt/krvq0jAuQsMXBEyMi7IKD+T5dy18BN7c32aU5OMhIH33M73+cWuq9XrP/bxyNqjOz6ltUdCDRoJrCkIQakD/ojkkQva2sbNvPcfc927Fi4xaINBez/yuGn4o2//SOYunz2yYLlodFYhuXfmKsT3fPXItu27tSoJahULlUpjtTfbgqnsQ1qv9PnUXp9qrikfy9mbINMgODS9QYKTq8LTMhapw5IWwhvbHOhqivbCuVZ5enh+xvmtS4qMGhaapCFfqibMv+PyVk7PfxxjLfnyvcYTe8eolKGg0A3qiJ7bYrJGzSYZd7W5lQGt3aA9veb189GcLbTeziPtvvm6y/urDh3MKh3n0QUfiBGyBTFJUYC9pam20RImG0IQe/uoBIREtjh2bfnEff7gGAE+BGX1/4/q40X/KXisiOiRtxkRo38Fd3oFGfG/ux2A4tTULTzcjLpCgzG+l1P/0Bf6VrNNC/nmvTueqi0p+Kfga4LgcUMwxrmisidNQMhde0n37m3u+XrRzD+0saXq2N0ur4y4nLve0NzxwtPf9zA70Nwt5I+/tcIX7DcjLjUBaGhEncWJ0F6Dtgq5g2YgrMqJXd5HnEc+eUf22mGYMHdQ8fYD+3ipBSlDJk0j/Z+74UmG16thZz6ZVR50YX8yy6jspicWhKDkbL+K3cvWyu4LEUqw10eCkZQ1+k1tr2F/JBEjHIFcR2nE3u0HXzYX7XzG6/VCHd/3cPQ9MwcT8j+3P+g4SEX5wokv53tNcjPiYqIOQBPsrimtGm5nBfTIHfAoRN0F89mTi92VhaGxifE1GDKhz9FNOxrUnBfJ2aMeF4b8+Qq7HMiDB1KmdffJhuMq2LUibDYZucrGGI0UmPHd+Ej5/P9zSF8yyuAXddHqCwVrvxbqD/TR8JyfhOduLau6MD7UQOD2izBEZxaFZY2ZgPT7KwN2YAoLeXfLiqXVh7b/XMPy4ILiS6MmPtiXhE+yX+0ZOg5S2WbViS3/7THRJsQl9/gQPUb8/djnm0tNbCNUfgsMsg92O0DDeiI6Z+gYhIccOLxpVbOyZWf3PqMeVQ/807uBCL29ZSrWPvu53Hj0LthLoRJt4CGAQoCoDKpZDhzE1qi4j6PgJD+CJRk6yQ4iWeB3AXxEAmocBviCcpT9wH+miRyyLpCtQy+Nico2q5qKNn5iLd88OUinA0L6noi4beoQ0uPqgDq2TyrbrCr6fL5H561CYvaQD3HnvXNxzpFSdXDN+/6GkgGCpxmG8NSTuowJv+L7P7yDnlkYVLJ1VbMkOpE5bNpUkv3rG56uq7jgJ97/pUflKhbU7jMIVonKvCFEKsDLaKA46Ay8IIwEP6FgJAqVBHCiHxxLQRkBHlkDdUz/r/TZc8eTzMBM2yVAxatDLae2b2iuKhykInaQoNiqmH6PZJDMmdc0kR2nSRUF6lPrX3ZH+KsRlt5/BcaPfuC7MQYt2W2AnguCzXDhO4+NVi0OKV/9vpkhXiQNmjKD9PvzZ+3VkkDKW84UBrGuyjzOZ2VY2UcIGCKyvDLHCxCZCJKHcBIhEqdSdApgvMqMHwUMYBm1rOUM1cgYeyxQ0/bdPfkPvnpn08md62RzpVYiPHQJA/eG9Bs7/vJXMvzQ/Xc4pDB/FSIy8z4kY99+4JqubsVSU/m696wM40PSwCk/I/3/mB+I0Dt7GVpRoK4q/uodd8WXs4mrCRyrQ2zPYYv53HHPBOpkdCykDS+4DeIFRGYOW6Yas2D2NSGdyQ86teGDZmV1ePrASTO5vk+u7OwA2ro/evyt3NqDqzbyfmuUzeFXxn2IzJl0rz54+NpAXfSO7ZMUc7fhBbdWtiIqY8iHmtHzr61JZZuNRz9fZGMZFzIGj5/O9Xnyujbwa0twP8bvyqsZfF99/FzNie1/CmFaUG+2ISg5rzSq77Q7SPrMmvbeQ4dqUtH6f7o1shWxmQM+VI1+tU1IhV+8bVM61IwB46dxub/tNOOk9giVVn2W2rhr5SaxYn+qQaNBo2hC96HTX0Z63vMkdOB17XDcoZBOrH/FrZWaEJ858CNhzKv3X9PclX1kLNy2wqaT7eg5aOw0kvvnLgVJ2aLUb942t+rw+je5lioYiARWF2MxDr53OHxZJf9OgkrHQtrwslsr1yMuQ9GkNhyHso+Mx7e+b9NLbiQNmjiN9P9Dl4FEG9ZFmvd/9qm5tPB2xV0nmkiE9hy13Jg59mkSO+CqUxPt0c4Oh2SQ6xCTMeAD1eh3HmxLk4o+f9+mlb3oPnDCdDLw912iT/IcfXtM9ZHNG4i1lNdxHBhdjDc8866xSLzzGxJ1W5svMQkEVodCOr7xZbfR34CYXnlLVaNfn9uWd3d09bvNQXoW3fuOnk76/aZTQ6IXCvSNh9fP95TunMP47JC4cIR0H7hVn3XHbJI0qSEQ4QdapkMhndjwsjtIrEdUZt57qjHzH7r2OGmN6fSGJVYZTqQNubtTOw60+KOssv3rthLb2WheCXEFdUNIxt33IH3oZhKed9X4W6BAfvTYXfHm1zxBYi2ieg1bwo556+FrQqpcHly28UOL22VB7+EzJpN+N34Jyb8jKOVcZWAqn9/xh7PfbHkuUgO4JIDE9z1sTB86VZPx88p/t/4fP+JQtllV/PnLHpPvAqIzhy0hY99uE1LF+kUWXmpG7ODx0xA7eQuiz3ovz+D511bUKwkQfpkVUKLYynEpkn2V51XO+f5xRfnLs4QI8N01DASnLeF+S+ldtaV7/q/cUhnOig7IXiA+Z9T/YfqMnx9o5OB6IXaguVuqPrVxidvkMyMmY3hgkD592RIiVSMoJLzKrUpy+xg9ByWfh4gyZXhIUJquVwmEEoAnkDmiPADzXSYdUVY/fO+g32bptp7Telx6ZkYG4WUGhConckQilIqcBJnxgxK/zEKUXWZripLM6XM74AcLjyoIxpjeR7tlj/45UmYU3+gUsB/X3FUsVR/ftKwVUnzPYe+SsQsevaa5K16aeH7rOxWRtAbU70Wj3wRBHwQoqVdEggwWsvKKciW5HgwolNRXRcAMlKUsyndo56cCl5cJiJJRy8igRHn9Ai6RVtZd+LweqDV6eCFAG979m9CskX9EUM7+QDOHrld7Lj+v4zSpbLPq8NaFniCfGYk9hr7BjXvpqbZc8OKti216sQkGU2idg49zUZVJRf2u1oUnEuFao9EsvJRQRaxCKyS0vlv+23m6Kz/Jt9C+/VSU7uJkxKXvldQtBbay3oh1AFQEK3MUVEUp1UkSeJ8uIqpcFLQ7jSk9V2pioxrb81azGwHoCtW/URV+Vw9VIG1Z4gnx1SMx/bYF6DP2DyRmgkvpVy6+6iCfvdivGAiwUUJ5SOipLfkXWNmL9GFjJ0M/sDXV69KqCWWVw7UOVvjX74w5wMYXdVmN9VfWzsRerMOpFdsTDL3RcuxYSBUF6sOrXnbHk0ro1X6HZIiqlgUNI1NZlv0ERNbIHMP4ZcZFCevzEdHJmi0tuS5Zh54j77ub9P7NDX+dQEcI8MeoM8AW1/5bUdzV8q9Xu4ULe6BhrJB4ZeWL3LrihYgMeNHQ2o/IxAWZlSGxHOx+Hh4hElkj7r+L7/XWNM8xAAAAkElEQVTA1vZf9ad5RsdBopS0HNo0rrnsq/k8zEYf8TOt3pmyobCsJpxPTxlKRMJ4JJHxiRKvkvycRi0LYebUrKFDyXW+EOqniKnDICnCas3Mqd7Hw9Msw+egyEj61kVWMnSU41KWzsW8bSUN+NAh7t+JGN+C9FOUQBd4pg7VpC7w/F3iFm9B6gKYbkHqApD+HxC8oEIS2HO2AAAAAElFTkSuQmCC",alt:"Image 2",className:"img2"}),(0,uT.jsx)("h3",{children:"Make a Donation"}),(0,uT.jsx)("p",{children:"A robust payment mechanism with secured system"})]})]})]})]}),(0,uT.jsx)(HY,{})]});function fK(e,t){if(null==e)return{};var n,i,r=(0,gT.A)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var mK=n(8139),gK=n.n(mK);const vK=["xxl","xl","lg","md","sm","xs"],yK="xs",AK=i.createContext({prefixes:{},breakpoints:vK,minBreakpoint:yK}),{Consumer:bK,Provider:xK}=AK;function _K(e,t){const{prefixes:n}=(0,i.useContext)(AK);return e||n[t]||t}const wK=["className","bsPrefix","as"],EK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r="div"}=e,o=fK(e,wK);return i=_K(i,"card-body"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});EK.displayName="CardBody";const CK=EK,SK=["className","bsPrefix","as"],TK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r="div"}=e,o=fK(e,SK);return i=_K(i,"card-footer"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});TK.displayName="CardFooter";const IK=TK,MK=i.createContext(null);MK.displayName="CardHeaderContext";const kK=MK,RK=["bsPrefix","className","as"],LK=i.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:o="div"}=e,a=fK(e,RK);const s=_K(n,"card-header"),l=(0,i.useMemo)(()=>({cardHeaderBsPrefix:s}),[s]);return(0,uT.jsx)(kK.Provider,{value:l,children:(0,uT.jsx)(o,u(u({ref:t},a),{},{className:gK()(r,s)}))})});LK.displayName="CardHeader";const BK=LK,PK=["bsPrefix","className","variant","as"],DK=i.forwardRef((e,t)=>{let{bsPrefix:n,className:i,variant:r,as:o="img"}=e,a=fK(e,PK);const s=_K(n,"card-img");return(0,uT.jsx)(o,u({ref:t,className:gK()(r?"".concat(s,"-").concat(r):s,i)},a))});DK.displayName="CardImg";const OK=DK,NK=["className","bsPrefix","as"],FK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r="div"}=e,o=fK(e,NK);return i=_K(i,"card-img-overlay"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});FK.displayName="CardImgOverlay";const zK=FK,UK=["className","bsPrefix","as"],jK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r="a"}=e,o=fK(e,UK);return i=_K(i,"card-link"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});jK.displayName="CardLink";const VK=jK,HK=e=>i.forwardRef((t,n)=>(0,uT.jsx)("div",u(u({},t),{},{ref:n,className:gK()(t.className,e)}))),GK=["className","bsPrefix","as"],QK=HK("h6"),WK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r=QK}=e,o=fK(e,GK);return i=_K(i,"card-subtitle"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});WK.displayName="CardSubtitle";const qK=WK,XK=["className","bsPrefix","as"],YK=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r="p"}=e,o=fK(e,XK);return i=_K(i,"card-text"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});YK.displayName="CardText";const KK=YK,JK=["className","bsPrefix","as"],ZK=HK("h5"),$K=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:r=ZK}=e,o=fK(e,JK);return i=_K(i,"card-title"),(0,uT.jsx)(r,u({ref:t,className:gK()(n,i)},o))});$K.displayName="CardTitle";const eJ=$K,tJ=["bsPrefix","className","bg","text","border","body","children","as"],nJ=i.forwardRef((e,t)=>{let{bsPrefix:n,className:i,bg:r,text:o,border:a,body:s=!1,children:l,as:c="div"}=e,h=fK(e,tJ);const d=_K(n,"card");return(0,uT.jsx)(c,u(u({ref:t},h),{},{className:gK()(i,d,r&&"bg-".concat(r),o&&"text-".concat(o),a&&"border-".concat(a)),children:s?(0,uT.jsx)(CK,{children:l}):l}))});nJ.displayName="Card";const iJ=Object.assign(nJ,{Img:OK,Title:eJ,Subtitle:qK,Body:CK,Link:VK,Text:KK,Header:BK,Footer:IK,ImgOverlay:zK});function rJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function oJ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,dJ(i.key),i)}}function aJ(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fJ(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sJ(e,t,n){return(t=dJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lJ(Object(n),!0).forEach(function(t){sJ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||fJ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hJ(e){return function(e){if(Array.isArray(e))return rJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fJ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dJ(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function pJ(e){return pJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pJ(e)}function fJ(e,t){if(e){if("string"==typeof e)return rJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rJ(e,t):void 0}}var mJ=function(){},gJ={},vJ={},yJ=null,AJ={mark:mJ,measure:mJ};try{"undefined"!==typeof window&&(gJ=window),"undefined"!==typeof document&&(vJ=document),"undefined"!==typeof MutationObserver&&(yJ=MutationObserver),"undefined"!==typeof performance&&(AJ=performance)}catch(QJ){}var bJ,xJ,_J=(gJ.navigator||{}).userAgent,wJ=void 0===_J?"":_J,EJ=gJ,CJ=vJ,SJ=yJ,TJ=AJ,IJ=(EJ.document,!!CJ.documentElement&&!!CJ.head&&"function"===typeof CJ.addEventListener&&"function"===typeof CJ.createElement),MJ=~wJ.indexOf("MSIE")||~wJ.indexOf("Trident/"),kJ={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"},utility:{"fa-semibold":"semibold",fausb:"semibold"},"utility-duo":{"fa-semibold":"semibold",faudsb:"semibold"},"utility-fill":{"fa-semibold":"semibold",faufsb:"semibold"}},RJ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],LJ="classic",BJ="duotone",PJ="sharp",DJ="sharp-duotone",OJ="chisel",NJ="etch",FJ="jelly",zJ="jelly-duo",UJ="jelly-fill",jJ="notdog",VJ="notdog-duo",HJ="slab",GJ="slab-press",QJ="thumbprint",WJ="utility",qJ="utility-duo",XJ="utility-fill",YJ="whiteboard",KJ=[LJ,BJ,PJ,DJ,OJ,NJ,FJ,zJ,UJ,jJ,VJ,HJ,GJ,QJ,WJ,qJ,XJ,YJ],JJ=(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(bJ={},LJ,"Classic"),BJ,"Duotone"),PJ,"Sharp"),DJ,"Sharp Duotone"),OJ,"Chisel"),NJ,"Etch"),FJ,"Jelly"),zJ,"Jelly Duo"),UJ,"Jelly Fill"),jJ,"Notdog"),sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(bJ,VJ,"Notdog Duo"),HJ,"Slab"),GJ,"Slab Press"),QJ,"Thumbprint"),WJ,"Utility"),qJ,"Utility Duo"),XJ,"Utility Fill"),YJ,"Whiteboard"),new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["utility",{defaultShortPrefixId:"fausb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-duo",{defaultShortPrefixId:"faudsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-fill",{defaultShortPrefixId:"faufsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]])),ZJ=["fak","fa-kit","fakd","fa-kit-duotone"],$J={fak:"kit","fa-kit":"kit"},eZ={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},tZ=(sJ(sJ({},"kit","Kit"),"kit-duotone","Kit Duotone"),{kit:"fak"}),nZ={"kit-duotone":"fakd"},iZ="duotone-group",rZ="swap-opacity",oZ="primary",aZ="secondary",sZ=(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(xJ={},"classic","Classic"),"duotone","Duotone"),"sharp","Sharp"),"sharp-duotone","Sharp Duotone"),"chisel","Chisel"),"etch","Etch"),"jelly","Jelly"),"jelly-duo","Jelly Duo"),"jelly-fill","Jelly Fill"),"notdog","Notdog"),sJ(sJ(sJ(sJ(sJ(sJ(sJ(sJ(xJ,"notdog-duo","Notdog Duo"),"slab","Slab"),"slab-press","Slab Press"),"thumbprint","Thumbprint"),"utility","Utility"),"utility-duo","Utility Duo"),"utility-fill","Utility Fill"),"whiteboard","Whiteboard"),sJ(sJ({},"kit","Kit"),"kit-duotone","Kit Duotone"),{classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"},utility:{fausb:"fa-semibold"},"utility-duo":{faudsb:"fa-semibold"},"utility-fill":{faufsb:"fa-semibold"}}),lZ=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr","fausb","faudsb","faufsb"].concat(["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"]),cZ=[1,2,3,4,5,6,7,8,9,10],uZ=cZ.concat([11,12,13,14,15,16,17,18,19,20]),hZ=[].concat(hJ(Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"],utility:["fausb"],"utility-duo":["faudsb"],"utility-fill":["faufsb"]})),["solid","regular","light","thin","duotone","brands","semibold"],["aw","fw","pull-left","pull-right"],["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",iZ,rZ,oZ,aZ]).concat(cZ.map(function(e){return"".concat(e,"x")})).concat(uZ.map(function(e){return"w-".concat(e)})),dZ="___FONT_AWESOME___",pZ="svg-inline--fa",fZ="data-fa-i2svg",mZ="data-fa-pseudo-element",gZ="data-prefix",vZ="data-icon",yZ="fontawesome-i2svg",AZ=["HTML","HEAD","STYLE","SCRIPT"],bZ=["::before","::after",":before",":after"],xZ=function(){try{return!0}catch(e){return!1}}();function _Z(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[LJ]}})}var wZ=cJ({},kJ);wZ[LJ]=cJ(cJ(cJ(cJ({},{"fa-duotone":"duotone"}),kJ[LJ]),$J),eZ);var EZ=_Z(wZ),CZ=cJ({},{chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},utility:{semibold:"fausb"},"utility-duo":{semibold:"faudsb"},"utility-fill":{semibold:"faufsb"},whiteboard:{semibold:"fawsb"}});CZ[LJ]=cJ(cJ(cJ(cJ({},{duotone:"fad"}),CZ[LJ]),tZ),nZ);var SZ=_Z(CZ),TZ=cJ({},sZ);TZ[LJ]=cJ(cJ({},TZ[LJ]),{fak:"fa-kit"});var IZ=_Z(TZ),MZ=cJ({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"},utility:{"fa-semibold":"fausb"},"utility-duo":{"fa-semibold":"faudsb"},"utility-fill":{"fa-semibold":"faufsb"}});MZ[LJ]=cJ(cJ({},MZ[LJ]),{"fa-kit":"fak"});_Z(MZ);var kZ=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|usb|ufsb|udsb|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,RZ="fa-layers-text",LZ=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Utility|Utility Fill|Utility Duo|Slab Press|Slab|Whiteboard)?.*/i,BZ=(_Z(cJ({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"},utility:{600:"fausb"},"utility-duo":{600:"faudsb"},"utility-fill":{600:"faufsb"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),PZ={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DZ=[].concat(hJ(["kit"]),hJ(hZ)),OZ=EJ.FontAwesomeConfig||{};if(CJ&&"function"===typeof CJ.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(e){var t=uJ(e,2),n=t[0],i=t[1],r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=CJ.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==r&&null!==r&&(OZ[i]=r)})}var NZ={styleDefault:"solid",familyDefault:LJ,cssPrefix:"fa",replacementClass:pZ,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};OZ.familyPrefix&&(OZ.cssPrefix=OZ.familyPrefix);var FZ=cJ(cJ({},NZ),OZ);FZ.autoReplaceSvg||(FZ.observeMutations=!1);var zZ={};Object.keys(NZ).forEach(function(e){Object.defineProperty(zZ,e,{enumerable:!0,set:function(t){FZ[e]=t,UZ.forEach(function(e){return e(zZ)})},get:function(){return FZ[e]}})}),Object.defineProperty(zZ,"familyPrefix",{enumerable:!0,set:function(e){FZ.cssPrefix=e,UZ.forEach(function(e){return e(zZ)})},get:function(){return FZ.cssPrefix}}),EJ.FontAwesomeConfig=zZ;var UZ=[];var jZ=16,VZ={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function HZ(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function GZ(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function QZ(e){return e.classList?GZ(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(e){return e})}function WZ(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qZ(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function XZ(e){return e.size!==VZ.size||e.x!==VZ.x||e.y!==VZ.y||e.rotate!==VZ.rotate||e.flipX||e.flipY}function YZ(){var e="fa",t=pZ,n=zZ.cssPrefix,i=zZ.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";\n  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";\n  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";\n  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";\n  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";\n  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";\n  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";\n  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";\n  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";\n  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";\n  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";\n  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";\n  --fa-font-utility-semibold: normal 600 1em/1 "Font Awesome 7 Utility";\n  --fa-font-utility-duo-semibold: normal 600 1em/1 "Font Awesome 7 Utility Duo";\n  --fa-font-utility-fill-semibold: normal 600 1em/1 "Font Awesome 7 Utility Fill";\n}\n\n.svg-inline--fa {\n  box-sizing: content-box;\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n  width: var(--fa-width, 1.25em);\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285714em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left,\n.svg-inline--fa .fa-pull-start {\n  float: inline-start;\n  margin-inline-end: var(--fa-pull-margin, 0.3em);\n}\n.svg-inline--fa.fa-pull-right,\n.svg-inline--fa .fa-pull-end {\n  float: inline-end;\n  margin-inline-start: var(--fa-pull-margin, 0.3em);\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));\n  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: var(--fa-width, 1.25em);\n}\n.fa-layers .svg-inline--fa {\n  inset: 0;\n  margin: auto;\n  position: absolute;\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-xs {\n  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-sm {\n  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-lg {\n  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-xl {\n  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-2xl {\n  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that\'s relative to the scale\'s 16px base */\n  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it\'s parent */\n  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text\'s descender */\n}\n\n.fa-width-auto {\n  --fa-width: auto;\n}\n\n.fa-fw,\n.fa-width-fixed {\n  --fa-width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-inline-start: var(--fa-li-margin, 2.5em);\n  padding-inline-start: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n/* Heads Up: Bordered Icons will not be supported in the future!\n  - This feature will be deprecated in the next major release of Font Awesome (v8)!\n  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.\n*/\n/* Notes:\n* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)\n* --@{v.$css-prefix}-border-padding =\n  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it\'s vertical alignment)\n  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)\n*/\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.0625em);\n  box-sizing: var(--fa-border-box-sizing, content-box);\n  padding: var(--fa-border-padding, 0.1875em 0.25em);\n}\n\n.fa-pull-left,\n.fa-pull-start {\n  float: inline-start;\n  margin-inline-end: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right,\n.fa-pull-end {\n  float: inline-end;\n  margin-inline-start: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n  .fa-bounce,\n  .fa-fade,\n  .fa-beat-fade,\n  .fa-flip,\n  .fa-pulse,\n  .fa-shake,\n  .fa-spin,\n  .fa-spin-pulse {\n    animation: none !important;\n    transition: none !important;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.svg-inline--fa.fa-inverse {\n  fill: var(--fa-inverse, #fff);\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  line-height: 2em;\n  position: relative;\n  vertical-align: middle;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  --fa-width: 1.25em;\n  height: 1em;\n  width: var(--fa-width);\n}\n.svg-inline--fa.fa-stack-2x {\n  --fa-width: 2.5em;\n  height: 2em;\n  width: var(--fa-width);\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  inset: 0;\n  margin: auto;\n  position: absolute;\n  z-index: var(--fa-stack-z-index, auto);\n}';if(n!==e||i!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");r=r.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(i))}return r}var KZ=!1;function JZ(){zZ.autoAddCss&&!KZ&&(!function(e){if(e&&IJ){var t=CJ.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=CJ.head.childNodes,i=null,r=n.length-1;r>-1;r--){var o=n[r],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=o)}CJ.head.insertBefore(t,i)}}(YZ()),KZ=!0)}var ZZ={mixout:function(){return{dom:{css:YZ,insertCss:JZ}}},hooks:function(){return{beforeDOMElementCreation:function(){JZ()},beforeI2svg:function(){JZ()}}}},$Z=EJ||{};$Z[dZ]||($Z[dZ]={}),$Z[dZ].styles||($Z[dZ].styles={}),$Z[dZ].hooks||($Z[dZ].hooks={}),$Z[dZ].shims||($Z[dZ].shims=[]);var e$=$Z[dZ],t$=[],n$=function(){CJ.removeEventListener("DOMContentLoaded",n$),i$=1,t$.map(function(e){return e()})},i$=!1;function r$(e){var t=e.tag,n=e.attributes,i=void 0===n?{}:n,r=e.children,o=void 0===r?[]:r;return"string"===typeof e?WZ(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(WZ(e[n]),'" ')},"").trim()}(i),">").concat(o.map(r$).join(""),"</").concat(t,">")}function o$(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}IJ&&((i$=(CJ.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(CJ.readyState))||CJ.addEventListener("DOMContentLoaded",n$));var a$=function(e,t,n,i){var r,o,a,s=Object.keys(e),l=s.length,c=void 0!==i?function(e,t){return function(n,i,r,o){return e.call(t,n,i,r,o)}}(t,i):t;for(void 0===n?(r=1,a=e[s[0]]):(r=0,a=n);r<l;r++)a=c(a,e[o=s[r]],o,e);return a};function s$(e){return 1!==hJ(e).length?null:e.codePointAt(0).toString(16)}function l$(e){return Object.keys(e).reduce(function(t,n){var i=e[n];return!!i.icon?t[i.iconName]=i.icon:t[n]=i,t},{})}function c$(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,i=void 0!==n&&n,r=l$(t);"function"!==typeof e$.hooks.addPack||i?e$.styles[e]=cJ(cJ({},e$.styles[e]||{}),r):e$.hooks.addPack(e,l$(t)),"fas"===e&&c$("fa",t)}var u$=e$.styles,h$=e$.shims,d$=Object.keys(IZ),p$=d$.reduce(function(e,t){return e[t]=Object.keys(IZ[t]),e},{}),f$=null,m$={},g$={},v$={},y$={},A$={};function b$(e,t){var n,i=t.split("-"),r=i[0],o=i.slice(1).join("-");return r!==e||""===o||(n=o,~DZ.indexOf(n))?null:o}var x$,_$=function(){var e=function(e){return a$(u$,function(t,n,i){return t[i]=a$(n,e,{}),t},{})};m$=e(function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter(function(e){return"number"===typeof e}).forEach(function(t){e[t.toString(16)]=n});return e}),g$=e(function(e,t,n){(e[n]=n,t[2])&&t[2].filter(function(e){return"string"===typeof e}).forEach(function(t){e[t]=n});return e}),A$=e(function(e,t,n){var i=t[2];return e[n]=n,i.forEach(function(t){e[t]=n}),e});var t="far"in u$||zZ.autoFetchSvg,n=a$(h$,function(e,n){var i=n[0],r=n[1],o=n[2];return"far"!==r||t||(r="fas"),"string"===typeof i&&(e.names[i]={prefix:r,iconName:o}),"number"===typeof i&&(e.unicodes[i.toString(16)]={prefix:r,iconName:o}),e},{names:{},unicodes:{}});v$=n.names,y$=n.unicodes,f$=T$(zZ.styleDefault,{family:zZ.familyDefault})};function w$(e,t){return(m$[e]||{})[t]}function E$(e,t){return(A$[e]||{})[t]}function C$(e){return v$[e]||{prefix:null,iconName:null}}function S$(){return f$}x$=function(e){f$=T$(e.styleDefault,{family:zZ.familyDefault})},UZ.push(x$),_$();function T$(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?LJ:t,i=EZ[n][e];if(n===BJ&&!e)return"fad";var r=SZ[n][e]||SZ[n][i],o=e in e$.styles?e:null;return r||o||null}function I$(e){return e.sort().filter(function(e,t,n){return n.indexOf(e)===t})}var M$=lZ.concat(ZJ);function k$(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,n=void 0!==t&&t,i=null,r=I$(e.filter(function(e){return M$.includes(e)})),o=I$(e.filter(function(e){return!M$.includes(e)})),a=uJ(r.filter(function(e){return i=e,!RJ.includes(e)}),1)[0],s=void 0===a?null:a,l=function(e){var t=LJ,n=d$.reduce(function(e,t){return e[t]="".concat(zZ.cssPrefix,"-").concat(t),e},{});return KJ.forEach(function(i){(e.includes(n[i])||e.some(function(e){return p$[i].includes(e)}))&&(t=i)}),t}(r),c=cJ(cJ({},function(e){var t=[],n=null;return e.forEach(function(e){var i=b$(zZ.cssPrefix,e);i?n=i:e&&t.push(e)}),{iconName:n,rest:t}}(o)),{},{prefix:T$(s,{family:l})});return cJ(cJ(cJ({},c),function(e){var t=e.values,n=e.family,i=e.canonical,r=e.givenPrefix,o=void 0===r?"":r,a=e.styles,s=void 0===a?{}:a,l=e.config,c=void 0===l?{}:l,u=n===BJ,h=t.includes("fa-duotone")||t.includes("fad"),d="duotone"===c.familyDefault,p="fad"===i.prefix||"fa-duotone"===i.prefix;!u&&(h||d||p)&&(i.prefix="fad");(t.includes("fa-brands")||t.includes("fab"))&&(i.prefix="fab");if(!i.prefix&&R$.includes(n)){if(Object.keys(s).find(function(e){return L$.includes(e)})||c.autoFetchSvg){var f=JJ.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=E$(i.prefix,i.iconName)||i.iconName}}"fa"!==i.prefix&&"fa"!==o||(i.prefix=S$()||"fas");return i}({values:e,family:l,styles:u$,config:zZ,canonical:c,givenPrefix:i})),function(e,t,n){var i=n.prefix,r=n.iconName;if(e||!i||!r)return{prefix:i,iconName:r};var o="fa"===t?C$(r):{},a=E$(i,r);r=o.iconName||a||r,"far"!==(i=o.prefix||i)||u$.far||!u$.fas||zZ.autoFetchSvg||(i="fas");return{prefix:i,iconName:r}}(n,i,c))}var R$=KJ.filter(function(e){return e!==LJ||e!==BJ}),L$=Object.keys(sZ).filter(function(e){return e!==LJ}).map(function(e){return Object.keys(sZ[e])}).flat();var B$=function(){return function(e,t,n){return t&&oJ(e.prototype,t),n&&oJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}},[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(function(t){e.definitions[t]=cJ(cJ({},e.definitions[t]||{}),r[t]),c$(t,r[t]);var n=IZ[LJ][t];n&&c$(n,r[t]),_$()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(function(t){var i=n[t],r=i.prefix,o=i.iconName,a=i.icon,s=a[2];e[r]||(e[r]={}),s.length>0&&s.forEach(function(t){"string"===typeof t&&(e[r][t]=a)}),e[r][o]=a}),e}}])}(),P$=[],D$={},O$={},N$=Object.keys(O$);function F$(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(D$[e]||[]).forEach(function(e){t=e.apply(null,[t].concat(i))}),t}function z$(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(D$[e]||[]).forEach(function(e){e.apply(null,n)})}function U$(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return O$[e]?O$[e].apply(null,t):void 0}function j$(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||S$();if(t)return t=E$(n,t)||t,o$(V$.definitions,n,t)||o$(e$.styles,n,t)}var V$=new B$,H$={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return IJ?(z$("beforeI2svg",e),U$("pseudoElements2svg",e),U$("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===zZ.autoReplaceSvg&&(zZ.autoReplaceSvg=!0),zZ.observeMutations=!0,function(e){IJ&&(i$?setTimeout(e,0):t$.push(e))}(function(){Q$({autoReplaceSvgRoot:t}),z$("watch",e)})}},G$={noAuto:function(){zZ.autoReplaceSvg=!1,zZ.observeMutations=!1,z$("noAuto")},config:zZ,dom:H$,parse:{icon:function(e){if(null===e)return null;if("object"===pJ(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:E$(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=T$(e[0]);return{prefix:n,iconName:E$(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(zZ.cssPrefix,"-"))>-1||e.match(kZ))){var i=k$(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||S$(),iconName:E$(i.prefix,i.iconName)||i.iconName}}if("string"===typeof e){var r=S$();return{prefix:r,iconName:E$(r,e)||e}}}},library:V$,findIconDefinition:j$,toHtml:r$},Q$=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?CJ:e;(Object.keys(e$.styles).length>0||zZ.autoFetchSvg)&&IJ&&zZ.autoReplaceSvg&&G$.dom.i2svg({node:t})};function W$(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(e){return r$(e)})}}),Object.defineProperty(e,"node",{get:function(){if(IJ){var t=CJ.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function q$(e){var t=e.icons,n=t.main,i=t.mask,r=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,l=e.maskId,c=e.extra,u=e.watchable,h=void 0!==u&&u,d=i.found?i:n,p=d.width,f=d.height,m=[zZ.replacementClass,o?"".concat(zZ.cssPrefix,"-").concat(o):""].filter(function(e){return-1===c.classes.indexOf(e)}).filter(function(e){return""!==e||!!e}).concat(c.classes).join(" "),g={children:[],attributes:cJ(cJ({},c.attributes),{},{"data-prefix":r,"data-icon":o,class:m,role:c.attributes.role||"img",viewBox:"0 0 ".concat(p," ").concat(f)})};(function(e){return["aria-label","aria-labelledby","title","role"].some(function(t){return t in e})})(c.attributes)||c.attributes["aria-hidden"]||(g.attributes["aria-hidden"]="true"),h&&(g.attributes[fZ]="");var v=cJ(cJ({},g),{},{prefix:r,iconName:o,main:n,mask:i,maskId:l,transform:a,symbol:s,styles:cJ({},c.styles)}),y=i.found&&n.found?U$("generateAbstractMask",v)||{children:[],attributes:{}}:U$("generateAbstractIcon",v)||{children:[],attributes:{}},A=y.children,b=y.attributes;return v.children=A,v.attributes=b,s?function(e){var t=e.prefix,n=e.iconName,i=e.children,r=e.attributes,o=e.symbol,a=!0===o?"".concat(t,"-").concat(zZ.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:cJ(cJ({},r),{},{id:a}),children:i}]}]}(v):function(e){var t=e.children,n=e.main,i=e.mask,r=e.attributes,o=e.styles,a=e.transform;if(XZ(a)&&n.found&&!i.found){var s={x:n.width/n.height/2,y:.5};r.style=qZ(cJ(cJ({},o),{},{"transform-origin":"".concat(s.x+a.x/16,"em ").concat(s.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(v)}function X$(e){var t=e.content,n=e.width,i=e.height,r=e.transform,o=e.extra,a=e.watchable,s=void 0!==a&&a,l=cJ(cJ({},o.attributes),{},{class:o.classes.join(" ")});s&&(l[fZ]="");var c=cJ({},o.styles);XZ(r)&&(c.transform=function(e){var t=e.transform,n=e.width,i=void 0===n?16:n,r=e.height,o=void 0===r?16:r,a=e.startCentered,s=void 0!==a&&a,l="";return l+=s&&MJ?"translate(".concat(t.x/jZ-i/2,"em, ").concat(t.y/jZ-o/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/jZ,"em), calc(-50% + ").concat(t.y/jZ,"em)) "):"translate(".concat(t.x/jZ,"em, ").concat(t.y/jZ,"em) "),l+="scale(".concat(t.size/jZ*(t.flipX?-1:1),", ").concat(t.size/jZ*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);var u=qZ(c);u.length>0&&(l.style=u);var h=[];return h.push({tag:"span",attributes:l,children:[t]}),h}var Y$=e$.styles;function K$(e){var t=e[0],n=e[1],i=uJ(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(i)?{tag:"g",attributes:{class:"".concat(zZ.cssPrefix,"-").concat(PZ.GROUP)},children:[{tag:"path",attributes:{class:"".concat(zZ.cssPrefix,"-").concat(PZ.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(zZ.cssPrefix,"-").concat(PZ.PRIMARY),fill:"currentColor",d:i[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:i}}}}var J$={found:!1,width:512,height:512};function Z$(e,t){var n=t;return"fa"===t&&null!==zZ.styleDefault&&(t=S$()),new Promise(function(i,r){if("fa"===n){var o=C$(e)||{};e=o.iconName||e,t=o.prefix||t}if(e&&t&&Y$[t]&&Y$[t][e])return i(K$(Y$[t][e]));!function(e,t){xZ||zZ.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),i(cJ(cJ({},J$),{},{icon:zZ.showMissingIcons&&e&&U$("missingIconAbstract")||{}}))})}var $$=function(){},e0=zZ.measurePerformance&&TJ&&TJ.mark&&TJ.measure?TJ:{mark:$$,measure:$$},t0='FA "7.1.0"',n0=function(e){e0.mark("".concat(t0," ").concat(e," ends")),e0.measure("".concat(t0," ").concat(e),"".concat(t0," ").concat(e," begins"),"".concat(t0," ").concat(e," ends"))},i0=function(e){return e0.mark("".concat(t0," ").concat(e," begins")),function(){return n0(e)}},r0=function(){};function o0(e){return"string"===typeof(e.getAttribute?e.getAttribute(fZ):null)}function a0(e){return CJ.createElementNS("http://www.w3.org/2000/svg",e)}function s0(e){return CJ.createElement(e)}function l0(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?a0:s0:t;if("string"===typeof e)return CJ.createTextNode(e);var i=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(t){i.setAttribute(t,e.attributes[t])}),(e.children||[]).forEach(function(e){i.appendChild(l0(e,{ceFn:n}))}),i}var c0={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(e){t.parentNode.insertBefore(l0(e),t)}),null===t.getAttribute(fZ)&&zZ.keepOriginalSource){var n=CJ.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~QZ(t).indexOf(zZ.replacementClass))return c0.replace(e);var i=new RegExp("".concat(zZ.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce(function(e,t){return t===zZ.replacementClass||t.match(i)?e.toSvg.push(t):e.toNode.push(t),e},{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),0===r.toNode.length?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=n.map(function(e){return r$(e)}).join("\n");t.setAttribute(fZ,""),t.innerHTML=o}};function u0(e){e()}function h0(e,t){var n="function"===typeof t?t:r0;if(0===e.length)n();else{var i=u0;"async"===zZ.mutateApproach&&(i=EJ.requestAnimationFrame||u0),i(function(){var t=!0===zZ.autoReplaceSvg?c0.replace:c0[zZ.autoReplaceSvg]||c0.replace,i=i0("mutate");e.map(t),i(),n()})}}var d0=!1;function p0(){d0=!0}function f0(){d0=!1}var m0=null;function g0(e){if(SJ&&zZ.observeMutations){var t=e.treeCallback,n=void 0===t?r0:t,i=e.nodeCallback,r=void 0===i?r0:i,o=e.pseudoElementsCallback,a=void 0===o?r0:o,s=e.observeMutationsRoot,l=void 0===s?CJ:s;m0=new SJ(function(e){if(!d0){var t=S$();GZ(e).forEach(function(e){if("childList"===e.type&&e.addedNodes.length>0&&!o0(e.addedNodes[0])&&(zZ.searchPseudoElements&&a(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&zZ.searchPseudoElements&&a([e.target],!0),"attributes"===e.type&&o0(e.target)&&~BZ.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(gZ):null,n=e.getAttribute?e.getAttribute(vZ):null;return t&&n}(e.target)){var i=k$(QZ(e.target)),o=i.prefix,s=i.iconName;e.target.setAttribute(gZ,o||t),s&&e.target.setAttribute(vZ,s)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(zZ.replacementClass)&&r(e.target);var l})}}),IJ&&m0.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function v0(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),i=void 0!==e.innerText?e.innerText.trim():"",r=k$(QZ(e));return r.prefix||(r.prefix=S$()),t&&n&&(r.prefix=t,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function(e,t){return(g$[e]||{})[t]}(r.prefix,e.innerText)||w$(r.prefix,s$(e.innerText))),!r.iconName&&zZ.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=e.firstChild.data)),r}function y0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=v0(e),i=n.iconName,r=n.prefix,o=n.rest,a=function(e){return GZ(e.attributes).reduce(function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e},{})}(e),s=F$("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(e,t){var n=t.split(":"),i=n[0],r=n.slice(1);return i&&r.length>0&&(e[i]=r.join(":").trim()),e},{})),n}(e):[];return cJ({iconName:i,prefix:r,transform:VZ,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:l,attributes:a}},s)}var A0=e$.styles;function b0(e){var t="nest"===zZ.autoReplaceSvg?y0(e,{styleParser:!1}):y0(e);return~t.extra.classes.indexOf(RZ)?U$("generateLayersText",e,t):U$("generateSvgReplacementMutation",e,t)}function x0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!IJ)return Promise.resolve();var n=CJ.documentElement.classList,i=function(e){return n.add("".concat(yZ,"-").concat(e))},r=function(e){return n.remove("".concat(yZ,"-").concat(e))},o=zZ.autoFetchSvg?[].concat(hJ(ZJ),hJ(lZ)):RJ.concat(Object.keys(A0));o.includes("fa")||o.push("fa");var a=[".".concat(RZ,":not([").concat(fZ,"])")].concat(o.map(function(e){return".".concat(e,":not([").concat(fZ,"])")})).join(", ");if(0===a.length)return Promise.resolve();var s=[];try{s=GZ(e.querySelectorAll(a))}catch(u){}if(!(s.length>0))return Promise.resolve();i("pending"),r("complete");var l=i0("onTree"),c=s.reduce(function(e,t){try{var n=b0(t);n&&e.push(n)}catch(u){xZ||"MissingIcon"===u.name&&console.error(u)}return e},[]);return new Promise(function(e,n){Promise.all(c).then(function(n){h0(n,function(){i("active"),i("complete"),r("pending"),"function"===typeof t&&t(),l(),e()})}).catch(function(e){l(),n(e)})})}function _0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;b0(e).then(function(e){e&&h0([e],t)})}var w0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,i=void 0===n?VZ:n,r=t.symbol,o=void 0!==r&&r,a=t.mask,s=void 0===a?null:a,l=t.maskId,c=void 0===l?null:l,u=t.classes,h=void 0===u?[]:u,d=t.attributes,p=void 0===d?{}:d,f=t.styles,m=void 0===f?{}:f;if(e){var g=e.prefix,v=e.iconName,y=e.icon;return W$(cJ({type:"icon"},e),function(){return z$("beforeDOMElementCreation",{iconDefinition:e,params:t}),q$({icons:{main:K$(y),mask:s?K$(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:g,iconName:v,transform:cJ(cJ({},VZ),i),symbol:o,maskId:c,extra:{attributes:p,styles:m,classes:h}})})}},E0={mixout:function(){return{icon:(e=w0,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||{}).icon?t:j$(t||{}),r=n.mask;return r&&(r=(r||{}).icon?r:j$(r||{})),e(i,cJ(cJ({},n),{},{mask:r}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=x0,e.nodeCallback=_0,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?CJ:t,i=e.callback;return x0(n,void 0===i?function(){}:i)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,i=t.prefix,r=t.transform,o=t.symbol,a=t.mask,s=t.maskId,l=t.extra;return new Promise(function(t,c){Promise.all([Z$(n,i),a.iconName?Z$(a.iconName,a.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(a){var c=uJ(a,2),u=c[0],h=c[1];t([e,q$({icons:{main:u,mask:h},prefix:i,iconName:n,transform:r,symbol:o,maskId:s,extra:l,watchable:!0})])}).catch(c)})},e.generateAbstractIcon=function(e){var t,n=e.children,i=e.attributes,r=e.main,o=e.transform,a=qZ(e.styles);return a.length>0&&(i.style=a),XZ(o)&&(t=U$("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),n.push(t||r.icon),{children:n,attributes:i}}}},C0={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,i=void 0===n?[]:n;return W$({type:"layer"},function(){z$("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e(function(e){Array.isArray(e)?e.map(function(e){n=n.concat(e.abstract)}):n=n.concat(e.abstract)}),[{tag:"span",attributes:{class:["".concat(zZ.cssPrefix,"-layers")].concat(hJ(i)).join(" ")},children:n}]})}}}},S0={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,i=void 0===n?null:n,r=t.classes,o=void 0===r?[]:r,a=t.attributes,s=void 0===a?{}:a,l=t.styles,c=void 0===l?{}:l;return W$({type:"counter",content:e},function(){return z$("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.extra,i=cJ(cJ({},n.attributes),{},{class:n.classes.join(" ")}),r=qZ(n.styles);r.length>0&&(i.style=r);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),o}({content:e.toString(),title:i,extra:{attributes:s,styles:c,classes:["".concat(zZ.cssPrefix,"-layers-counter")].concat(hJ(o))}})})}}}},T0={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,i=void 0===n?VZ:n,r=t.classes,o=void 0===r?[]:r,a=t.attributes,s=void 0===a?{}:a,l=t.styles,c=void 0===l?{}:l;return W$({type:"text",content:e},function(){return z$("beforeDOMElementCreation",{content:e,params:t}),X$({content:e,transform:cJ(cJ({},VZ),i),extra:{attributes:s,styles:c,classes:["".concat(zZ.cssPrefix,"-layers-text")].concat(hJ(o))}})})}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.transform,i=t.extra,r=null,o=null;if(MJ){var a=parseInt(getComputedStyle(e).fontSize,10),s=e.getBoundingClientRect();r=s.width/a,o=s.height/a}return Promise.resolve([e,X$({content:e.innerHTML,width:r,height:o,transform:n,extra:i,watchable:!0})])}}},I0=new RegExp('"',"ug"),M0=[1105920,1112319],k0=cJ(cJ(cJ(cJ({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"},"Font Awesome 7 Utility":{600:"fausb",normal:"fausb"},"Font Awesome 7 Utility Duo":{600:"faudsb",normal:"faudsb"},"Font Awesome 7 Utility Fill":{600:"faufsb",normal:"faufsb"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),R0=Object.keys(k0).reduce(function(e,t){return e[t.toLowerCase()]=k0[t],e},{}),L0=Object.keys(R0).reduce(function(e,t){var n=R0[t];return e[t]=n[900]||hJ(Object.entries(n))[0][1],e},{});function B0(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(function(i,r){if(null!==e.getAttribute(n))return i();var o=GZ(e.children).filter(function(e){return e.getAttribute(mZ)===t})[0],a=EJ.getComputedStyle(e,t),s=a.getPropertyValue("font-family"),l=s.match(LZ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return e.removeChild(o),i();if(l&&"none"!==u&&""!==u){var h=a.getPropertyValue("content"),d=function(e,t){var n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(t),r=isNaN(i)?"normal":i;return(R0[n]||{})[r]||L0[n]}(s,c),p=function(e){return s$(hJ(e.replace(I0,""))[0]||"")}(h),f=l[0].startsWith("FontAwesome"),m=function(e){var t=e.getPropertyValue("font-feature-settings").includes("ss01"),n=e.getPropertyValue("content").replace(I0,""),i=n.codePointAt(0),r=i>=M0[0]&&i<=M0[1],o=2===n.length&&n[0]===n[1];return r||o||t}(a),g=w$(d,p),v=g;if(f){var y=function(e){var t=y$[e],n=w$("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);y.iconName&&y.prefix&&(g=y.iconName,d=y.prefix)}if(!g||m||o&&o.getAttribute(gZ)===d&&o.getAttribute(vZ)===v)i();else{e.setAttribute(n,v),o&&e.removeChild(o);var A={iconName:null,prefix:null,transform:VZ,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=A.extra;b.attributes[mZ]=t,Z$(g,d).then(function(r){var o=q$(cJ(cJ({},A),{},{icons:{main:r,mask:{prefix:null,iconName:null,rest:[]}},prefix:d,iconName:v,extra:b,watchable:!0})),a=CJ.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(a,e.firstChild):e.appendChild(a),a.outerHTML=o.map(function(e){return r$(e)}).join("\n"),e.removeAttribute(n),i()}).catch(r)}}else i()})}function P0(e){return Promise.all([B0(e,"::before"),B0(e,"::after")])}function D0(e){return e.parentNode!==document.head&&!~AZ.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(mZ)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}var O0=function(e){return!!e&&bZ.some(function(t){return e.includes(t)})},N0=function(e){if(!e)return[];var t=new Set,n=e.split(/,(?![^()]*\))/).map(function(e){return e.trim()});n=n.flatMap(function(e){return e.includes("(")?e:e.split(",").map(function(e){return e.trim()})});var i,r=aJ(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(O0(o)){var a=bZ.reduce(function(e,t){return e.replace(t,"")},o);""!==a&&"*"!==a&&t.add(a)}}}catch(s){r.e(s)}finally{r.f()}return t};function F0(e){if(IJ){var t;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])t=e;else if(zZ.searchPseudoElementsFullScan)t=e.querySelectorAll("*");else{var n,i=new Set,r=aJ(document.styleSheets);try{for(r.s();!(n=r.n()).done;){var o=n.value;try{var a,s=aJ(o.cssRules);try{for(s.s();!(a=s.n()).done;){var l,c=a.value,u=aJ(N0(c.selectorText));try{for(u.s();!(l=u.n()).done;){var h=l.value;i.add(h)}}catch(p){u.e(p)}finally{u.f()}}}catch(p){s.e(p)}finally{s.f()}}catch(f){zZ.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(o.href," (").concat(f.message,')\nIf it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.'))}}}catch(p){r.e(p)}finally{r.f()}if(!i.size)return;var d=Array.from(i).join(", ");try{t=e.querySelectorAll(d)}catch(m){}}return new Promise(function(e,n){var i=GZ(t).filter(D0).map(P0),r=i0("searchPseudoElements");p0(),Promise.all(i).then(function(){r(),f0(),e()}).catch(function(){r(),f0(),n()})})}}var z0={hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=F0,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?CJ:t;zZ.searchPseudoElements&&F0(n)}}},U0=!1,j0=function(e){return e.toLowerCase().split(" ").reduce(function(e,t){var n=t.toLowerCase().split("-"),i=n[0],r=n.slice(1).join("-");if(i&&"h"===r)return e.flipX=!0,e;if(i&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(i){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},V0={mixout:function(){return{parse:{transform:function(e){return j0(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=j0(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,i=e.containerWidth,r=e.iconWidth,o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:o,inner:{transform:"".concat(a," ").concat(s," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:cJ({},c.outer),children:[{tag:"g",attributes:cJ({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:cJ(cJ({},t.icon.attributes),c.path)}]}]}}}},H0={x:0,y:0,width:"100%",height:"100%"};function G0(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Q0={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),i=n?k$(n.split(" ").map(function(e){return e.trim()})):{prefix:null,iconName:null,rest:[]};return i.prefix||(i.prefix=S$()),e.mask=i,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,i=e.attributes,r=e.main,o=e.mask,a=e.maskId,s=e.transform,l=r.width,c=r.icon,u=o.width,h=o.icon,d=function(e){var t=e.transform,n=e.containerWidth,i=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:s,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:cJ(cJ({},H0),{},{fill:"white"})},f=c.children?{children:c.children.map(G0)}:{},m={tag:"g",attributes:cJ({},d.inner),children:[G0(cJ({tag:c.tag,attributes:cJ(cJ({},c.attributes),d.path)},f))]},g={tag:"g",attributes:cJ({},d.outer),children:[m]},v="mask-".concat(a||HZ()),y="clip-".concat(a||HZ()),A={tag:"mask",attributes:cJ(cJ({},H0),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=h,"g"===t.tag?t.children:[t])},A]};return n.push(b,{tag:"rect",attributes:cJ({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},H0)}),{children:n,attributes:i}}}},W0={provides:function(e){var t=!1;EJ.matchMedia&&(t=EJ.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:cJ(cJ({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var r=cJ(cJ({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:cJ(cJ({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:cJ(cJ({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:cJ(cJ({},r),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:cJ(cJ({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:cJ(cJ({},r),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:cJ(cJ({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:cJ(cJ({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;P$=e,D$={},Object.keys(O$).forEach(function(e){-1===N$.indexOf(e)&&delete O$[e]}),P$.forEach(function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach(function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===pJ(t[e])&&Object.keys(t[e]).forEach(function(i){n[e]||(n[e]={}),n[e][i]=t[e][i]})}),e.hooks){var i=e.hooks();Object.keys(i).forEach(function(e){D$[e]||(D$[e]=[]),D$[e].push(i[e])})}e.provides&&e.provides(O$)})}([ZZ,E0,C0,S0,T0,z0,{mixout:function(){return{dom:{unwatch:function(){p0(),U0=!0}}}},hooks:function(){return{bootstrap:function(){g0(F$("mutationObserverCallbacks",{}))},noAuto:function(){m0&&m0.disconnect()},watch:function(e){var t=e.observeMutationsRoot;U0?f0():g0(F$("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},V0,Q0,W0,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),i=null!==n&&(""===n||n);return e.symbol=i,e}}}}],{mixoutsTo:G$});var q0=G$.parse,X0=G$.icon,Y0=n(5173),K0=n.n(Y0);function J0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Z0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$0(Object(n),!0).forEach(function(t){Z0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||r1(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n1(e){return function(e){if(Array.isArray(e))return J0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r1(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i1(e){return i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(e)}function r1(e,t){if(e){if("string"==typeof e)return J0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J0(e,t):void 0}}var o1;try{var a1=n(5900);o1=a1.version}catch(QJ){o1="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FA_VERSION||"7.0.0"}function s1(e){var t=e.beat,n=e.fade,i=e.beatFade,r=e.bounce,o=e.shake,a=e.flash,s=e.spin,l=e.spinPulse,c=e.spinReverse,u=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,f=e.listItem,m=e.flip,g=e.size,v=e.rotation,y=e.pull,A=e.swapOpacity,b=e.rotateBy,x=e.widthAuto,_=function(e,t){for(var n=t1(e.split("-"),2),i=n[0],r=n[1],o=t1(t.split("-"),2),a=o[0],s=o[1],l=i.split("."),c=a.split("."),u=0;u<Math.max(l.length,c.length);u++){var h=l[u]||"0",d=c[u]||"0",p=parseInt(h,10),f=parseInt(d,10);if(p!==f)return p>f}for(var m=0;m<Math.max(l.length,c.length);m++){var g=l[m]||"0",v=c[m]||"0";if(g!==v&&g.length!==v.length)return g.length<v.length}return!(r&&!s)}(o1,"7.0.0"),w=Z0(Z0(Z0(Z0(Z0(Z0({"fa-beat":t,"fa-fade":n,"fa-beat-fade":i,"fa-bounce":r,"fa-shake":o,"fa-flash":a,"fa-spin":s,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":f,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(g),"undefined"!==typeof g&&null!==g),"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),"fa-pull-".concat(y),"undefined"!==typeof y&&null!==y),"fa-swap-opacity",A),"fa-rotate-by",_&&b),"fa-width-auto",_&&x);return Object.keys(w).map(function(e){return w[e]?e:null}).filter(function(e){return e})}function l1(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1);var t}var c1=["style"];var u1=!1;try{u1=!0}catch(QJ){}function h1(e){return e&&"object"===i1(e)&&e.prefix&&e.iconName&&e.icon?e:q0.icon?q0.icon(e):null===e?null:e&&"object"===i1(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function d1(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Z0({},e,t):{}}var p1={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},f1=i.forwardRef(function(e,t){var n=e1(e1({},p1),e),i=n.icon,r=n.mask,o=n.symbol,a=n.className,s=n.title,l=n.titleId,c=n.maskId,u=h1(i),h=d1("classes",[].concat(n1(s1(n)),n1((a||"").split(" ")))),d=d1("transform","string"===typeof n.transform?q0.transform(n.transform):n.transform),p=d1("mask",h1(r)),f=X0(u,e1(e1(e1(e1({},h),d),p),{},{symbol:o,title:s,titleId:l,maskId:c}));if(!f)return function(){var e;!u1&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=f.abstract,g={ref:t};return Object.keys(n).forEach(function(e){p1.hasOwnProperty(e)||(g[e]=n[e])}),m1(m[0],g)});f1.displayName="FontAwesomeIcon",f1.propTypes={beat:K0().bool,border:K0().bool,beatFade:K0().bool,bounce:K0().bool,className:K0().string,fade:K0().bool,flash:K0().bool,mask:K0().oneOfType([K0().object,K0().array,K0().string]),maskId:K0().string,fixedWidth:K0().bool,inverse:K0().bool,flip:K0().oneOf([!0,!1,"horizontal","vertical","both"]),icon:K0().oneOfType([K0().object,K0().array,K0().string]),listItem:K0().bool,pull:K0().oneOf(["right","left"]),pulse:K0().bool,rotation:K0().oneOf([0,90,180,270]),rotateBy:K0().bool,shake:K0().bool,size:K0().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:K0().bool,spinPulse:K0().bool,spinReverse:K0().bool,symbol:K0().oneOfType([K0().bool,K0().string]),title:K0().string,titleId:K0().string,transform:K0().oneOfType([K0().string,K0().object]),swapOpacity:K0().bool,widthAuto:K0().bool};var m1=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map(function(n){return e(t,n)}),o=Object.keys(n.attributes||{}).reduce(function(e,t){var i=n.attributes[t];switch(t){case"class":e.attrs.className=i,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n,i=t.indexOf(":"),r=l1(t.slice(0,i)),o=t.slice(i+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[r]=o,e},{})}(i);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=i:e.attrs[l1(t)]=i}return e},{attrs:{}}),a=i.style,s=void 0===a?{}:a,l=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(i,c1);return o.attrs.style=e1(e1({},o.attrs.style),s),t.apply(void 0,[n.tag,e1(e1({},o.attrs),l)].concat(n1(r)))}.bind(null,i.createElement);const g1={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]};const v1=e=>(0,uT.jsx)("div",{className:"blog-card",children:(0,uT.jsxs)(iJ,{className:"blog-card",style:{width:"45%",margin:"30px",float:"left",height:"450px",position:"relative"},children:[(0,uT.jsx)(iJ.Img,{className:"blog-img",variant:"top",src:e.src,style:{width:"90%",height:"250px",margin:"20px"}}),(0,uT.jsx)("div",{className:"orange-square",children:(0,uT.jsxs)("div",{className:"text",children:[(0,uT.jsx)("p",{children:e.date}),(0,uT.jsx)("p",{children:e.day})]})}),(0,uT.jsxs)(iJ.Body,{children:[(0,uT.jsx)("ul",{className:"temple-name",children:(0,uT.jsx)("li",{children:e.name})}),(0,uT.jsx)("h2",{children:e.details}),e.link&&(0,uT.jsxs)(TT,{to:e.link,className:"nav-link read-more-link",children:["Read More ",(0,uT.jsx)(f1,{icon:g1,className:"arrow-icon",style:{color:"#fe4c10"}})]})]})]})}),y1=e=>{const[t,n]=(0,i.useState)("");return(0,uT.jsx)("div",{className:"blog-search",children:(0,uT.jsxs)(iJ,{className:"card-css",style:{width:"80%",margin:"30px",height:"150px"},children:[(0,uT.jsx)("h2",{children:"SEARCH"}),(0,uT.jsxs)("div",{className:"search-item",children:[(0,uT.jsx)("input",{placeholder:"What are you looking for?",className:"blogInput",value:t,onChange:e=>{n(e.target.value)}}),(0,uT.jsx)("button",{type:"button",className:"sr-but-blog",onClick:()=>{console.log("Search Query:",t),e.onSearch(t)},children:(0,uT.jsx)(VY,{})})]})]})})},A1=n.p+"static/media/ayodhya.b9675afb807d02b28f3e.jpg",b1=()=>{const[e,t]=(0,i.useState)([]),n=[{id:1,title:"Akshardham Temple, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/akshardham",image:A1},{id:2,title:"Lotus Temple, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/lotus",image:iK},{id:3,title:"Ram mandir Temple, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/akshardham",image:nK},{id:4,title:"Tirupati Balaji Temple, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/contact",image:aK},{id:5,title:"Hanuman Mandir, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/contact",image:rK},{id:6,title:"Shimla Christ Church, New Delhi",description:"A Flight To The Marvelous World Of Akshardham Temple",link:"/contact",image:aK}];return(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(_Y,{}),(0,uT.jsxs)("div",{className:"blog-main",children:[(0,uT.jsx)("div",{className:"blog-left",children:n.filter(t=>""==e||t.title.toLowerCase().includes(e.toLowerCase())?t:void 0).map(e=>(0,uT.jsx)(v1,{src:e.image,date:"13",day:"Aug",name:e.title,details:e.description,link:e.link},e.id))}),(0,uT.jsxs)("div",{className:"blog-right",children:[(0,uT.jsx)("div",{className:"blog-right-upper",children:(0,uT.jsx)("input",{id:"searchInput",type:"text",placeholder:"Search here..",onChange:e=>{t(e.target.value)}})}),(0,uT.jsx)("div",{className:"blog-right-bottom"})]})]}),(0,uT.jsx)(HY,{})]})},x1=e=>{let{src:t,width:n,height:i}=e;const r={width:"".concat(n,"px"),height:"".concat(i,"px")};return(0,uT.jsx)("img",{src:t,style:r,alt:""})};function _1(e){return BY({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M426.666 330.667a250.385 250.385 0 0 1-75.729-11.729c-7.469-2.136-16-1.073-21.332 5.333l-46.939 46.928c-60.802-30.928-109.864-80-140.802-140.803l46.939-46.927c5.332-5.333 7.462-13.864 5.332-21.333-8.537-24.531-12.802-50.136-12.802-76.803C181.333 73.604 171.734 64 160 64H85.333C73.599 64 64 73.604 64 85.333 64 285.864 226.136 448 426.666 448c11.73 0 21.334-9.604 21.334-21.333V352c0-11.729-9.604-21.333-21.334-21.333z"},child:[]}]})(e)}const w1=n.p+"static/media/contactus.7e7b4ed4eee6b460d64c.jpg",E1=()=>(0,uT.jsxs)("div",{className:"contact-main",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsxs)("div",{className:"contact-container",children:[(0,uT.jsx)("div",{className:"contact-box contact-box-1",children:(0,uT.jsxs)("div",{className:"contact-box-2",children:[(0,uT.jsx)(x1,{className:"contact-box-1 img",src:w1,width:750,height:470}),(0,uT.jsx)("iframe",{className:"contact-iframe",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3766.3294899989323!2d72.96724449999999!3d19.2680325!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7bba2e15f6c7b%3A0x20e1357d640bef7e!2sA.%20P.%20Shah%20Institute%20of%20Technology!5e0!3m2!1sen!2sin!4v1709658456312!5m2!1sen!2sin",width:"750",height:"470",allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]})}),(0,uT.jsxs)("div",{className:"contact-box contact-box-2",children:[(0,uT.jsxs)("div",{className:"contact-information",children:[(0,uT.jsx)("h1",{children:(0,uT.jsx)("b",{children:"OFFICE INFORMATION"})}),(0,uT.jsx)("p",{className:"contact-information-p",children:"VRTOUR VIRTUAL PILGRIMAGE"}),(0,uT.jsx)("p",{className:"contact-information-p",children:"456 VIGZAG ROAD, SECTOR 10 CYBER CITY,"}),(0,uT.jsx)("p",{className:"contact-information-p",children:"DELHI - 110012"}),(0,uT.jsx)("p",{className:"contact-information-p",children:"INDIA"}),(0,uT.jsxs)("div",{className:"contact-emerge-call",children:[(0,uT.jsx)("p",{className:"emerge",children:(0,uT.jsx)("b",{children:"Emergency Call:"})}),(0,uT.jsxs)("p",{className:"contact-para",children:[(0,uT.jsx)(_1,{id:"call-icon"}),(0,uT.jsx)("b",{children:"+91 - 9876543210"})]})]}),(0,uT.jsxs)("div",{className:"contact-social-share",children:[(0,uT.jsx)("a",{href:"https://www.facebook.com/your-facebook-profile",target:"_blank",rel:"noopener noreferrer",children:(0,uT.jsx)(OY,{})}),(0,uT.jsx)("a",{href:"https://twitter.com/your-twitter-profile",target:"_blank",rel:"noopener noreferrer",children:(0,uT.jsx)(zY,{})}),(0,uT.jsx)("a",{href:"[https://www.linkedin.com/your-linkedin-profile]",rel:"noopener noreferrer",children:(0,uT.jsx)(FY,{})}),(0,uT.jsx)("a",{href:"https://www.instagram.com/ojus_apsit?igsh=ZHoxcXRkamIkdXhz",target:"_blank",rel:"noopener noreferrer",children:(0,uT.jsx)(NY,{})})]})]}),(0,uT.jsxs)("div",{className:"contact-info-c",children:[(0,uT.jsx)("h1",{className:"contact-info-c-h1",children:"Quicks Contact"}),(0,uT.jsx)("p",{className:"contact-info-c-para",children:" Contact for a quick resolution of your doubt"}),(0,uT.jsxs)("div",{className:"contact-c-input-container",children:[(0,uT.jsx)("input",{type:"text",className:"contact-c-input-box",placeholder:"Name*",required:!0}),(0,uT.jsx)("input",{type:"tel",className:"contact-c-input-box",placeholder:"Phone*",required:!0}),(0,uT.jsx)("textarea",{className:"contact-c-message-box",placeholder:"Message"}),(0,uT.jsx)("button",{className:"contact-c-submit-button",children:"Submit"})]})]})]})]}),(0,uT.jsx)(HY,{})]}),C1=["as","bsPrefix","className"],S1=["className"];function T1(e){let{as:t,bsPrefix:n,className:r}=e,o=fK(e,C1);n=_K(n,"col");const a=function(){const{breakpoints:e}=(0,i.useContext)(AK);return e}(),s=function(){const{minBreakpoint:e}=(0,i.useContext)(AK);return e}(),l=[],c=[];return a.forEach(e=>{const t=o[e];let i,r,a;delete o[e],"object"===typeof t&&null!=t?({span:i,offset:r,order:a}=t):i=t;const u=e!==s?"-".concat(e):"";i&&l.push(!0===i?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(i)),null!=a&&c.push("order".concat(u,"-").concat(a)),null!=r&&c.push("offset".concat(u,"-").concat(r))}),[u(u({},o),{},{className:gK()(r,...l,...c)}),{as:t,bsPrefix:n,spans:l}]}const I1=i.forwardRef((e,t)=>{const[n,{as:i="div",bsPrefix:r,spans:o}]=T1(e),{className:a}=n,s=fK(n,S1);return(0,uT.jsx)(i,u(u({},s),{},{ref:t,className:gK()(a,!o.length&&r)}))});I1.displayName="Col";const M1=I1;const k1=function(e){return(0,uT.jsx)(M1,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,children:(0,uT.jsxs)(iJ,{style:{width:"40rem"},children:[(0,uT.jsx)("div",{className:"zoom-card",children:(0,uT.jsx)(iJ.Img,{variant:"top",src:e.image,alt:"Card image",className:"zoom-img",style:{borderTopLeftRadius:"15px",borderTopRightRadius:"15px"}})}),(0,uT.jsxs)(iJ.Body,{children:[(0,uT.jsx)(iJ.Title,{style:{fontSize:"2.0rem",color:"#353935",textAlign:"left",marginLeft:"15px"},children:e.title}),(0,uT.jsxs)(iJ.Subtitle,{style:{fontSize:"1.8rem",color:"#929292",textAlign:"left",marginBottom:"10px",marginLeft:"15px"},children:[(0,uT.jsx)($Y,{}),e.subtitle]})]})]})})},R1=(n.p,n.p+"static/media/hanuman-mandir.97257cb641cb9d5cfd74.jpg"),L1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3772.0618728018317!2d72.8278247744274!3d19.016995053823724!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7cec0d851ebc3%3A0xcc61876914526329!2sShree%20Siddhivinayak%20Temple!5e0!3m2!1sen!2sin!4v1710196234082!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"SiddhiVinayak Google Map"}),B1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14245.562500038533!2d82.17537658715818!3d26.79568800000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x399a07cd3079f0bf%3A0x5589e823b23ba9dc!2sSree%20Ram%20Janmabhoomi%20Mandir!5e0!3m2!1sen!2sin!4v1709990685192!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Ram Mandir Google Map"}),P1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3504.5415445300223!2d77.25625147473414!3d28.553496687666765!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390ce3c16e028cd1%3A0x653beb1ee85ec67a!2sLotus%20Temple!5e0!3m2!1sen!2sin!4v1710194443667!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Lotus-Temple Google Map"}),D1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3502.038163477376!2d77.19535367473718!3d28.62861828425983!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390cfd56d974f1a9%3A0xe209959a6d0adb0!2sTTD%20Tirupati%20Balaji%20Temple!5e0!3m2!1sen!2sin!4v1710194621914!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Tirupati_Balaji Google Map"}),O1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d56023.027536006324!2d77.13808638882199!3d28.646564644508032!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390d029da94bf9d9%3A0xda267c5baef74594!2sHanuman%20Mandir%20Karol%20bagh!5e0!3m2!1sen!2sin!4v1710199686230!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Hanuman Mandir Google Map"}),N1=()=>(0,uT.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3416.1947388276844!2d77.1733427748383!3d31.10431906758088!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39057893f4c45e6b%3A0x10668d6302a9ac90!2sChrist%20Church%2C%20Shimla!5e0!3m2!1sen!2sin!4v1710199303803!5m2!1sen!2sin",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Shimla Church Google Map"}),F1=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(L1),o=[{id:1,title:"Shree Ram Mandir",subtitle:"Sai Nagar, Ayodhya, Uttar Pradesh 224123",image:A1,text:"This is a longer card with supporting text below as a natural lead-in to additional content.",onMouseEnter:()=>a((0,uT.jsx)(B1,{})),onClick:()=>l("/rammandir")},{id:2,title:"Shree Siddhivinayak Temple",subtitle:"SK Bole Rd, Prabhadevi, Mumbai, Maharashtra 400028",image:aK,text:"This is another card.",onMouseEnter:()=>a((0,uT.jsx)(L1,{})),onClick:()=>l("/rammandir")},{id:3,title:"Tirupati Balaji Temple",subtitle:"Pocket J, Type 2, Presidents Estate, New Delhi, Delhi 110001",image:iK,text:"This is another card.",onMouseEnter:()=>a((0,uT.jsx)(D1,{})),onClick:()=>l("/rammandir")},{id:4,title:"Lotus Temple",subtitle:"Lotus Temple Rd Bahapur, Kalkaji, New Delhi, Delhi 110019",image:nK,text:"This is another card.",onMouseEnter:()=>a((0,uT.jsx)(P1,{})),onClick:()=>l("/rammandir")},{id:5,title:"Hanuman Mandir",subtitle:"324, Saraswati Marg, Karol Bagh, New Delhi 110005",image:R1,text:"This is another card.",onMouseEnter:()=>a((0,uT.jsx)(O1,{})),onClick:()=>l("/rammandir")},{id:6,title:"A.P Shah Institute of Technology",subtitle:"GhodBunder Road,Thane - 400615, Opp.Hypercity Mall",image:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMSEhUSExMWFhUXFRcVGBcXFxYaGBcVFxYWFhUXFRgYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFxAQFS0ZHhkrKy0tKysrLSsrKy0rNy0rLSstLS0rKys3LTc3Ny0tKy03KzcrKysrLSsrKysrKysrK//AABEIAMMBAgMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAEAAIDBQYBBwj/xAA+EAABAwIEAwYEBAUEAgIDAAABAAIRAyEEBRIxQVFhBhMicYGRMqGxwRRCUtEVcoLh8AcjYvFTkkOyFiQz/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAeEQEBAQADAQADAQAAAAAAAAAAARECEiFRE0FhQv/aAAwDAQACEQMRAD8AytbNTULK3cU7GCAIBI67gq5xfbJ1RrKWFpsw7i7xObYu4XcdhzW4zHsAyjhntwrpc82c64bN9dgZ2j+peZ1exOKp1gKrXMDpdTMFwcdw2+3ktys41dXE1qBw1Rz3d5OoCJabxEkR4hJHkr3tF2mZRqhjqbqbKo0uqRpkPZbvW9CbkLLUw+ni6TaoZXp2puEgBhcAS0E7Fhvz8S2Of0cPiKXdDECpUYdTSS1zmW+F2n4hylXQL2xa+nlb2d42pTdGlzeUyNm3mePJO7FYOl+DoYmNTmEh5aA6KQJJa4brG4vtG0xhaT+91NPeOe3wN07hjQYJ9OaphUxWEs4FrXjVpEw4TcOErI+g8Dm2HqsD6dVpbt8UQeRE2KzWP7YubUPdN7ym1+h7iSIOws0bTzWEyDE1Gh9R1L/aD2B/AsLh4SCLFvXderdnqWGr4bwMBY6zg65JaeJG/mnisLgezr8we2o5jWMqNL9bS4g+JpMT+eVu8i7L0sLpLC7UBBM2NgDb0lXGEwzKTAym0NaLADYKVTVhJJJKBJJKiz7tPRwvhJ11ODG3P9UbIL2Ul55gMxxmJqlzqhpNglrW8OXn680e7N8VQMVKrHADZzfEfaJQbMlUec9o6dKWt8b9oGw81m817Q1a0NB0N5N3P3Cq+4gTUOkcuJ90EuPzGpXd4iTGzRsFFVaymNVVwHJs38kN+OfUlmHZA21n7kovBZM0Qap7x0zeYB6IJMDixUDSG6R4gB7KwQ7mjW2P+X0Cmc5A2qh6tdo3Kkr03PadJgj6LFZxmVZjxSDJc7aJlBf43NA0TOkfP+yZ2czNlY1A0k6dM9ZPBUmX9jsXiSH13d2zkbuI3+HYeq1+EyKjg2f7YMujUSSSY26D0QEEpNN1GXcgmkIIM5o6muHNphUmT5c5lI0yBdxfI3iA2Pkr97UODBg8vkoIaWH3E2BCL0eGFHqAkzCDrZ3SbadR6bepSCxlJRjUb2SVFdje3WY4ejTrPGGptdAFKCahEblvBtt1cu7Z4fF0RSxOunUDwSKYn8sgj0KvO02WYXDUvxFTDmqGBoawAuII+GOgv0WMw3avCU8Q15wDmPJDp4hzgQwuaeBWkrT4TH5ZUe6q13eFwY1wj4XMkB54gmUF2ifQ0kGlQ1l4EtLpO8a3AWKdluAw2Pqueyk6hUHxOpv0yZ4s47ckNiMupYfE+Bzqpbqe9jiC940kuFxDpvZEA9n+xTtXhpxEHW/dhJPwHi2DMrT4LsaKrH0ca3vQ12qnV1GSHXM8jPorXsn2joYxhFFrmd3DSxwgjkLLQqVcU9Ls1h20XUA06HkFwJ30xA8rKzw2GZTGljQ0cgIUqSikkkkgSgxmMZSaX1HBrRuSVOs12xyulVZqeTrEaRqMRInw7bSiVQ512zqViaeEBa3jUO5/l5earsBlgaNTvE4m7jcqYBlMQFNl1cPaXCDBi3PkiaIpPewE0/ig+3RVgpucS55083O39Fc0SJPkq7G5e2o6STp5SQCiwB+M3bQaXO2Lj+3BPoZQSQ+s7U4XgbD91Z0aDWCGtgKDEYxrep5BFE0wGiAAB0sFBicc1nGT0VViswLrbdAoKWHe/YEDmUFtQra9Lj/y+yKVfgmNaGhrtV3AmZvAsj5QFYEST5KSlhWB2ogTz90JRqlpMLj3k7lBZ1se0fD4jz4KvxOJc/ePZRFRl4mJugcuOKaSVwNQB4nNaTN3AnkDJVFjO0BJ8Aj+ZF9ocoDvG0Qei85xIf3jmOcbOhEtXmOzeTLnlx5f9KtrZk91mN34n32VhgskZxJdbYfurUYNrQNLQDPASeKsY7Vq8JUJYwnctadugSTsPgauht/yjj0SRdr1N7QRBEjkqmv2bwz6/wCIdTBqEMF9vBOm3O6padV7dqjx/UfupqeYVh/8hPmAfso1q6OS0e8dVDIqOaWlwsY5iOKxmO7EUMNrxRq1Kj2tcQ0xLnEGIv5K/Zm9Yblp82/sVI/NHOHiYwmLHkY3V0151/ptLm1qrBWD2uDXinBkEb6SbwZsvVcnzSnWbDX6ntA1AgtcOpadlQ9jcGzCM7prJe9xc9wMAkkmY9VrG0gCSAATuQBJ8yhD0kklFce8ASTASDhEyhMzxzaTJImbAfusbmvaeCKbRBJa0l1gNh4UTWirdp6TQXH4QS0GR4iOQVFjMxGIPewQNgDyBiSqPEYdhpjxHVfbzQ1CqadLRqLtPLckn+6JontBgGulrHkEkG3zXMspCgzQwWnUSTueqiY4kmbCymDkBbcYOIXa2OaBa6CcVxBBice49OgUNOg4iXeAcSUS4IXG4NtWNcmOpRpEcypA6aLHV6nQWHmVL/DcRXg1qopt/wDGy59eSOwlUU26WsaBybZTsxjeRCCDDYJlLSxkxLjcyZgSSj0K6qC5sXufoiIsgcXxuh62OaOqIp0A+Wkbj5rLZ72brVHBlJxEm8kxCCbM+0jGbvA6A3VbkXaUVsUym1tjqknezSR9Efl3+mrAQa1RzzyFh77rU4XIKNBkUqQaeY390EKSMpZc872RdLLmjdBT16ctWPx3ZGvUrPe1gDS6Zceg2AXo/wCHDTYJ1fgOaJjNZN2YDWsFR0wLgCOK0eEy+kz4WAJURACnYUMh4H+WSTC5dRQ8qLFVS1hI34eaWs8vmm1YI8VgrGKApY+p0P8AfyVwHoBmEbePkiNaUiZ2P7qHgXB5KfDdr/1N+UIB4DrKB2Ha0ePjwESRzCjUafC9pab9hJ8+KGzLP3NOmmWk7kD3glZPAOYNUAtaXEX3i6F7xtIkgm5McShqwGcVKr3msdo0t4DefsgczxNNxu0EgyBxkXChbqcdobxPEkhdp0Wsl1p5nyREbC9//EfMp9KmB52ueiqsw7SUqVh43cm7eruCzOY9o61SQHaG8m/c8UMbLMM5o0vjeJ5C59lWU+2VEm7XDrE/RYZ9ST+67SaXbIr0eh2gw7tqg/qsjqeKY74XNPkQV5acMeiZoc3b5Ej6ImPUagOoO1GAIjgeqeSvM6Wa12bVHiOZkfNH0e1dcfFpd5j9kab7UuOIhZGh2yH5qR9HD6FGN7TYdw3c09Qfqg0C6yoRsSq/D5pSftUaf6gPqi21AevkQgMoY97DIg85VjgMz1vDSyCeMzsqIPMxIiPui8tMVWnz+iDY008gIOhVK7icdTpialRrfNwn2QFkriy2YdvcHS2eXnk0H7rN4/8A1Mcf/wCNH1d4vkg9ErndAYzMKbIL6jRbi4LyfMe0mOq3L3NaeDbfRU2Gw1bEP067m8uk2U0ep4ztzhqQgOLyDwED3WezD/Ut5tSptHU3KxdTL3MqtpvvJgGYB90TljaTKwFT4RuCJg+m6aLQ9vsX+of+oSTn5ngpNjv/AOMpJo9W1ILNLgAAm8mPIqbvENi8wbTIDpk3sqyAwM6gbjxfJXZrKso5iyo6Gm4vsbKRzyg7iK1xCie8B5e0nYb/AGXHEevyQ+IrtaNT3ADr9kCfUdMiwuSfpCD1kAmNI/U4/RVeYdqgLUhJ5nYenFZnF4+pVMvcT04egRcaXG9pWUm6KX+4R+Y7Ss5j81q1j4nmOQsAoKdEnopm4QRcooEkJ7aE7lS1cA0/5KhOBAO7vRANWwxBnhKKwwhqO7h+husAG+3EcCeqq8WHtdDYhE/You6JmtBfiXjcJhxnMIo11QJpIQYxgK734PFBM5o5JjgF1oTtCGIHW3TqeLc3Zzh5EhMxQFlGgtKGe12kAVT6391dYPtTWpkOc5lv+KzGDo6nt/mA9yrfM8kcRAQGZh23rOt3xHRlh7rPYrPHOMmT1JJ+qssL2Vn4nH2V7huydEfknzughwORsLWujcB3uJVxQytgGwRVNmm3IAegsp2myCpzfBSwaRsZ9uCxtavWpOJaS07W4dB0XotYWWdz/AFzQWtk6uHIg/sFKMm+o+oZcS47+K6mw+Fc0hyu8BkdUtHhAPUqyodnXRDnj0UGYfl0km9zKS2QyBv6yuINlKp86wNSq4FhAgRBJnmrJzlQ5lnxp1CwMDg2LyQdgfutxlPlOBdScS7iIlWDnIHL8wNYElumDtMolzlBXZni64tRpz/ykfQlZbFYTFPJNRlQ/RbWk0mQLnl5eaaxlSpTcWywiLb8/ZB55icNUaIcxwPUEfNV4a6bb9V6HnGX4gsc8VR3YDZpls3i5B4XQHYrLhUxRkbU3G8dI+6LIx4xFUcl1uYP4tC9qbkGGaA19NriP1NBPtug8dk2DAk4VkWE/ALm5sZRXkX8SjdpXW5iDwP2HmVuM3yjLwDD9DuAYS76ys0/LGPP+2KhHNwaB9FNFviaYLWEfp+yo8XhS5xhXwZDGjkLoN7ZcVU1Q1MG6eCj/CHi1aA0lG+kpYaz5oN20fJRHDNHCFfuphRuoA8FDVIazRxUTsYOSuamCadwPYIeplzOQVxVT3upT0qaJ/hzW7Sn0aZ5KifLqPjH8zPqt3Xps4kW6hYzDN3twH1/7R9O90Gho1aQ/N7In8czgCVQUUbTKmg11SSSnNcoJTmuTQQueijBXQVKJgU7UqzFZo2nY+agZnzJOq1pF+MbImrrUkq4ZvR/WPdJNNbr+FMP5ne4/ZUeN7FUnvL+9qAkz+Qj0tKojnuNG9efNrSPoh29sMUPztd/Q0fRaXGuwnZ0Umw18+iZXy8gxqHlefksu3tLinEF2kiJ0wY9QDdF089xJAHdMDeO4+qJ4uMDh3A6uAmZt0U2IPdsc4ONyDaADsLk778FQuzOsQQS1sg/CJ36n9kLiaheIcdUAC6Hi17R5jFIsbUBNvCCCYnjAWVy+rpdIMWiRIPyRowrP0D0lJlBgM6fe4RXWZhUJOhz5PEEptejUqXqVHHpqJRZP/Q29lHUeAOJ6AST6KepqKlhmM2aJ5m5SrVA27nR/dVGYZvXBIp4Z8bS4H5AKirYiu50OY65vIMCSmHrWPxjdNjKqTmZDjIkSh34Mtb4N/kqmpiSHHULyiNHTzWmdyQhsbmDdmuER1VCK8nZO0k3Cmi1o1BEh0856o04hogEiSFmaji1p80nyY6D5lBqtIImUwsWXrd4T4S7bgT9lwvrNuXkf1fZWVZWlqtEIam1U+DxdRzoNQken3Ct3Vg3dS1dF4cXPl9x+6JbVaNyFXsxjRbojcZhaeJZqaNL4A87KSxNiU5lSbu8Jju0uHH5p8lnR2Wqg3cxvmbqWn2Wk3rMG+3Ra8XWsy/M2VaZqN+EEi/RNHaClcA3F78fJAZfgX4ak5gLXAkmQTIkAWEKtqOqBslsjnafMLNS1ossz9lQw8hhP7byqnN8bXaXFlbWwbR97IGjSe6HUw2QZ1Hp/nJaPH1a3dg1dAkbt8RdI6x9EiMOzMX1J1Hr/nRPD7XBiQb7n15Jpww4Txn+yYWERBVoTmOnj7pLmvzSQeinE6hDGWPE2H35oangGNu4z0b/AHQGRvJYSeLjxPQKzDlpampkDaBw6+5TzU9VEymTwT3MI9CEQtaa+oeDHu/lFvckKwOE/wBvW0lpBvEXEXT6+Cg06gc4CBImxkckJFLjMb3TdVRjmj0J9gVHgMzpVgSH6YIb4rSTy91H/qE0CnT5ls/OFX9mMCHYU1CL9+wD3ZP1RcanEGnRbqdqN+A2Qbc0bUOtgMMa6xETsjswbLY6lUmAZGv+r/7NQkSNz/VVbTFMjUYmRCZnuP0tibm0ceqDbR//AGKRHMlS51h23dE6jf0HBFZ+riCfzFBvdqkwN1zGOBcQBAFv7rjTAi54+6lrP7RuYblPZUN5J6KHEPumjqpIUUKs2P8AnmnAA6jN7fVCtCIY7TMXsrYJmahb6JtRj4J0+pKaKhO/OVJTqwCI35LIgwTf9zbgZ6EI44k8B8uCjLgbkSbjjYEcV3YEgxHP2WbRyrfe32RWCx3d3tGmx4ztEIN9abOHqEqbZaYIIAJvubqRMWL8wdVdt/Vw9FYDJHkA8xMmRff6ys5TrObsU84hxHie7ylblVbVe/pyCZbsTcxfckoWsaxbYtgXmAY+SALtQPjN+BPIqAadiTx4qizwNNzXahW0+YBF+EKfGZg94INQEjkBHoOXVUFUBpBk/VNdWbw35oDiSNiSZ2QzsUTuIClwtfT4gNXnMKWtjhUFqQmPFwB6gDZABpbzCSnLm/8AjaPdcQbLKoFFvPeByJ/6ReIxLGx4Cdou4edlm8N2hcyKbGAkQDPH+yvcPiatXam0uHN2kD5EnzWOPl9oKbnA1RptLrw6w/LaE+lW1NE7kyqzH4ivSGp1BsdHz9QFDleeCtUbTLNJ4cZvsumwkbjUPwrzHAj6IjMXsFJnpHoEDjO7ZQlzw2CzUC6AJdBtzgKqx+a4YwW4hpu4wSYCrSo/1Grg92B+hvvdWnYepTZgDqgy95uOMiPmFlu12Ia8gtc1zYEFpkWF1PlLiMOBqIB4CP1Hmpo2tKuxzXW1cfRVlfFU++OmA3QB01cZ+SzuIr6SQK74Mbho9LKofi3BwAdDdW5N/NNG0fmlFlJxLqbXcLtn0WcxGcNqPDQ6Z/b+ygY0l5c4S0zF4PQpjaTtYIjSN/a3zhLRDmDPEbIF2JBtpv58lcYtt1SUWgv9/ompqB9WTMLrJcuOYpadDwOM7EfdNNMc0pB5APklp6hdbT38ktTHbnZT4fVt1QzXadjdWeHrQ3SHbi4AB9iVm3Aysx4AMxPyC4a0ix4ceJUuoEXdHSR5KDuQYvvt/dZlERrTYozB4YEtbqHjt5IZ1MTHzVjQoBrGEP1TUIgfymPnC0IcXhAHlgIJG8AyIuU45aI+ObTwAj1Sx9Qt1ANECDJ+KbAyfNVlbEk2JO3uqCXaGu3lDV3Nvx63XMOQZB24FJ9OLi+1v3CAyq9jhAaLiZFgDF91XvpFpvf1HzTi+ANPMyLLr6k8jzsEEb6l9o8pRFJpAtzv0BQ9PCvcbbKWs9wdB36z8kKkdhXTxSXO+dzHukijsnYH12sJjUdzsTwBPBeo/iadJjQ9zC4Ath7QS2SPh57W9F5LTwdR12COV/ZTPy3FVLudJ5lxXn5cLyuy41yj0TF5jQdEvbY/oYPlxVXi30Tek5gdII0sYHT5tAWSpdn6x3I/9j9lL/8AjlWQQ/SOMFxPur+PP9InzfOKr4YfGJJ+GPFtNviPmgm4WoYIp3VyzL4AGo2Ugy7qfddpfBR4thDWN0mRMjkoWOqgaQYG60gysdfdPGVN5T6poyjxVmSQ71UD3Fpktn5ra/whv6Uv4M08E7QYyvmFRw4jlEojJ679YBMgk772adlqzko5BM/gsXACl5QU1bFtLtM7IOkwC0zEmYHER91d1uzc878igndm3t2dI5GynZLFV+GpAg94Z5eSKp06elw1nxf35LtTI6wMinMcZCgdgKzJJpn6+0KW1MpNwAO1Rp8xC4/LedRtxFkI8PFiCPQpoeecK+/V9TDKntN4jnKmNIMBIdJj08kPUrmNyf8AOSXfcvmllREWk3g+ylwdR7Zhu/MbeSf+Jc0RI9FKzMyDBAIS78RH3hDpM9VO7EGAAbB+oC1l1uYWFhv0+ad/EWj4mNM9Bup2vxPTn4uo8nUxriY/wxxUeP1RocwN/lvflKeMxYfyR6Lr8aw3Pt907X4apgYCnp4u9/t80W3C0Te9+AKYyhRM77xvdXsuxA0auceijqU9Oxnr9irCngmczG/5V3+HN/UQOoCd4bFY2o4XBPupRU4k3RH4Bo/PJ8rLlLCvBmW+e6d4bEjcIUlP/v8A/D2XE7f0bWnlbW7T7qdmFA4IrRw4xPou6Cs42HFMLuhTFi4aaYI+56fRc/DjmFJ3SaaaYGGn1XAE/QuFitDdK6PMJJLLR0JQuAroKDoammmE5PDEEPdDkudwERpS0IA6mCad2g+iBr5JSdvTVxoKWgoMxW7MUT+oeRQdTsk2+lxHndbXSkaSu1MefVOzFRvwkOHkUDVyauD8HsvTO7Xe6VnKmR5VUwr2/Ex3sfqoNLuS9bOHHEIetl1J27B7BXuY8s87Ljl6LW7NUHb0/UQFX4nsdTPwuI6J2TqxbKpTm4iFo6vZN4Mh09IQFbs7WbcNnyV3jU6q38VzJTm1ibyd9iu18vqN+Jjh6KBziLH5qdYdYPp4+IDhadlOcwLfhFuRhU5qAjYei6Kp5qXhGei5/iL/ANPyCSp/xD+a4n44nV61hRcuLpJH+QiDVHVB0233U2k8010SOcml3+Qmhh5runqmhd5/kKQU54pgZ1UjWwgXc9U1zBzlSgp2vosiHSmuCnDjySKNQLKkYwqZruvyXZHMoGd30TdDuSmBHMrp09UEIpO6Jd0eik1t5FLvByQN7sc13uhz+Sd3nRIvKBmgdUtPQpaynQSg4G9EodyCXd9SndweJQROdG9vK6aHjmFP3ISOHbyCCGUgnPw36TC6Gc0DS0LndjknaUlPF1G+kDuJQlfKKL/iY32RxKQKuoz9fsnQd+WPJVtbsWy+l5HmtkQmGl1V2jCnsXU/WPkktx3XUrqbTAdFENXElGTnBOa0JJIJYsnBJJWDsJQupKBsroSSRqEupJIEuykkg4kkkgekAkkg7WC4xJJA9JJJA4JqSSBKErqSBNCifukksjqSSSsCSSSVCSSSQf/Z",text:"This is another card.",onMouseEnter:()=>a((0,uT.jsx)(N1,{})),onClick:()=>l("/apsit")}],a=e=>{r(e)},s=(0,cT.useHistory)(),l=e=>{s.push(e)};return(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(_Y,{}),(0,uT.jsxs)("div",{className:"pilgrim-main",children:[(0,uT.jsxs)("div",{className:"pilgrim-left",children:[(0,uT.jsx)("div",{className:"pilgrim-search",children:(0,uT.jsx)(iJ,{className:"card-css",style:{width:"80%",margin:"30px",height:"150px"},children:(0,uT.jsx)("input",{id:"searchInput",type:"text",placeholder:"Search here..",onChange:e=>{t(e.target.value)}})})}),(0,uT.jsx)("div",{className:"react-card",children:o.filter(t=>""==e||t.title.toLowerCase().includes(e.toLowerCase())?t:void 0).map(e=>(0,uT.jsx)(k1,{title:e.title,subtitle:e.subtitle,image:e.image,text:e.text,onMouseEnter:e.onMouseEnter,onClick:e.onClick},e.id))})]}),(0,uT.jsx)("div",{className:"map-container",children:n})]}),(0,uT.jsx)(HY,{})]})},z1=_L((0,uT.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google"),U1=()=>{const{dispatch:e}=Uae(),[t,n]=(0,i.useState)(!1),r=t=>{const n=t.credential,i=NL(n),{sub:r,email:o,name:a,picture:s}=i;e({type:"UPDATE_USER",payload:{id:r,email:o,name:a,photoURL:s,token:n,google:!0}}),e({type:"CLOSE_LOGIN"})};return(0,uT.jsx)(bN,{variant:"outlined",startIcon:(0,uT.jsx)(z1,{}),disabled:t,onClick:()=>{n(!0);try{window.google.accounts.id.initialize({client_id:"972237565230-1a7mfasusvter9hkn3hhq96j18q0ri4c.apps.googleusercontent.com",callback:r}),window.google.accounts.id.prompt(e=>{if(e.isNotDisplayed())throw new Error("Try to clear the cookies or try again later!");(e.isSkippedMoment()||e.isDismissedMoment())&&n(!1)})}catch(t){e({type:"UPDATE_ALERT",payload:{open:!0,severity:"error",message:t.message}}),console.log(t)}},children:"Login with Google"})},j1=_L((0,uT.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),V1=_L((0,uT.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");function H1(e){return wI("MuiInputAdornment",e)}const G1=EI("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Q1;const W1=["children","className","component","disablePointerEvents","disableTypography","position","variant"],q1=HI("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(KI(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{["&.".concat(G1.positionStart,"&:not(.").concat(G1.hiddenLabel,")")]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})}),X1=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiInputAdornment"}),{children:r,className:o,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=n,h=(0,gT.A)(n,W1),d=uD()||{};let p=u;u&&d.variant,d&&!p&&(p=d.variant);const f=(0,mT.A)({},n,{hiddenLabel:d.hiddenLabel,size:d.size,disablePointerEvents:s,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:i,position:r,size:o,variant:a}=e;return BI({root:["root",n&&"disablePointerEvents",r&&"position".concat(KI(r)),a,i&&"hiddenLabel",o&&"size".concat(KI(o))]},H1,t)})(f);return(0,uT.jsx)(cD.Provider,{value:null,children:(0,uT.jsx)(q1,(0,mT.A)({as:a,ownerState:f,className:MT(m.root,o),ref:t},h,{children:"string"!==typeof r||l?(0,uT.jsxs)(i.Fragment,{children:["start"===c?Q1||(Q1=(0,uT.jsx)("span",{className:"notranslate",children:"\u200b"})):null,r]}):(0,uT.jsx)(zP,{color:"text.secondary",children:r})}))})}),Y1=X1,K1=e=>{let{passwordRef:t,id:n="password",label:r="Password"}=e;const[o,a]=(0,i.useState)(!1);return(0,uT.jsx)(rN,{margin:"normal",variant:"standard",id:n,label:r,type:o?"text":"password",fullWidth:!0,inputRef:t,inputProps:{minLength:6},required:!0,InputProps:{endAdornment:(0,uT.jsx)(Y1,{position:"end",children:(0,uT.jsx)(gL,{onClick:()=>{a(!o)},onMouseDown:e=>{e.preventDefault()},children:o?(0,uT.jsx)(j1,{}):(0,uT.jsx)(V1,{})})})}})},J1=()=>{const{state:{openLogin:e},dispatch:t}=Uae(),[n,r]=(0,i.useState)("Login"),[o,a]=(0,i.useState)(!1),s=(0,i.useRef)(),l=(0,i.useRef)(),c=(0,i.useRef)(),u=(0,i.useRef)(),h=()=>{t({type:"CLOSE_LOGIN"})};return(0,i.useEffect)(()=>{r(o?"Register":"Login")},[o]),(0,uT.jsxs)(LP,{open:e,onClose:h,children:[(0,uT.jsxs)(QP,{children:[n,(0,uT.jsx)(gL,{sx:{position:"absolute",top:8,right:8,color:e=>e.palette.grey[500]},onClick:h,children:(0,uT.jsx)(xN,{})})]}),(0,uT.jsxs)("form",{onSubmit:e=>{e.preventDefault();const n=l.current.value,i=c.current.value;if(!o)return(async(e,t)=>{t({type:"START_LOADING"});const n=await wN({url:vY+"/login",body:e},t);n&&(t({type:"UPDATE_USER",payload:n}),t({type:"CLOSE_LOGIN"})),t({type:"END_LOADING"})})({email:n,password:i},t);const r=s.current.value;if(i!==u.current.value)return t({type:"UPDATE_ALERT",payload:{open:!0,severity:"error",message:"Passwords do not match"}});(async(e,t)=>{t({type:"START_LOADING"});const n=await wN({url:vY+"/register",body:e},t);n&&(t({type:"UPDATE_USER",payload:n}),t({type:"CLOSE_LOGIN"}),t({type:"UPDATE_ALERT",payload:{open:!0,severity:"success",message:"Your account has been created successfully"}})),t({type:"END_LOADING"})})({name:r,email:n,password:i},t)},children:[(0,uT.jsxs)(KP,{dividers:!0,children:[(0,uT.jsx)(tD,{children:"Please fill your information in the fields below:"}),o&&(0,uT.jsx)(rN,{autoFocus:!0,margin:"normal",variant:"standard",id:"name",label:"Name",type:"text",fullWidth:!0,inputRef:s,inputProps:{minLength:2},required:!0}),(0,uT.jsx)(rN,{autoFocus:!o,margin:"normal",variant:"standard",id:"email",label:"Email",type:"email",fullWidth:!0,inputRef:l,required:!0}),(0,uT.jsx)(K1,{passwordRef:c}),o&&(0,uT.jsx)(K1,{passwordRef:u,id:"confirmPassword",label:"Confirm Password"})]}),(0,uT.jsx)(cN,{sx:{px:"19px"},children:(0,uT.jsx)(bN,{type:"submit",variant:"contained",endIcon:(0,uT.jsx)(_N,{}),children:"Submit"})})]}),(0,uT.jsxs)(cN,{sx:{justifyContent:"left",p:"5px 24px"},children:[o?"Do you have an account? Sign in now ":"Don't you have an account? Create one now ",(0,uT.jsx)(bN,{onClick:()=>a(!o),children:o?"Login":"Register"})]}),(0,uT.jsx)(cN,{sx:{justifyContent:"center",py:"24px"},children:(0,uT.jsx)(U1,{})})]})},Z1=n.p+"static/media/AKS3.350f0b85e0e5726e6407.jpg",$1=n.p+"static/media/A1.13f53a6054d653d5537e.gif",e2=n.p+"static/media/AKS1.7b9465f0cc8969a7378f.jpeg",t2=n.p+"static/media/AKS2.15c90243bb395374799b.jpg",n2=()=>(0,uT.jsxs)("div",{children:[(0,uT.jsxs)("div",{className:"main",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)("div",{className:"blog_leftside",style:{width:"65%",float:"left"},children:(0,uT.jsxs)("div",{className:"main-wrapper-boxed",children:[(0,uT.jsx)("center",{children:(0,uT.jsx)("img",{src:Z1,alt:""})}),(0,uT.jsx)("h1",{children:"A Flight To The Marvelous World Of Akshardham Temple"}),(0,uT.jsx)("h2",{children:"Swaminarayan Akshardham is a Hindu temple, and spiritual-cultural campus in Delhi, India. The temple is close to the border with Noida. Also referred to as Akshardham Temple or Akshardham Delhi, the complex displays millennia of traditional and modern Hindu culture, spirituality, and architecture.The main attraction of the Swaminarayan Akshardham complex is the Akshardham Mandir. It rises 43-metre (141 ft) high, spans 96-metre (316 ft) wide, and extends 109-metre (356 ft) long.It is intricately carved with flora, fauna, dancers, musicians, and deities.It is located on the banks of the Yamuna River."}),(0,uT.jsx)("div",{className:"vertical"}),(0,uT.jsx)("b",{children:"Swaminarayan Akshardham is a Hindu temple, and spiritual-cultural campus in Delhi, India. The temple is close to the border with Noida. Also referred to as Akshardham Temple or Akshardham Delhi, the complex displays millennia of traditional and modern Hindu culture, spirituality, and architecture. "}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("h2",{children:"The Akshardham Mandir was designed by BAPS Swamis and Virendra Trivedi, a member of the Sompura family.It is entirely constructed from Rajasthani pink sandstone and Italian Carrara marble. Based on traditional Hindu architectural guidelines (Shilpa shastras) on maximum temple life span, it makes no use of ferrous metal. Thus, it has no support from steel or concrete.The architecture is inspired by the M\u0101ru-Gurjara architecture style. The mandir also consists of 234 ornately carved pillars, nine domes, and 20,000 murtis of swamis, devotees, and acharyas.The mandir also features the Gajendra Pith at its base, a plinth paying tribute to the elephant for its importance in Hindu culture and India's history. It contains 148 life sized elephants in total weighing a total of 3000 tons."}),(0,uT.jsx)("img",{src:$1,alt:"",className:"A1"}),(0,uT.jsx)("img",{src:e2,alt:"",className:"A2"}),(0,uT.jsx)("img",{src:t2,alt:"",className:"A3"}),(0,uT.jsx)(TT,{to:"/blog",className:"readless",children:"READ LESS"})]})}),(0,uT.jsx)("div",{className:"blog_rightside",style:{width:"30%",height:"575px",float:"left"},children:(0,uT.jsx)(y1,{})})]}),(0,uT.jsx)(HY,{})]});function i2(e,t){return function(){return e.apply(t,arguments)}}const{toString:r2}=Object.prototype,{getPrototypeOf:o2}=Object,{iterator:a2,toStringTag:s2}=Symbol,l2=(c2=Object.create(null),e=>{const t=r2.call(e);return c2[t]||(c2[t]=t.slice(8,-1).toLowerCase())});var c2;const u2=e=>(e=e.toLowerCase(),t=>l2(t)===e),h2=e=>t=>typeof t===e,{isArray:d2}=Array,p2=h2("undefined");function f2(e){return null!==e&&!p2(e)&&null!==e.constructor&&!p2(e.constructor)&&v2(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m2=u2("ArrayBuffer");const g2=h2("string"),v2=h2("function"),y2=h2("number"),A2=e=>null!==e&&"object"===typeof e,b2=e=>{if("object"!==l2(e))return!1;const t=o2(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(s2 in e)&&!(a2 in e)},x2=u2("Date"),_2=u2("File"),w2=u2("Blob"),E2=u2("FileList"),C2=u2("URLSearchParams"),[S2,T2,I2,M2]=["ReadableStream","Request","Response","Headers"].map(u2);function k2(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),d2(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(f2(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function R2(e,t){if(f2(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const L2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,B2=e=>!p2(e)&&e!==L2;const P2=(D2="undefined"!==typeof Uint8Array&&o2(Uint8Array),e=>D2&&e instanceof D2);var D2;const O2=u2("HTMLFormElement"),N2=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),F2=u2("RegExp"),z2=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};k2(n,(n,r)=>{let o;!1!==(o=t(n,r,e))&&(i[r]=o||n)}),Object.defineProperties(e,i)};const U2=u2("AsyncFunction"),j2=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],L2.addEventListener("message",e=>{let{source:t,data:r}=e;t===L2&&r===n&&i.length&&i.shift()()},!1),e=>{i.push(e),L2.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,v2(L2.postMessage)),V2="undefined"!==typeof queueMicrotask?queueMicrotask.bind(L2):"undefined"!==typeof process&&process.nextTick||j2,H2={isArray:d2,isArrayBuffer:m2,isBuffer:f2,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v2(e.append)&&("formdata"===(t=l2(e))||"object"===t&&v2(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m2(e.buffer),t},isString:g2,isNumber:y2,isBoolean:e=>!0===e||!1===e,isObject:A2,isPlainObject:b2,isEmptyObject:e=>{if(!A2(e)||f2(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(QJ){return!1}},isReadableStream:S2,isRequest:T2,isResponse:I2,isHeaders:M2,isUndefined:p2,isDate:x2,isFile:_2,isBlob:w2,isRegExp:F2,isFunction:v2,isStream:e=>A2(e)&&v2(e.pipe),isURLSearchParams:C2,isTypedArray:P2,isFileList:E2,forEach:k2,merge:function e(){const{caseless:t,skipUndefined:n}=B2(this)&&this||{},i={},r=(r,o)=>{const a=t&&R2(i,o)||o;b2(i[a])&&b2(r)?i[a]=e(i[a],r):b2(r)?i[a]=e({},r):d2(r)?i[a]=r.slice():n&&p2(r)||(i[a]=r)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&k2(arguments[o],r);return i},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return k2(t,(t,i)=>{n&&v2(t)?e[i]=i2(t,n):e[i]=t},{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,o,a;const s={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)a=r[o],i&&!i(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&o2(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:l2,kindOfTest:u2,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(d2(e))return e;let t=e.length;if(!y2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[a2]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:O2,hasOwnProperty:N2,hasOwnProp:N2,reduceDescriptors:z2,freezeMethods:e=>{z2(e,(t,n)=>{if(v2(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];v2(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach(e=>{n[e]=!0})};return d2(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:R2,global:L2,isContextDefined:B2,isSpecCompliantForm:function(e){return!!(e&&v2(e.append)&&"FormData"===e[s2]&&e[a2])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(A2(e)){if(t.indexOf(e)>=0)return;if(f2(e))return e;if(!("toJSON"in e)){t[i]=e;const r=d2(e)?[]:{};return k2(e,(e,t)=>{const o=n(e,i+1);!p2(o)&&(r[t]=o)}),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:U2,isThenable:e=>e&&(A2(e)||v2(e))&&v2(e.then)&&v2(e.catch),setImmediate:j2,asap:V2,isIterable:e=>null!=e&&v2(e[a2])};function G2(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}H2.inherits(G2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H2.toJSONObject(this.config),code:this.code,status:this.status}}});const Q2=G2.prototype,W2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{W2[e]={value:e}}),Object.defineProperties(G2,W2),Object.defineProperty(Q2,"isAxiosError",{value:!0}),G2.from=(e,t,n,i,r,o)=>{const a=Object.create(Q2);H2.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return G2.call(a,s,l,n,i,r),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const q2=G2;function X2(e){return H2.isPlainObject(e)||H2.isArray(e)}function Y2(e){return H2.endsWith(e,"[]")?e.slice(0,-2):e}function K2(e,t,n){return e?e.concat(t).map(function(e,t){return e=Y2(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const J2=H2.toFlatObject(H2,{},null,function(e){return/^is[A-Z]/.test(e)});const Z2=function(e,t,n){if(!H2.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=H2.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!H2.isUndefined(t[e])});const i=n.metaTokens,r=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&H2.isSpecCompliantForm(t);if(!H2.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(H2.isDate(e))return e.toISOString();if(H2.isBoolean(e))return e.toString();if(!s&&H2.isBlob(e))throw new q2("Blob is not supported. Use a Buffer instead.");return H2.isArrayBuffer(e)||H2.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let s=e;if(e&&!r&&"object"===typeof e)if(H2.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(H2.isArray(e)&&function(e){return H2.isArray(e)&&!e.some(X2)}(e)||(H2.isFileList(e)||H2.endsWith(n,"[]"))&&(s=H2.toArray(e)))return n=Y2(n),s.forEach(function(e,i){!H2.isUndefined(e)&&null!==e&&t.append(!0===a?K2([n],i,o):null===a?n:n+"[]",l(e))}),!1;return!!X2(e)||(t.append(K2(r,n,o),l(e)),!1)}const u=[],h=Object.assign(J2,{defaultVisitor:c,convertValue:l,isVisitable:X2});if(!H2.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!H2.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),H2.forEach(n,function(n,o){!0===(!(H2.isUndefined(n)||null===n)&&r.call(t,n,H2.isString(o)?o.trim():o,i,h))&&e(n,i?i.concat(o):[o])}),u.pop()}}(e),t};function $2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function e3(e,t){this._pairs=[],e&&Z2(e,this,t)}const t3=e3.prototype;t3.append=function(e,t){this._pairs.push([e,t])},t3.toString=function(e){const t=e?function(t){return e.call(this,t,$2)}:$2;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const n3=e3;function i3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function r3(e,t,n){if(!t)return e;const i=n&&n.encode||i3;H2.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(o=r?r(t,n):H2.isURLSearchParams(t)?t.toString():new n3(t,n).toString(i),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const o3=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H2.forEach(this.handlers,function(t){null!==t&&e(t)})}},a3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s3={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:n3,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},l3="undefined"!==typeof window&&"undefined"!==typeof document,c3="object"===typeof navigator&&navigator||void 0,u3=l3&&(!c3||["ReactNative","NativeScript","NS"].indexOf(c3.product)<0),h3="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,d3=l3&&window.location.href||"http://localhost",p3=u(u({},t),s3);const f3=function(e){function t(e,n,i,r){let o=e[r++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=r>=e.length;if(o=!o&&H2.isArray(i)?i.length:o,s)return H2.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a;i[o]&&H2.isObject(i[o])||(i[o]=[]);return t(e,n,i[o],r)&&H2.isArray(i[o])&&(i[o]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],t[o]=e[o];return t}(i[o])),!a}if(H2.isFormData(e)&&H2.isFunction(e.entries)){const n={};return H2.forEachEntry(e,(e,i)=>{t(function(e){return H2.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,n,0)}),n}return null};const m3={transitional:a3,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=H2.isObject(e);r&&H2.isHTMLForm(e)&&(e=new FormData(e));if(H2.isFormData(e))return i?JSON.stringify(f3(e)):e;if(H2.isArrayBuffer(e)||H2.isBuffer(e)||H2.isStream(e)||H2.isFile(e)||H2.isBlob(e)||H2.isReadableStream(e))return e;if(H2.isArrayBufferView(e))return e.buffer;if(H2.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z2(e,new p3.classes.URLSearchParams,u({visitor:function(e,t,n,i){return p3.isNode&&H2.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=H2.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z2(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(H2.isString(e))try{return(t||JSON.parse)(e),H2.trim(e)}catch(QJ){if("SyntaxError"!==QJ.name)throw QJ}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||m3.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(H2.isResponse(e)||H2.isReadableStream(e))return e;if(e&&H2.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(QJ){if(n){if("SyntaxError"===QJ.name)throw q2.from(QJ,q2.ERR_BAD_RESPONSE,this,null,this.response);throw QJ}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:p3.classes.FormData,Blob:p3.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H2.forEach(["delete","get","head","post","put","patch"],e=>{m3.headers[e]={}});const g3=m3,v3=H2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y3=Symbol("internals");function A3(e){return e&&String(e).trim().toLowerCase()}function b3(e){return!1===e||null==e?e:H2.isArray(e)?e.map(b3):String(e)}function x3(e,t,n,i,r){return H2.isFunction(i)?i.call(this,t,n):(r&&(t=n),H2.isString(t)?H2.isString(i)?-1!==t.indexOf(i):H2.isRegExp(i)?i.test(t):void 0:void 0)}class _3{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=A3(t);if(!r)throw new Error("header name must be a non-empty string");const o=H2.findKey(i,r);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||t]=b3(e))}const o=(e,t)=>H2.forEach(e,(e,n)=>r(e,n,t));if(H2.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(H2.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&v3[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t})(e),t);else if(H2.isObject(e)&&H2.isIterable(e)){let n,i,r={};for(const t of e){if(!H2.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?H2.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=A3(e)){const n=H2.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(H2.isFunction(t))return t.call(this,e,n);if(H2.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=A3(e)){const n=H2.findKey(this,e);return!(!n||void 0===this[n]||t&&!x3(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=A3(e)){const r=H2.findKey(n,e);!r||t&&!x3(0,n[r],r,t)||(delete n[r],i=!0)}}return H2.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!x3(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return H2.forEach(this,(i,r)=>{const o=H2.findKey(n,r);if(o)return t[o]=b3(i),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(r):String(r).trim();a!==r&&delete t[r],t[a]=b3(i),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return H2.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&H2.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[y3]=this[y3]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=A3(e);t[i]||(!function(e,t){const n=H2.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})})}(n,e),t[i]=!0)}return H2.isArray(e)?e.forEach(i):i(e),this}}_3.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),H2.reduceDescriptors(_3.prototype,(e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}}),H2.freezeMethods(_3);const w3=_3;function E3(e,t){const n=this||g3,i=t||n,r=w3.from(i.headers);let o=i.data;return H2.forEach(e,function(e){o=e.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function C3(e){return!(!e||!e.__CANCEL__)}function S3(e,t,n){q2.call(this,null==e?"canceled":e,q2.ERR_CANCELED,t,n),this.name="CanceledError"}H2.inherits(S3,q2,{__CANCEL__:!0});const T3=S3;function I3(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new q2("Request failed with status code "+n.status,[q2.ERR_BAD_REQUEST,q2.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const M3=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=i[a];r||(r=l),n[o]=s,i[o]=l;let u=a,h=0;for(;u!==o;)h+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-r<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const k3=function(e,t){let n,i,r=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=o,n=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=o?a(l,e):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},o-t)))},()=>n&&a(n)]},R3=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=M3(50,250);return k3(n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-i,l=r(s);i=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},L3=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},B3=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return H2.asap(()=>e(...n))},P3=p3.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,p3.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(p3.origin),p3.navigator&&/(msie|trident)/i.test(p3.navigator.userAgent)):()=>!0,D3=p3.hasStandardBrowserEnv?{write(e,t,n,i,r,o,a){if("undefined"===typeof document)return;const s=["".concat(e,"=").concat(encodeURIComponent(t))];H2.isNumber(n)&&s.push("expires=".concat(new Date(n).toUTCString())),H2.isString(i)&&s.push("path=".concat(i)),H2.isString(r)&&s.push("domain=".concat(r)),!0===o&&s.push("secure"),H2.isString(a)&&s.push("SameSite=".concat(a)),document.cookie=s.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function O3(e,t,n){let i=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const N3=e=>e instanceof w3?u({},e):e;function F3(e,t){t=t||{};const n={};function i(e,t,n,i){return H2.isPlainObject(e)&&H2.isPlainObject(t)?H2.merge.call({caseless:i},e,t):H2.isPlainObject(t)?H2.merge({},t):H2.isArray(t)?t.slice():t}function r(e,t,n,r){return H2.isUndefined(t)?H2.isUndefined(e)?void 0:i(void 0,e,0,r):i(e,t,0,r)}function o(e,t){if(!H2.isUndefined(t))return i(void 0,t)}function a(e,t){return H2.isUndefined(t)?H2.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function s(n,r,o){return o in t?i(n,r):o in e?i(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>r(N3(e),N3(t),0,!0)};return H2.forEach(Object.keys(u(u({},e),t)),function(i){const o=l[i]||r,a=o(e[i],t[i],i);H2.isUndefined(a)&&o!==s||(n[i]=a)}),n}const z3=e=>{const t=F3({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:s}=t;if(t.headers=a=w3.from(a),t.url=r3(O3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),H2.isFormData(n))if(p3.hasStandardBrowserEnv||p3.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(H2.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,i]=e;t.includes(n.toLowerCase())&&a.set(n,i)})}if(p3.hasStandardBrowserEnv&&(i&&H2.isFunction(i)&&(i=i(t)),i||!1!==i&&P3(t.url))){const e=r&&o&&D3.read(o);e&&a.set(r,e)}return t},U3="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const i=z3(e);let r=i.data;const o=w3.from(i.headers).normalize();let a,s,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=i;function f(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=w3.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());I3(function(e){t(e),f()},function(e){n(e),f()},{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new q2("Request aborted",q2.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const i=t&&t.message?t.message:"Network Error",r=new q2(i,q2.ERR_NETWORK,e,m);r.event=t||null,n(r),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||a3;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new q2(t,r.clarifyTimeoutError?q2.ETIMEDOUT:q2.ECONNABORTED,e,m)),m=null},void 0===r&&o.setContentType(null),"setRequestHeader"in m&&H2.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),H2.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),h&&"json"!==h&&(m.responseType=i.responseType),p&&([l,u]=R3(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([s,c]=R3(d),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{m&&(n(!t||t.type?new T3(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===p3.protocols.indexOf(v)?n(new q2("Unsupported protocol "+v+":",q2.ERR_BAD_REQUEST,e)):m.send(r||null)})},j3=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof q2?t:new T3(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,r(new q2("timeout ".concat(t," of ms exceeded"),q2.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:s}=i;return s.unsubscribe=()=>H2.asap(a),s}};function V3(e,t){this.v=e,this.k=t}function H3(e){return function(){return new G3(e.apply(this,arguments))}}function G3(e){var t,n;function i(t,n){try{var o=e[t](n),a=o.value,s=a instanceof V3;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return i(l,n);n=e[l](n).value}r(o.done?"return":"normal",n)},function(e){i("throw",e)})}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(o,a){var s={key:e,arg:r,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,i(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function Q3(e){return new V3(e,0)}function W3(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise(function(n){n(e[t](i))}),{done:!1,value:new V3(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function q3(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new X3(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function X3(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return X3=function(e){this.s=e,this.n=e.next},X3.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new X3(e)}G3.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},G3.prototype.next=function(e){return this._invoke("next",e)},G3.prototype.throw=function(e){return this._invoke("throw",e)},G3.prototype.return=function(e){return this._invoke("return",e)};const Y3=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},K3=function(){var e=H3(function*(e,t){var n,i=!1,r=!1;try{for(var o,a=q3(J3(e));i=!(o=yield Q3(a.next())).done;i=!1){const e=o.value;yield*W3(q3(Y3(e,t)))}}catch(s){r=!0,n=s}finally{try{i&&null!=a.return&&(yield Q3(a.return()))}finally{if(r)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),J3=function(){var e=H3(function*(e){if(e[Symbol.asyncIterator])return void(yield*W3(q3(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Q3(t.read());if(e)break;yield n}}finally{yield Q3(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Z3=(e,t,n,i)=>{const r=K3(e,t);let o,a=0,s=e=>{o||(o=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return s(),void e.close();let o=i.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw s(t),t}},cancel:e=>(s(e),r.return())},{highWaterMark:2})},{isFunction:$3}=H2,e4=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(H2.global),{ReadableStream:t4,TextEncoder:n4}=H2.global,i4=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(QJ){return!1}},r4=e=>{e=H2.merge.call({skipUndefined:!0},e4,e);const{fetch:t,Request:n,Response:i}=e,r=t?$3(t):"function"===typeof fetch,o=$3(n),a=$3(i);if(!r)return!1;const s=r&&$3(t4),l=r&&("function"===typeof n4?(c=new n4,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const h=o&&s&&i4(()=>{let e=!1;const t=new n(p3.origin,{body:new t4,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=a&&s&&i4(()=>H2.isReadableStream(new i("").body)),p={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(t,n)=>{let i=t&&t[e];if(i)return i.call(t);throw new q2("Response type '".concat(e,"' is not supported"),q2.ERR_NOT_SUPPORT,n)})});const f=async(e,t)=>{const i=H2.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(H2.isBlob(e))return e.size;if(H2.isSpecCompliantForm(e)){const t=new n(p3.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return H2.isArrayBufferView(e)||H2.isArrayBuffer(e)?e.byteLength:(H2.isURLSearchParams(e)&&(e+=""),H2.isString(e)?(await l(e)).byteLength:void 0)})(t):i};return async e=>{let{url:r,method:a,data:s,signal:l,cancelToken:c,timeout:m,onDownloadProgress:g,onUploadProgress:v,responseType:y,headers:A,withCredentials:b="same-origin",fetchOptions:x}=z3(e),_=t||fetch;y=y?(y+"").toLowerCase():"text";let w=j3([l,c&&c.toAbortSignal()],m),E=null;const C=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let S;try{if(v&&h&&"get"!==a&&"head"!==a&&0!==(S=await f(A,s))){let e,t=new n(r,{method:"POST",body:s,duplex:"half"});if(H2.isFormData(s)&&(e=t.headers.get("content-type"))&&A.setContentType(e),t.body){const[e,n]=L3(S,R3(B3(v)));s=Z3(t.body,65536,e,n)}}H2.isString(b)||(b=b?"include":"omit");const t=o&&"credentials"in n.prototype,l=u(u({},x),{},{signal:w,method:a.toUpperCase(),headers:A.normalize().toJSON(),body:s,duplex:"half",credentials:t?b:void 0});E=o&&new n(r,l);let c=await(o?_(E,x):_(r,l));const m=d&&("stream"===y||"response"===y);if(d&&(g||m&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=H2.toFiniteNumber(c.headers.get("content-length")),[n,r]=g&&L3(t,R3(B3(g),!0))||[];c=new i(Z3(c.body,65536,n,()=>{r&&r(),C&&C()}),e)}y=y||"text";let T=await p[H2.findKey(p,y)||"text"](c,e);return!m&&C&&C(),await new Promise((t,n)=>{I3(t,n,{data:T,headers:w3.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:E})})}catch(T){if(C&&C(),T&&"TypeError"===T.name&&/Load failed|fetch/i.test(T.message))throw Object.assign(new q2("Network Error",q2.ERR_NETWORK,e,E),{cause:T.cause||T});throw q2.from(T,T&&T.code,e,E)}}},o4=new Map,a4=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:r}=t,o=[i,r,n];let a,s,l=o.length,c=o4;for(;l--;)a=o[l],s=c.get(a),void 0===s&&c.set(a,s=l?new Map:r4(t)),c=s;return s},s4=(a4(),{http:null,xhr:U3,fetch:{get:a4}});H2.forEach(s4,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(QJ){}Object.defineProperty(e,"adapterName",{value:t})}});const l4=e=>"- ".concat(e),c4=e=>H2.isFunction(e)||null===e||!1===e;const u4={getAdapter:function(e,t){e=H2.isArray(e)?e:[e];const{length:n}=e;let i,r;const o={};for(let a=0;a<n;a++){let n;if(i=e[a],r=i,!c4(i)&&(r=s4[(n=String(i)).toLowerCase()],void 0===r))throw new q2("Unknown adapter '".concat(n,"'"));if(r&&(H2.isFunction(r)||(r=r.get(t))))break;o[n||"#"+a]=r}if(!r){const e=Object.entries(o).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(l4).join("\n"):" "+l4(e[0]):"as no adapter specified";throw new q2("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r},adapters:s4};function h4(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new T3(null,e)}function d4(e){h4(e),e.headers=w3.from(e.headers),e.data=E3.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return u4.getAdapter(e.adapter||g3.adapter,e)(e).then(function(t){return h4(e),t.data=E3.call(e,e.transformResponse,t),t.headers=w3.from(t.headers),t},function(t){return C3(t)||(h4(e),t&&t.response&&(t.response.data=E3.call(e,e.transformResponse,t.response),t.response.headers=w3.from(t.response.headers))),Promise.reject(t)})}const p4="1.13.2",f4={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{f4[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const m4={};f4.transitional=function(e,t,n){function i(e,t){return"[Axios v"+p4+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new q2(i(r," has been removed"+(t?" in "+t:"")),q2.ERR_DEPRECATED);return t&&!m4[r]&&(m4[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},f4.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const g4={assertOptions:function(e,t,n){if("object"!==typeof e)throw new q2("options must be an object",q2.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const o=i[r],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new q2("option "+o+" must be "+n,q2.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new q2("Unknown option "+o,q2.ERR_BAD_OPTION)}},validators:f4},v4=g4.validators;class y4{constructor(e){this.defaults=e||{},this.interceptors={request:new o3,response:new o3}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(QJ){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=F3(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&g4.assertOptions(n,{silentJSONParsing:v4.transitional(v4.boolean),forcedJSONParsing:v4.transitional(v4.boolean),clarifyTimeoutError:v4.transitional(v4.boolean)},!1),null!=i&&(H2.isFunction(i)?t.paramsSerializer={serialize:i}:g4.assertOptions(i,{encode:v4.function,serialize:v4.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),g4.assertOptions(t,{baseUrl:v4.spelling("baseURL"),withXsrfToken:v4.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&H2.merge(r.common,r[t.method]);r&&H2.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=w3.concat(o,r);const a=[];let s=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,h=0;if(!s){const e=[d4.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=a.length;let d=t;for(;h<u;){const e=a[h++],t=a[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=d4.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return r3(O3((e=F3(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}H2.forEach(["delete","get","head","options"],function(e){y4.prototype[e]=function(t,n){return this.request(F3(n||{},{method:e,url:t,data:(n||{}).data}))}}),H2.forEach(["post","put","patch"],function(e){function t(t){return function(n,i,r){return this.request(F3(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}y4.prototype[e]=t(),y4.prototype[e+"Form"]=t(!0)});const A4=y4;class b4{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e,i,r){n.reason||(n.reason=new T3(e,i,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new b4(function(t){e=t});return{token:t,cancel:e}}}const x4=b4;const _4={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_4).forEach(e=>{let[t,n]=e;_4[n]=t});const w4=_4;const E4=function e(t){const n=new A4(t),i=i2(A4.prototype.request,n);return H2.extend(i,A4.prototype,n,{allOwnKeys:!0}),H2.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(F3(t,n))},i}(g3);E4.Axios=A4,E4.CanceledError=T3,E4.CancelToken=x4,E4.isCancel=C3,E4.VERSION=p4,E4.toFormData=Z2,E4.AxiosError=q2,E4.Cancel=E4.CanceledError,E4.all=function(e){return Promise.all(e)},E4.spread=function(e){return function(t){return e.apply(null,t)}},E4.isAxiosError=function(e){return H2.isObject(e)&&!0===e.isAxiosError},E4.mergeConfig=F3,E4.AxiosHeaders=w3,E4.formToJSON=e=>f3(H2.isHTMLForm(e)?new FormData(e):e),E4.getAdapter=u4.getAdapter,E4.HttpStatusCode=w4,E4.default=E4;const C4=E4;const S4=function(){const{state:e,dispatch:t}=(0,i.useContext)(zae),n=(0,cT.useHistory)(),[r,o]=(0,i.useState)(""),[a,s]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[d,p]=(0,i.useState)(""),[f,m]=(0,i.useState)(""),[g,v]=(0,i.useState)(""),[y,A]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{const e=await C4.get("http://localhost:4000/get-registered-dates");A(e.data)})()},[]);const b=async e=>{e.preventDefault();const i=new Date(u),A=y.every(e=>new Date(e.meetingDate).toISOString()!==i.toISOString()||e.guide!==g);if(A)try{await C4.post("http://localhost:4000/submit-meeting-form",{name:r,email:a,phoneNumber:l,meetingDate:u,meetingTime:d,meetingId:f,guide:g}),o(""),s(""),c(""),h(""),p(""),m(""),v(""),t({type:"SCHEDULE_MEETING"}),n.push("/pilgrimage"),alert("Meeting Scheduled successfully!")}catch(b){console.error("Error submitting form:",b),alert("An error occurred. Please try again.")}else alert("Guide is not available on this date")};return(0,uT.jsxs)("div",{className:"meet-div",children:[(0,uT.jsx)("h1",{children:"SCHEDULE MEETING"}),(0,uT.jsxs)("form",{onSubmit:b,className:"meet-form",children:[(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Name:"}),(0,uT.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Email:"}),(0,uT.jsx)("input",{type:"email",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Phone Number*:"}),(0,uT.jsx)("input",{type:"tel",value:l,onChange:e=>c(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Meeting Date:"}),(0,uT.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Meeting Time:"}),(0,uT.jsx)("input",{type:"time",value:d,onChange:e=>p(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Meeting ID:  *(Schedule a meeting and then fill this field with either link or ID of the meet)"}),(0,uT.jsx)("input",{type:"text",value:f,onChange:e=>m(e.target.value),required:!0})]}),(0,uT.jsxs)("label",{className:"labelz",children:[(0,uT.jsx)("h1",{children:"Select Guide:"}),(0,uT.jsxs)("select",{value:g,onChange:e=>v(e.target.value),required:!0,children:[(0,uT.jsx)("option",{value:"",children:"Select a guide"}),(0,uT.jsx)("option",{value:"Savinay",children:"Savinay"}),(0,uT.jsx)("option",{value:"Gautam",children:"Gautam"}),(0,uT.jsx)("option",{value:"Pratik",children:"Pratik"})]})]}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("button",{type:"submit",onClick:b,className:"meet-btn",children:"Schedule Meeting"})]})]})};function T4(e){return BY({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Image_On"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M18.435,3.06H5.565a2.5,2.5,0,0,0-2.5,2.5V18.44a2.507,2.507,0,0,0,2.5,2.5h12.87a2.507,2.507,0,0,0,2.5-2.5V5.56A2.5,2.5,0,0,0,18.435,3.06ZM4.065,5.56a1.5,1.5,0,0,1,1.5-1.5h12.87a1.5,1.5,0,0,1,1.5,1.5v8.66l-3.88-3.88a1.509,1.509,0,0,0-2.12,0l-4.56,4.57a.513.513,0,0,1-.71,0l-.56-.56a1.522,1.522,0,0,0-2.12,0l-1.92,1.92Zm15.87,12.88a1.5,1.5,0,0,1-1.5,1.5H5.565a1.5,1.5,0,0,1-1.5-1.5v-.75L6.7,15.06a.5.5,0,0,1,.35-.14.524.524,0,0,1,.36.14l.55.56a1.509,1.509,0,0,0,2.12,0l4.57-4.57a.5.5,0,0,1,.71,0l4.58,4.58Z"},child:[]},{tag:"path",attr:{d:"M8.062,10.565a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,8.062,10.565Zm0-4a1.5,1.5,0,1,0,1.5,1.5A1.5,1.5,0,0,0,8.062,6.565Z"},child:[]}]}]}]})(e)}const I4=e=>(0,uT.jsxs)("div",{className:"main-pil",children:[(0,uT.jsx)("h1",{style:{fontSize:"40px",marginLeft:"2%"},children:e.name}),(0,uT.jsxs)("h3",{style:{fontSize:"20px",marginLeft:"2%"},children:[(0,uT.jsx)($Y,{}),e.location]}),(0,uT.jsx)("center",{children:(0,uT.jsx)("div",{className:"orangebox",children:(0,uT.jsxs)("h1",{className:"in-ob",children:[(0,uT.jsx)(T4,{className:"image-icon"}),"360 image"]})})}),(0,uT.jsx)("center",{children:(0,uT.jsx)("hr",{className:"upper-line"})}),(0,uT.jsx)("center",{children:(0,uT.jsx)("div",{className:"Box360",children:(0,uT.jsx)("iframe",{src:e.src,allowfullscreen:"true",frameborder:"0",scrolling:"no",allow:"vr;gyroscope;accelerometer",height:"640",width:"100%"})})})]}),M4=e=>(0,uT.jsx)("div",{className:"container-pilleft",children:(0,uT.jsxs)("div",{className:"info-left",children:[(0,uT.jsxs)("div",{className:"info-top",children:[(0,uT.jsx)("h3",{children:"Overview"}),(0,uT.jsx)("table",{className:"table",children:(0,uT.jsxs)("tbody",{children:[(0,uT.jsxs)("tr",{children:[(0,uT.jsx)("td",{children:"No"}),(0,uT.jsx)("td",{children:e.r1c2}),(0,uT.jsx)("td",{children:"Ticket Fare"}),(0,uT.jsx)("td",{children:e.r1c4})]}),(0,uT.jsxs)("tr",{className:"r2",children:[(0,uT.jsx)("td",{children:"Type"}),(0,uT.jsx)("td",{children:e.r2c2}),(0,uT.jsx)("td",{children:"Parking"}),(0,uT.jsx)("td",{children:e.r2c4})]}),(0,uT.jsxs)("tr",{children:[(0,uT.jsx)("td",{children:"Timmings"}),(0,uT.jsx)("td",{children:e.r3c2}),(0,uT.jsx)("td",{children:"Prayer Timings"}),(0,uT.jsx)("td",{children:e.r3c4})]}),(0,uT.jsxs)("tr",{className:"r4",children:[(0,uT.jsx)("td",{children:"Tour Time"}),(0,uT.jsx)("td",{children:e.r4c2}),(0,uT.jsx)("td",{children:"LandArea"}),(0,uT.jsx)("td",{children:e.r4c4})]}),(0,uT.jsxs)("tr",{children:[(0,uT.jsx)("td",{children:"Size"}),(0,uT.jsx)("td",{children:e.r5c2}),(0,uT.jsx)("td",{children:"Built Year"}),(0,uT.jsx)("td",{children:e.r5c4})]})]})})]}),(0,uT.jsxs)("div",{className:"info-middle",children:[(0,uT.jsx)("h3",{children:"About This Place"}),(0,uT.jsx)("p",{children:e.about})]}),(0,uT.jsxs)("div",{className:"info-bottom",children:[(0,uT.jsx)("h3",{children:"Facts and Figures"}),(0,uT.jsx)("p",{children:e.facts})]}),(0,uT.jsxs)("div",{className:"info-bottom",children:[(0,uT.jsx)("h3",{children:"Info"}),(0,uT.jsx)("p",{children:e.Info})]})]})}),k4=n.p+"static/media/logo_tour.f25bda482b4b34d36280.png";var R4=n(5323);const L4=()=>{const{state:e,dispatch:t}=(0,i.useContext)(zae),[n,r]=(0,i.useState)(""),[o,a]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),h=(0,R4.W6)();return(0,uT.jsx)(uT.Fragment,{children:(0,uT.jsxs)("div",{class:"right-bottom-div",children:[(0,uT.jsx)("h3",{className:"widget-subtitle",children:"Contact Your Guide"}),(0,uT.jsx)("img",{src:k4,alt:""}),(0,uT.jsxs)("div",{class:"contact-info",children:[(0,uT.jsx)("h4",{className:"item-title",children:"VRTOUR"}),(0,uT.jsx)("br",{}),(0,uT.jsxs)("div",{className:"itm-phn",children:["+91 1234567890",(0,uT.jsx)("br",{})]}),(0,uT.jsxs)("div",{className:"itm-email",children:["info@vrtour.com",(0,uT.jsx)("br",{})]}),(0,uT.jsxs)("div",{className:"meet-button",children:[(0,uT.jsxs)("button",{class:"schedule-button",onClick:()=>{h.push("/submit-meeting-form")},children:[(0,uT.jsx)("i",{class:"fas fa-comment"})," Schedule Meeting"]})," ",(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{})]}),(0,uT.jsx)("div",{className:"form-container",children:(0,uT.jsxs)("form",{children:[(0,uT.jsx)("input",{type:"text",value:n,name:"fullname",placeholder:"Your Full Name",onChange:e=>r(e.target.value),required:!0})," ",(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsx)("input",{type:"tel",value:o,phone:"phonenumber",placeholder:"Phone Number",onChange:e=>a(e.target.value),required:!0})," ",(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsx)("input",{type:"text",value:s,name:"email",placeholder:"Your Email",onChange:e=>l(e.target.value),required:!0})," ",(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsx)("textarea",{value:c,className:"message-input",name:"message",placeholder:"Your Message",onChange:e=>u(e.target.value)})," ",(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsxs)("button",{type:"submit",className:"send-msg",onClick:async e=>{e.preventDefault();try{await C4.post("http://localhost:4000/submit-review",{fullname:n,phonenumber:o,email:s,message:c}),r(""),a(""),l(""),u(""),h.push("./pilgrimage"),alert("Review message submitted successfuly")}catch(t){console.error("Error submitting form:",t),alert("An error occurred. Please try again.")}},children:["Send Message",(0,uT.jsx)("i",{class:"fas fa-search"})]})]})})]})]})})};function B4(e){let{props:t,name:n,defaultTheme:i,themeId:r}=e,o=NT(i);r&&(o=o[r]||o);const a=function(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?QI(t.components[n].defaultProps,i):i}({theme:o,name:n,props:t});return a}const P4=["ownerState"],D4=["variants"],O4=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function N4(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function F4(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles="@layer ".concat(t,"{").concat(String(e.styles),"}")),e}const z4=(0,BT.A)(),U4=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function j4(e){let{defaultTheme:t,theme:n,themeId:i}=e;return r=n,0===Object.keys(r).length?t:n[i]||n;var r}function V4(e){return e?(t,n)=>n[e]:null}function H4(e,t,n){let{ownerState:i}=t,r=(0,gT.A)(t,P4);const o="function"===typeof e?e((0,mT.A)({ownerState:i},r)):e;if(Array.isArray(o))return o.flatMap(e=>H4(e,(0,mT.A)({ownerState:i},r),n));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:e=[]}=o;let t=(0,gT.A)(o,D4);return e.forEach(e=>{let o=!0;if("function"===typeof e.props?o=e.props((0,mT.A)({ownerState:i},r,i)):Object.keys(e.props).forEach(t=>{(null==i?void 0:i[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)}),o){Array.isArray(t)||(t=[t]);const o="function"===typeof e.style?e.style((0,mT.A)({ownerState:i},r,i)):e.style;t.push(n?F4((0,kT.internal_serializeStyles)(o),n):o)}}),t}return n?F4((0,kT.internal_serializeStyles)(o),n):o}const G4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=z4,rootShouldForwardProp:i=N4,slotShouldForwardProp:r=N4}=e,o=e=>(0,RT.A)((0,mT.A)({},e,{theme:j4((0,mT.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,kT.internal_processStyles)(e,e=>e.filter(e=>!(null!=e&&e.__mui_systemSx)));const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h=V4(U4(l))}=a,d=(0,gT.A)(a,O4),p=s&&s.startsWith("Mui")||l?"components":"custom",f=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,m=u||!1;let g=N4;"Root"===l||"root"===l?g=i:l?g=r:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(g=void 0);const v=(0,kT.default)(e,(0,mT.A)({shouldForwardProp:g,label:undefined},d)),y=e=>"function"===typeof e&&e.__emotion_real!==e||(0,VT.Q)(e)?i=>{const r=j4({theme:i.theme,defaultTheme:n,themeId:t});return H4(e,(0,mT.A)({},i,{theme:r}),r.modularCssLayers?p:void 0)}:e,A=function(i){let r=y(i);for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];const u=l?l.map(y):[];s&&h&&u.push(e=>{const i=j4((0,mT.A)({},e,{defaultTheme:n,themeId:t}));if(!i.components||!i.components[s]||!i.components[s].styleOverrides)return null;const r=i.components[s].styleOverrides,o={};return Object.entries(r).forEach(t=>{let[n,r]=t;o[n]=H4(r,(0,mT.A)({},e,{theme:i}),i.modularCssLayers?"theme":void 0)}),h(e,o)}),s&&!f&&u.push(e=>{var i;const r=j4((0,mT.A)({},e,{defaultTheme:n,themeId:t}));return H4({variants:null==r||null==(i=r.components)||null==(i=i[s])?void 0:i.variants},(0,mT.A)({},e,{theme:r}),r.modularCssLayers?"theme":void 0)}),m||u.push(o);const d=u.length-l.length;if(Array.isArray(i)&&d>0){const e=new Array(d).fill("");r=[...i,...e],r.raw=[...i.raw,...e]}const p=v(r,...u);return e.muiName&&(p.muiName=e.muiName),p};return v.withConfig&&(A.withConfig=v.withConfig),A}}(),Q4=G4,W4=["className","component","disableGutters","fixed","maxWidth","classes"],q4=(0,BT.A)(),X4=Q4("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,YI.A)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Y4=e=>B4({props:e,name:"MuiContainer",defaultTheme:q4});const K4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=X4,useThemeProps:n=Y4,componentName:r="MuiContainer"}=e,o=t(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})},e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce((e,n)=>{const i=n,r=t.breakpoints.values[i];return 0!==r&&(e[t.breakpoints.up(i)]={maxWidth:"".concat(r).concat(t.breakpoints.unit)}),e},{})},e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})}),a=i.forwardRef(function(e,t){const i=n(e),{className:a,component:s="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=i,h=(0,gT.A)(i,W4),d=(0,mT.A)({},i,{component:s,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:i,disableGutters:r,maxWidth:o}=e;return BI({root:["root",o&&"maxWidth".concat((0,YI.A)(String(o))),i&&"fixed",r&&"disableGutters"]},e=>wI(t,e),n)})(d,r);return(0,uT.jsx)(o,(0,mT.A)({as:s,ownerState:d,className:MT(p.root,a),ref:t},h))});return a}({createStyledComponent:HI("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(KI(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>XI({props:e,name:"MuiContainer"})}),J4=K4;function Z4(e){return wI("MuiAlert",e)}const $4=EI("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),e5=_L((0,uT.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),t5=_L((0,uT.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),n5=_L((0,uT.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),i5=_L((0,uT.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),r5=_L((0,uT.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),o5=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],a5=HI(UB,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(KI(n.color||n.severity))]]}})(e=>{let{theme:t}=e;const n="light"===t.palette.mode?QT.e$:QT.a,i="light"===t.palette.mode?QT.a:QT.e$;return(0,mT.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[r]=e;return{props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:n(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(r,"StandardBg")]:i(t.palette[r].light,.9),["& .".concat($4.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[i]=e;return{props:{colorSeverity:i,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(i,"Color")]:n(t.palette[i].light,.6),border:"1px solid ".concat((t.vars||t).palette[i].light),["& .".concat($4.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(i,"IconColor")]}:{color:t.palette[i].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.dark}).map(e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,mT.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(n,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(n,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}})]})}),s5=HI("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),l5=HI("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),c5=HI("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),u5={success:(0,uT.jsx)(e5,{fontSize:"inherit"}),warning:(0,uT.jsx)(t5,{fontSize:"inherit"}),error:(0,uT.jsx)(n5,{fontSize:"inherit"}),info:(0,uT.jsx)(i5,{fontSize:"inherit"})},h5=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiAlert"}),{action:i,children:r,className:o,closeText:a="Close",color:s,components:l={},componentsProps:c={},icon:u,iconMapping:h=u5,onClose:d,role:p="alert",severity:f="success",slotProps:m={},slots:g={},variant:v="standard"}=n,y=(0,gT.A)(n,o5),A=(0,mT.A)({},n,{color:s,severity:f,variant:v,colorSeverity:s||f}),b=(e=>{const{variant:t,color:n,severity:i,classes:r}=e;return BI({root:["root","color".concat(KI(n||i)),"".concat(t).concat(KI(n||i)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},Z4,r)})(A),x={slots:(0,mT.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,mT.A)({},c,m)},[_,w]=IL("closeButton",{elementType:gL,externalForwardedProps:x,ownerState:A}),[E,C]=IL("closeIcon",{elementType:r5,externalForwardedProps:x,ownerState:A});return(0,uT.jsxs)(a5,(0,mT.A)({role:p,elevation:0,ownerState:A,className:MT(b.root,o),ref:t},y,{children:[!1!==u?(0,uT.jsx)(s5,{ownerState:A,className:b.icon,children:u||h[f]||u5[f]}):null,(0,uT.jsx)(l5,{ownerState:A,className:b.message,children:r}),null!=i?(0,uT.jsx)(c5,{ownerState:A,className:b.action,children:i}):null,null==i&&d?(0,uT.jsx)(c5,{ownerState:A,className:b.action,children:(0,uT.jsx)(_,(0,mT.A)({size:"small","aria-label":a,title:a,color:"inherit",onClick:d},w,{children:(0,uT.jsx)(E,(0,mT.A)({fontSize:"small"},C))}))}):null]}))}),d5=h5;function p5(e){return wI("MuiAlertTitle",e)}EI("MuiAlertTitle",["root"]);const f5=["className"],m5=HI(zP,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}}),g5=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiAlertTitle"}),{className:i}=n,r=(0,gT.A)(n,f5),o=n,a=(e=>{const{classes:t}=e;return BI({root:["root"]},p5,t)})(o);return(0,uT.jsx)(m5,(0,mT.A)({gutterBottom:!0,component:"div",ownerState:o,ref:t,className:MT(a.root,i)},r))}),v5=g5,y5=()=>{const{dispatch:e}=Uae();return(0,uT.jsx)(J4,{sx:{py:5},children:(0,uT.jsxs)(d5,{severity:"error",variant:"outlined",children:[(0,uT.jsx)(v5,{children:"Forbidden Access"}),"Please login or register to access this page",(0,uT.jsx)(bN,{variant:"outlined",sx:{ml:2},startIcon:(0,uT.jsx)(xY,{}),onClick:()=>e({type:"OPEN_LOGIN"}),children:"login"})]})})},A5=e=>{let{children:t}=e;const{state:{currentUser:n}}=Uae();return n?t:(0,uT.jsx)(y5,{})},b5=()=>(0,uT.jsxs)("div",{children:[(0,uT.jsxs)("div",{className:"Pil-div",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)(I4,{name:"RamMandir",location:"Uttar Pradesh",src:"https://www.theasys.io/viewer/O3MOL9vh7VQARzmuCXRH9GTBmhz6k0"}),(0,uT.jsx)(M4,{r1c2:"2000",r1c4:"FREE",r2c2:"TEMPLE",r2c4:"YES",r3c2:"10am to 8pm",r3c4:"10.30am to 7pm",r4c2:"30 MINUTES",r4c4:"30Acre",r5c2:"5462 sq/f",r5c4:"1947",about:"Ram Mandir is a Hindu temple dedicated to Lord Ram located in Ayodhya, Uttar Pradesh, India. It holds immense significance in Hinduism as it is believed to be the birthplace of Lord Ram. The temple has a long history, with the original structure believed to have been constructed in ancient times. However, the current temple complex is the result of recent construction efforts, including the laying of the foundation stone in 2020.",facts:"The temple is designed in the Nagara style of architecture, with intricate carvings and sculptures depicting various scenes from the epic Ramayana. It is a symbol of faith and devotion for millions of Hindus worldwide. The construction of the temple has been a subject of controversy and debate, but its completion stands as a testament to the enduring legacy of Lord Ram and the cultural heritage of India.",Info:"After years of legal disputes and controversies, the construction of the Ram Mandir began in 2020 following a groundbreaking ceremony attended by various dignitaries. The temple complex is expected to be a sprawling structure, reflecting the grandeur of ancient Indian architecture. The completion of the Ram Mandir is seen as a significant moment in Indian history, symbolizing the fulfillment of a longstanding aspiration of millions of Hindus."}),(0,uT.jsx)(A5,{children:(0,uT.jsx)(L4,{})})]}),(0,uT.jsx)(HY,{})]}),x5=()=>(0,uT.jsxs)("div",{children:[(0,uT.jsxs)("div",{className:"Pil-div",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)(I4,{name:"Apsit",location:"Thane,Maharashtra",src:"https://www.theasys.io/viewer/6Dp2mClgLSfGV1DJD2Pmeb5qzoI7X9"}),(0,uT.jsx)(M4,{r1c2:"2001",r1c4:"FREE",r2c2:"College",r2c4:"YES",r3c2:"8am to 6pm",r3c4:"N/A",r4c2:"30 MINUTES",r4c4:"10Acre",r5c2:"5400 sq/f",r5c4:"2016",about:"A. P. Shah Institute of Technology is a private engineering college located in Kasarvadavali, in Thane, India. It was established in 2014 and is managed by the Parshvanath Charitable Trust. It is a Jain religious minority College (i.e., 51% of all seats are reserved for students from the Jain religious minority community) and is affiliated to the University of Mumbai (a public university, funded by the state government of Maharashtra).",facts:"It offers a Bachelor of Engineering (B.E.) degree in Civil engineering, Computer engineering, Electronics, and telecommunication engineering, Information Technology, and Mechanical engineering. All of these courses last for 4 years.Admissions to the seats not reserved for the Jain religious minority, for first-year undergraduate engineering programs, are carried out via the Centralized Admissions Process (CAP) of the State Government's Directorate of Technical Education (DTE).Entrance examinations are used: 85% of CAP seats are filled using the Composite Score followed by the Joint Entrance Examination score and HSC score (Maharashtra state students only). ",Info:"The five-story campus on Ghodbunder Road in Kasarvadavali Naka is owned by the Parshvanath Charitable Trust. Wi-Fi is available on campus and there is wide use of closed-circuit TV cameras for security. In addition to small shops and restaurants in the area, there is the Big Bazar Mall, McDonald's fast-food restaurant, and commercial buildings like that of G-Corp. The Sanjay Gandhi National Park (forest) is a short distance away and can be seen from the main road, as can portions of Vasai Creek."}),(0,uT.jsx)(A5,{children:(0,uT.jsx)(L4,{})})]}),(0,uT.jsx)(HY,{})]});var _5=n(4066),w5=n.t(_5,2),E5=n.n(_5);const C5=()=>{const{state:{location:{lng:e,lat:t}},dispatch:n}=Uae(),r=(0,i.useRef)(null),o=(0,i.useRef)(null),[a,s]=(0,i.useState)({center:[e,t],zoom:5,pitch:50}),[l,c]=(0,i.useState)("");(0,i.useEffect)(()=>{const i=new(E5().Map)(u({container:r.current,style:"https://tiles.basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json"},a));return o.current=new(E5().Marker)({draggable:!0}).setLngLat([e,t]).addTo(i),o.current.on("dragend",function(e){console.log("Marker drag ended");const{lng:t,lat:i}=e.target.getLngLat();console.log("Marker dragged to:",t,i),n({type:"Update_location",payload:{lng:t,lat:i}}),console.log("After dispatch - State:",t,i)}),i.addControl(new(E5().ScaleControl),"bottom-right"),i.addControl(new(E5().FullscreenControl),"bottom-right"),i.addControl(new(E5().NavigationControl),"bottom-right"),i.addControl(new(E5().GeolocateControl),"bottom-right"),i.on("geolocate",function(i){console.log("Geolocated coordinates:",e,t),n({type:"Update_location",payload:{lng:i.coords.longitute,lat:i.coords.latitude}})}),()=>{i.remove()}},[a]);const h=(0,cT.useHistory)();return(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)("div",{className:"Map-location",ref:r,children:(0,uT.jsx)(II,{sx:{height:650,position:"relative"},children:(0,uT.jsxs)("div",{className:"Search-container",style:{position:"absolute",top:10,left:10,zIndex:999},children:[(0,uT.jsx)(rN,{className:"Search-location",variant:"outlined",value:l,onChange:e=>c(e.target.value)}),(0,uT.jsx)(bN,{className:"Search-button",variant:"contained",onClick:()=>{fetch("https://nominatim.openstreetmap.org/search?q=".concat(l,"&format=json")).then(e=>e.json()).then(i=>{if(i&&i.length>0){const r=i[0];n({type:"Update_location",payload:{lng:parseFloat(r.lon),lat:parseFloat(r.lat)}}),console.log("after search updated locations : ",e,t),s({center:[parseFloat(r.lon),parseFloat(r.lat)],zoom:10,pitch:50})}}).catch(e=>{console.error("Error searching location:",e)})},style:{marginLeft:10},children:"Search"})]})})}),(0,uT.jsx)(bN,{className:"Search-button",variant:"contained",onClick:()=>{h.push("/addlocation")},style:{marginLeft:875,height:40},children:"ADD PILGRIM LOCATION"}),(0,uT.jsx)(HY,{})]})};function S5(e){return wI("MuiBottomNavigation",e)}EI("MuiBottomNavigation",["root"]);const T5=["children","className","component","onChange","showLabels","value"],I5=HI("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}}),M5=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiBottomNavigation"}),{children:r,className:o,component:a="div",onChange:s,showLabels:l=!1,value:c}=n,u=(0,gT.A)(n,T5),h=(0,mT.A)({},n,{component:a,showLabels:l}),d=(e=>{const{classes:t}=e;return BI({root:["root"]},S5,t)})(h);return(0,uT.jsx)(I5,(0,mT.A)({as:a,className:MT(d.root,o),ref:t,ownerState:h},u,{children:i.Children.map(r,(e,t)=>{if(!i.isValidElement(e))return null;const n=void 0===e.props.value?t:e.props.value;return i.cloneElement(e,{selected:n===c,showLabel:void 0!==e.props.showLabel?e.props.showLabel:l,value:n,onChange:s})})}))}),k5=M5;function R5(e){return wI("MuiBottomNavigationAction",e)}const L5=EI("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),B5=["className","icon","label","onChange","onClick","selected","showLabel","value"],P5=HI(uL,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{["&.".concat(L5.selected)]:{color:(t.vars||t).palette.primary.main}})}),D5=HI("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{["&.".concat(L5.selected)]:{fontSize:t.typography.pxToRem(14)}})}),O5=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiBottomNavigationAction"}),{className:i,icon:r,label:o,onChange:a,onClick:s,value:l}=n,c=(0,gT.A)(n,B5),u=n,h=(e=>{const{classes:t,showLabel:n,selected:i}=e;return BI({root:["root",!n&&!i&&"iconOnly",i&&"selected"],label:["label",!n&&!i&&"iconOnly",i&&"selected"]},R5,t)})(u);return(0,uT.jsxs)(P5,(0,mT.A)({ref:t,className:MT(h.root,i),focusRipple:!0,onClick:e=>{a&&a(e,l),s&&s(e)},ownerState:u},c,{children:[r,(0,uT.jsx)(D5,{className:h.label,ownerState:u,children:o})]}))}),N5=O5,F5=_L((0,uT.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),z5=_L((0,uT.jsx)("path",{d:"M6.6 11h10.8l-.9-3h-9zM20 11v2H4v-2H2v11h8v-5h4v5h8V11zm-4.1-5L15 3V1h-2v2h-2.03V1h-2v2.12L8.1 6z"}),"TempleHindu"),U5=_L((0,uT.jsx)("path",{d:"M20 1v3h3v2h-3v3h-2V6h-3V4h3V1zm-8 12c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m2-9.75V7h3v3h2.92c.05.39.08.79.08 1.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 6.22 7.8 3 12 3c.68 0 1.35.08 2 .25"}),"AddLocationAlt"),j5="http://localhost:4000/pilgrim",V5=i.createContext(null);function H5(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!H5(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const r of n){if(!t.hasOwnProperty(r))return!1;if(!H5(e[r],t[r]))return!1}return!0}return!1}function G5(e,t){if(!e.getProjection)return;const n=e.getProjection();H5(n,t.getProjection())||t.setProjection(n)}function Q5(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function W5(e,t){const n=t.viewState||t;let i=!1;if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,i=i||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,i=i||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,i=i||t!==e.pitch}if(n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),"longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),i=i||t!==e.center}return i}const q5=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function X5(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const i of e.layers)t[i.id]=i;const n=e.layers.map(e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);const i=t[e.ref];if(i){n=n||Object.assign({},e),delete n.ref;for(const e of q5)e in i&&(n[e]=i[e])}return n||e});return u(u({},e),{},{layers:n})}const Y5={version:8,sources:{},layers:[]},K5={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},J5={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Z5={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},$5=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],e6=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class t6{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[Z5[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[K5[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[J5[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const i=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||i||r&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=t6.savedMaps.pop();if(!n)return null;const i=n.map,r=i.getContainer();for(t.className=r.className;r.childNodes.length>0;)t.appendChild(r.childNodes[0]);i._container=t;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(t)),n.setProps(u(u({},e),{},{styleDiffing:!1})),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,u(u({},a.fitBoundsOptions),{},{duration:0})):n._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),n}_initialize(e){const{props:t}=this,{mapStyle:n=Y5}=t,i=u(u(u({},t),t.initialViewState),{},{accessToken:t.mapboxAccessToken||n6()||null,container:e,style:X5(n)}),r=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const o=new this._MapClass(i);r.padding&&o.setPadding(r.padding),t.cursor&&(o.getCanvas().style.cursor=t.cursor),this._createShadowTransform(o);const a=o._render;o._render=e=>{this._inRender=!0,a.call(o,e),this._inRender=!1};const s=o._renderTaskQueue.run;o._renderTaskQueue.run=e=>{s.call(o._renderTaskQueue,e),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const l=o.fire;o.fire=this._fireEvent.bind(this,l),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),G5(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const c in K5)o.on(c,this._onPointerEvent);for(const c in J5)o.on(c,this._onCameraEvent);for(const c in Z5)o.on(c,this._onEvent);this._map=o}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),t6.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:r,pitch:o,bearing:a}=i,s=n.isMoving();s&&(i.cameraElevationReference="sea");const l=W5(i,u(u({},Q5(n.transform)),e));if(s&&(i.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=r!==i.zoom),e.rotate||(e.rotate=a!==i.bearing),e.pitch||(e.pitch=o!==i.pitch)}return s||W5(n.transform,e),l}_updateSettings(e,t){const n=this._map;let i=!1;for(const r of $5)if(r in e&&!H5(e[r],t[r])){i=!0;const t=n["set".concat(r[0].toUpperCase()).concat(r.slice(1))];null===t||void 0===t||t.call(n,e[r])}return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=Y5,styleDiffing:n=!0}=e,i={diff:n};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(X5(t),i),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!H5(e.light,t.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!H5(e.fog,t.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!H5(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(i=!0,n.setTerrain(e.terrain)))),i}_updateHandlers(e,t){var n,i;const r=this._map;let o=!1;for(const a of e6){const s=null===(n=e[a])||void 0===n||n;H5(s,null===(i=t[a])||void 0===i||i)||(o=!0,s?r[a].enable(s):r[a].disable())}return o}_queryRenderedFeatures(e){const t=this._map,n=t.transform,{interactiveLayerIds:i=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:i.filter(t.getLayer.bind(t))})}catch(aE){return[]}finally{t.transform=n}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,r=this._queryRenderedFeatures(e.point),o=r.length>0;!o&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=r,o&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const i=this._map,r=i.transform,o="string"===typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in J5&&("object"===typeof t&&(t.viewState=Q5(r)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,n),i.transform=r,i):(e.call(i,t,n),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{G5(this._renderTransform,t),e.transform=t}}}function n6(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(aE){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(t){}return e}t6.savedMaps=[];const i6=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function r6(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const i=t.transform;t.transform=e.transform;const r=t.project(n);return t.transform=i,r},unproject:n=>{const i=t.transform;t.transform=e.transform;const r=t.unproject(n);return t.transform=i,r},queryTerrainElevation:(n,i)=>{const r=t.transform;t.transform=e.transform;const o=t.queryTerrainElevation(n,i);return t.transform=r,o},queryRenderedFeatures:(n,i)=>{const r=t.transform;t.transform=e.transform;const o=t.queryRenderedFeatures(n,i);return t.transform=r,o}};for(const i of function(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))"_"!==i[0]&&"function"===typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}(t))i in n||i6.includes(i)||(n[i]=t[i].bind(t));return n}const o6="undefined"!==typeof document?i.useLayoutEffect:i.useEffect,a6=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const s6=i.createContext(null);function l6(e,t,n){const r=(0,i.useContext)(V5),[o,a]=(0,i.useState)(null),s=(0,i.useRef)(),{current:l}=(0,i.useRef)({mapLib:null,map:null});(0,i.useEffect)(()=>{const t=e.mapLib;let i,o=!0;return Promise.resolve(t||n).then(t=>{if(!o)return;if(!t)throw new Error("Invalid mapLib");const n="Map"in t?t:t.default;if(!n.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const i of a6)i in t&&(e[i]=t[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,e=>{e&&console.error(e)},!0)}(n,e),n.supported&&!n.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(i=t6.reuse(e,s.current)),i||(i=new t6(n.Map,e,s.current)),l.map=r6(i),l.mapLib=n,a(i),null===r||void 0===r||r.onMapMount(l.map,e.id)}).catch(t=>{const{onError:n}=e;n?n({type:"error",target:null,originalEvent:null,error:t}):console.error(t)}),()=>{o=!1,i&&(null===r||void 0===r||r.onMapUnmount(e.id),e.reuseMaps?i.recycle():i.destroy())}},[]),o6(()=>{o&&o.setProps(e)}),(0,i.useImperativeHandle)(t,()=>l.map,[o]);const c=(0,i.useMemo)(()=>u({position:"relative",width:"100%",height:"100%"},e.style),[e.style]);return i.createElement("div",{id:e.id,ref:s,style:c},o&&i.createElement(s6.Provider,{value:l},i.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}const c6=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function u6(e,t){if(!e||!t)return;const n=e.style;for(const i in t){const e=t[i];Number.isFinite(e)&&!c6.test(i)?n[i]="".concat(e,"px"):n[i]=e}}const h6=(0,i.memo)((0,i.forwardRef)(function(e,t){const{map:n,mapLib:r}=(0,i.useContext)(s6),o=(0,i.useRef)({props:e});o.current.props=e;const a=(0,i.useMemo)(()=>{let t=!1;i.Children.forEach(e.children,e=>{e&&(t=!0)});const n=u(u({},e),{},{element:t?document.createElement("div"):null}),s=new r.Marker(n);return s.setLngLat([e.longitude,e.latitude]),s.getElement().addEventListener("click",e=>{var t,n;null===(n=(t=o.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})}),s.on("dragstart",e=>{var t,n;const i=e;i.lngLat=a.getLngLat(),null===(n=(t=o.current.props).onDragStart)||void 0===n||n.call(t,i)}),s.on("drag",e=>{var t,n;const i=e;i.lngLat=a.getLngLat(),null===(n=(t=o.current.props).onDrag)||void 0===n||n.call(t,i)}),s.on("dragend",e=>{var t,n;const i=e;i.lngLat=a.getLngLat(),null===(n=(t=o.current.props).onDragEnd)||void 0===n||n.call(t,i)}),s},[]);(0,i.useEffect)(()=>(a.addTo(n.getMap()),()=>{a.remove()}),[]);const{longitude:s,latitude:l,offset:c,style:h,draggable:d=!1,popup:p=null,rotation:f=0,rotationAlignment:m="auto",pitchAlignment:g="auto"}=e;return(0,i.useEffect)(()=>{u6(a.getElement(),h)},[h]),(0,i.useImperativeHandle)(t,()=>a,[]),a.getLngLat().lng===s&&a.getLngLat().lat===l||a.setLngLat([s,l]),c&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===r&&i===o}(a.getOffset(),c)&&a.setOffset(c),a.isDraggable()!==d&&a.setDraggable(d),a.getRotation()!==f&&a.setRotation(f),a.getRotationAlignment()!==m&&a.setRotationAlignment(m),a.getPitchAlignment()!==g&&a.setPitchAlignment(g),a.getPopup()!==p&&a.setPopup(p),(0,JI.createPortal)(e.children,a.getElement())}));function d6(e){return new Set(e?e.trim().split(/\s+/):[])}const p6=(0,i.memo)((0,i.forwardRef)(function(e,t){const{map:n,mapLib:r}=(0,i.useContext)(s6),o=(0,i.useMemo)(()=>document.createElement("div"),[]),a=(0,i.useRef)({props:e});a.current.props=e;const s=(0,i.useMemo)(()=>{const t=u({},e),n=new r.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once("open",e=>{var t,n;null===(n=(t=a.current.props).onOpen)||void 0===n||n.call(t,e)}),n},[]);if((0,i.useEffect)(()=>{const e=e=>{var t,n;null===(n=(t=a.current.props).onClose)||void 0===n||n.call(t,e)};return s.on("close",e),s.setDOMContent(o).addTo(n.getMap()),()=>{s.off("close",e),s.isOpen()&&s.remove()}},[]),(0,i.useEffect)(()=>{u6(s.getElement(),e.style)},[e.style]),(0,i.useImperativeHandle)(t,()=>s,[]),s.isOpen()&&(s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!H5(s.options.offset,e.offset)&&s.setOffset(e.offset),s.options.anchor===e.anchor&&s.options.maxWidth===e.maxWidth||(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth)),s.options.className!==e.className)){const t=d6(s.options.className),n=d6(e.className);for(const e of t)n.has(e)||s.removeClassName(e);for(const e of n)t.has(e)||s.addClassName(e);s.options.className=e.className}return(0,JI.createPortal)(e.children,o)}));const f6=function(e,t,n,r){const o=(0,i.useContext)(s6),a=(0,i.useMemo)(()=>e(o),[]);return(0,i.useEffect)(()=>{const e=r||n||t,i="function"===typeof t&&"function"===typeof n?t:null,s="function"===typeof n?n:"function"===typeof t?t:null,{map:l}=o;return l.hasControl(a)||(l.addControl(a,null===e||void 0===e?void 0:e.position),i&&i(o)),()=>{s&&s(o),l.hasControl(a)&&l.removeControl(a)}},[]),a};(0,i.memo)(function(e){const t=f6(t=>{let{mapLib:n}=t;return new n.AttributionControl(e)},{position:e.position});return(0,i.useEffect)(()=>{u6(t._container,e.style)},[e.style]),null});const m6=(0,i.memo)(function(e){const t=f6(t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})},{position:e.position});return(0,i.useEffect)(()=>{u6(t._controlContainer,e.style)},[e.style]),null});const g6=(0,i.memo)((0,i.forwardRef)(function(e,t){const n=(0,i.useRef)({props:e}),r=f6(t=>{let{mapLib:i}=t;const r=new i.GeolocateControl(e),o=r._setupUI;return r._setupUI=e=>{r._container.hasChildNodes()||o(e)},r.on("geolocate",e=>{var t,i;null===(i=(t=n.current.props).onGeolocate)||void 0===i||i.call(t,e)}),r.on("error",e=>{var t,i;null===(i=(t=n.current.props).onError)||void 0===i||i.call(t,e)}),r.on("outofmaxbounds",e=>{var t,i;null===(i=(t=n.current.props).onOutOfMaxBounds)||void 0===i||i.call(t,e)}),r.on("trackuserlocationstart",e=>{var t,i;null===(i=(t=n.current.props).onTrackUserLocationStart)||void 0===i||i.call(t,e)}),r.on("trackuserlocationend",e=>{var t,i;null===(i=(t=n.current.props).onTrackUserLocationEnd)||void 0===i||i.call(t,e)}),r},{position:e.position});return n.current.props=e,(0,i.useImperativeHandle)(t,()=>r,[]),(0,i.useEffect)(()=>{u6(r._container,e.style)},[e.style]),null}));const v6=(0,i.memo)(function(e){const t=f6(t=>{let{mapLib:n}=t;return new n.NavigationControl(e)},{position:e.position});return(0,i.useEffect)(()=>{u6(t._container,e.style)},[e.style]),null});const y6=(0,i.memo)(function(e){const t=f6(t=>{let{mapLib:n}=t;return new n.ScaleControl(e)},{position:e.position}),n=(0,i.useRef)(e),r=n.current;n.current=e;const{style:o}=e;return void 0!==e.maxWidth&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==r.unit&&t.setUnit(e.unit),(0,i.useEffect)(()=>{u6(t._container,o)},[o]),null});const A6=n.e(879).then(n.t.bind(n,879,23)),b6=i.forwardRef(function(e,t){return l6(e,t,A6)}),x6=h6,_6=p6,w6=m6,E6=v6,C6=g6,S6=y6,T6=b6,I6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class M6{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error("Got v".concat(i," data when expected v").concat(1,"."));const r=I6[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new M6(a,o,r,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=I6.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return k6(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:a}=this,s=[0,r.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=n&&c>=t&&c<=i&&l.push(r[a])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=i&&l.push(r[d]),(0===c?e<=p:t<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?n>=p:i>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,a=[0,i.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)P6(r[2*n],r[2*n+1],e,t)<=l&&s.push(i[n]);continue}const d=h+u>>1,p=r[2*d],f=r[2*d+1];P6(p,f,e,t)<=l&&s.push(i[d]),(0===c?e-n<=p:t-n<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function k6(e,t,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;R6(e,t,a,i,r,o),k6(e,t,n,i,a-1,1-o),k6(e,t,n,a+1,r,1-o)}function R6(e,t,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);R6(e,t,n,Math.max(i,Math.floor(n-s*c/a+u)),Math.min(r,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=i,l=r;for(L6(e,t,i,n),t[2*r+o]>a&&L6(e,t,i,r);s<l;){for(L6(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*i+o]===a?L6(e,t,i,l):(l++,L6(e,t,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function L6(e,t,n,i){B6(e,n,i),B6(t,2*n,2*i),B6(t,2*n+1,2*i+1)}function B6(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function P6(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}const D6={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},O6=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));function N6(e,t,n){return{type:"Feature",id:e[t+3],properties:F6(e,t,n),geometry:{type:"Point",coordinates:[j6(e[t]),V6(e[t+1])]}}}function F6(e,t,n){const i=e[t+5],r=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?"".concat(Math.round(i/100)/10,"k"):i,o=e[t+6],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+3],point_count:i,point_count_abbreviated:r})}function z6(e){return e/360+.5}function U6(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function j6(e){return 360*(e-.5)}function V6(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}const H6=["marker","showResultMarkers","flyTo","fullGeometryStyle"],G6=["marker","showResultMarkers","flyTo","fullGeometryStyle"];var Q6=Object.defineProperty,W6=e=>{throw TypeError(e)},q6=(e,t,n)=>((e,t,n)=>t in e?Q6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),X6=(e,t,n)=>t.has(e)||W6("Cannot "+n),Y6=(e,t,n)=>(X6(e,t,"read from private field"),n?n.call(e):t.get(e)),K6=(e,t,n)=>t.has(e)?W6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),J6=(e,t,n,i)=>(X6(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);function Z6(){}function $6(e){return e()}function e8(){return Object.create(null)}function t8(e){e.forEach($6)}function n8(e){return"function"==typeof e}function i8(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r8,o8;function a8(e,t){return e===t||(r8||(r8=document.createElement("a")),r8.href=t,e===r8.href)}function s8(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function l8(e){return null!==e&&void 0!==e?e:""}function c8(e,t){e.appendChild(t)}function u8(e,t,n){e.insertBefore(t,n||null)}function h8(e){e.parentNode&&e.parentNode.removeChild(e)}function d8(e){return document.createElement(e)}function p8(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function f8(e){return document.createTextNode(e)}function m8(){return f8(" ")}function g8(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function v8(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y8(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function A8(e,t){t=""+t,e.data!==t&&(e.data=t)}function b8(e,t){e.value=null!==t&&void 0!==t?t:""}function x8(e,t,n){e.classList.toggle(t,!!n)}function _8(e){o8=e}function w8(){if(!o8)throw new Error("Function called outside component initialization");return o8}function E8(){const e=w8();return function(t,n){let{cancelable:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.$$.callbacks[t];if(r){const o=function(e,t){let{bubbles:n=!1,cancelable:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}(t,n,{cancelable:i});return r.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}function C8(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e.call(this,t))}const S8=[],T8=[];let I8=[];const M8=[],k8=Promise.resolve();let R8=!1;function L8(e){I8.push(e)}const B8=new Set;let P8=0;function D8(){if(0!==P8)return;const e=o8;do{try{for(;P8<S8.length;){const e=S8[P8];P8++,_8(e),O8(e.$$)}}catch(QJ){throw S8.length=0,P8=0,QJ}for(_8(null),S8.length=0,P8=0;T8.length;)T8.pop()();for(let e=0;e<I8.length;e+=1){const t=I8[e];B8.has(t)||(B8.add(t),t())}I8.length=0}while(S8.length);for(;M8.length;)M8.pop()();R8=!1,B8.clear(),_8(e)}function O8(e){if(null!==e.fragment){e.update(),t8(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L8)}}const N8=new Set;let F8;function z8(){F8={r:0,c:[],p:F8}}function U8(){F8.r||t8(F8.c),F8=F8.p}function j8(e,t){e&&e.i&&(N8.delete(e),e.i(t))}function V8(e,t,n,i){if(e&&e.o){if(N8.has(e))return;N8.add(e),F8.c.push(()=>{N8.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function H8(e){return void 0!==(null==e?void 0:e.length)?e:Array.from(e)}function G8(e,t){V8(e,1,1,()=>{t.delete(e.key)})}function Q8(e){e&&e.c()}function W8(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),L8(()=>{const t=e.$$.on_mount.map($6).filter(n8);e.$$.on_destroy?e.$$.on_destroy.push(...t):t8(t),e.$$.on_mount=[]}),r.forEach(L8)}function q8(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];I8.forEach(i=>-1===e.indexOf(i)?t.push(i):n.push(i)),n.forEach(e=>e()),I8=t}(n.after_update),t8(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function X8(e,t){-1===e.$$.dirty[0]&&(S8.push(e),R8||(R8=!0,k8.then(D8)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y8(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const l=o8;_8(e);const c=e.$$={fragment:null,ctx:[],props:o,update:Z6,not_equal:r,bound:e8(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:e8(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},function(t,n){const i=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),u&&X8(e,t)),n}):[],c.update(),u=!0,t8(c.before_update),c.fragment=!!i&&i(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(h8)}else c.fragment&&c.fragment.c();t.intro&&j8(e.$$.fragment),W8(e,t.target,t.anchor),D8()}_8(l)}class K8{constructor(){q6(this,"$$"),q6(this,"$$set")}$destroy(){q8(this,1),this.$destroy=Z6}$on(e,t){if(!n8(t))return Z6;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!function(e){return 0===Object.keys(e).length}(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function J8(e){let t,n;return{c(){t=p8("svg"),n=p8("path"),y8(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),y8(t,"viewBox","0 0 14 14"),y8(t,"width","13"),y8(t,"height","13"),y8(t,"class","svelte-en2qvf")},m(e,i){u8(e,t,i),c8(t,n)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class Z8 extends K8{constructor(e){super(),Y8(this,e,null,J8,i8,{})}}function $8(e){let t,n;return{c(){t=p8("svg"),n=p8("path"),y8(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),y8(t,"viewBox","0 0 30 30"),y8(t,"fill","none"),y8(t,"xmlns","http://www.w3.org/2000/svg"),y8(t,"class","svelte-d2loi5")},m(e,i){u8(e,t,i),c8(t,n)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}class e9 extends K8{constructor(e){super(),Y8(this,e,null,$8,i8,{})}}function t9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"area.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"area.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function n9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"reverse.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"reverse.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function i9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"poi.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"poi.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function r9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"postal_code.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"postal_code.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function o9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"street.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"street.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function a9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"road.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"road.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function s9(e){let t,n;return{c(){t=d8("img"),a8(t.src,n=e[3]+"housenumber.svg")||y8(t,"src",n),y8(t,"alt",e[6]),y8(t,"class","svelte-ltkwvy")},m(e,n){u8(e,t,n)},p(e,i){8&i&&!a8(t.src,n=e[3]+"housenumber.svg")&&y8(t,"src",n),64&i&&y8(t,"alt",e[6])},d(e){e&&h8(t)}}}function l9(e){let t,n,i,r;return{c(){t=d8("img"),a8(t.src,n=e[5])||y8(t,"src",n),y8(t,"alt",e[4]),y8(t,"class","svelte-ltkwvy")},m(n,o){u8(n,t,o),i||(r=g8(t,"error",e[14]),i=!0)},p(e,i){32&i&&!a8(t.src,n=e[5])&&y8(t,"src",n),16&i&&y8(t,"alt",e[4])},d(e){e&&h8(t),i=!1,r()}}}function c9(e){let t,n;return{c(){t=d8("span"),n=f8(e[6]),y8(t,"class","secondary svelte-ltkwvy")},m(e,i){u8(e,t,i),c8(t,n)},p(e,t){64&t&&A8(n,e[6])},d(e){e&&h8(t)}}}function u9(e){let t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",y="always"===e[2]||e[2]&&!e[0].address&&!e[0].id.startsWith("road.")&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],A=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"";function b(e,t){return 1&t&&(n=null),1&t&&(i=null),1&t&&(r=null),1&t&&(o=null),e[5]?l9:e[0].address?s9:(null==n&&(n=!!e[0].id.startsWith("road.")),n?a9:(null==i&&(i=!!e[0].id.startsWith("address.")),i?o9:(null==r&&(r=!!e[0].id.startsWith("postal_code.")),r?r9:(null==o&&(o=!!e[0].id.startsWith("poi.")),o?i9:e[7]?n9:t9))))}let x=b(e,-1),_=x(e),w=y&&c9(e);return{c(){t=d8("li"),_.c(),a=m8(),s=d8("span"),l=d8("span"),c=d8("span"),u=f8(v),h=m8(),w&&w.c(),d=m8(),p=d8("span"),f=f8(A),y8(c,"class","primary svelte-ltkwvy"),y8(l,"class","svelte-ltkwvy"),y8(p,"class","line2 svelte-ltkwvy"),y8(s,"class","texts svelte-ltkwvy"),y8(t,"tabindex","0"),y8(t,"data-selected",e[1]),y8(t,"class","svelte-ltkwvy"),x8(t,"selected",e[1])},m(n,i){u8(n,t,i),_.m(t,null),c8(t,a),c8(t,s),c8(s,l),c8(l,c),c8(c,u),c8(l,h),w&&w.m(l,null),c8(s,d),c8(s,p),c8(p,f),m||(g=[g8(t,"mouseenter",e[12]),g8(t,"focus",e[13])],m=!0)},p(e,n){let[i]=n;x===(x=b(e,i))&&_?_.p(e,i):(_.d(1),_=x(e),_&&(_.c(),_.m(t,a))),1&i&&v!==(v=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"")&&A8(u,v),37&i&&(y="always"===e[2]||e[2]&&!e[0].address&&!e[0].id.startsWith("road.")&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7]),y?w?w.p(e,i):(w=c9(e),w.c(),w.m(l,null)):w&&(w.d(1),w=null),1&i&&A!==(A=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&A8(f,A),2&i&&y8(t,"data-selected",e[1]),2&i&&x8(t,"selected",e[1])},i:Z6,o:Z6,d(e){e&&h8(t),_.d(),w&&w.d(),m=!1,t8(g)}}}function h9(e,t,n){var i,r;let o,a,{feature:s}=t,{selected:l=!1}=t,{showPlaceType:c}=t,{missingIconsCache:u}=t,{iconsBaseUrl:h}=t;const d=null==(r=s.properties)?void 0:r.categories;let p,f,m=0,g="reverse"===s.place_type[0];function v(){f&&u.add(f),n(10,m++,m)}return e.$$set=e=>{"feature"in e&&n(0,s=e.feature),"selected"in e&&n(1,l=e.selected),"showPlaceType"in e&&n(2,c=e.showPlaceType),"missingIconsCache"in e&&n(9,u=e.missingIconsCache),"iconsBaseUrl"in e&&n(3,h=e.iconsBaseUrl)},e.$$.update=()=>{var t,i,r,l,c,m;if(3640&e.$$.dirty)do{n(11,o--,o),n(4,p=null==d?void 0:d[o]),n(5,f=p?h+p.replace(/ /g,"_")+".svg":void 0)}while(o>-1&&(!f||u.has(f)));1&e.$$.dirty&&n(6,a=null!==(t=null!==(i=null==(l=null==(r=s.properties)?void 0:r.categories)?void 0:l.join(", "))&&void 0!==i?i:null==(m=null==(c=s.properties)?void 0:c.place_type_name)?void 0:m[0])&&void 0!==t?t:s.place_type[0])},n(11,o=null!==(i=null==d?void 0:d.length)&&void 0!==i?i:0),[s,l,c,h,p,f,a,g,v,u,m,o,function(t){C8.call(this,e,t)},function(t){C8.call(this,e,t)},()=>v()]}class d9 extends K8{constructor(e){super(),Y8(this,e,h9,u9,i8,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function p9(e){let t;return{c(){t=d8("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',y8(t,"class","svelte-7cmwmc")},m(e,n){u8(e,t,n)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}class f9 extends K8{constructor(e){super(),Y8(this,e,null,p9,i8,{})}}function m9(e){let t,n,i;return{c(){t=p8("svg"),n=p8("path"),y8(n,"stroke-width","4"),y8(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),y8(n,"class","svelte-gzo3ar"),y8(t,"width",i="list"===e[0]?20:void 0),y8(t,"viewBox","0 0 70 85"),y8(t,"fill","none"),y8(t,"class","svelte-gzo3ar"),x8(t,"in-map","list"!==e[0]),x8(t,"list-icon","list"===e[0])},m(e,i){u8(e,t,i),c8(t,n)},p(e,n){let[r]=n;1&r&&i!==(i="list"===e[0]?20:void 0)&&y8(t,"width",i),1&r&&x8(t,"in-map","list"!==e[0]),1&r&&x8(t,"list-icon","list"===e[0])},i:Z6,o:Z6,d(e){e&&h8(t)}}}function g9(e,t,n){let{displayIn:i}=t;return e.$$set=e=>{"displayIn"in e&&n(0,i=e.displayIn)},[i]}class v9 extends K8{constructor(e){super(),Y8(this,e,g9,m9,i8,{displayIn:0})}}function y9(e){let t,n;return{c(){t=p8("svg"),n=p8("path"),y8(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),y8(t,"viewBox","0 0 60.006 21.412"),y8(t,"width","14"),y8(t,"height","20"),y8(t,"class","svelte-en2qvf")},m(e,i){u8(e,t,i),c8(t,n)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}class A9 extends K8{constructor(e){super(),Y8(this,e,null,y9,i8,{})}}function b9(e){let t,n,i;return{c(){t=p8("svg"),n=p8("circle"),i=p8("path"),y8(n,"cx","4.789"),y8(n,"cy","4.787"),y8(n,"r","3.85"),y8(n,"class","svelte-1aq105l"),y8(i,"d","M12.063 12.063 7.635 7.635"),y8(i,"class","svelte-1aq105l"),y8(t,"xmlns","http://www.w3.org/2000/svg"),y8(t,"width","13"),y8(t,"height","13"),y8(t,"viewBox","0 0 13 13"),y8(t,"class","svelte-1aq105l")},m(e,r){u8(e,t,r),c8(t,n),c8(t,i)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}class x9 extends K8{constructor(e){super(),Y8(this,e,null,b9,i8,{})}}function _9(e){const t=[...e];return t[2]<t[0]&&(Math.abs((t[0]+t[2]+360)/2)>Math.abs((t[0]-360+t[2])/2)?t[0]-=360:t[2]+=360),t}let w9;const E9=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,C9=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,S9=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([\u2022\xba\xb0]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([\u2022\xba\xb0]?)[\s]*(EAST|WEST|[EW])?$/i,T9=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,I9=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,M9=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|\u2032\u2032|\u2019\u2019|\xb4\xb4|["\u2033\u201d\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|\u2032\u2032|\xb4\xb4|\u2019\u2019|["\u2033\u201d\.])?\s*(EAST|WEST|[EW])?$/i;function k9(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(e=>Number(e.trim())),n=Number(t[0]),i=Number(t[1]),r=Math.abs(n),o=Math.abs(i),a=n>0?"N":"S",s=i>0?"E":"W";let l;"DD"==e&&(l="".concat(r,"\xb0 ").concat(a,", ").concat(o,"\xb0 ").concat(s));const c=Math.floor(r),u=Math.floor(o),h=60*(r-c),d=60*(o-u);if("DM"==e){let e=R9(h,3).toFixed(3).padStart(6,"0"),t=R9(d,3).toFixed(3).padStart(6,"0");e.endsWith(".000")&&t.endsWith(".000")&&(e=e.replace(/\.000$/,""),t=t.replace(/\.000$/,"")),l="".concat(c,"\xb0 ").concat(e,"' ").concat(a,", ").concat(u,"\xb0 ").concat(t,"' ").concat(s)}if("DMS"==e){const e=Math.floor(h),t=Math.floor(d);let n=(60*(h-e)).toFixed(1).padStart(4,"0"),i=(60*(d-t)).toFixed(1).padStart(4,"0");const r=e.toString().padStart(2,"0"),o=t.toString().padStart(2,"0");n.endsWith(".0")&&i.endsWith(".0")&&(n=n.replace(/\.0$/,""),i=i.replace(/\.0$/,"")),l="".concat(c,"\xb0 ").concat(r,"' ").concat(n,'" ').concat(a,", ").concat(u,"\xb0 ").concat(o,"' ").concat(i,'" ').concat(s)}return l}throw new Error("no decimal coordinates to convert")}function R9(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function L9(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,i=null,r="",o="",a=null,s=[],l=!1;if(E9.test(e))throw new Error("invalid coordinate value");if(C9.test(e)){if(s=C9.exec(e),l=B9(s),!l)throw new Error("invalid coordinate format");n=Math.abs(s[1])+s[2]/60,Number(s[1])<0&&(n*=-1),i=Math.abs(s[3])+s[4]/60,Number(s[3])<0&&(i*=-1),a="DM"}else if(S9.test(e)){if(s=S9.exec(e),l=B9(s),!l)throw new Error("invalid decimal coordinate format");if(n=s[2],i=s[6],n.includes(",")&&(n=n.replace(",",".")),i.includes(",")&&(i=i.replace(",",".")),a="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(i))==Number(i))throw new Error("integer only coordinate provided");s[1]?(r=s[1],o=s[5]):s[4]&&(r=s[4],o=s[8])}else if(T9.test(e)){if(s=T9.exec(e),l=B9(s),!l)throw new Error("invalid DMS coordinates format");n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4]/60,a="DM"),s[6]&&(n+=s[6].replace(",",".")/3600,a="DMS"),parseInt(s[2])<0&&(n*=-1),i=Math.abs(parseInt(s[9])),s[11]&&(i+=s[11]/60),s[13]&&(i+=s[13].replace(",",".")/3600),parseInt(s[9])<0&&(i*=-1),s[1]?(r=s[1],o=s[8]):s[7]&&(r=s[7],o=s[14])}else if(I9.test(e)){if(s=I9.exec(e),l=B9(s),!l)throw new Error("invalid DMS coordinates format");n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4]/60,a="DM"),s[6]&&(n+=s[6]/3600,a="DMS"),parseInt(s[2])<0&&(n*=-1),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12]/60),s[14]&&(i+=s[14]/3600),parseInt(s[10])<0&&(i*=-1),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16])}else if(M9.test(e)){if(s=M9.exec(e),l=B9(s),s.filter(e=>e).length<=5)throw new Error("invalid coordinates format");if(!l)throw new Error("invalid coordinates format");n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4].replace(",",".")/60,a="DM"),s[6]&&(n+=s[6].replace(",",".")/3600,a="DMS"),parseInt(s[2])<0&&(n*=-1),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12].replace(",",".")/60),s[14]&&(i+=s[14].replace(",",".")/3600),parseInt(s[10])<0&&(i*=-1),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16])}if(l){if(Math.abs(i)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(r&&!o||!r&&o)throw new Error("invalid coordinates value");if(r&&r==o)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),i.toString().includes(",")&&(i=i.replace(",","."));let l=/S|SOUTH/i;l.test(r)&&n>0&&(n*=-1),l=/W|WEST/i,l.test(o)&&i>0&&(i*=-1);const c=s[0].trim();let u,h;const d=/[,/;\u0020]/g,p=c.match(d);if(null==p){const t=Math.floor(e.length/2);u=c.substring(0,t).trim(),h=c.substring(t).trim()}else{let e;e=p.length%2==1?Math.floor(p.length/2):p.length/2-1;let t=0;if(0==e)t=c.indexOf(p[0]),u=c.substring(0,t).trim(),h=c.substring(t+1).trim();else{let n=0,i=0;for(;n<=e;)t=c.indexOf(p[n],i),i=t+1,n++;u=c.substring(0,t).trim(),h=c.substring(t+1).trim()}}const f=u.split(".");if(2==f.length&&0==f[1]&&2!=f[1].length)throw new Error("invalid coordinates format");const m=h.split(".");if(2==m.length&&0==m[1]&&2!=m[1].length)throw new Error("invalid coordinates format");if(/^\d+$/.test(u)||/^\d+$/.test(h))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),i=Number(Number(i).toFixed(t)),Object.freeze({verbatimCoordinates:c,verbatimLatitude:u,verbatimLongitude:h,decimalLatitude:n,decimalLongitude:i,decimalCoordinates:"".concat(n,",").concat(i),originalFormat:a,closeEnough:D9,toCoordinateFormat:k9})}throw new Error("coordinates pattern match failed")}function B9(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,i=/[eastsouthnorthwest]+/i,r=t.length/2;for(let o=0;o<r;o++){const e=t[o],a=t[o+r],s=n.test(e)&&n.test(a),l=i.test(e)&&i.test(a);if(null!=e||null!=a){if(null==e||null==a)return!1;if(s||l||e==a)continue;return!1}}return!0}function P9(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function D9(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(NaN==Number(t[0])||NaN==Number(t[1]))throw new Error("coords are not valid decimals");return P9(this.decimalLatitude,Number(t[0]))&&P9(this.decimalLongitude,t[1])}throw new Error("coords being tested must be separated by a comma")}const O9=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});L9.to=O9;const N9=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123\xb0 N 74.123\xb0 W",verbatimLatitude:"40.123\xb0 N",verbatimLongitude:"74.123\xb0 W"},{verbatimCoordinates:"40.123\xb0 N 74.123\xb0 W",verbatimLatitude:"40.123\xb0 N",verbatimLongitude:"74.123\xb0 W"},{verbatimCoordinates:'40\xb0 7\xb4 22.8" N 74\xb0 7\xb4 22.8" W',verbatimLatitude:'40\xb0 7\xb4 22.8" N',verbatimLongitude:'74\xb0 7\xb4 22.8" W'},{verbatimCoordinates:"40\xb0 7.38\u2019 , -74\xb0 7.38\u2019",verbatimLatitude:"40\xb0 7.38\u2019",verbatimLongitude:"-74\xb0 7.38\u2019"},{verbatimCoordinates:"N40\xb07\u201922.8\u2019\u2019, W74\xb07\u201922.8\u2019\u2019",verbatimLatitude:"N40\xb07\u201922.8\u2019\u2019",verbatimLongitude:"W74\xb07\u201922.8\u2019\u2019"},{verbatimCoordinates:'40\xb07\u201922.8"N, 74\xb07\u201922.8"W',verbatimLatitude:'40\xb07\u201922.8"N',verbatimLongitude:'74\xb07\u201922.8"W'},{verbatimCoordinates:"40\xb07'22.8\"N, 74\xb07'22.8\"W",verbatimLatitude:"40\xb07'22.8\"N",verbatimLongitude:"74\xb07'22.8\"W"},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123\xb0,-74.123\xb0",verbatimLatitude:"40.123\xb0",verbatimLongitude:"-74.123\xb0"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40\xb07\u201922.8"N, 74\xb07\u201922.8"W',verbatimLatitude:'40\xb07\u201922.8"N',verbatimLongitude:'74\xb07\u201922.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40\xb07\u201923"N 74\xb07\u201923"W',verbatimLatitude:'40\xb07\u201923"N',verbatimLongitude:'74\xb07\u201923"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40\xb07\u201923"S 74\xb07\u201923"E',verbatimLatitude:'40\xb07\u201923"S',verbatimLongitude:'74\xb07\u201923"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40\xb07\u201923" -74\xb07\u201923"',verbatimLatitude:'40\xb07\u201923"',verbatimLongitude:'-74\xb07\u201923"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7\u2019 23" N 74d 7\u2019 23" W',verbatimLatitude:'40d 7\u2019 23" N',verbatimLongitude:'74d 7\u2019 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40\xb0 7.38, -74\xb0 7.38",verbatimLatitude:"40\xb0 7.38",verbatimLongitude:"-74\xb0 7.38"},{verbatimCoordinates:"40\xb0 7.38, -74\xb0 7.38",verbatimLatitude:"40\xb0 7.38",verbatimLongitude:"-74\xb0 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],F9={decimalLatitude:40.123,decimalLongitude:-74.123},z9=[{verbatimCoordinates:"50\xb04'17.698\"south, 14\xb024'2.826\"east",verbatimLatitude:"50\xb04'17.698\"south",verbatimLongitude:"14\xb024'2.826\"east",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40\xb026\u203247\u2033N 79\xb058\u203236\u2033W",verbatimLatitude:"40\xb026\u203247\u2033N",verbatimLongitude:"79\xb058\u203236\u2033W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26\u2032 47\u2033 N 79d 58\u2032 36\u2033 W",verbatimLatitude:"40d 26\u2032 47\u2033 N",verbatimLongitude:"79d 58\u2032 36\u2033 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195\xb0 79,948862\xb0",verbatimLatitude:"40,446195\xb0",verbatimLongitude:"79,948862\xb0",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40\xb0 26.7717, -79\xb0 56.93172",verbatimLatitude:"40\xb0 26.7717",verbatimLongitude:"-79\xb0 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18\xb024S 22\xb045E",verbatimLatitude:"18\xb024S",verbatimLongitude:"22\xb045E",decimalLatitude:-18.4,decimalLongitude:22.75}],U9=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245\xb0 S / 28.2344\xb0 E",verbatimLatitude:"-23.3245\xb0 S",verbatimLongitude:"28.2344\xb0 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40\xb0 26.7717 -79\xb0 56.93172",verbatimLatitude:"40\xb0 26.7717",verbatimLongitude:"-79\xb0 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 \xb0  E22.45634 \xb0",verbatimLatitude:"S23.43563 \xb0",verbatimLongitude:"E22.45634 \xb0",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372\xb0 S 23,07771\xb0 E",verbatimLatitude:"27,71372\xb0 S",verbatimLongitude:"23,07771\xb0 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48\xb0 30,6410', E 18\xb0 57,4583'",verbatimLatitude:"N 48\xb0 30,6410'",verbatimLongitude:"E 18\xb0 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];const j9=function(){const e=[];return N9.forEach(t=>{t.decimalLatitude?e.push(t):e.push(u(u({},t),F9))}),[...e,...z9,...U9]}();L9.formats=j9.map(e=>e.verbatimCoordinates);const V9=L9;function H9(e,t,n){const i=e.slice();return i[83]=t[n],i[85]=n,i}function G9(e){let t,n;return t=new f9({}),{c(){Q8(t.$$.fragment)},m(e,i){W8(t,e,i),n=!0},i(e){n||(j8(t.$$.fragment,e),n=!0)},o(e){V8(t.$$.fragment,e),n=!1},d(e){q8(t,e)}}}function Q9(e){let t,n,i,r,o;return n=new A9({}),{c(){t=d8("button"),Q8(n.$$.fragment),y8(t,"type","button"),y8(t,"title",e[9]),y8(t,"class","svelte-qnu791"),x8(t,"active",e[0])},m(a,s){u8(a,t,s),W8(n,t,null),i=!0,r||(o=g8(t,"click",e[68]),r=!0)},p(e,n){(!i||512&n[0])&&y8(t,"title",e[9]),(!i||1&n[0])&&x8(t,"active",e[0])},i(e){i||(j8(n.$$.fragment,e),i=!0)},o(e){V8(n.$$.fragment,e),i=!1},d(e){e&&h8(t),q8(n),r=!1,o()}}}function W9(e){let t,n,i,r,o=[],a=new Map,s=H8(e[14]);const l=e=>e[83].id+(e[83].address?","+e[83].address:"");for(let c=0;c<s.length;c+=1){let t=H9(e,s,c),n=l(t);a.set(n,o[c]=K9(n,t))}return{c(){t=d8("ul");for(let e=0;e<o.length;e+=1)o[e].c();y8(t,"class","svelte-qnu791")},m(a,s){u8(a,t,s);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);n=!0,i||(r=[g8(t,"mouseleave",e[72]),g8(t,"blur",e[73])],i=!0)},p(e,n){17880064&n[0]&&(s=H8(e[14]),z8(),o=function(e,t,n,i,r,o,a,s,l,c,u,h){let d=e.length,p=o.length,f=d;const m={};for(;f--;)m[e[f].key]=f;const g=[],v=new Map,y=new Map,A=[];for(f=p;f--;){const e=h(r,o,f),i=n(e);let s=a.get(i);s?A.push(()=>s.p(e,t)):(s=c(i,e),s.c()),v.set(i,g[f]=s),i in m&&y.set(i,Math.abs(f-m[i]))}const b=new Set,x=new Set;function _(e){j8(e,1),e.m(s,u),a.set(e.key,e),u=e.first,p--}for(;d&&p;){const t=g[p-1],n=e[d-1],i=t.key,r=n.key;t===n?(u=t.first,d--,p--):v.has(r)?!a.has(i)||b.has(i)?_(t):x.has(r)?d--:y.get(i)>y.get(r)?(x.add(i),_(t)):(b.add(r),d--):(l(n,a),d--)}for(;d--;){const t=e[d];v.has(t.key)||l(t,a)}for(;p;)_(g[p-1]);return t8(A),g}(o,n,l,0,e,s,a,t,G8,K9,null,H9),U8())},i(e){if(!n){for(let e=0;e<s.length;e+=1)j8(o[e]);n=!0}},o(e){for(let t=0;t<o.length;t+=1)V8(o[t]);n=!1},d(e){e&&h8(t);for(let t=0;t<o.length;t+=1)o[t].d();i=!1,t8(r)}}}function q9(e){let t,n,i,r,o,a;return n=new e9({}),{c(){t=d8("div"),Q8(n.$$.fragment),i=m8(),r=d8("div"),o=f8(e[7]),y8(r,"class","svelte-qnu791"),y8(t,"class","no-results svelte-qnu791")},m(e,s){u8(e,t,s),W8(n,t,null),c8(t,i),c8(t,r),c8(r,o),a=!0},p(e,t){(!a||128&t[0])&&A8(o,e[7])},i(e){a||(j8(n.$$.fragment,e),a=!0)},o(e){V8(n.$$.fragment,e),a=!1},d(e){e&&h8(t),q8(n)}}}function X9(e){let t;return{c(){t=f8("")},m(e,n){u8(e,t,n)},p:Z6,i:Z6,o:Z6,d(e){e&&h8(t)}}}function Y9(e){let t,n,i,r,o,a,s,l,c,u,h;return n=new e9({}),l=new Z8({}),{c(){t=d8("div"),Q8(n.$$.fragment),i=m8(),r=d8("div"),o=f8(e[6]),a=m8(),s=d8("button"),Q8(l.$$.fragment),y8(r,"class","svelte-qnu791"),y8(s,"class","svelte-qnu791"),y8(t,"class","error svelte-qnu791")},m(d,p){u8(d,t,p),W8(n,t,null),c8(t,i),c8(t,r),c8(r,o),c8(t,a),c8(t,s),W8(l,s,null),c=!0,u||(h=g8(s,"click",e[69]),u=!0)},p(e,t){(!c||64&t[0])&&A8(o,e[6])},i(e){c||(j8(n.$$.fragment,e),j8(l.$$.fragment,e),c=!0)},o(e){V8(n.$$.fragment,e),V8(l.$$.fragment,e),c=!1},d(e){e&&h8(t),q8(n),q8(l),u=!1,h()}}}function K9(e,t){let n,i,r;return i=new d9({props:{feature:t[83],showPlaceType:t[10],selected:t[15]===t[85],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),i.$on("mouseenter",function(){return t[70](t[85])}),i.$on("focus",function(){return t[71](t[83])}),{key:e,first:null,c(){n=f8(""),Q8(i.$$.fragment),this.first=n},m(e,t){u8(e,n,t),W8(i,e,t),r=!0},p(e,n){t=e;const r={};16384&n[0]&&(r.feature=t[83]),1024&n[0]&&(r.showPlaceType=t[10]),49152&n[0]&&(r.selected=t[15]===t[85]),4096&n[0]&&(r.iconsBaseUrl=t[12]),i.$set(r)},i(e){r||(j8(i.$$.fragment,e),r=!0)},o(e){V8(i.$$.fragment,e),r=!1},d(e){e&&h8(n),q8(i,e)}}}function J9(e){let t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_=!1;o=new x9({}),h=new Z8({});let w=e[19]&&G9(),E=!0===e[5]&&Q9(e);const C=e[60].default,S=function(e,t,n,i){if(e){const r=s8(e,t,n,i);return e[0](r)}}(C,e,e[59],null),T=[Y9,X9,q9,W9],I=[];function M(e,t){var n,i;return e[18]?0:e[16]?0===(null==(n=e[14])?void 0:n.length)?2:e[16]&&null!=(i=e[14])&&i.length?3:-1:1}return~(g=M(e))&&(v=I[g]=T[g](e)),{c(){t=m8(),n=d8("form"),i=d8("div"),r=d8("button"),Q8(o.$$.fragment),a=m8(),s=d8("input"),l=m8(),c=d8("div"),u=d8("button"),Q8(h.$$.fragment),d=m8(),w&&w.c(),p=m8(),E&&E.c(),f=m8(),S&&S.c(),m=m8(),v&&v.c(),y8(r,"class","search-button svelte-qnu791"),y8(r,"type","button"),y8(s,"placeholder",e[8]),y8(s,"aria-label",e[8]),y8(s,"class","svelte-qnu791"),y8(u,"type","button"),y8(u,"title",e[3]),y8(u,"class","svelte-qnu791"),y8(c,"class","clear-button-container svelte-qnu791"),x8(c,"displayable",""!==e[1]),y8(i,"class","input-group svelte-qnu791"),y8(n,"tabindex","0"),y8(n,"class",y=l8(e[2])+" svelte-qnu791"),x8(n,"can-collapse",e[4]&&""===e[1])},m(v,y){u8(v,t,y),u8(v,n,y),c8(n,i),c8(i,r),W8(o,r,null),c8(i,a),c8(i,s),e[62](s),b8(s,e[1]),c8(i,l),c8(i,c),c8(c,u),W8(h,u,null),c8(c,d),w&&w.m(c,null),c8(i,p),E&&E.m(i,null),c8(i,f),S&&S.m(i,null),c8(n,m),~g&&I[g].m(n,null),A=!0,b||(x=[g8(r,"click",e[61]),g8(s,"input",e[63]),g8(s,"focus",e[64]),g8(s,"blur",e[65]),g8(s,"keydown",e[22]),g8(s,"input",e[66]),g8(u,"click",e[67]),g8(n,"submit",v8(e[21]))],b=!0)},p(e,t){(!A||256&t[0])&&y8(s,"placeholder",e[8]),(!A||256&t[0])&&y8(s,"aria-label",e[8]),2&t[0]&&s.value!==e[1]&&b8(s,e[1]),(!A||8&t[0])&&y8(u,"title",e[3]),e[19]?w?524288&t[0]&&j8(w,1):(w=G9(),w.c(),j8(w,1),w.m(c,null)):w&&(z8(),V8(w,1,1,()=>{w=null}),U8()),(!A||2&t[0])&&x8(c,"displayable",""!==e[1]),!0===e[5]?E?(E.p(e,t),32&t[0]&&j8(E,1)):(E=Q9(e),E.c(),j8(E,1),E.m(i,f)):E&&(z8(),V8(E,1,1,()=>{E=null}),U8()),S&&S.p&&(!A||268435456&t[1])&&function(e,t,n,i,r,o){if(r){const a=s8(t,n,i,o);e.p(a,r)}}(S,C,e,e[59],A?function(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|r[i];return e}return t.dirty|r}return t.dirty}(C,e[59],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[59]),null);let r=g;g=M(e),g===r?~g&&I[g].p(e,t):(v&&(z8(),V8(I[r],1,1,()=>{I[r]=null}),U8()),~g?(v=I[g],v?v.p(e,t):(v=I[g]=T[g](e),v.c()),j8(v,1),v.m(n,null)):v=null),(!A||4&t[0]&&y!==(y=l8(e[2])+" svelte-qnu791"))&&y8(n,"class",y),(!A||22&t[0])&&x8(n,"can-collapse",e[4]&&""===e[1])},i(e){A||(j8(_),j8(o.$$.fragment,e),j8(h.$$.fragment,e),j8(w),j8(E),j8(S,e),j8(v),A=!0)},o(e){V8(_),V8(o.$$.fragment,e),V8(h.$$.fragment,e),V8(w),V8(E),V8(S,e),V8(v),A=!1},d(i){i&&(h8(t),h8(n)),q8(o),e[62](null),q8(h),w&&w.d(),E&&E.d(),S&&S.d(i),~g&&I[g].d(),b=!1,t8(x)}}}function Z9(e,t,n){let i,{$$slots:r={},$$scope:o}=t;const a={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:s}=t,{apiKey:l}=t,{bbox:c}=t,{clearButtonTitle:h="clear"}=t,{clearOnBlur:d=!1}=t,{collapsed:p=!1}=t,{country:f}=t,{debounceSearch:m=200}=t,{enableReverse:g=!1}=t,{errorMessage:v="Something went wrong\u2026"}=t,{filter:y=()=>!0}=t,{flyTo:A=!0}=t,{fuzzyMatch:b=!0}=t,{language:x}=t,{limit:_}=t,{mapController:w}=t,{minLength:E=2}=t,{noResultsMessage:C="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:S="Search"}=t,{proximity:T=[{type:"server-geolocation"}]}=t,{reverseActive:I="always"===g}=t,{reverseButtonTitle:M="toggle reverse geocoding"}=t,{searchValue:k=""}=t,{showFullGeometry:R=!0}=t,{showPlaceType:L="ifNeeded"}=t,{showResultsWhileTyping:B=!0}=t,{selectFirst:P=!0}=t,{flyToSelected:D=!1}=t,{markerOnSelected:O=!0}=t,{types:N}=t,{excludeTypes:F=!1}=t,{zoom:z=a}=t,{maxZoom:U}=t,{apiUrl:j="https://api.maptiler.com/geocoding"}=t,{fetchParameters:V={}}=t,{iconsBaseUrl:H="https://cdn.maptiler.com/maptiler-geocoding-control/v1.4.1/icons/"}=t,{adjustUrlQuery:G=()=>{}}=t;function Q(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(1,k=e),t?(n(15,ie=-1),se()):(he(!i,i),setTimeout(()=>{Y.focus(),Y.select()}))}let W,q,X,Y,K,J,Z,$,ee,te=!1,ne="",ie=-1,re=[];const oe=new Set,ae=E8();function se(e){if(Z&&(clearTimeout(Z),Z=void 0),ie>-1&&W)n(56,X=W[ie]),n(1,k="reverse"===X.place_type[0]?X.place_name:X.place_name.replace(/,.*/,"")),n(18,K=void 0),n(55,q=void 0),n(15,ie=-1);else if(k){const t=e||!le(k);ce(k,{exact:!0}).then(()=>{n(55,q=W),n(56,X=void 0),t&&function(){var e;if(null==q||!q.length||!A)return;const t=[180,90,-180,-90],n=!q.some(e=>!e.matching_text);let i;for(const o of q){const a=ue(o);if(i=null!==U&&void 0!==U?U:void 0===i?a:void 0===a?i:Math.max(i,a),n||!o.matching_text)for(const n of[0,1,2,3]){var r;t[n]=Math[n<2?"min":"max"](t[n],null!==(r=null==(e=o.bbox)?void 0:e[n])&&void 0!==r?r:o.center[n%2])}}w&&q.length>0&&(X&&t[0]===t[2]&&t[1]===t[3]?w.flyTo(X.center,ue(X)):w.fitBounds(_9(t),50,i))}()}).catch(e=>n(18,K=e))}}function le(e){try{return V9(e,6)}catch(t){return!1}}async function ce(e){let{byId:t=!1,exact:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(18,K=void 0),null==J||J.abort();const r=new AbortController;n(19,J=r);try{const o=le(e),a=new URLSearchParams;if(void 0!==x&&a.set("language",Array.isArray(x)?x.join(","):null!==x&&void 0!==x?x:""),N&&a.set("types",N.join(",")),F&&a.set("excludeTypes",String(F)),c&&a.set("bbox",c.map(e=>e.toFixed(6)).join(",")),f&&a.set("country",Array.isArray(f)?f.join(","):f),!t&&!o){const e=await async function(e,t,n){const i=null==e?void 0:e.getCenterAndZoom();for(const o of null!==t&&void 0!==t?t:[])if(!i||!(null!=o.minZoom&&o.minZoom>i[0]||null!=o.maxZoom&&o.maxZoom<i[0])){if("fixed"===o.type)return o.coordinates.join(",");e:if("client-geolocation"===o.type){if(w9&&o.cachedLocationExpiry&&w9.time+o.cachedLocationExpiry>Date.now()){if(!w9.coords)break e;return w9.coords}let e;try{return e=await new Promise((e,t)=>{n.signal.addEventListener("abort",()=>{t(Error("aborted"))}),navigator.geolocation.getCurrentPosition(t=>{e([t.coords.longitude,t.coords.latitude].map(e=>e.toFixed(6)).join(","))},e=>{t(e)},o)}),e}catch(r){}finally{o.cachedLocationExpiry&&(w9={time:Date.now(),coords:e})}if(n.signal.aborted)return}if("server-geolocation"===o.type)return"ip";if(i&&"map-center"===o.type)return i[1].toFixed(6)+","+i[2].toFixed(6)}}(w,T,r);e&&a.set("proximity",e),(i||!B)&&a.set("autocomplete","false"),a.set("fuzzyMatch",String(b))}void 0!==_&&(!o||1===(null==N?void 0:N.length))&&a.set("limit",String(_)),a.set("key",l),G(a);const s=j+"/"+encodeURIComponent(o?o.decimalLongitude+","+o.decimalLatitude:e)+".json?"+a.toString();if(s===ne)return void(t?(n(14,W=void 0),n(56,X=re[0])):n(14,W=re));ne=s;const h=await fetch(s,u({signal:r.signal},V));if(!h.ok)throw new Error(await h.text());const d=await h.json();ae("response",{url:s,featureCollection:d}),t?(n(14,W=void 0),n(56,X=d.features[0]),re=[X]):(n(14,W=d.features.filter(y)),o&&W.unshift({type:"Feature",properties:{},id:"reverse_"+o.decimalLongitude+"_"+o.decimalLatitude,text:o.decimalLatitude+", "+o.decimalLongitude,place_name:o.decimalLatitude+", "+o.decimalLongitude,place_type:["reverse"],center:[o.decimalLongitude,o.decimalLatitude],bbox:[o.decimalLongitude,o.decimalLatitude,o.decimalLongitude,o.decimalLatitude],geometry:{type:"Point",coordinates:[o.decimalLongitude,o.decimalLatitude]}}),re=W,o&&Y.focus())}catch(og){if(og&&"object"==typeof og&&"name"in og&&"AbortError"===og.name)return;throw og}finally{r===J&&n(19,J=void 0)}}function ue(e){var t,n;if(!e.bbox||e.bbox[0]!==e.bbox[2]&&e.bbox[1]!==e.bbox[3])return;if("number"==typeof z)return e.id.startsWith("poi.")||e.id.startsWith("address.")?U:z;const i=e.id.replace(/\..*/,"");return null!==(t=Array.isArray(null==(n=e.properties)?void 0:n.categories)?e.properties.categories.reduce((e,t)=>{const n=z[i+"."+t];return void 0===e?n:void 0===n?e:Math.max(e,n)},void 0):void 0)&&void 0!==t?t:z[i]}function he(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n(18,K=void 0),B||t){if(Z&&clearTimeout(Z),k.length<E)return;const t=k;Z=window.setTimeout(()=>{ce(t).catch(e=>n(18,K=e))},e?m:0)}else n(14,W=void 0),n(18,K=void 0)}function de(e){n(56,X=e),n(1,k=e.place_name),n(15,ie=-1)}!function(e){w8().$$.on_destroy.push(e)}(()=>{w&&(w.setEventHandler(void 0),w.indicateReverse(!1),w.setSelectedMarker(-1),w.setMarkers(void 0,void 0))});return e.$$set=e=>{"class"in e&&n(2,s=e.class),"apiKey"in e&&n(26,l=e.apiKey),"bbox"in e&&n(27,c=e.bbox),"clearButtonTitle"in e&&n(3,h=e.clearButtonTitle),"clearOnBlur"in e&&n(28,d=e.clearOnBlur),"collapsed"in e&&n(4,p=e.collapsed),"country"in e&&n(29,f=e.country),"debounceSearch"in e&&n(30,m=e.debounceSearch),"enableReverse"in e&&n(5,g=e.enableReverse),"errorMessage"in e&&n(6,v=e.errorMessage),"filter"in e&&n(31,y=e.filter),"flyTo"in e&&n(32,A=e.flyTo),"fuzzyMatch"in e&&n(33,b=e.fuzzyMatch),"language"in e&&n(34,x=e.language),"limit"in e&&n(35,_=e.limit),"mapController"in e&&n(36,w=e.mapController),"minLength"in e&&n(37,E=e.minLength),"noResultsMessage"in e&&n(7,C=e.noResultsMessage),"placeholder"in e&&n(8,S=e.placeholder),"proximity"in e&&n(38,T=e.proximity),"reverseActive"in e&&n(0,I=e.reverseActive),"reverseButtonTitle"in e&&n(9,M=e.reverseButtonTitle),"searchValue"in e&&n(1,k=e.searchValue),"showFullGeometry"in e&&n(39,R=e.showFullGeometry),"showPlaceType"in e&&n(10,L=e.showPlaceType),"showResultsWhileTyping"in e&&n(40,B=e.showResultsWhileTyping),"selectFirst"in e&&n(11,P=e.selectFirst),"flyToSelected"in e&&n(41,D=e.flyToSelected),"markerOnSelected"in e&&n(42,O=e.markerOnSelected),"types"in e&&n(43,N=e.types),"excludeTypes"in e&&n(44,F=e.excludeTypes),"zoom"in e&&n(45,z=e.zoom),"maxZoom"in e&&n(46,U=e.maxZoom),"apiUrl"in e&&n(47,j=e.apiUrl),"fetchParameters"in e&&n(48,V=e.fetchParameters),"iconsBaseUrl"in e&&n(12,H=e.iconsBaseUrl),"adjustUrlQuery"in e&&n(49,G=e.adjustUrlQuery),"$$scope"in e&&n(59,o=e.$$scope)},e.$$.update=()=>{if(32&e.$$.dirty[0]&&n(0,I="always"===g),268443648&e.$$.dirty[0]&&setTimeout(()=>{n(16,$=te),d&&!te&&n(1,k="")}),16386&e.$$.dirty[0]|64&e.$$.dirty[1]&&k.length<E&&(n(56,X=void 0),n(14,W=void 0),n(18,K=void 0),n(55,q=W)),33554688&e.$$.dirty[1]&&R&&X&&!X.address&&"Point"===X.geometry.type&&"reverse"!==X.place_type[0]&&ce(X.id,{byId:!0}).catch(e=>n(18,K=e)),100663330&e.$$.dirty[1]&&(w&&X&&X.id!==ee&&A&&(!X.bbox||X.bbox[0]===X.bbox[2]&&X.bbox[1]===X.bbox[3]?w.flyTo(X.center,ue(X)):w.fitBounds(_9(X.bbox),50,ue(X)),n(14,W=void 0),n(55,q=void 0),n(15,ie=-1)),n(57,ee=null==X?void 0:X.id)),18432&e.$$.dirty[0]&&P&&null!=W&&W.length&&n(15,ie=0),2050&e.$$.dirty[0]&&(P||n(15,ie=-1)),16384&e.$$.dirty[0]|16777216&e.$$.dirty[1]&&q!==W&&n(55,q=void 0),81921&e.$$.dirty[0]|16777248&e.$$.dirty[1]&&w&&w.setEventHandler(e=>{var t;switch(e.type){case"mapClick":I&&function(e){n(0,I="always"===g),n(14,W=void 0),n(56,X=void 0),n(15,ie=-1),Q(e[1].toFixed(6)+", "+function(e,t,n){const i=t[1],r=t[0],o=i-r;return e===i&&n?e:((e-r)%o+o)%o+r}(e[0],[-180,180],!0).toFixed(6),!1,!0)}(e.coordinates);break;case"markerClick":{const t=null==W?void 0:W.find(t=>t.id===e.id);t&&de(t)}break;case"markerMouseEnter":q&&n(15,ie=$&&null!==(t=null==W?void 0:W.findIndex(t=>t.id===e.id))&&void 0!==t?t:-1);break;case"markerMouseLeave":q&&n(15,ie=-1)}}),49152&e.$$.dirty[0]&&n(58,i=null==W?void 0:W[ie]),134218786&e.$$.dirty[1]&&w&&i&&A&&D&&w.flyTo(i.center,ue(i)),2080&e.$$.dirty[1]&&(O||null==w||w.setMarkers(void 0,void 0)),150997024&e.$$.dirty[1]&&w&&O&&!q&&(w.setMarkers(i?[i]:void 0,void 0),w.setSelectedMarker(i?0:-1)),50331680&e.$$.dirty[1]&&w&&w.setMarkers(q,X),32768&e.$$.dirty[0]|16777248&e.$$.dirty[1]&&q&&w&&w.setSelectedMarker(ie),2&e.$$.dirty[0]|32&e.$$.dirty[1]&&w){const e=le(k);w.setReverseMarker(e?[e.decimalLongitude,e.decimalLatitude]:void 0)}134217728&e.$$.dirty[1]&&ae("select",i),33554432&e.$$.dirty[1]&&ae("pick",X),81920&e.$$.dirty[0]&&ae("optionsVisibilityChange",$&&!!W),16384&e.$$.dirty[0]&&ae("featuresListed",W),16777216&e.$$.dirty[1]&&ae("featuresMarked",q),1&e.$$.dirty[0]&&ae("reverseToggle",I),2&e.$$.dirty[0]&&ae("queryChange",k),1&e.$$.dirty[0]|32&e.$$.dirty[1]&&w&&w.indicateReverse(I)},[I,k,s,h,p,g,v,C,S,M,L,P,H,te,W,ie,$,Y,K,J,oe,se,function(e){if(!W)return;let t="ArrowDown"===e.key?1:"ArrowUp"===e.key?-1:0;t&&(ie===(P?0:-1)&&-1===t&&n(15,ie=W.length),n(15,ie+=t),ie>=W.length&&n(15,ie=-1),ie<0&&P&&n(15,ie=0),e.preventDefault())},he,de,a,l,c,d,f,m,y,A,b,x,_,w,E,T,R,B,D,O,N,F,z,U,j,V,G,function(){Y.focus()},function(){Y.blur()},Q,function(){n(14,W=void 0),n(56,X=void 0),n(15,ie=-1)},function(){n(55,q=[]),n(56,X=void 0)},q,X,ee,i,o,r,()=>Y.focus(),function(e){T8[e?"unshift":"push"](()=>{Y=e,n(17,Y)})},function(){k=this.value,n(1,k),n(13,te),n(28,d)},()=>n(13,te=!0),()=>n(13,te=!1),()=>he(),()=>{n(1,k=""),Y.focus()},()=>n(0,I=!I),()=>n(18,K=void 0),e=>n(15,ie=e),e=>de(e),()=>{P||n(15,ie=-1)},()=>{}]}let $9=class extends K8{constructor(e){super(),Y8(this,e,Z9,J9,i8,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,excludeTypes:44,zoom:45,maxZoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}};function e7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function t7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let e=0;e<i[i.length-1].length;e++)if(i[i.length-1][e]!==i[0][e])throw new Error("First and last Position are not equivalent.")}return e7({type:"Polygon",coordinates:e},t,n)}function n7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function i7(e,t){return e7({type:"MultiPolygon",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function r7(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var o7=function(){return function(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}}();function a7(e,t){return e>t?1:e<t?-1:0}function s7(e,t,n){for(var i=new o7(null,null),r=i,o=i;;){var a=n(e,t.key);if(a<0){if(null===t.left)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,null===(t=s).left)break}o.left=t,o=t,t=t.left}else{if(!(a>0))break;if(null===t.right)break;if(n(e,t.right.key)>0){s=t.right;if(t.right=s.left,s.left=t,null===(t=s).right)break}r.right=t,r=t,t=t.right}}return r.right=t.left,o.left=t.right,t.left=i.right,t.right=i.left,t}function l7(e,t,n,i){var r=new o7(e,t);if(null===n)return r.left=r.right=null,r;var o=i(e,(n=s7(e,n,i)).key);return o<0?(r.left=n.left,r.right=n,n.left=null):o>=0&&(r.right=n.right,r.left=n,n.right=null),r}function c7(e,t,n){var i=null,r=null;if(t){var o=n((t=s7(e,t,n)).key,e);0===o?(i=t.left,r=t.right):o<0?(r=t.right,t.right=null,i=t):(i=t.left,t.left=null,r=t)}return{left:i,right:r}}function u7(e,t,n,i,r){if(e){i(t+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+r(e)+"\n");var o=t+(n?"    ":"\u2502   ");e.left&&u7(e.left,o,!1,i,r),e.right&&u7(e.right,o,!0,i,r)}}var h7=function(){function e(e){void 0===e&&(e=a7),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=l7(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new o7(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,r=s7(e,this._root,i),o=i(e,r.key);return 0===o?this._root=r:(o<0?(n.left=r.left,n.right=r,r.left=null):o>0&&(n.right=r.right,n.left=r,r.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var i;return null===t?null:0===n(e,(t=s7(e,t,n)).key)?(null===t.left?i=t.right:(i=s7(e,t.left,n)).right=t.right,this._size--,i):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=s7(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(0===i)return t;t=i<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=s7(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(0===i)return!0;t=i<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),e.call(t,n),n=n.right):r=!0;return this},e.prototype.range=function(e,t,n,i){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(o((a=r.pop()).key,t)>0)break;if(o(a.key,e)>=0&&n.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach(function(t){var n=t.key;return e.push(n)}),e},e.prototype.values=function(){var e=[];return this.forEach(function(t){var n=t.data;return e.push(n)}),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,i=0,r=[];!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var i=this._comparator;t;){var r=i(e.key,t.key);if(0===r)break;r<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var i=this._comparator;t;){var r=i(e.key,t.key);if(0===r)break;r<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return function(e){for(var t=e,n=[],i=!1,r=new o7(null,null),o=r;!i;)t?(n.push(t),t=t.left):n.length>0?t=(t=o=o.next=n.pop()).right:i=!0;return o.next=null,r.next}(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var i=e.length,r=this._comparator;if(n&&f7(e,t,0,i-1,r),null===this._root)this._root=d7(e,t,0,i),this._size=i;else{var o=function(e,t,n){for(var i=new o7(null,null),r=i,o=e,a=t;null!==o&&null!==a;)n(o.key,a.key)<0?(r.next=o,o=o.next):(r.next=a,a=a.next),r=r.next;return null!==o?r.next=o:null!==a&&(r.next=a),i.next}(this.toList(),function(e,t){for(var n=new o7(null,null),i=n,r=0;r<e.length;r++)i=i.next=new o7(e[r],t[r]);return i.next=null,n.next}(e,t),r);i=this._size+i,this._root=p7({head:o},0,i)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return u7(this._root,"",!0,function(e){return t.push(e)},e),t.join("")},e.prototype.update=function(e,t,n){var i=this._comparator,r=c7(e,this._root,i),o=r.left,a=r.right;i(e,t)<0?a=l7(t,n,a,i):o=l7(t,n,o,i),this._root=function(e,t,n){return null===t?e:(null===e||((t=s7(e.key,t,n)).left=e),t)}(o,a,i)},e.prototype.split=function(e){return c7(e,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var e,t,n;return r7(this,function(i){switch(i.label){case 0:e=this._root,t=[],n=!1,i.label=1;case 1:return n?[3,6]:null===e?[3,2]:(t.push(e),e=e.left,[3,5]);case 2:return 0===t.length?[3,4]:[4,e=t.pop()];case 3:return i.sent(),e=e.right,[3,5];case 4:n=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function d7(e,t,n,i){var r=i-n;if(r>0){var o=n+Math.floor(r/2),a=e[o],s=t[o],l=new o7(a,s);return l.left=d7(e,t,n,o),l.right=d7(e,t,o+1,i),l}return null}function p7(e,t,n){var i=n-t;if(i>0){var r=t+Math.floor(i/2),o=p7(e,t,r),a=e.head;return a.left=o,e.head=e.head.next,a.right=p7(e,r+1,n),a}return null}function f7(e,t,n,i,r){if(!(n>=i)){for(var o=e[n+i>>1],a=n-1,s=i+1;;){do{a++}while(r(e[a],o)<0);do{s--}while(r(e[s],o)>0);if(a>=s)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}f7(e,t,n,s,r),f7(e,t,s+1,i,r)}}const m7=134217729;function g7(e,t,n,i,r){let o,a,s,l,c=t[0],u=i[0],h=0,d=0;u>c==u>-c?(o=c,c=t[++h]):(o=u,u=i[++d]);let p=0;if(h<e&&d<n)for(u>c==u>-c?(a=c+o,s=o-(a-c),c=t[++h]):(a=u+o,s=o-(a-u),u=i[++d]),o=a,0!==s&&(r[p++]=s);h<e&&d<n;)u>c==u>-c?(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=t[++h]):(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=i[++d]),o=a,0!==s&&(r[p++]=s);for(;h<e;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=t[++h],o=a,0!==s&&(r[p++]=s);for(;d<n;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=i[++d],o=a,0!==s&&(r[p++]=s);return(0!==o||0===p)&&(r[p++]=o),p}function v7(e){return new Float64Array(e)}const y7=v7(4),A7=v7(8),b7=v7(12),x7=v7(16),_7=v7(4);function w7(e,t,n,i,r,o){const a=(t-o)*(n-r),s=(e-r)*(i-o),l=a-s,c=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,i,r,o,a){let s,l,c,u,h,d,p,f,m,g,v,y,A,b,x,_,w,E;const C=e-r,S=n-r,T=t-o,I=i-o;b=C*I,d=m7*C,p=d-(d-C),f=C-p,d=m7*I,m=d-(d-I),g=I-m,x=f*g-(b-p*m-f*m-p*g),_=T*S,d=m7*T,p=d-(d-T),f=T-p,d=m7*S,m=d-(d-S),g=S-m,w=f*g-(_-p*m-f*m-p*g),v=x-w,h=x-v,y7[0]=x-(v+h)+(h-w),y=b+v,h=y-b,A=b-(y-h)+(v-h),v=A-_,h=A-v,y7[1]=A-(v+h)+(h-_),E=y+v,h=E-y,y7[2]=y-(E-h)+(v-h),y7[3]=E;let M=function(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,y7),k=22204460492503146e-32*a;if(M>=k||-M>=k||(h=e-C,s=e-(C+h)+(h-r),h=n-S,c=n-(S+h)+(h-r),h=t-T,l=t-(T+h)+(h-o),h=i-I,u=i-(I+h)+(h-o),0===s&&0===l&&0===c&&0===u)||(k=11093356479670487e-47*a+33306690738754706e-32*Math.abs(M),M+=C*u+I*s-(T*c+S*l),M>=k||-M>=k))return M;b=s*I,d=m7*s,p=d-(d-s),f=s-p,d=m7*I,m=d-(d-I),g=I-m,x=f*g-(b-p*m-f*m-p*g),_=l*S,d=m7*l,p=d-(d-l),f=l-p,d=m7*S,m=d-(d-S),g=S-m,w=f*g-(_-p*m-f*m-p*g),v=x-w,h=x-v,_7[0]=x-(v+h)+(h-w),y=b+v,h=y-b,A=b-(y-h)+(v-h),v=A-_,h=A-v,_7[1]=A-(v+h)+(h-_),E=y+v,h=E-y,_7[2]=y-(E-h)+(v-h),_7[3]=E;const R=g7(4,y7,4,_7,A7);b=C*u,d=m7*C,p=d-(d-C),f=C-p,d=m7*u,m=d-(d-u),g=u-m,x=f*g-(b-p*m-f*m-p*g),_=T*c,d=m7*T,p=d-(d-T),f=T-p,d=m7*c,m=d-(d-c),g=c-m,w=f*g-(_-p*m-f*m-p*g),v=x-w,h=x-v,_7[0]=x-(v+h)+(h-w),y=b+v,h=y-b,A=b-(y-h)+(v-h),v=A-_,h=A-v,_7[1]=A-(v+h)+(h-_),E=y+v,h=E-y,_7[2]=y-(E-h)+(v-h),_7[3]=E;const L=g7(R,A7,4,_7,b7);b=s*u,d=m7*s,p=d-(d-s),f=s-p,d=m7*u,m=d-(d-u),g=u-m,x=f*g-(b-p*m-f*m-p*g),_=l*c,d=m7*l,p=d-(d-l),f=l-p,d=m7*c,m=d-(d-c),g=c-m,w=f*g-(_-p*m-f*m-p*g),v=x-w,h=x-v,_7[0]=x-(v+h)+(h-w),y=b+v,h=y-b,A=b-(y-h)+(v-h),v=A-_,h=A-v,_7[1]=A-(v+h)+(h-_),E=y+v,h=E-y,_7[2]=y-(E-h)+(v-h),_7[3]=E;const B=g7(L,b7,4,_7,x7);return x7[B-1]}(e,t,n,i,r,o,c)}const E7=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,C7=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:i,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}};let S7=Number.EPSILON;void 0===S7&&(S7=Math.pow(2,-52));const T7=S7*S7,I7=(e,t)=>{if(-S7<e&&e<S7&&-S7<t&&t<S7)return 0;const n=e-t;return n*n<T7*e*t?0:e<t?-1:1};class M7{constructor(){this.tree=new h7,this.round(0)}round(e){const t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===I7(t.key,n.key))return this.tree.remove(e),n.key;const i=this.tree.next(t);return null!==i&&0===I7(t.key,i.key)?(this.tree.remove(e),i.key):e}}const k7=new class{constructor(){this.reset()}reset(){this.xRounder=new M7,this.yRounder=new M7}round(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}},R7=(e,t)=>e.x*t.y-e.y*t.x,L7=(e,t)=>e.x*t.x+e.y*t.y,B7=(e,t,n)=>{const i=w7(e.x,e.y,t.x,t.y,n.x,n.y);return i>0?-1:i<0?1:0},P7=e=>Math.sqrt(L7(e,e)),D7=(e,t,n)=>{const i={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y};return R7(r,i)/P7(r)/P7(i)},O7=(e,t,n)=>{const i={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y};return L7(r,i)/P7(r)/P7(i)},N7=(e,t,n)=>0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n},F7=(e,t,n)=>0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)};class z7{static compare(e,t){const n=z7.comparePoints(e.point,t.point);return 0!==n?n:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:j7.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}constructor(e,t){void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.point.events.push(e),e.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const n=this.point.events[t];if(void 0===n.segment.consumedBy)for(let i=t+1;i<e;i++){const e=this.point.events[i];void 0===e.consumedBy&&n.otherSE.point.events===e.otherSE.point.events&&n.segment.consume(e.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,n=this.point.events.length;t<n;t++){const n=this.point.events[t];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&e.push(n)}return e}getLeftmostComparator(e){const t=new Map,n=n=>{const i=n.otherSE;t.set(n,{sine:D7(this.point,e.point,i.point),cosine:O7(this.point,e.point,i.point)})};return(e,i)=>{t.has(e)||n(e),t.has(i)||n(i);const{sine:r,cosine:o}=t.get(e),{sine:a,cosine:s}=t.get(i);return r>=0&&a>=0?o<s?1:o>s?-1:0:r<0&&a<0?o<s?-1:o>s?1:0:a<r?-1:a>r?1:0}}}let U7=0;class j7{static compare(e,t){const n=e.leftSE.point.x,i=t.leftSE.point.x,r=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;const a=e.leftSE.point.y,s=t.leftSE.point.y,l=e.rightSE.point.y,c=t.rightSE.point.y;if(n<i){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;const n=e.comparePoint(t.leftSE.point);if(n<0)return 1;if(n>0)return-1;const i=t.comparePoint(e.rightSE.point);return 0!==i?i:-1}if(n>i){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;const n=t.comparePoint(e.leftSE.point);if(0!==n)return n;const i=e.comparePoint(t.rightSE.point);return i<0?1:i>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(r<o){const n=t.comparePoint(e.rightSE.point);if(0!==n)return n}if(r>o){const n=e.comparePoint(t.rightSE.point);if(n<0)return 1;if(n>0)return-1}if(r!==o){const e=l-a,t=r-n,u=c-s,h=o-i;if(e>t&&u<h)return 1;if(e<t&&u>h)return-1}return r>o?1:r<o||l<c?-1:l>c?1:e.id<t.id?-1:e.id>t.id?1:0}constructor(e,t,n,i){this.id=++U7,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=i}static fromRing(e,t,n){let i,r,o;const a=z7.comparePoints(e,t);if(a<0)i=e,r=t,o=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=t,r=e,o=-1}const s=new z7(i,!0),l=new z7(r,!1);return new j7(s,l,[n],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}comparePoint(e){if(this.isAnEndpoint(e))return 0;const t=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;const r=(e.y-t.y)/i.y,o=t.x+r*i.x;if(e.x===o)return 0;const a=(e.x-t.x)/i.x,s=t.y+a*i.y;return e.y===s?0:e.y<s?-1:1}getIntersection(e){const t=this.bbox(),n=e.bbox(),i=C7(t,n);if(null===i)return null;const r=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,l=E7(t,a)&&0===this.comparePoint(a),c=E7(n,r)&&0===e.comparePoint(r),u=E7(t,s)&&0===this.comparePoint(s),h=E7(n,o)&&0===e.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?s:null;if(c)return u&&r.x===s.x&&r.y===s.y?null:r;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&u)return null;if(h)return o;if(u)return s;const d=((e,t,n,i)=>{if(0===t.x)return F7(n,i,e.x);if(0===i.x)return F7(e,t,n.x);if(0===t.y)return N7(n,i,e.y);if(0===i.y)return N7(e,t,n.y);const r=R7(t,i);if(0==r)return null;const o={x:n.x-e.x,y:n.y-e.y},a=R7(o,t)/r,s=R7(o,i)/r;return{x:(e.x+s*t.x+(n.x+a*i.x))/2,y:(e.y+s*t.y+(n.y+a*i.y))/2}})(r,this.vector(),a,e.vector());return null!==d&&E7(i,d)?k7.round(d.x,d.y):null}split(e){const t=[],n=void 0!==e.events,i=new z7(e,!0),r=new z7(e,!1),o=this.rightSE;this.replaceRightSE(r),t.push(r),t.push(i);const a=new j7(i,o,this.rings.slice(),this.windings.slice());return z7.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),z7.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),r.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}consume(e){let t=this,n=e;for(;t.consumedBy;)t=t.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=j7.compare(t,n);if(0!==i){if(i>0){const e=t;t=n,n=e}if(t.prev===n){const e=t;t=n,n=e}for(let e=0,i=n.rings.length;e<i;e++){const i=n.rings[e],r=n.windings[e],o=t.rings.indexOf(i);-1===o?(t.rings.push(i),t.windings.push(r)):t.windings[o]+=r}n.rings=null,n.windings=null,n.consumedBy=t,n.leftSE.consumedBy=t.leftSE,n.rightSE.consumedBy=t.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,s=this.rings.length;a<s;a++){const e=this.rings[a],i=this.windings[a],r=t.indexOf(e);-1===r?(t.push(e),n.push(i)):n[r]+=i}const r=[],o=[];for(let a=0,s=t.length;a<s;a++){if(0===n[a])continue;const e=t[a],i=e.poly;if(-1===o.indexOf(i))if(e.isExterior)r.push(i);else{-1===o.indexOf(i)&&o.push(i);const t=r.indexOf(e.poly);-1!==t&&r.splice(t,1)}}for(let a=0,s=r.length;a<s;a++){const e=r[a].multiPoly;-1===i.indexOf(e)&&i.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(J7.type){case"union":{const n=0===e.length,i=0===t.length;this._isInResult=n!==i;break}case"intersection":{let n,i;e.length<t.length?(n=e.length,i=t.length):(n=t.length,i=e.length),this._isInResult=i===J7.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(e.length-t.length);this._isInResult=n%2===1;break}case"difference":{const n=e=>1===e.length&&e[0].isSubject;this._isInResult=n(e)!==n(t);break}default:throw new Error("Unrecognized operation type found ".concat(J7.type))}return this._isInResult}}class V7{constructor(e,t,n){if(!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=k7.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let r=i;for(let o=1,a=e.length;o<a;o++){if("number"!=typeof e[o][0]||"number"!=typeof e[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let t=k7.round(e[o][0],e[o][1]);t.x===r.x&&t.y===r.y||(this.segments.push(j7.fromRing(r,t,this)),t.x<this.bbox.ll.x&&(this.bbox.ll.x=t.x),t.y<this.bbox.ll.y&&(this.bbox.ll.y=t.y),t.x>this.bbox.ur.x&&(this.bbox.ur.x=t.x),t.y>this.bbox.ur.y&&(this.bbox.ur.y=t.y),r=t)}(i.x!==r.x||i.y!==r.y)&&this.segments.push(j7.fromRing(r,i,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const n=this.segments[t];e.push(n.leftSE),e.push(n.rightSE)}return e}}class H7{constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new V7(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=e.length;n<i;n++){const t=new V7(e[n],this,!1);t.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=t.bbox.ll.x),t.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=t.bbox.ll.y),t.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=t.bbox.ur.x),t.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=t.bbox.ur.y),this.interiorRings.push(t)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const n=this.interiorRings[t].getSweepEvents();for(let t=0,i=n.length;t<i;t++)e.push(n[t])}return e}}class G7{constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(n){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let i=0,r=e.length;i<r;i++){const t=new H7(e[i],this);t.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=t.bbox.ll.x),t.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=t.bbox.ll.y),t.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=t.bbox.ur.x),t.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=t.bbox.ur.y),this.polys.push(t)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const n=this.polys[t].getSweepEvents();for(let t=0,i=n.length;t<i;t++)e.push(n[t])}return e}}class Q7{static factory(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.isInResult()||i.ringOut)continue;let r=null,o=i.leftSE,a=i.rightSE;const s=[o],l=o.point,c=[];for(;r=o,o=a,s.push(o),o.point!==l;)for(;;){const e=o.getAvailableLinkedEvents();if(0===e.length){const e=s[0].point,t=s[s.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(e.x,", ").concat(e.y,"]. Last matching segment found ends at [").concat(t.x,", ").concat(t.y,"]."))}if(1===e.length){a=e[0].otherSE;break}let n=null;for(let t=0,r=c.length;t<r;t++)if(c[t].point===o.point){n=t;break}if(null!==n){const e=c.splice(n)[0],i=s.splice(e.index);i.unshift(i[0].otherSE),t.push(new Q7(i.reverse()));continue}c.push({index:s.length,point:o.point});const i=o.getLeftmostComparator(r);a=e.sort(i)[0].otherSE;break}t.push(new Q7(s))}return t}constructor(e){this.events=e;for(let t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const t=[e];for(let l=1,c=this.events.length-1;l<c;l++){const n=this.events[l].point,i=this.events[l+1].point;0!==B7(n,e,i)&&(t.push(n),e=n)}if(1===t.length)return null;const n=t[0],i=t[1];0===B7(n,e,i)&&t.shift(),t.push(t[0]);const r=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,a=this.isExteriorRing()?t.length:-1,s=[];for(let l=o;l!=a;l+=r)s.push([t[l].x,t[l].y]);return s}isExteriorRing(){if(void 0===this._isExteriorRing){const e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let i=1,r=this.events.length;i<r;i++){const t=this.events[i];z7.compare(e,t)>0&&(e=t)}let t=e.segment.prevInResult(),n=t?t.prevInResult():null;for(;;){if(!t)return null;if(!n)return t.ringOut;if(n.ringOut!==t.ringOut)return n.ringOut.enclosingRing()!==t.ringOut?t.ringOut:t.ringOut.enclosingRing();t=n.prevInResult(),n=t?t.prevInResult():null}}}class W7{constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(let t=0,n=this.interiorRings.length;t<n;t++){const n=this.interiorRings[t].getGeom();null!==n&&e.push(n)}return e}}class q7{constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const n=this.polys[t].getGeom();null!==n&&e.push(n)}return e}_composePolys(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new W7(i));else{const e=i.enclosingRing();e.poly||t.push(new W7(e)),e.poly.addInterior(i)}}return t}}class X7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j7.compare;this.queue=e,this.tree=new h7(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;const i=e.isLeft?this.tree.add(t):this.tree.find(t);if(!i)throw new Error("Unable to find segment #".concat(t.id," [").concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> [").concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] in SweepLine tree."));let r,o,a=i,s=i;for(;void 0===r;)a=this.tree.prev(a),null===a?r=null:void 0===a.key.consumedBy&&(r=a.key);for(;void 0===o;)s=this.tree.next(s),null===s?o=null:void 0===s.key.consumedBy&&(o=s.key);if(e.isLeft){let i=null;if(r){const e=r.getIntersection(t);if(null!==e&&(t.isAnEndpoint(e)||(i=e),!r.isAnEndpoint(e))){const t=this._splitSafely(r,e);for(let e=0,i=t.length;e<i;e++)n.push(t[e])}}let a=null;if(o){const e=o.getIntersection(t);if(null!==e&&(t.isAnEndpoint(e)||(a=e),!o.isAnEndpoint(e))){const t=this._splitSafely(o,e);for(let e=0,i=t.length;e<i;e++)n.push(t[e])}}if(null!==i||null!==a){let e=null;e=null===i?a:null===a||z7.comparePoints(i,a)<=0?i:a,this.queue.remove(t.rightSE),n.push(t.rightSE);const r=t.split(e);for(let t=0,i=r.length;t<i;t++)n.push(r[t])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&o){const e=r.getIntersection(o);if(null!==e){if(!r.isAnEndpoint(e)){const t=this._splitSafely(r,e);for(let e=0,i=t.length;e<i;e++)n.push(t[e])}if(!o.isAnEndpoint(e)){const t=this._splitSafely(o,e);for(let e=0,i=t.length;e<i;e++)n.push(t[e])}}}this.tree.remove(t)}return n}_splitSafely(e,t){this.tree.remove(e);const n=e.rightSE;this.queue.remove(n);const i=e.split(t);return i.push(n),void 0===e.consumedBy&&this.tree.add(e),i}}const Y7=typeof process<"u"&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,K7=typeof process<"u"&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;const J7=new class{run(e,t,n){J7.type=e,k7.reset();const i=[new G7(t,!0)];for(let c=0,u=n.length;c<u;c++)i.push(new G7(n[c],!1));if(J7.numMultiPolys=i.length,"difference"===J7.type){const e=i[0];let t=1;for(;t<i.length;)null!==C7(i[t].bbox,e.bbox)?t++:i.splice(t,1)}if("intersection"===J7.type)for(let c=0,u=i.length;c<u;c++){const e=i[c];for(let t=c+1,n=i.length;t<n;t++)if(null===C7(e.bbox,i[t].bbox))return[]}const r=new h7(z7.compare);for(let c=0,u=i.length;c<u;c++){const e=i[c].getSweepEvents();for(let t=0,n=e.length;t<n;t++)if(r.insert(e[t]),r.size>Y7)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new X7(r);let a=r.size,s=r.pop();for(;s;){const e=s.key;if(r.size===a){const t=e.segment;throw new Error("Unable to pop() ".concat(e.isLeft?"left":"right"," SweepEvent [").concat(e.point.x,", ").concat(e.point.y,"] from segment #").concat(t.id," [").concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> [").concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] from queue."))}if(r.size>Y7)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>K7)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const t=o.process(e);for(let n=0,i=t.length;n<i;n++){const e=t[n];void 0===e.consumedBy&&r.insert(e)}a=r.size,s=r.pop()}k7.reset();const l=Q7.factory(o.segments);return new q7(l).getGeom()}};var Z7=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return J7.run("union",e,n)},$7=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return J7.run("difference",e,n)};function eee(e,t,n){if(null!==e)for(var i,r,o,a,s,l,c,u,h=0,d=0,p=e.type,f="FeatureCollection"===p,m="Feature"===p,g=f?e.features.length:1,v=0;v<g;v++){s=(u=!!(c=f?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<s;y++){var A=0,b=0;if(null!==(a=u?c.geometries[y]:c)){l=a.coordinates;var x=a.type;switch(h=0,x){case null:break;case"Point":if(!1===t(l,d,v,A,b))return!1;d++,A++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],d,v,A,b))return!1;d++,"MultiPoint"===x&&A++}"LineString"===x&&A++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===t(l[i][r],d,v,A,b))return!1;d++}"MultiLineString"===x&&A++,"Polygon"===x&&b++}"Polygon"===x&&A++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===t(l[i][r][o],d,v,A,b))return!1;d++}b++}A++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===eee(a.geometries[i],t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tee(e,t){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,m=p?e.features.length:1;for(n=0;n<m;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}var nee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];if(tee(e,e=>{n.push(e.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const i=Z7(n[0],...n.slice(1));return 0===i.length?null:1===i.length?t7(i[0],t.properties):i7(i,t.properties)};var iee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e.bbox&&!0!==t.recompute)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return eee(e,e=>{n[0]>e[0]&&(n[0]=e[0]),n[1]>e[1]&&(n[1]=e[1]),n[2]<e[0]&&(n[2]=e[0]),n[3]<e[1]&&(n[3]=e[1])}),n};var ree=function(e){const t=[];if(tee(e,e=>{t.push(e.coordinates)}),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},i=$7(t[0],...t.slice(1));return 0===i.length?null:1===i.length?t7(i[0],n):i7(i,n)};var oee=function(e){if(!e)throw new Error("geojson is required");var t=[];return function(e,t){tee(e,function(e,n,i,r,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(e7(e,i,{bbox:r,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(e7({type:a,coordinates:c},i),n,l))return!1}})}(e,function(e){t.push(e)}),n7(t)};function aee(e,t){var n;const i=ree(n7([t7([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),e]));if(!i)return;i.properties={isMask:!0};const r=_9(iee(e)),o=(r[2]-r[0])/360/1e3,a=r[0]<-180,s=r[2]>180,l=oee(e);if(l.features.length>1&&(a||s))for(const c of l.features){const e=_9(iee(c));if(s&&e[0]<-180+o)for(const t of c.geometry.coordinates)for(const e of t)e[0]+=360-o;if(a&&e[2]>180-o)for(const t of c.geometry.coordinates)for(const e of t)e[0]-=360-o}t(n7([l.features.length<2?e:null!==(n=nee(l))&&void 0!==n?n:e,i]))}const see=n7([]);function lee(e,t){let n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}};const l=[];let c,h,d;function p(){!e.getSource("full-geom")&&(null!=s&&s.fill||null!=s&&s.line)&&e.addSource("full-geom",{type:"geojson",data:see}),!e.getLayer("full-geom-fill")&&null!=s&&s.fill&&e.addLayer(u(u({},null==s?void 0:s.fill),{},{id:"full-geom-fill",type:"fill",source:"full-geom"})),!e.getLayer("full-geom-line")&&null!=s&&s.line&&e.addLayer(u(u({},null==s?void 0:s.line),{},{id:"full-geom-line",type:"line",source:"full-geom"})),d&&g(d)}e.loaded()?p():e.once("load",()=>{p()}),e.on("styledata",()=>{p()});const f=e=>{null==n||n({type:"mapClick",coordinates:[e.lngLat.lng,e.lngLat.lat]})};function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)throw new Error;const n=document.createElement("div");return e&&n.classList.add("marker-interactive"),new v9({props:{displayIn:"maplibre"},target:n}),new t.Marker({element:n,offset:[1,-13]})}function g(t){var n;d=t,t&&(null==(n=e.getSource("full-geom"))||n.setData(t))}return{setEventHandler(t){t?(n=t,e.on("click",f)):(n=void 0,e.off("click",f))},flyTo(t,n){e.flyTo(u(u({center:t},n?{zoom:n}:{}),o))},fitBounds(t,n,i){e.fitBounds([[t[0],t[1]],[t[2],t[3]]],u(u({padding:n},i?{maxZoom:i}:{}),a))},indicateReverse(t){e.getCanvasContainer().style.cursor=t?"crosshair":""},setReverseMarker(n){!t||!i||(h?n?h.setLngLat(n):(h.remove(),h=void 0):n&&(h=("object"==typeof i?new t.Marker(i):m()).setLngLat(n).addTo(e),h.getElement().classList.add("marker-reverse")))},setMarkers(o,a){if(i){for(const e of l)e.remove();if(l.length=0,g(see),t){if(a){let n=!1;if("GeometryCollection"===a.geometry.type){const e=a.geometry.geometries.filter(e=>"Polygon"===e.type||"MultiPolygon"===e.type);e:if(e.length>0){const t=nee(n7(e.map(e=>e7(e))));if(!t)break e;aee(u(u({},a),{},{geometry:t.geometry}),g),n=!0}else{const e=a.geometry.geometries.filter(e=>"LineString"===e.type||"MultiLineString"===e.type);e.length>0&&(g(u(u({},a),{},{geometry:{type:"GeometryCollection",geometries:e}})),n=!0)}}if(!n)if("Polygon"===a.geometry.type||"MultiPolygon"===a.geometry.type)aee(a,g);else if("LineString"===a.geometry.type||"MultiLineString"===a.geometry.type)return void g(a);i&&l.push(("object"==typeof i?new t.Marker(i):m()).setLngLat(a.center).addTo(e))}if(r)for(const i of null!==o&&void 0!==o?o:[]){if(i===a)continue;const o=("object"==typeof r?new t.Marker(r):m(!0)).setLngLat(i.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText("reverse"===i.place_type[0]?i.place_name:i.place_name.replace(/,.*/,""))).addTo(e),s=o.getElement();s.addEventListener("click",e=>{e.stopPropagation(),null==n||n({type:"markerClick",id:i.id})}),s.addEventListener("mouseenter",()=>{null==n||n({type:"markerMouseEnter",id:i.id}),o.togglePopup()}),s.addEventListener("mouseleave",()=>{null==n||n({type:"markerMouseLeave",id:i.id}),o.togglePopup()}),l.push(o)}}}},setSelectedMarker(e){c&&c.getElement().classList.toggle("marker-selected",!1),c=e>-1?l[e]:void 0,null==c||c.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const t=e.getCenter();return[e.getZoom(),t.lng,t.lat]}}}var cee,uee;class hee extends EventTarget{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),K6(this,cee),K6(this,uee),J6(this,uee,e)}onAddInt(e){const t=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const n=Y6(this,uee),{marker:i,showResultMarkers:r,flyTo:o,fullGeometryStyle:a}=n,s=fK(n,H6),l="boolean"==typeof o?{}:o,c=this.getExtraProps(e,t),h=u(u({mapController:lee(e,this.getMapLibreGl(),i,r,l,l,a),flyTo:void 0===o||!!o,apiKey:""},c),s);if(!h.apiKey)throw new Error("no apiKey provided");J6(this,cee,new $9({target:t,props:h}));for(const u of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])Y6(this,cee).$on(u,e=>this.dispatchEvent(e));return t}setOptions(e){var t;J6(this,uee,e);const n=Y6(this,uee),{marker:i,showResultMarkers:r,flyTo:o,fullGeometryStyle:a}=n,s=fK(n,G6);null==(t=Y6(this,cee))||t.$set(s)}setQuery(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n;null==(n=Y6(this,cee))||n.setQuery(e,t)}clearMap(){var e;null==(e=Y6(this,cee))||e.clearMap()}clearList(){var e;null==(e=Y6(this,cee))||e.clearList()}setReverseMode(e){var t;null==(t=Y6(this,cee))||t.$set({reverseActive:e})}focus(){var e;null==(e=Y6(this,cee))||e.focus()}blur(){var e;null==(e=Y6(this,cee))||e.blur()}onRemove(){var e;null==(e=Y6(this,cee))||e.$destroy()}}cee=new WeakMap,uee=new WeakMap;class dee extends hee{getMapLibreGl(){return w5}onAdd(e){return super.onAddInt(e)}getExtraProps(){return{}}}function pee(e){return wI("MuiCard",e)}EI("MuiCard",["root"]);const fee=["className","raised"],mee=HI(UB,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),gee=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiCard"}),{className:i,raised:r=!1}=n,o=(0,gT.A)(n,fee),a=(0,mT.A)({},n,{raised:r}),s=(e=>{const{classes:t}=e;return BI({root:["root"]},pee,t)})(a);return(0,uT.jsx)(mee,(0,mT.A)({className:MT(s.root,i),elevation:r?8:void 0,ref:t,ownerState:a},o))}),vee=gee;const yee=i.createContext({});function Aee(e){return wI("MuiImageListItem",e)}const bee=EI("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),xee=["children","className","cols","component","rows","style"],_ee=HI("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(bee.img)]:t.img},t.root,t[n.variant]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"block",position:"relative"},"standard"===t.variant&&{display:"flex",flexDirection:"column"},"woven"===t.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{["& .".concat(bee.img)]:(0,mT.A)({objectFit:"cover",width:"100%",height:"100%",display:"block"},"standard"===t.variant&&{height:"auto",flexGrow:1})})}),wee=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiImageListItem"}),{children:r,className:o,cols:a=1,component:s="li",rows:l=1,style:c}=n,u=(0,gT.A)(n,xee),{rowHeight:h="auto",gap:d,variant:p}=i.useContext(yee);let f="auto";"woven"===p?f=void 0:"auto"!==h&&(f=h*l+d*(l-1));const m=(0,mT.A)({},n,{cols:a,component:s,gap:d,rowHeight:h,rows:l,variant:p}),g=(e=>{const{classes:t,variant:n}=e;return BI({root:["root",n],img:["img"]},Aee,t)})(m);return(0,uT.jsx)(_ee,(0,mT.A)({as:s,className:MT(g.root,g[p],o),ref:t,style:(0,mT.A)({height:f,gridColumnEnd:"masonry"!==p?"span ".concat(a):void 0,gridRowEnd:"masonry"!==p?"span ".concat(l):void 0,marginBottom:"masonry"===p?d:void 0,breakInside:"masonry"===p?"avoid":void 0},c),ownerState:m},u,{children:i.Children.map(r,e=>i.isValidElement(e)?"img"===e.type||hO(e,["Image"])?i.cloneElement(e,{className:MT(g.img,e.props.className)}):e:null)}))}),Eee=wee;function Cee(e){return wI("MuiImageListItemBar",e)}EI("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const See=["actionIcon","actionPosition","className","subtitle","title","position"],Tee=HI("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(KI(n.position))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===n.position&&{bottom:0},"top"===n.position&&{top:0},"below"===n.position&&{position:"relative",background:"transparent",alignItems:"normal"})}),Iee=HI("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t["titleWrap".concat(KI(n.position))],n.actionIcon&&t["titleWrapActionPos".concat(KI(n.actionPosition))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===n.position&&{padding:"6px 0 12px",color:"inherit"},n.actionIcon&&"left"===n.actionPosition&&{paddingLeft:0},n.actionIcon&&"right"===n.actionPosition&&{paddingRight:0})}),Mee=HI("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})(e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),kee=HI("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})(e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),Ree=HI("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t["actionIconActionPos".concat(KI(n.actionPosition))]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({},"left"===t.actionPosition&&{order:-1})}),Lee=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:r="right",className:o,subtitle:a,title:s,position:l="bottom"}=n,c=(0,gT.A)(n,See),u=(0,mT.A)({},n,{position:l,actionPosition:r}),h=(e=>{const{classes:t,position:n,actionIcon:i,actionPosition:r}=e;return BI({root:["root","position".concat(KI(n))],titleWrap:["titleWrap","titleWrap".concat(KI(n)),i&&"titleWrapActionPos".concat(KI(r))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat(KI(r))]},Cee,t)})(u);return(0,uT.jsxs)(Tee,(0,mT.A)({ownerState:u,className:MT(h.root,o),ref:t},c,{children:[(0,uT.jsxs)(Iee,{ownerState:u,className:h.titleWrap,children:[(0,uT.jsx)(Mee,{className:h.title,children:s}),a?(0,uT.jsx)(kee,{className:h.subtitle,children:a}):null]}),i?(0,uT.jsx)(Ree,{ownerState:u,className:h.actionIcon,children:i}):null]}))}),Bee=Lee;function Pee(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function Dee(e,t){void 0===e&&(e={}),void 0===t&&(t={});const n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>n.indexOf(e)<0).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:Pee(t[n])&&Pee(e[n])&&Object.keys(t[n]).length>0&&Dee(e[n],t[n])})}const Oee={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Nee(){const e="undefined"!==typeof document?document:{};return Dee(e,Oee),e}const Fee={document:Oee,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function zee(){const e="undefined"!==typeof window?window:{};return Dee(e,Fee),e}function Uee(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function jee(){return Date.now()}function Vee(e,t){void 0===t&&(t="x");const n=zee();let i,r,o;const a=function(e){const t=zee();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix("none"===r?"":r)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),"x"===t&&(r=n.WebKitCSSMatrix?o.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(r=n.WebKitCSSMatrix?o.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),r||0}function Hee(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Gee(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Qee(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==i&&null!==i&&!Gee(i)){const n=Object.keys(Object(i)).filter(e=>t.indexOf(e)<0);for(let t=0,r=n.length;t<r;t+=1){const r=n[t],o=Object.getOwnPropertyDescriptor(i,r);void 0!==o&&o.enumerable&&(Hee(e[r])&&Hee(i[r])?i[r].__swiper__?e[r]=i[r]:Qee(e[r],i[r]):!Hee(e[r])&&Hee(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:Qee(e[r],i[r])):e[r]=i[r])}}}return e}function Wee(e,t,n){e.style.setProperty(t,n)}function qee(e){let{swiper:t,targetPosition:n,side:i}=e;const r=zee(),o=-t.translate;let a,s=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=n>o?"next":"prev",u=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,h=()=>{a=(new Date).getTime(),null===s&&(s=a);const e=Math.max(Math.min((a-s)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let d=o+c*(n-o);if(u(d,n)&&(d=n),t.wrapperEl.scrollTo({[i]:d}),u(d,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:d})}),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function Xee(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function Yee(e,t){void 0===t&&(t="");const n=zee(),i=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&i.push(...e.assignedElements()),t?i.filter(e=>e.matches(t)):i}function Kee(e){try{return void console.warn(e)}catch(t){}}function Jee(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}(t)),n}function Zee(e){const t=zee(),n=Nee(),i=e.getBoundingClientRect(),r=n.body,o=e.clientTop||r.clientTop||0,a=e.clientLeft||r.clientLeft||0,s=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:i.top+s-o,left:i.left+l-a}}function $ee(e,t){return zee().getComputedStyle(e,null).getPropertyValue(t)}function ete(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function tte(e,t){const n=[];let i=e.parentElement;for(;i;)t?i.matches(t)&&n.push(i):n.push(i),i=i.parentElement;return n}function nte(e,t,n){const i=zee();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function ite(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}function rte(e,t){void 0===t&&(t=""),"undefined"!==typeof trustedTypes?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:e=>e}).createHTML(t):e.innerHTML=t}let ote,ate,ste;function lte(){return ote||(ote=function(){const e=zee(),t=Nee();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ote}function cte(e){return void 0===e&&(e={}),ate||(ate=function(e){let{userAgent:t}=void 0===e?{}:e;const n=lte(),i=zee(),r=i.navigator.platform,o=t||i.navigator.userAgent,a={ios:!1,android:!1},s=i.screen.width,l=i.screen.height,c=o.match(/(Android);?[\s\/]+([\d.]+)?/);let u=o.match(/(iPad).*OS\s([\d_]+)/);const h=o.match(/(iPod)(.*OS\s([\d_]+))?/),d=!u&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let f="MacIntel"===r;return!u&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(s,"x").concat(l))>=0&&(u=o.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(u||d||h)&&(a.os="ios",a.ios=!0),a}(e)),ate}function ute(){return ste||(ste=function(){const e=zee(),t=cte();let n=!1;function i(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(i()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,i]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));n=e<16||16===e&&i<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),o=i();return{isSafari:n||o,needPerspectiveFix:n,need3dFix:o||r&&t.ios,isWebView:r}}()),ste}var hte={on(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;const r=n?"unshift":"push";return e.split(" ").forEach(e=>{i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)}),i},once(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(i,o)}return r.__emitterProxy=t,i.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach(e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((i,r)=>{(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)})}),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,i;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];"string"===typeof o[0]||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),i=e):(t=o[0].events,n=o[0].data,i=o[0].context||e),n.unshift(i);return(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(i,[t,...n])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(i,n)})}),e}};const dte=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const pte=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const fte=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame(()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())})),t&&t.remove()}},mte=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},gte=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const i="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=r,o=[n-t];return o.push(...Array.from({length:t}).map((e,t)=>n+i+t)),void e.slides.forEach((t,n)=>{o.includes(t.column)&&mte(e,n)})}const o=r+i-1;if(e.params.rewind||e.params.loop)for(let a=r-t;a<=o+t;a+=1){const t=(a%n+n)%n;(t<r||t>o)&&mte(e,t)}else for(let a=Math.max(r-t,0);a<=Math.min(o+t,n-1);a+=1)a!==r&&(a>o||a<r)&&mte(e,a)};var vte={updateSize:function(){const e=this;let t,n;const i=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:i.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:i.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt($ee(i,"padding-left")||0,10)-parseInt($ee(i,"padding-right")||0,10),n=n-parseInt($ee(i,"padding-top")||0,10)-parseInt($ee(i,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:i,slidesEl:r,size:o,rtlTranslate:a,wrongRTL:s}=e,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=Yee(r,".".concat(e.params.slideClass,", swiper-slide")),h=l?e.virtual.slides.length:u.length;let d=[];const p=[],f=[];let m=n.slidesOffsetBefore;"function"===typeof m&&(m=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"===typeof g&&(g=n.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let A=n.spaceBetween,b=-m,x=0,_=0;if("undefined"===typeof o)return;"string"===typeof A&&A.indexOf("%")>=0?A=parseFloat(A.replace("%",""))/100*o:"string"===typeof A&&(A=parseFloat(A)),e.virtualSize=-A,u.forEach(e=>{a?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Wee(i,"--swiper-centered-offset-before",""),Wee(i,"--swiper-centered-offset-after",""));const w=n.grid&&n.grid.rows>1&&e.grid;let E;w?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();const C="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter(e=>"undefined"!==typeof n.breakpoints[e].slidesPerView).length>0;for(let S=0;S<h;S+=1){let i;if(E=0,u[S]&&(i=u[S]),w&&e.grid.updateSlide(S,i,u),!u[S]||"none"!==$ee(i,"display")){if("auto"===n.slidesPerView){C&&(u[S].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(i),o=i.style.transform,a=i.style.webkitTransform;if(o&&(i.style.transform="none"),a&&(i.style.webkitTransform="none"),n.roundLengths)E=e.isHorizontal()?nte(i,"width",!0):nte(i,"height",!0);else{const e=t(r,"width"),n=t(r,"padding-left"),o=t(r,"padding-right"),a=t(r,"margin-left"),s=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)E=e+a+s;else{const{clientWidth:t,offsetWidth:r}=i;E=e+n+o+a+s+(r-t)}}o&&(i.style.transform=o),a&&(i.style.webkitTransform=a),n.roundLengths&&(E=Math.floor(E))}else E=(o-(n.slidesPerView-1)*A)/n.slidesPerView,n.roundLengths&&(E=Math.floor(E)),u[S]&&(u[S].style[e.getDirectionLabel("width")]="".concat(E,"px"));u[S]&&(u[S].swiperSlideSize=E),f.push(E),n.centeredSlides?(b=b+E/2+x/2+A,0===x&&0!==S&&(b=b-o/2-A),0===S&&(b=b-o/2-A),Math.abs(b)<.001&&(b=0),n.roundLengths&&(b=Math.floor(b)),_%n.slidesPerGroup===0&&d.push(b),p.push(b)):(n.roundLengths&&(b=Math.floor(b)),(_-Math.min(e.params.slidesPerGroupSkip,_))%e.params.slidesPerGroup===0&&d.push(b),p.push(b),b=b+E+A),e.virtualSize+=E+A,x=E,_+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,a&&s&&("slide"===n.effect||"coverflow"===n.effect)&&(i.style.width="".concat(e.virtualSize+A,"px")),n.setWrapperSize&&(i.style[e.getDirectionLabel("width")]="".concat(e.virtualSize+A,"px")),w&&e.grid.updateWrapperSize(E,d),!n.centeredSlides){const t=[];for(let i=0;i<d.length;i+=1){let r=d[i];n.roundLengths&&(r=Math.floor(r)),d[i]<=e.virtualSize-o&&t.push(r)}d=t,Math.floor(e.virtualSize-o)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-o)}if(l&&n.loop){const t=f[0]+A;if(n.slidesPerGroup>1){const i=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),r=t*n.slidesPerGroup;for(let e=0;e<i;e+=1)d.push(d[d.length-1]+r)}for(let i=0;i<e.virtual.slidesBefore+e.virtual.slidesAfter;i+=1)1===n.slidesPerGroup&&d.push(d[d.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===d.length&&(d=[0]),0!==A){const t=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");u.filter((e,t)=>!(n.cssMode&&!n.loop)||t!==u.length-1).forEach(e=>{e.style[t]="".concat(A,"px")})}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;f.forEach(t=>{e+=t+(A||0)}),e-=A;const t=e>o?e-o:0;d=d.map(e=>e<=0?-m:e>t?t+g:e)}if(n.centerInsufficientSlides){let e=0;f.forEach(t=>{e+=t+(A||0)}),e-=A;const t=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(e+t<o){const n=(o-e-t)/2;d.forEach((e,t)=>{d[t]=e-n}),p.forEach((e,t)=>{p[t]=e+n})}}if(Object.assign(e,{slides:u,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Wee(i,"--swiper-centered-offset-before","".concat(-d[0],"px")),Wee(i,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+n)}if(h!==c&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!l&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t="".concat(n.containerModifierClass,"backface-hidden"),i=e.el.classList.contains(t);h<=n.maxBackfaceHiddenSlides?i||e.el.classList.add(t):i&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],i=t.virtual&&t.params.virtual.enabled;let r,o=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>i?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{n.push(e)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!i)break;n.push(a(e))}else n.push(a(t.activeIndex));for(r=0;r<n.length;r+=1)if("undefined"!==typeof n[r]){const e=n[r].offsetHeight;o=e>o?e:o}(o||0===o)&&(t.wrapperEl.style.height="".concat(o,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:i,rtlTranslate:r,snapGrid:o}=t;if(0===i.length)return;"undefined"===typeof i[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;r&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let s=n.spaceBetween;"string"===typeof s&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*t.size:"string"===typeof s&&(s=parseFloat(s));for(let l=0;l<i.length;l+=1){const e=i[l];let c=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=i[0].swiperSlideOffset);const u=(a+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+s),h=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+s),d=-(a-c),p=d+t.slidesSizesGrid[l],f=d>=0&&d<=t.size-t.slidesSizesGrid[l],m=d>=0&&d<t.size-1||p>1&&p<=t.size||d<=0&&p>=t.size;m&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),dte(e,m,n.slideVisibleClass),dte(e,f,n.slideFullyVisibleClass),e.progress=r?-u:u,e.originalProgress=r?-h:h}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:o,isEnd:a,progressLoop:s}=t;const l=o,c=a;if(0===i)r=0,o=!0,a=!0;else{r=(e-t.minTranslate())/i;const n=Math.abs(e-t.minTranslate())<1,s=Math.abs(e-t.maxTranslate())<1;o=n||r<=0,a=s||r>=1,n&&(r=0),s&&(r=1)}if(n.loop){const n=t.getSlideIndexByData(0),i=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[n],o=t.slidesGrid[i],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);s=l>=r?(l-r)/a:(l+a-o)/a,s>1&&(s-=1)}Object.assign(t,{progress:r,progressLoop:s,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!o||c&&!a)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:i,activeIndex:r}=e,o=e.virtual&&n.virtual.enabled,a=e.grid&&n.grid&&n.grid.rows>1,s=e=>Yee(i,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let l,c,u;if(o)if(n.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=s('[data-swiper-slide-index="'.concat(t,'"]'))}else l=s('[data-swiper-slide-index="'.concat(r,'"]'));else a?(l=t.find(e=>e.column===r),u=t.find(e=>e.column===r+1),c=t.find(e=>e.column===r-1)):l=t[r];l&&(a||(u=function(e,t){const n=[];for(;e.nextElementSibling;){const i=e.nextElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(l,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!u&&(u=t[0]),c=function(e,t){const n=[];for(;e.previousElementSibling;){const i=e.previousElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(l,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&0===!c&&(c=t[t.length-1]))),t.forEach(e=>{pte(e,e===l,n.slideActiveClass),pte(e,e===u,n.slideNextClass),pte(e,e===c,n.slidePrevClass)}),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:i,params:r,activeIndex:o,realIndex:a,snapIndex:s}=t;let l,c=e;const u=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof c&&(c=function(e){const{slidesGrid:t,params:n}=e,i=e.rtlTranslate?e.translate:-e.translate;let r;for(let o=0;o<t.length;o+=1)"undefined"!==typeof t[o+1]?i>=t[o]&&i<t[o+1]-(t[o+1]-t[o])/2?r=o:i>=t[o]&&i<t[o+1]&&(r=o+1):i>=t[o]&&(r=o);return n.normalizeSlideIndex&&(r<0||"undefined"===typeof r)&&(r=0),r}(t)),i.indexOf(n)>=0)l=i.indexOf(n);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=i.length&&(l=i.length-1),c===o&&!t.params.loop)return void(l!==s&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=u(c));const h=t.grid&&r.grid&&r.grid.rows>1;let d;if(t.virtual&&r.virtual.enabled&&r.loop)d=u(c);else if(h){const e=t.slides.find(e=>e.column===c);let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),d=Math.floor(n/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");d=e?parseInt(e,10):c}else d=c;Object.assign(t,{previousSnapIndex:s,snapIndex:l,previousRealIndex:a,realIndex:d,previousIndex:o,activeIndex:c}),t.initialized&&gte(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==d&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,i=n.params;let r=e.closest(".".concat(i.slideClass,", swiper-slide"));!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!r&&e.matches&&e.matches(".".concat(i.slideClass,", swiper-slide"))&&(r=e)});let o,a=!1;if(r)for(let s=0;s<n.slides.length;s+=1)if(n.slides[s]===r){a=!0,o=s;break}if(!r||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var yte={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:i,wrapperEl:r}=this;if(t.virtualTranslate)return n?-i:i;if(t.cssMode)return i;let o=Vee(r,e);return o+=this.cssOverflowAdjustment(),n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:i,params:r,wrapperEl:o,progress:a}=n;let s,l=0,c=0;n.isHorizontal()?l=i?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),o.style.transform="translate3d(".concat(l,"px, ").concat(c,"px, ").concat(0,"px)"));const u=n.maxTranslate()-n.minTranslate();s=0===u?0:(e-n.minTranslate())/u,s!==a&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,i,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===i&&(i=!0);const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const l=o.minTranslate(),c=o.maxTranslate();let u;if(u=i&&e>l?l:i&&e<c?c:e,o.updateProgress(u),a.cssMode){const e=o.isHorizontal();if(0===t)s[e?"scrollLeft":"scrollTop"]=-u;else{if(!o.support.smoothScroll)return qee({swiper:o,targetPosition:-u,side:e?"left":"top"}),!0;s.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}};function Ate(e){let{swiper:t,runCallbacks:n,direction:i,step:r}=e;const{activeIndex:o,previousIndex:a}=t;let s=i;s||(s=o>a?"next":o<a?"prev":"reset"),t.emit("transition".concat(r)),n&&"reset"===s?t.emit("slideResetTransition".concat(r)):n&&o!==a&&(t.emit("slideChangeTransition".concat(r)),"next"===s?t.emit("slideNextTransition".concat(r)):t.emit("slidePrevTransition".concat(r)))}var bte={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),Ate({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;n.animating=!1,i.cssMode||(n.setTransition(0),Ate({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var xte={slideTo:function(e,t,n,i,r){void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const o=this;let a=e;a<0&&(a=0);const{params:s,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:d,wrapperEl:p,enabled:f}=o;if(!f&&!i&&!r||o.destroyed||o.animating&&s.preventInteractionOnTransition)return!1;"undefined"===typeof t&&(t=o.params.speed);const m=Math.min(o.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/o.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(s.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const e=-Math.floor(100*v),t=Math.floor(100*c[x]),n=Math.floor(100*c[x+1]);"undefined"!==typeof c[x+1]?e>=t&&e<n-(n-t)/2?a=x:e>=t&&e<n&&(a=x+1):e>=t&&(a=x)}if(o.initialized&&a!==h){if(!o.allowSlideNext&&(d?v>o.translate&&v>o.minTranslate():v<o.translate&&v<o.minTranslate()))return!1;if(!o.allowSlidePrev&&v>o.translate&&v>o.maxTranslate()&&(h||0)!==a)return!1}let y;a!==(u||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(v),y=a>h?"next":a<h?"prev":"reset";const A=o.virtual&&o.params.virtual.enabled;if(!(A&&r)&&(d&&-v===o.translate||!d&&v===o.translate))return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==s.effect&&o.setTranslate(v),"reset"!==y&&(o.transitionStart(n,y),o.transitionEnd(n,y)),!1;if(s.cssMode){const e=o.isHorizontal(),n=d?v:-v;if(0===t)A&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),A&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[e?"scrollLeft":"scrollTop"]=n})):p[e?"scrollLeft":"scrollTop"]=n,A&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return qee({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}const b=ute().isSafari;return A&&!r&&b&&o.isElement&&o.virtual.update(!1,!1,a),o.setTransition(t),o.setTranslate(v),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,i),o.transitionStart(n,y),0===t?o.transitionEnd(n,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,y))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,i){if(void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const r=this;if(r.destroyed)return;"undefined"===typeof t&&(t=r.params.speed);const o=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a+=r.virtual.slidesBefore;else{let e;if(o){const t=a*r.params.grid.rows;e=r.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t).column}else e=r.getSlideIndexByData(a);const t=o?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:n}=r.params;let s=r.params.slidesPerView;"auto"===s?s=r.slidesPerViewDynamic():(s=Math.ceil(parseFloat(r.params.slidesPerView,10)),n&&s%2===0&&(s+=1));let l=t-e<s;if(n&&(l=l||e<Math.ceil(s/2)),i&&n&&"auto"!==r.params.slidesPerView&&!o&&(l=!1),l){const i=n?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:i,slideTo:!0,activeSlideIndex:"next"===i?e+1:e-t+1,slideRealIndex:"next"===i?r.realIndex:void 0})}if(o){const e=a*r.params.grid.rows;a=r.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e).column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,t,n,i)}),r},slideNext:function(e,t,n){void 0===t&&(t=!0);const i=this,{enabled:r,params:o,animating:a}=i;if(!r||i.destroyed)return i;"undefined"===typeof e&&(e=i.params.speed);let s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<o.slidesPerGroupSkip?1:s,c=i.virtual&&o.virtual.enabled;if(o.loop){if(a&&!c&&o.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,e,t,n)}),!0}return o.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===t&&(t=!0);const i=this,{params:r,snapGrid:o,slidesGrid:a,rtlTranslate:s,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;"undefined"===typeof e&&(e=i.params.speed);const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=h(s?i.translate:-i.translate),p=o.map(e=>h(e)),f=r.freeMode&&r.freeMode.enabled;let m=o[p.indexOf(d)-1];if("undefined"===typeof m&&(r.cssMode||f)){let e;o.forEach((t,n)=>{d>=t&&(e=n)}),"undefined"!==typeof e&&(m=f?o[e]:o[e>0?e-1:e])}let g=0;if("undefined"!==typeof m&&(g=a.indexOf(m),g<0&&(g=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){const r=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(r,e,t,n)}return r.loop&&0===i.activeIndex&&r.cssMode?(requestAnimationFrame(()=>{i.slideTo(g,e,t,n)}),!0):i.slideTo(g,e,t,n)},slideReset:function(e,t,n){void 0===t&&(t=!0);const i=this;if(!i.destroyed)return"undefined"===typeof e&&(e=i.params.speed),i.slideTo(i.activeIndex,e,t,n)},slideToClosest:function(e,t,n,i){void 0===t&&(t=!0),void 0===i&&(i=.5);const r=this;if(r.destroyed)return;"undefined"===typeof e&&(e=r.params.speed);let o=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[s]){const e=r.snapGrid[s];l-e>(r.snapGrid[s+1]-e)*i&&(o+=r.params.slidesPerGroup)}else{const e=r.snapGrid[s-1];l-e<=(r.snapGrid[s]-e)*i&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,i="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,o=e.getSlideIndexWhenGrid(e.clickedIndex);const a=e.isElement?"swiper-slide":".".concat(t.slideClass),s=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(r):o>(s?(e.slides.length-i)/2-(e.params.grid.rows-1):e.slides.length-i)?(e.loopFix(),o=e.getSlideIndex(Yee(n,"".concat(a,'[data-swiper-slide-index="').concat(r,'"]'))[0]),Uee(()=>{e.slideTo(o)})):e.slideTo(o)}else e.slideTo(o)}};var _te={loopCreate:function(e,t){const n=this,{params:i,slidesEl:r}=n;if(!i.loop||n.virtual&&n.params.virtual.enabled)return;const o=()=>{Yee(r,".".concat(i.slideClass,", swiper-slide")).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},a=n.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||a)&&(()=>{const e=Yee(r,".".concat(i.slideBlankClass));e.forEach(e=>{e.remove()}),e.length>0&&(n.recalcSlides(),n.updateSlides())})();const s=i.slidesPerGroup*(a?i.grid.rows:1),l=n.slides.length%s!==0,c=a&&n.slides.length%i.grid.rows!==0,u=e=>{for(let t=0;t<e;t+=1){const e=n.isElement?Jee("swiper-slide",[i.slideBlankClass]):Jee("div",[i.slideClass,i.slideBlankClass]);n.slidesEl.append(e)}};if(l){if(i.loopAddBlankSlides){u(s-n.slides.length%s),n.recalcSlides(),n.updateSlides()}else Kee("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(c){if(i.loopAddBlankSlides){u(i.grid.rows-n.slides.length%i.grid.rows),n.recalcSlides(),n.updateSlides()}else Kee("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();n.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next",initial:t})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:i,setTranslate:r,activeSlideIndex:o,initial:a,byController:s,byMousewheel:l}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:h,allowSlidePrev:d,allowSlideNext:p,slidesEl:f,params:m}=c,{centeredSlides:g,initialSlide:v}=m;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&m.virtual.enabled)return n&&(m.centeredSlides||0!==c.snapIndex?m.centeredSlides&&c.snapIndex<m.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=p,void c.emit("loopFix");let y=m.slidesPerView;"auto"===y?y=c.slidesPerViewDynamic():(y=Math.ceil(parseFloat(m.slidesPerView,10)),g&&y%2===0&&(y+=1));const A=m.slidesPerGroupAuto?y:m.slidesPerGroup;let b=g?Math.max(A,Math.ceil(y/2)):A;b%A!==0&&(b+=A-b%A),b+=m.loopAdditionalSlides,c.loopedSlides=b;const x=c.grid&&m.grid&&m.grid.rows>1;h.length<y+b||"cards"===c.params.effect&&h.length<y+2*b?Kee("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):x&&"row"===m.grid.fill&&Kee("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],w=[],E=x?Math.ceil(h.length/m.grid.rows):h.length,C=a&&E-v<y&&!g;let S=C?v:c.activeIndex;"undefined"===typeof o?o=c.getSlideIndex(h.find(e=>e.classList.contains(m.slideActiveClass))):S=o;const T="next"===i||!i,I="prev"===i||!i;let M=0,k=0;const R=(x?h[o].column:o)+(g&&"undefined"===typeof r?-y/2+.5:0);if(R<b){M=Math.max(b-R,A);for(let e=0;e<b-R;e+=1){const t=e-Math.floor(e/E)*E;if(x){const e=E-t-1;for(let t=h.length-1;t>=0;t-=1)h[t].column===e&&_.push(t)}else _.push(E-t-1)}}else if(R+y>E-b){k=Math.max(R-(E-2*b),A),C&&(k=Math.max(k,y-E+v+1));for(let e=0;e<k;e+=1){const t=e-Math.floor(e/E)*E;x?h.forEach((e,n)=>{e.column===t&&w.push(n)}):w.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),"cards"===c.params.effect&&h.length<y+2*b&&(w.includes(o)&&w.splice(w.indexOf(o),1),_.includes(o)&&_.splice(_.indexOf(o),1)),I&&_.forEach(e=>{h[e].swiperLoopMoveDOM=!0,f.prepend(h[e]),h[e].swiperLoopMoveDOM=!1}),T&&w.forEach(e=>{h[e].swiperLoopMoveDOM=!0,f.append(h[e]),h[e].swiperLoopMoveDOM=!1}),c.recalcSlides(),"auto"===m.slidesPerView?c.updateSlides():x&&(_.length>0&&I||w.length>0&&T)&&c.slides.forEach((e,t)=>{c.grid.updateSlide(t,e,c.slides)}),m.watchSlidesProgress&&c.updateSlidesOffset(),n)if(_.length>0&&I){if("undefined"===typeof t){const e=c.slidesGrid[S],t=c.slidesGrid[S+M]-e;l?c.setTranslate(c.translate-t):(c.slideTo(S+Math.ceil(M),0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(r){const e=x?_.length/m.grid.rows:_.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(w.length>0&&T)if("undefined"===typeof t){const e=c.slidesGrid[S],t=c.slidesGrid[S-k]-e;l?c.setTranslate(c.translate-t):(c.slideTo(S-k,0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=x?w.length/m.grid.rows:w.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=d,c.allowSlideNext=p,c.controller&&c.controller.control&&!s){const e={slideRealIndex:t,direction:i,setTranslate:r,activeSlideIndex:o,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix(u(u({},e),{},{slideTo:t.params.slidesPerView===m.slidesPerView&&n}))}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix(u(u({},e),{},{slideTo:c.controller.control.params.slidesPerView===m.slidesPerView&&n}))}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const i=[];e.slides.forEach(e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;i[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),i.forEach(e=>{n.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var wte={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}};function Ete(e,t,n){const i=zee(),{params:r}=e,o=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return!o||!(n<=a||n>=i.innerWidth-a)||"prevent"===o&&(t.preventDefault(),!0)}function Cte(e){const t=this,n=Nee();let i=e;i.originalEvent&&(i=i.originalEvent);const r=t.touchEventsData;if("pointerdown"===i.type){if(null!==r.pointerId&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else"touchstart"===i.type&&1===i.targetTouches.length&&(r.touchId=i.targetTouches[0].identifier);if("touchstart"===i.type)return void Ete(t,i,i.targetTouches[0].pageX);const{params:o,touches:a,enabled:s}=t;if(!s)return;if(!o.simulateTouch&&"mouse"===i.pointerType)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let l=i.target;if("wrapper"===o.touchEventsTarget&&!function(e,t){const n=zee();let i=t.contains(e);!i&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(i=[...t.assignedElements()].includes(e),i||(i=function(e,t){const n=[t];for(;n.length>0;){const t=n.shift();if(e===t)return!0;n.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t)));return i}(l,t.wrapperEl))return;if("which"in i&&3===i.which)return;if("button"in i&&i.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!o.noSwipingClass&&""!==o.noSwipingClass,u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);const h=o.noSwipingSelector?o.noSwipingSelector:".".concat(o.noSwipingClass),d=!(!i.target||!i.target.shadowRoot);if(o.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===Nee()||n===zee())return null;n.assignedSlot&&(n=n.assignedSlot);const i=n.closest(e);return i||n.getRootNode?i||t(n.getRootNode().host):null}(t)}(h,l):l.closest(h)))return void(t.allowClick=!0);if(o.swipeHandler&&!l.closest(o.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const p=a.currentX,f=a.currentY;if(!Ete(t,i,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,r.touchStartTime=jee(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let m=!0;l.matches(r.focusableElements)&&(m=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&("mouse"===i.pointerType||"mouse"!==i.pointerType&&!l.matches(r.focusableElements))&&n.activeElement.blur();const g=m&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!g||l.isContentEditable||i.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",i)}function Ste(e){const t=Nee(),n=this,i=n.touchEventsData,{params:r,touches:o,rtlTranslate:a,enabled:s}=n;if(!s)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==i.touchId)return;if(c.pointerId!==i.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].find(e=>e.identifier===i.touchId),!l||l.identifier!==i.touchId)return}else l=c;if(!i.isTouched)return void(i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",c));const u=l.pageX,h=l.pageY;if(c.preventedByNestedSwiper)return o.startX=u,void(o.startY=h);if(!n.allowTouchMove)return c.target.matches(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(o,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=jee()));if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(h<o.startY&&n.translate<=n.maxTranslate()||h>o.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else{if(a&&(u>o.startX&&-n.translate<=n.maxTranslate()||u<o.startX&&-n.translate>=n.minTranslate()))return;if(!a&&(u<o.startX&&n.translate<=n.maxTranslate()||u>o.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);i.allowTouchCallbacks&&n.emit("touchMove",c),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=u,o.currentY=h;const d=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(d**2+p**2)<n.params.threshold)return;if("undefined"===typeof i.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:d*d+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(d))/Math.PI,i.isScrolling=n.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",c),"undefined"===typeof i.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(i.startMoving=!0)),i.isScrolling||"touchmove"===c.type&&i.preventTouchMoveFromPointerMove)return void(i.isTouched=!1);if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let f=n.isHorizontal()?d:p,m=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(f=Math.abs(f)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),o.diff=f,f*=r.touchRatio,a&&(f=-f,m=-m);const g=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const v=n.params.loop&&!r.cssMode,y="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!i.isMoved){if(v&&y&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(e)}i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}if((new Date).getTime(),!1!==r._loopSwapReset&&i.isMoved&&i.allowThresholdMove&&g!==n.touchesDirection&&v&&y&&Math.abs(f)>=1)return Object.assign(o,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,void(i.startTranslate=i.currentTranslate);n.emit("sliderMove",c),i.isMoved=!0,i.currentTranslate=f+i.startTranslate;let A=!0,b=r.resistanceRatio;if(r.touchReleaseOnEdges&&(b=0),f>0?(v&&y&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+f)**b))):f<0&&(v&&y&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===r.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-f)**b))),A&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(f)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function Tte(e){const t=this,n=t.touchEventsData;let i,r=e;r.originalEvent&&(r=r.originalEvent);if("touchend"===r.type||"touchcancel"===r.type){if(i=[...r.changedTouches].find(e=>e.identifier===n.touchId),!i||i.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(r.pointerId!==n.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){if(!(["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:o,touches:a,rtlTranslate:s,slidesGrid:l,enabled:c}=t;if(!c)return;if(!o.simulateTouch&&"mouse"===r.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);o.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=jee(),h=u-n.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),h<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(n.lastClickTime=jee(),Uee(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=o.followFinger?s?t.translate:-t.translate:-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});const p=d>=-t.maxTranslate()&&!t.params.loop;let f=0,m=t.slidesSizesGrid[0];for(let b=0;b<l.length;b+=b<o.slidesPerGroupSkip?1:o.slidesPerGroup){const e=b<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;"undefined"!==typeof l[b+e]?(p||d>=l[b]&&d<l[b+e])&&(f=b,m=l[b+e]-l[b]):(p||d>=l[b])&&(f=b,m=l[l.length-1]-l[l.length-2])}let g=null,v=null;o.rewind&&(t.isBeginning?v=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const y=(d-l[f])/m,A=f<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(h>o.longSwipesMs){if(!o.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?g:f+A):t.slideTo(f)),"prev"===t.swipeDirection&&(y>1-o.longSwipesRatio?t.slideTo(f+A):null!==v&&y<0&&Math.abs(y)>o.longSwipesRatio?t.slideTo(v):t.slideTo(f))}else{if(!o.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl)?r.target===t.navigation.nextEl?t.slideTo(f+A):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+A),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:f))}}function Ite(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:o}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const s=a&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||s?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function Mte(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function kte(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:i}=e;if(!i)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();r=0===o?0:(e.translate-e.minTranslate())/o,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Rte(e){const t=this;fte(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function Lte(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Bte=(e,t)=>{const n=Nee(),{params:i,el:r,wrapperEl:o,device:a}=e,s=!!i.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;r&&"string"!==typeof r&&(n[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:s}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("touchmove",e.onTouchMove,{passive:!1,capture:s}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:s}),n[l]("touchend",e.onTouchEnd,{passive:!0}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("touchcancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",e.onClick,!0),i.cssMode&&o[l]("scroll",e.onScroll),i.updateOnWindowResize?e[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ite,!0):e[c]("observerUpdate",Ite,!0),r[l]("load",e.onLoad,{capture:!0}))};var Pte={attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Cte.bind(e),e.onTouchMove=Ste.bind(e),e.onTouchEnd=Tte.bind(e),e.onDocumentTouchStart=Lte.bind(e),t.cssMode&&(e.onScroll=kte.bind(e)),e.onClick=Mte.bind(e),e.onLoad=Rte.bind(e),Bte(e,"on")},detachEvents:function(){Bte(this,"off")}};const Dte=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Ote={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:i,el:r}=e,o=i.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const a=Nee(),s="window"!==i.breakpointsBase&&i.breakpointsBase?"container":i.breakpointsBase,l=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?e.el:a.querySelector(i.breakpointsBase),c=e.getBreakpoint(o,s,l);if(!c||e.currentBreakpoint===c)return;const u=(c in o?o[c]:void 0)||e.originalParams,h=Dte(e,i),d=Dte(e,u),p=e.params.grabCursor,f=u.grabCursor,m=i.enabled;h&&!d?(r.classList.remove("".concat(i.containerModifierClass,"grid"),"".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()):!h&&d&&(r.classList.add("".concat(i.containerModifierClass,"grid")),(u.grid.fill&&"column"===u.grid.fill||!u.grid.fill&&"column"===i.grid.fill)&&r.classList.add("".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()),p&&!f?e.unsetGrabCursor():!p&&f&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if("undefined"===typeof u[t])return;const n=i[t]&&i[t].enabled,r=u[t]&&u[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()});const g=u.direction&&u.direction!==i.direction,v=i.loop&&(u.slidesPerView!==i.slidesPerView||g),y=i.loop;g&&n&&e.changeDirection(),Qee(e.params,u);const A=e.params.enabled,b=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),m&&!A?e.disable():!m&&A&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",u),n&&(v?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!y&&b?(e.loopCreate(t),e.updateSlides()):y&&!b&&e.loopDestroy()),e.emit("breakpoint",u)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let i=!1;const r=zee(),o="window"===t?r.innerHeight:n.clientHeight,a=Object.keys(e).map(e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let s=0;s<a.length;s+=1){const{point:e,value:o}=a[s];"window"===t?r.matchMedia("(min-width: ".concat(o,"px)")).matches&&(i=e):o<=n.clientWidth&&(i=e)}return i||"max"}};var Nte={addClasses:function(){const e=this,{classNames:t,params:n,rtl:i,el:r,device:o}=e,a=function(e,t){const n=[];return e.forEach(e=>{"object"===typeof e?Object.keys(e).forEach(i=>{e[i]&&n.push(t+i)}):"string"===typeof e&&n.push(t+e)}),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...a),r.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!==typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}};var Fte={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:i}=n;if(i){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*i;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},zte={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Ute(e,t){return function(n){void 0===n&&(n={});const i=Object.keys(n)[0],r=n[i];"object"===typeof r&&null!==r?(!0===e[i]&&(e[i]={enabled:!0}),"navigation"===i&&e[i]&&e[i].enabled&&!e[i].prevEl&&!e[i].nextEl&&(e[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&e[i]&&e[i].enabled&&!e[i].el&&(e[i].auto=!0),i in e&&"enabled"in r?("object"!==typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),Qee(t,n)):Qee(t,n)):Qee(t,n)}}const jte={eventsEmitter:hte,update:vte,translate:yte,transition:bte,slide:xte,loop:_te,grabCursor:wte,events:Pte,breakpoints:Ote,checkOverflow:Fte,classes:Nte},Vte={};class Hte{constructor(){let e,t;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?t=i[0]:[e,t]=i,t||(t={}),t=Qee({},t),e&&!t.el&&(t.el=e);const o=Nee();if(t.el&&"string"===typeof t.el&&o.querySelectorAll(t.el).length>1){const e=[];return o.querySelectorAll(t.el).forEach(n=>{const i=Qee({},t,{el:n});e.push(new Hte(i))}),e}const a=this;a.__swiper__=!0,a.support=lte(),a.device=cte({userAgent:t.userAgent}),a.browser=ute(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const s={};a.modules.forEach(e=>{e({params:t,swiper:a,extendParams:Ute(t,s),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const l=Qee({},zte,s);return a.params=Qee({},l,Vte,t),a.originalParams=Qee({},a.params),a.passedParams=Qee({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(e=>{a.on(e,a.params.on[e])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===a.params.direction,isVertical:()=>"vertical"===a.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,i=ete(Yee(t,".".concat(n.slideClass,", swiper-slide"))[0]);return ete(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&("column"===this.params.grid.fill?e=Math.floor(e/this.params.grid.rows):"row"===this.params.grid.fill&&(e%=Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Yee(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:i,slidesGrid:r,slidesSizesGrid:o,size:a,activeIndex:s}=this;let l=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=i[s]?Math.ceil(i[s].swiperSlideSize):0;for(let n=s+1;n<i.length;n+=1)i[n]&&!e&&(t+=Math.ceil(i[n].swiperSlideSize),l+=1,t>a&&(e=!0));for(let n=s-1;n>=0;n-=1)i[n]&&!e&&(t+=i[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let c=s+1;c<i.length;c+=1){(t?r[c]+o[c]-r[s]<a:r[c]-r[s]<a)&&(l+=1)}else for(let c=s-1;c>=0;c-=1){r[s]-r[c]<a&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function i(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&fte(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)i(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||i()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(i)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let r=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(i())}return Yee(n,i())[0]})();return!r&&t.params.createElements&&(r=Jee("div",t.params.wrapperClass),n.append(r),Yee(n,".".concat(t.params.slideClass)).forEach(e=>{r.append(e)})),Object.assign(t,{el:n,wrapperEl:r,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:r,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===$ee(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===$ee(n,"direction")),wrongRTL:"-webkit-box"===$ee(r,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(e=>{e.complete?fte(t,e):e.addEventListener("load",e=>{fte(t,e.target)})}),gte(t),t.initialized=!0,gte(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:i,el:r,wrapperEl:o,slides:a}=n;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r&&"string"!==typeof r&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(e=>{n.off(e)}),!1!==e&&(n.el&&"string"!==typeof n.el&&(n.el.swiper=null),function(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(QJ){}try{delete t[e]}catch(QJ){}})}(n)),n.destroyed=!0),null}static extendDefaults(e){Qee(Vte,e)}static get extendedDefaults(){return Vte}static get defaults(){return zte}static installModule(e){Hte.prototype.__modules__||(Hte.prototype.__modules__=[]);const t=Hte.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(e=>Hte.installModule(e)),Hte):(Hte.installModule(e),Hte)}}Object.keys(jte).forEach(e=>{Object.keys(jte[e]).forEach(t=>{Hte.prototype[t]=jte[e][t]})}),Hte.use([function(e){let{swiper:t,on:n,emit:i}=e;const r=zee();let o=null,a=null;const s=()=>{t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",()=>{t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(o=new ResizeObserver(e=>{a=r.requestAnimationFrame(()=>{const{width:n,height:i}=t;let r=n,o=i;e.forEach(e=>{let{contentBoxSize:n,contentRect:i,target:a}=e;a&&a!==t.el||(r=i?i.width:(n[0]||n).inlineSize,o=i?i.height:(n[0]||n).blockSize)}),r===n&&o===i||s()})}),o.observe(t.el)):(r.addEventListener("resize",s),r.addEventListener("orientationchange",l))}),n("destroy",()=>{a&&r.cancelAnimationFrame(a),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",l)})},function(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const o=[],a=zee(),s=function(e,n){void 0===n&&(n={});const i=new(a.MutationObserver||a.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const n=function(){r("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(n):a.setTimeout(n,0)});i.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:t.isElement||("undefined"===typeof n.childList||n).childList,characterData:"undefined"===typeof n.characterData||n.characterData}),o.push(i)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=tte(t.hostEl);for(let t=0;t<e.length;t+=1)s(e[t])}s(t.hostEl,{childList:t.params.observeSlideChildren}),s(t.wrapperEl,{attributes:!1})}}),i("destroy",()=>{o.forEach(e=>{e.disconnect()}),o.splice(0,o.length)})}]);const Gte=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Qte(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function Wte(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>n.indexOf(e)<0).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:Qte(t[n])&&Qte(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Wte(e[n],t[n]):e[n]=t[n]})}function qte(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function Xte(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function Yte(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function Kte(e){void 0===e&&(e="");const t=e.split(" ").map(e=>e.trim()).filter(e=>!!e),n=[];return t.forEach(e=>{n.indexOf(e)<0&&n.push(e)}),n.join(" ")}function Jte(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}const Zte=["className","tag","wrapperTag","children","onSwiper"],$te=["tag","children","className","swiper","zoom","lazy","virtualIndex","swiperSlideIndex"];function ene(){return ene=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ene.apply(this,arguments)}function tne(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function nne(e){const t=[];return i.Children.toArray(e).forEach(e=>{tne(e)?t.push(e):e.props&&e.props.children&&nne(e.props.children).forEach(e=>t.push(e))}),t}function ine(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return i.Children.toArray(e).forEach(e=>{if(tne(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const i=nne(e.props.children);i.length>0?i.forEach(e=>t.push(e)):n["container-end"].push(e)}else n["container-end"].push(e)}),{slides:t,slots:n}}function rne(e,t){return"undefined"===typeof window?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)}const one=(0,i.createContext)(null),ane=(0,i.createContext)(null),sne=(0,i.forwardRef)(function(e,t){let n=void 0===e?{}:e,{className:r,tag:o="div",wrapperTag:a="div",children:s,onSwiper:l}=n,c=fK(n,Zte),h=!1;const[d,p]=(0,i.useState)("swiper"),[f,m]=(0,i.useState)(null),[g,v]=(0,i.useState)(!1),y=(0,i.useRef)(!1),A=(0,i.useRef)(null),b=(0,i.useRef)(null),x=(0,i.useRef)(null),_=(0,i.useRef)(null),w=(0,i.useRef)(null),E=(0,i.useRef)(null),C=(0,i.useRef)(null),S=(0,i.useRef)(null),{params:T,passedParams:I,rest:M,events:k}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},i={},r={};Wte(n,zte),n._emitClasses=!0,n.init=!1;const o={},a=Gte.map(e=>e.replace(/_/,"")),s=Object.assign({},e);return Object.keys(s).forEach(s=>{"undefined"!==typeof e[s]&&(a.indexOf(s)>=0?Qte(e[s])?(n[s]={},r[s]={},Wte(n[s],e[s]),Wte(r[s],e[s])):(n[s]=e[s],r[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"===typeof e[s]?t?i["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:n.on["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:o[s]=e[s])}),["navigation","pagination","scrollbar"].forEach(e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]}),{params:n,passedParams:r,rest:o,events:i}}(c),{slides:R,slots:L}=ine(s),B=()=>{v(!g)};Object.assign(T.on,{_containerClasses(e,t){p(t)}});const P=()=>{Object.assign(T.on,k),h=!0;const e=u({},T);if(delete e.wrapperClass,b.current=new Hte(e),b.current.virtual&&b.current.params.virtual.enabled){b.current.virtual.slides=R;const e={cache:!1,slides:R,renderExternal:m,renderExternalUpdate:!1};Wte(b.current.params.virtual,e),Wte(b.current.originalParams.virtual,e)}};A.current||P(),b.current&&b.current.on("_beforeBreakpoint",B);return(0,i.useEffect)(()=>()=>{b.current&&b.current.off("_beforeBreakpoint",B)}),(0,i.useEffect)(()=>{!y.current&&b.current&&(b.current.emitSlidesClasses(),y.current=!0)}),rne(()=>{if(t&&(t.current=A.current),A.current)return b.current.destroyed&&P(),function(e,t){let{el:n,nextEl:i,prevEl:r,paginationEl:o,scrollbarEl:a,swiper:s}=e;qte(t)&&i&&r&&(s.params.navigation.nextEl=i,s.originalParams.navigation.nextEl=i,s.params.navigation.prevEl=r,s.originalParams.navigation.prevEl=r),Xte(t)&&o&&(s.params.pagination.el=o,s.originalParams.pagination.el=o),Yte(t)&&a&&(s.params.scrollbar.el=a,s.originalParams.scrollbar.el=a),s.init(n)}({el:A.current,nextEl:w.current,prevEl:E.current,paginationEl:C.current,scrollbarEl:S.current,swiper:b.current},T),l&&!b.current.destroyed&&l(b.current),()=>{b.current&&!b.current.destroyed&&b.current.destroy(!0,!1)}},[]),rne(()=>{!h&&k&&b.current&&Object.keys(k).forEach(e=>{b.current.on(e,k[e])});const e=function(e,t,n,i,r){const o=[];if(!t)return o;const a=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&i){const e=i.map(r),t=n.map(r);e.join("")!==t.join("")&&a("children"),i.length!==n.length&&a("children")}return Gte.filter(e=>"_"===e[0]).map(e=>e.replace(/_/,"")).forEach(n=>{if(n in e&&n in t)if(Qte(e[n])&&Qte(t[n])){const i=Object.keys(e[n]),r=Object.keys(t[n]);i.length!==r.length?a(n):(i.forEach(i=>{e[n][i]!==t[n][i]&&a(n)}),r.forEach(i=>{e[n][i]!==t[n][i]&&a(n)}))}else e[n]!==t[n]&&a(n)}),o}(I,x.current,R,_.current,e=>e.key);return x.current=I,_.current=R,e.length&&b.current&&!b.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:i,changedParams:r,nextEl:o,prevEl:a,scrollbarEl:s,paginationEl:l}=e;const c=r.filter(e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e),{params:u,pagination:h,navigation:d,scrollbar:p,virtual:f,thumbs:m}=t;let g,v,y,A,b,x,_,w;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&!i.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(g=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(v=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||!1===u.pagination)&&h&&!h.el&&(y=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||s)&&(u.scrollbar||!1===u.scrollbar)&&p&&!p.el&&(A=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||o)&&(u.navigation||!1===u.navigation)&&d&&!d.prevEl&&!d.nextEl&&(b=!0);const E=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),u[e].prevEl=void 0,u[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),u[e].el=void 0,t[e].el=void 0))};r.includes("loop")&&t.isElement&&(u.loop&&!i.loop?x=!0:!u.loop&&i.loop?_=!0:w=!0),c.forEach(e=>{if(Qte(u[e])&&Qte(i[e]))Object.assign(u[e],i[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in i[e])||i[e].enabled||E(e);else{const t=i[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?u[e]=i[e]:!1===t&&E(e)}}),c.includes("controller")&&!v&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),r.includes("children")&&n&&f&&u.virtual.enabled?(f.slides=n,f.update(!0)):r.includes("virtual")&&f&&u.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),r.includes("children")&&n&&u.loop&&(w=!0),g&&m.init()&&m.update(!0);v&&(t.controller.control=u.controller.control),y&&(!t.isElement||l&&"string"!==typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(u.pagination.el=l),h.init(),h.render(),h.update()),A&&(!t.isElement||s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-scrollbar"),s.part.add("scrollbar"),t.el.appendChild(s)),s&&(u.scrollbar.el=s),p.init(),p.updateSize(),p.setTranslate()),b&&(t.isElement&&(o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-button-next"),rte(o,t.hostEl.constructor.nextButtonSvg),o.part.add("button-next"),t.el.appendChild(o)),a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-button-prev"),rte(a,t.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),t.el.appendChild(a))),o&&(u.navigation.nextEl=o),a&&(u.navigation.prevEl=a),d.init(),d.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&t.changeDirection(i.direction,!1),(x||w)&&t.loopDestroy(),(_||w)&&t.loopCreate(),t.update()}({swiper:b.current,slides:R,passedParams:I,changedParams:e,nextEl:w.current,prevEl:E.current,scrollbarEl:S.current,paginationEl:C.current}),()=>{k&&b.current&&Object.keys(k).forEach(e=>{b.current.off(e,k[e])})}}),rne(()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(b.current)},[f]),i.createElement(o,ene({ref:A,className:Kte("".concat(d).concat(r?" ".concat(r):""))},M),i.createElement(ane.Provider,{value:b.current},L["container-start"],i.createElement(a,{className:Jte(T.wrapperClass)},L["wrapper-start"],T.virtual?function(e,t,n){if(!n)return null;const r=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},o=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:"".concat(n.offset,"px")}:{top:"".concat(n.offset,"px")},{from:a,to:s}=n,l=e.params.loop?-t.length:0,c=e.params.loop?2*t.length:t.length,u=[];for(let i=l;i<c;i+=1)i>=a&&i<=s&&u.push(t[r(i)]);return u.map((t,n)=>i.cloneElement(t,{swiper:e,style:o,key:t.props.virtualIndex||t.key||"slide-".concat(n)}))}(b.current,R,f):R.map((e,t)=>i.cloneElement(e,{swiper:b.current,swiperSlideIndex:t})),L["wrapper-end"]),qte(T)&&i.createElement(i.Fragment,null,i.createElement("div",{ref:E,className:"swiper-button-prev"}),i.createElement("div",{ref:w,className:"swiper-button-next"})),Yte(T)&&i.createElement("div",{ref:S,className:"swiper-scrollbar"}),Xte(T)&&i.createElement("div",{ref:C,className:"swiper-pagination"}),L["container-end"]))});sne.displayName="Swiper";const lne=(0,i.forwardRef)(function(e,t){let n=void 0===e?{}:e,{tag:r="div",children:o,className:a="",swiper:s,zoom:l,lazy:c,virtualIndex:u,swiperSlideIndex:h}=n,d=fK(n,$te);const p=(0,i.useRef)(null),[f,m]=(0,i.useState)("swiper-slide"),[g,v]=(0,i.useState)(!1);function y(e,t,n){t===p.current&&m(n)}rne(()=>{if("undefined"!==typeof h&&(p.current.swiperSlideIndex=h),t&&(t.current=p.current),p.current&&s){if(!s.destroyed)return s.on("_slideClass",y),()=>{s&&s.off("_slideClass",y)};"swiper-slide"!==f&&m("swiper-slide")}}),rne(()=>{s&&p.current&&!s.destroyed&&m(s.getSlideClasses(p.current))},[s]);const A={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},b=()=>"function"===typeof o?o(A):o;return i.createElement(r,ene({ref:p,className:Kte("".concat(f).concat(a?" ".concat(a):"")),"data-swiper-slide-index":u,onLoad:()=>{v(!0)}},d),l&&i.createElement(one.Provider,{value:A},i.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof l?l:void 0},b(),c&&!g&&i.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&i.createElement(one.Provider,{value:A},b(),c&&!g&&i.createElement("div",{className:"swiper-lazy-preloader"})))});function cne(e,t,n,i){return e.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&!0===n.auto){let o=Yee(e.el,".".concat(i[r]))[0];o||(o=Jee("div",i[r]),o.className=i[r],e.el.append(o)),n[r]=o,t[r]=o}}),n}function une(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;function o(e){let n;return e&&"string"===typeof e&&t.isElement&&(n=t.el.querySelector(e)||t.hostEl.querySelector(e),n)?n:(e&&("string"===typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&n&&n.length>1&&1===t.el.querySelectorAll(e).length?n=t.el.querySelector(e):n&&1===n.length&&(n=n[0])),e&&!n?e:n)}function a(e,n){const i=t.params.navigation;(e=ite(e)).forEach(e=>{e&&(e.classList[n?"add":"remove"](...i.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](i.lockClass))})}function s(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return a(n,!1),void a(e,!1);a(n,t.isBeginning&&!t.params.rewind),a(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function u(){const e=t.params.navigation;if(t.params.navigation=cne(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=o(e.nextEl),i=o(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:i}),n=ite(n),i=ite(i);const r=(n,i)=>{n&&n.addEventListener("click","next"===i?c:l),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach(e=>r(e,"next")),i.forEach(e=>r(e,"prev"))}function h(){let{nextEl:e,prevEl:n}=t.navigation;e=ite(e),n=ite(n);const i=(e,n)=>{e.removeEventListener("click","next"===n?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(e=>i(e,"next")),n.forEach(e=>i(e,"prev"))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},i("init",()=>{!1===t.params.navigation.enabled?d():(u(),s())}),i("toEdge fromEdge lock unlock",()=>{s()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:e,prevEl:n}=t.navigation;e=ite(e),n=ite(n),t.enabled?s():[...e,...n].filter(e=>!!e).forEach(e=>e.classList.add(t.params.navigation.lockClass))}),i("click",(e,n)=>{let{nextEl:i,prevEl:o}=t.navigation;i=ite(i),o=ite(o);const a=n.target;let s=o.includes(a)||i.includes(a);if(t.isElement&&!s){const e=n.path||n.composedPath&&n.composedPath();e&&(s=e.find(e=>i.includes(e)||o.includes(e)))}if(t.params.navigation.hideOnClick&&!s){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===a||t.pagination.el.contains(a)))return;let e;i.length?e=i[0].classList.contains(t.params.navigation.hiddenClass):o.length&&(e=o[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...i,...o].filter(e=>!!e).forEach(e=>e.classList.toggle(t.params.navigation.hiddenClass))}});const d=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),s()},disable:d,update:s,init:u,destroy:h})}function hne(e){return void 0===e&&(e=""),".".concat(e.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,"."))}function dne(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const o="swiper-pagination";let a;n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical"),paginationDisabledClass:"".concat(o,"-disabled")}}),t.pagination={el:null,bullets:[]};let s=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,n){const{bulletActiveClass:i}=t.params.pagination;e&&(e=e["".concat("prev"===n?"previous":"next","ElementSibling")])&&(e.classList.add("".concat(i,"-").concat(n)),(e=e["".concat("prev"===n?"previous":"next","ElementSibling")])&&e.classList.add("".concat(i,"-").concat(n,"-").concat(n)))}function u(e){const n=e.target.closest(hne(t.params.pagination.bulletClass));if(!n)return;e.preventDefault();const i=ete(n)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===i)return;const e=(r=t.realIndex,o=i,a=t.slides.length,(o%=a)===1+(r%=a)?"next":o===r-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(i)}else t.slideTo(i);var r,o,a}function h(){const e=t.rtl,n=t.params.pagination;if(l())return;let i,o,u=t.pagination.el;u=ite(u);const h=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,d=t.params.loop?Math.ceil(h/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(o=t.previousRealIndex||0,i=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):"undefined"!==typeof t.snapIndex?(i=t.snapIndex,o=t.previousSnapIndex):(o=t.previousIndex||0,i=t.activeIndex||0),"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const r=t.pagination.bullets;let l,h,d;if(n.dynamicBullets&&(a=nte(r[0],t.isHorizontal()?"width":"height",!0),u.forEach(e=>{e.style[t.isHorizontal()?"width":"height"]="".concat(a*(n.dynamicMainBullets+4),"px")}),n.dynamicMainBullets>1&&void 0!==o&&(s+=i-(o||0),s>n.dynamicMainBullets-1?s=n.dynamicMainBullets-1:s<0&&(s=0)),l=Math.max(i-s,0),h=l+(Math.min(r.length,n.dynamicMainBullets)-1),d=(h+l)/2),r.forEach(e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>"".concat(n.bulletActiveClass).concat(e))].map(e=>"string"===typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),u.length>1)r.forEach(e=>{const r=ete(e);r===i?e.classList.add(...n.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),n.dynamicBullets&&(r>=l&&r<=h&&e.classList.add(..."".concat(n.bulletActiveClass,"-main").split(" ")),r===l&&c(e,"prev"),r===h&&c(e,"next"))});else{const e=r[i];if(e&&e.classList.add(...n.bulletActiveClass.split(" ")),t.isElement&&r.forEach((e,t)=>{e.setAttribute("part",t===i?"bullet-active":"bullet")}),n.dynamicBullets){const e=r[l],t=r[h];for(let i=l;i<=h;i+=1)r[i]&&r[i].classList.add(..."".concat(n.bulletActiveClass,"-main").split(" "));c(e,"prev"),c(t,"next")}}if(n.dynamicBullets){const i=Math.min(r.length,n.dynamicMainBullets+4),o=(a*i-a)/2-d*a,s=e?"right":"left";r.forEach(e=>{e.style[t.isHorizontal()?s:"top"]="".concat(o,"px")})}}u.forEach((e,o)=>{if("fraction"===n.type&&(e.querySelectorAll(hne(n.currentClass)).forEach(e=>{e.textContent=n.formatFractionCurrent(i+1)}),e.querySelectorAll(hne(n.totalClass)).forEach(e=>{e.textContent=n.formatFractionTotal(d)})),"progressbar"===n.type){let r;r=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const o=(i+1)/d;let a=1,s=1;"horizontal"===r?a=o:s=o,e.querySelectorAll(hne(n.progressbarFillClass)).forEach(e=>{e.style.transform="translate3d(0,0,0) scaleX(".concat(a,") scaleY(").concat(s,")"),e.style.transitionDuration="".concat(t.params.speed,"ms")})}"custom"===n.type&&n.renderCustom?(rte(e,n.renderCustom(t,i+1,d)),0===o&&r("paginationRender",e)):(0===o&&r("paginationRender",e),r("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass)})}function d(){const e=t.params.pagination;if(l())return;const n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let i=t.pagination.el;i=ite(i);let o="";if("bullets"===e.type){let i=t.params.loop?Math.ceil(n/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&i>n&&(i=n);for(let n=0;n<i;n+=1)e.renderBullet?o+=e.renderBullet.call(t,n,e.bulletClass):o+="<".concat(e.bulletElement," ").concat(t.isElement?'part="bullet"':"",' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">")}"fraction"===e.type&&(o=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>')),"progressbar"===e.type&&(o=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>')),t.pagination.bullets=[],i.forEach(n=>{"custom"!==e.type&&rte(n,o||""),"bullets"===e.type&&t.pagination.bullets.push(...n.querySelectorAll(hne(e.bulletClass)))}),"custom"!==e.type&&r("paginationRender",i[0])}function p(){t.params.pagination=cne(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let n;"string"===typeof e.el&&t.isElement&&(n=t.el.querySelector(e.el)),n||"string"!==typeof e.el||(n=[...document.querySelectorAll(e.el)]),n||(n=e.el),n&&0!==n.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&Array.isArray(n)&&n.length>1&&(n=[...t.el.querySelectorAll(e.el)],n.length>1&&(n=n.find(e=>tte(e,".swiper")[0]===t.el))),Array.isArray(n)&&1===n.length&&(n=n[0]),Object.assign(t.pagination,{el:n}),n=ite(n),n.forEach(n=>{"bullets"===e.type&&e.clickable&&n.classList.add(...(e.clickableClass||"").split(" ")),n.classList.add(e.modifierClass+e.type),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(n.classList.add("".concat(e.modifierClass).concat(e.type,"-dynamic")),s=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.classList.add(e.progressbarOppositeClass),e.clickable&&n.addEventListener("click",u),t.enabled||n.classList.add(e.lockClass)}))}function f(){const e=t.params.pagination;if(l())return;let n=t.pagination.el;n&&(n=ite(n),n.forEach(n=>{n.classList.remove(e.hiddenClass),n.classList.remove(e.modifierClass+e.type),n.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(n.classList.remove(...(e.clickableClass||"").split(" ")),n.removeEventListener("click",u))})),t.pagination.bullets&&t.pagination.bullets.forEach(t=>t.classList.remove(...e.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:n}=t.pagination;n=ite(n),n.forEach(n=>{n.classList.remove(e.horizontalClass,e.verticalClass),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),i("init",()=>{!1===t.params.pagination.enabled?m():(p(),d(),h())}),i("activeIndexChange",()=>{"undefined"===typeof t.snapIndex&&h()}),i("snapIndexChange",()=>{h()}),i("snapGridLengthChange",()=>{d(),h()}),i("destroy",()=>{f()}),i("enable disable",()=>{let{el:e}=t.pagination;e&&(e=ite(e),e.forEach(e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),i("lock unlock",()=>{h()}),i("click",(e,n)=>{const i=n.target,o=ite(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&o&&o.length>0&&!i.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&i===t.navigation.nextEl||t.navigation.prevEl&&i===t.navigation.prevEl))return;const e=o[0].classList.contains(t.params.pagination.hiddenClass);r(!0===e?"paginationShow":"paginationHide"),o.forEach(e=>e.classList.toggle(t.params.pagination.hiddenClass))}});const m=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=ite(e),e.forEach(e=>e.classList.add(t.params.pagination.paginationDisabledClass))),f()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=ite(e),e.forEach(e=>e.classList.remove(t.params.pagination.paginationDisabledClass))),p(),d(),h()},disable:m,render:d,update:h,init:p,destroy:f})}function pne(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const o=zee();n({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};let a=1,s=!1,l=!1,c={x:0,y:0};let u,h;const d=[],p={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},f={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},m={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let g,v=1;function y(){if(d.length<2)return 1;const e=d[0].pageX,t=d[0].pageY,n=d[1].pageX,i=d[1].pageY;return Math.sqrt((n-e)**2+(i-t)**2)}function A(){const e=t.params.zoom,n=p.imageWrapEl.getAttribute("data-swiper-zoom")||e.maxRatio;if(e.limitToOriginalSize&&p.imageEl&&p.imageEl.naturalWidth){const e=p.imageEl.naturalWidth/p.imageEl.offsetWidth;return Math.min(e,n)}return n}function b(e){const n=t.isElement?"swiper-slide":".".concat(t.params.slideClass);return!!e.target.matches(n)||t.slides.filter(t=>t.contains(e.target)).length>0}function x(e){const n=".".concat(t.params.zoom.containerClass);return!!e.target.matches(n)||[...t.hostEl.querySelectorAll(n)].filter(t=>t.contains(e.target)).length>0}function _(e){if("mouse"===e.pointerType&&d.splice(0,d.length),!b(e))return;const n=t.params.zoom;if(u=!1,h=!1,d.push(e),!(d.length<2)){if(u=!0,p.scaleStart=y(),!p.slideEl){p.slideEl=e.target.closest(".".concat(t.params.slideClass,", swiper-slide")),p.slideEl||(p.slideEl=t.slides[t.activeIndex]);let i=p.slideEl.querySelector(".".concat(n.containerClass));if(i&&(i=i.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),p.imageEl=i,p.imageWrapEl=i?tte(p.imageEl,".".concat(n.containerClass))[0]:void 0,!p.imageWrapEl)return void(p.imageEl=void 0);p.maxRatio=A()}if(p.imageEl){const[e,t]=function(){if(d.length<2)return{x:null,y:null};const e=p.imageEl.getBoundingClientRect();return[(d[0].pageX+(d[1].pageX-d[0].pageX)/2-e.x-o.scrollX)/a,(d[0].pageY+(d[1].pageY-d[0].pageY)/2-e.y-o.scrollY)/a]}();p.originX=e,p.originY=t,p.imageEl.style.transitionDuration="0ms"}s=!0}}function w(e){if(!b(e))return;const n=t.params.zoom,i=t.zoom,r=d.findIndex(t=>t.pointerId===e.pointerId);r>=0&&(d[r]=e),d.length<2||(h=!0,p.scaleMove=y(),p.imageEl&&(i.scale=p.scaleMove/p.scaleStart*a,i.scale>p.maxRatio&&(i.scale=p.maxRatio-1+(i.scale-p.maxRatio+1)**.5),i.scale<n.minRatio&&(i.scale=n.minRatio+1-(n.minRatio-i.scale+1)**.5),p.imageEl.style.transform="translate3d(0,0,0) scale(".concat(i.scale,")")))}function E(e){if(!b(e))return;if("mouse"===e.pointerType&&"pointerout"===e.type)return;const n=t.params.zoom,i=t.zoom,r=d.findIndex(t=>t.pointerId===e.pointerId);r>=0&&d.splice(r,1),u&&h&&(u=!1,h=!1,p.imageEl&&(i.scale=Math.max(Math.min(i.scale,p.maxRatio),n.minRatio),p.imageEl.style.transitionDuration="".concat(t.params.speed,"ms"),p.imageEl.style.transform="translate3d(0,0,0) scale(".concat(i.scale,")"),a=i.scale,s=!1,i.scale>1&&p.slideEl?p.slideEl.classList.add("".concat(n.zoomedSlideClass)):i.scale<=1&&p.slideEl&&p.slideEl.classList.remove("".concat(n.zoomedSlideClass)),1===i.scale&&(p.originX=0,p.originY=0,p.slideEl=void 0)))}function C(){t.touchEventsData.preventTouchMoveFromPointerMove=!1}function S(e){const n="mouse"===e.pointerType&&t.params.zoom.panOnMouseMove;if(!b(e)||!x(e))return;const i=t.zoom;if(!p.imageEl)return;if(!f.isTouched||!p.slideEl)return void(n&&I(e));if(n)return void I(e);f.isMoved||(f.width=p.imageEl.offsetWidth||p.imageEl.clientWidth,f.height=p.imageEl.offsetHeight||p.imageEl.clientHeight,f.startX=Vee(p.imageWrapEl,"x")||0,f.startY=Vee(p.imageWrapEl,"y")||0,p.slideWidth=p.slideEl.offsetWidth,p.slideHeight=p.slideEl.offsetHeight,p.imageWrapEl.style.transitionDuration="0ms");const r=f.width*i.scale,o=f.height*i.scale;f.minX=Math.min(p.slideWidth/2-r/2,0),f.maxX=-f.minX,f.minY=Math.min(p.slideHeight/2-o/2,0),f.maxY=-f.minY,f.touchesCurrent.x=d.length>0?d[0].pageX:e.pageX,f.touchesCurrent.y=d.length>0?d[0].pageY:e.pageY;if(Math.max(Math.abs(f.touchesCurrent.x-f.touchesStart.x),Math.abs(f.touchesCurrent.y-f.touchesStart.y))>5&&(t.allowClick=!1),!f.isMoved&&!s){if(t.isHorizontal()&&(Math.floor(f.minX)===Math.floor(f.startX)&&f.touchesCurrent.x<f.touchesStart.x||Math.floor(f.maxX)===Math.floor(f.startX)&&f.touchesCurrent.x>f.touchesStart.x))return f.isTouched=!1,void C();if(!t.isHorizontal()&&(Math.floor(f.minY)===Math.floor(f.startY)&&f.touchesCurrent.y<f.touchesStart.y||Math.floor(f.maxY)===Math.floor(f.startY)&&f.touchesCurrent.y>f.touchesStart.y))return f.isTouched=!1,void C()}e.cancelable&&e.preventDefault(),e.stopPropagation(),clearTimeout(g),t.touchEventsData.preventTouchMoveFromPointerMove=!0,g=setTimeout(()=>{t.destroyed||C()}),f.isMoved=!0;const l=(i.scale-a)/(p.maxRatio-t.params.zoom.minRatio),{originX:c,originY:u}=p;f.currentX=f.touchesCurrent.x-f.touchesStart.x+f.startX+l*(f.width-2*c),f.currentY=f.touchesCurrent.y-f.touchesStart.y+f.startY+l*(f.height-2*u),f.currentX<f.minX&&(f.currentX=f.minX+1-(f.minX-f.currentX+1)**.8),f.currentX>f.maxX&&(f.currentX=f.maxX-1+(f.currentX-f.maxX+1)**.8),f.currentY<f.minY&&(f.currentY=f.minY+1-(f.minY-f.currentY+1)**.8),f.currentY>f.maxY&&(f.currentY=f.maxY-1+(f.currentY-f.maxY+1)**.8),m.prevPositionX||(m.prevPositionX=f.touchesCurrent.x),m.prevPositionY||(m.prevPositionY=f.touchesCurrent.y),m.prevTime||(m.prevTime=Date.now()),m.x=(f.touchesCurrent.x-m.prevPositionX)/(Date.now()-m.prevTime)/2,m.y=(f.touchesCurrent.y-m.prevPositionY)/(Date.now()-m.prevTime)/2,Math.abs(f.touchesCurrent.x-m.prevPositionX)<2&&(m.x=0),Math.abs(f.touchesCurrent.y-m.prevPositionY)<2&&(m.y=0),m.prevPositionX=f.touchesCurrent.x,m.prevPositionY=f.touchesCurrent.y,m.prevTime=Date.now(),p.imageWrapEl.style.transform="translate3d(".concat(f.currentX,"px, ").concat(f.currentY,"px,0)")}function T(){const e=t.zoom;p.slideEl&&t.activeIndex!==t.slides.indexOf(p.slideEl)&&(p.imageEl&&(p.imageEl.style.transform="translate3d(0,0,0) scale(1)"),p.imageWrapEl&&(p.imageWrapEl.style.transform="translate3d(0,0,0)"),p.slideEl.classList.remove("".concat(t.params.zoom.zoomedSlideClass)),e.scale=1,a=1,p.slideEl=void 0,p.imageEl=void 0,p.imageWrapEl=void 0,p.originX=0,p.originY=0)}function I(e){if(a<=1||!p.imageWrapEl)return;if(!b(e)||!x(e))return;const t=o.getComputedStyle(p.imageWrapEl).transform,n=new o.DOMMatrix(t);if(!l)return l=!0,c.x=e.clientX,c.y=e.clientY,f.startX=n.e,f.startY=n.f,f.width=p.imageEl.offsetWidth||p.imageEl.clientWidth,f.height=p.imageEl.offsetHeight||p.imageEl.clientHeight,p.slideWidth=p.slideEl.offsetWidth,void(p.slideHeight=p.slideEl.offsetHeight);const i=-3*(e.clientX-c.x),r=-3*(e.clientY-c.y),s=f.width*a,u=f.height*a,h=p.slideWidth,d=p.slideHeight,m=Math.min(h/2-s/2,0),g=-m,v=Math.min(d/2-u/2,0),y=-v,A=Math.max(Math.min(f.startX+i,g),m),_=Math.max(Math.min(f.startY+r,y),v);p.imageWrapEl.style.transitionDuration="0ms",p.imageWrapEl.style.transform="translate3d(".concat(A,"px, ").concat(_,"px, 0)"),c.x=e.clientX,c.y=e.clientY,f.startX=A,f.startY=_,f.currentX=A,f.currentY=_}function M(e){const n=t.zoom,i=t.params.zoom;if(!p.slideEl){e&&e.target&&(p.slideEl=e.target.closest(".".concat(t.params.slideClass,", swiper-slide"))),p.slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?p.slideEl=Yee(t.slidesEl,".".concat(t.params.slideActiveClass))[0]:p.slideEl=t.slides[t.activeIndex]);let n=p.slideEl.querySelector(".".concat(i.containerClass));n&&(n=n.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),p.imageEl=n,p.imageWrapEl=n?tte(p.imageEl,".".concat(i.containerClass))[0]:void 0}if(!p.imageEl||!p.imageWrapEl)return;let r,s,l,c,u,h,d,m,g,v,y,b,x,_,w,E,C,S;t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),p.slideEl.classList.add("".concat(i.zoomedSlideClass)),"undefined"===typeof f.touchesStart.x&&e?(r=e.pageX,s=e.pageY):(r=f.touchesStart.x,s=f.touchesStart.y);const T=a,I="number"===typeof e?e:null;1===a&&I&&(r=void 0,s=void 0,f.touchesStart.x=void 0,f.touchesStart.y=void 0);const M=A();n.scale=I||M,a=I||M,!e||1===a&&I?(d=0,m=0):(C=p.slideEl.offsetWidth,S=p.slideEl.offsetHeight,l=Zee(p.slideEl).left+o.scrollX,c=Zee(p.slideEl).top+o.scrollY,u=l+C/2-r,h=c+S/2-s,g=p.imageEl.offsetWidth||p.imageEl.clientWidth,v=p.imageEl.offsetHeight||p.imageEl.clientHeight,y=g*n.scale,b=v*n.scale,x=Math.min(C/2-y/2,0),_=Math.min(S/2-b/2,0),w=-x,E=-_,T>0&&I&&"number"===typeof f.currentX&&"number"===typeof f.currentY?(d=f.currentX*n.scale/T,m=f.currentY*n.scale/T):(d=u*n.scale,m=h*n.scale),d<x&&(d=x),d>w&&(d=w),m<_&&(m=_),m>E&&(m=E)),I&&1===n.scale&&(p.originX=0,p.originY=0),f.currentX=d,f.currentY=m,p.imageWrapEl.style.transitionDuration="300ms",p.imageWrapEl.style.transform="translate3d(".concat(d,"px, ").concat(m,"px,0)"),p.imageEl.style.transitionDuration="300ms",p.imageEl.style.transform="translate3d(0,0,0) scale(".concat(n.scale,")")}function k(){const e=t.zoom,n=t.params.zoom;if(!p.slideEl){t.params.virtual&&t.params.virtual.enabled&&t.virtual?p.slideEl=Yee(t.slidesEl,".".concat(t.params.slideActiveClass))[0]:p.slideEl=t.slides[t.activeIndex];let e=p.slideEl.querySelector(".".concat(n.containerClass));e&&(e=e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),p.imageEl=e,p.imageWrapEl=e?tte(p.imageEl,".".concat(n.containerClass))[0]:void 0}p.imageEl&&p.imageWrapEl&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),e.scale=1,a=1,f.currentX=void 0,f.currentY=void 0,f.touchesStart.x=void 0,f.touchesStart.y=void 0,p.imageWrapEl.style.transitionDuration="300ms",p.imageWrapEl.style.transform="translate3d(0,0,0)",p.imageEl.style.transitionDuration="300ms",p.imageEl.style.transform="translate3d(0,0,0) scale(1)",p.slideEl.classList.remove("".concat(n.zoomedSlideClass)),p.slideEl=void 0,p.originX=0,p.originY=0,t.params.zoom.panOnMouseMove&&(c={x:0,y:0},l&&(l=!1,f.startX=0,f.startY=0)))}function R(e){const n=t.zoom;n.scale&&1!==n.scale?k():M(e)}function L(){return{passiveListener:!!t.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!t.params.passiveListeners||{passive:!1,capture:!0}}}function B(){const e=t.zoom;if(e.enabled)return;e.enabled=!0;const{passiveListener:n,activeListenerWithCapture:i}=L();t.wrapperEl.addEventListener("pointerdown",_,n),t.wrapperEl.addEventListener("pointermove",w,i),["pointerup","pointercancel","pointerout"].forEach(e=>{t.wrapperEl.addEventListener(e,E,n)}),t.wrapperEl.addEventListener("pointermove",S,i)}function P(){const e=t.zoom;if(!e.enabled)return;e.enabled=!1;const{passiveListener:n,activeListenerWithCapture:i}=L();t.wrapperEl.removeEventListener("pointerdown",_,n),t.wrapperEl.removeEventListener("pointermove",w,i),["pointerup","pointercancel","pointerout"].forEach(e=>{t.wrapperEl.removeEventListener(e,E,n)}),t.wrapperEl.removeEventListener("pointermove",S,i)}Object.defineProperty(t.zoom,"scale",{get:()=>v,set(e){if(v!==e){const t=p.imageEl,n=p.slideEl;r("zoomChange",e,t,n)}v=e}}),i("init",()=>{t.params.zoom.enabled&&B()}),i("destroy",()=>{P()}),i("touchStart",(e,n)=>{t.zoom.enabled&&function(e){const n=t.device;if(!p.imageEl)return;if(f.isTouched)return;n.android&&e.cancelable&&e.preventDefault(),f.isTouched=!0;const i=d.length>0?d[0]:e;f.touchesStart.x=i.pageX,f.touchesStart.y=i.pageY}(n)}),i("touchEnd",(e,n)=>{t.zoom.enabled&&function(){const e=t.zoom;if(d.length=0,!p.imageEl)return;if(!f.isTouched||!f.isMoved)return f.isTouched=!1,void(f.isMoved=!1);f.isTouched=!1,f.isMoved=!1;let n=300,i=300;const r=m.x*n,o=f.currentX+r,a=m.y*i,s=f.currentY+a;0!==m.x&&(n=Math.abs((o-f.currentX)/m.x)),0!==m.y&&(i=Math.abs((s-f.currentY)/m.y));const l=Math.max(n,i);f.currentX=o,f.currentY=s;const c=f.width*e.scale,u=f.height*e.scale;f.minX=Math.min(p.slideWidth/2-c/2,0),f.maxX=-f.minX,f.minY=Math.min(p.slideHeight/2-u/2,0),f.maxY=-f.minY,f.currentX=Math.max(Math.min(f.currentX,f.maxX),f.minX),f.currentY=Math.max(Math.min(f.currentY,f.maxY),f.minY),p.imageWrapEl.style.transitionDuration="".concat(l,"ms"),p.imageWrapEl.style.transform="translate3d(".concat(f.currentX,"px, ").concat(f.currentY,"px,0)")}()}),i("doubleTap",(e,n)=>{!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&R(n)}),i("transitionEnd",()=>{t.zoom.enabled&&t.params.zoom.enabled&&T()}),i("slideChange",()=>{t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&T()}),Object.assign(t.zoom,{enable:B,disable:P,in:M,out:k,toggle:R})}function fne(e){let t,n,{swiper:i,extendParams:r,on:o,emit:a,params:s}=e;i.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,u,h,d,p,f,m,g=s&&s.autoplay?s.autoplay.delay:3e3,v=s&&s.autoplay?s.autoplay.delay:3e3,y=(new Date).getTime();function A(e){i&&!i.destroyed&&i.wrapperEl&&e.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",A),m||e.detail&&e.detail.bySwiperTouchMove||C())}const b=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?c=!0:c&&(v=l,c=!1);const e=i.autoplay.paused?l:y+v-(new Date).getTime();i.autoplay.timeLeft=e,a("autoplayTimeLeft",e,e/g),n=requestAnimationFrame(()=>{b()})},x=e=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(n),b();let r="undefined"===typeof e?i.params.autoplay.delay:e;g=i.params.autoplay.delay,v=i.params.autoplay.delay;const o=(()=>{let e;if(e=i.virtual&&i.params.virtual.enabled?i.slides.find(e=>e.classList.contains("swiper-slide-active")):i.slides[i.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(o)&&o>0&&"undefined"===typeof e&&(r=o,g=o,v=o),l=r;const s=i.params.speed,c=()=>{i&&!i.destroyed&&(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(s,!0,!0),a("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,s,!0,!0),a("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(s,!0,!0),a("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,s,!0,!0),a("autoplay")),i.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame(()=>{x()})))};return r>0?(clearTimeout(t),t=setTimeout(()=>{c()},r)):requestAnimationFrame(()=>{c()}),r},_=()=>{y=(new Date).getTime(),i.autoplay.running=!0,x(),a("autoplayStart")},w=()=>{i.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),a("autoplayStop")},E=(e,n)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(t),e||(f=!0);const r=()=>{a("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",A):C()};if(i.autoplay.paused=!0,n)return p&&(l=i.params.autoplay.delay),p=!1,void r();const o=l||i.params.autoplay.delay;l=o-((new Date).getTime()-y),i.isEnd&&l<0&&!i.params.loop||(l<0&&(l=0),r())},C=()=>{i.isEnd&&l<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(y=(new Date).getTime(),f?(f=!1,x(l)):x(),i.autoplay.paused=!1,a("autoplayResume"))},S=()=>{if(i.destroyed||!i.autoplay.running)return;const e=Nee();"hidden"===e.visibilityState&&(f=!0,E(!0)),"visible"===e.visibilityState&&C()},T=e=>{"mouse"===e.pointerType&&(f=!0,m=!0,i.animating||i.autoplay.paused||E(!0))},I=e=>{"mouse"===e.pointerType&&(m=!1,i.autoplay.paused&&C())};o("init",()=>{i.params.autoplay.enabled&&(i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",T),i.el.addEventListener("pointerleave",I)),Nee().addEventListener("visibilitychange",S),_())}),o("destroy",()=>{i.el&&"string"!==typeof i.el&&(i.el.removeEventListener("pointerenter",T),i.el.removeEventListener("pointerleave",I)),Nee().removeEventListener("visibilitychange",S),i.autoplay.running&&w()}),o("_freeModeStaticRelease",()=>{(h||f)&&C()}),o("_freeModeNoMomentumRelease",()=>{i.params.autoplay.disableOnInteraction?w():E(!0,!0)}),o("beforeTransitionStart",(e,t,n)=>{!i.destroyed&&i.autoplay.running&&(n||!i.params.autoplay.disableOnInteraction?E(!0,!0):w())}),o("sliderFirstMove",()=>{!i.destroyed&&i.autoplay.running&&(i.params.autoplay.disableOnInteraction?w():(u=!0,h=!1,f=!1,d=setTimeout(()=>{f=!0,h=!0,E(!0)},200)))}),o("touchEnd",()=>{if(!i.destroyed&&i.autoplay.running&&u){if(clearTimeout(d),clearTimeout(t),i.params.autoplay.disableOnInteraction)return h=!1,void(u=!1);h&&i.params.cssMode&&C(),h=!1,u=!1}}),o("slideChange",()=>{!i.destroyed&&i.autoplay.running&&(p=!0)}),Object.assign(i.autoplay,{start:_,stop:w,pause:E,resume:C})}function mne(e,t){const n=Xee(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function gne(e,t,n){const i="swiper-slide-shadow".concat(n?"-".concat(n):"").concat(e?" swiper-slide-shadow-".concat(e):""),r=Xee(t);let o=r.querySelector(".".concat(i.split(" ").join(".")));return o||(o=Jee("div",i.split(" ")),r.append(o)),o}function vne(e){let{swiper:t,extendParams:n,on:i}=e;n({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}});!function(e){const{effect:t,swiper:n,on:i,setTranslate:r,setTransition:o,overwriteParams:a,perspective:s,recreateShadows:l,getEffectParams:c}=e;let u;i("beforeInit",()=>{if(n.params.effect!==t)return;n.classNames.push("".concat(n.params.containerModifierClass).concat(t)),s&&s()&&n.classNames.push("".concat(n.params.containerModifierClass,"3d"));const e=a?a():{};Object.assign(n.params,e),Object.assign(n.originalParams,e)}),i("setTranslate _virtualUpdated",()=>{n.params.effect===t&&r()}),i("setTransition",(e,i)=>{n.params.effect===t&&o(i)}),i("transitionEnd",()=>{if(n.params.effect===t&&l){if(!c||!c().slideShadows)return;n.slides.forEach(e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>e.remove())}),l()}}),i("virtualUpdate",()=>{n.params.effect===t&&(n.slides.length||(u=!0),requestAnimationFrame(()=>{u&&n.slides&&n.slides.length&&(r(),u=!1)}))})}({effect:"coverflow",swiper:t,on:i,setTranslate:()=>{const{width:e,height:n,slides:i,slidesSizesGrid:r}=t,o=t.params.coverflowEffect,a=t.isHorizontal(),s=t.translate,l=a?e/2-s:n/2-s,c=a?o.rotate:-o.rotate,u=o.depth,h=function(e){return t=>Math.abs(t)>0&&e.browser&&e.browser.need3dFix&&Math.abs(t)%90===0?t+.001:t}(t);for(let t=0,d=i.length;t<d;t+=1){const e=i[t],n=r[t],s=(l-e.swiperSlideOffset-n/2)/n,d="function"===typeof o.modifier?o.modifier(s):s*o.modifier;let p=a?c*d:0,f=a?0:c*d,m=-u*Math.abs(d),g=o.stretch;"string"===typeof g&&-1!==g.indexOf("%")&&(g=parseFloat(o.stretch)/100*n);let v=a?0:g*d,y=a?g*d:0,A=1-(1-o.scale)*Math.abs(d);Math.abs(y)<.001&&(y=0),Math.abs(v)<.001&&(v=0),Math.abs(m)<.001&&(m=0),Math.abs(p)<.001&&(p=0),Math.abs(f)<.001&&(f=0),Math.abs(A)<.001&&(A=0);const b="translate3d(".concat(y,"px,").concat(v,"px,").concat(m,"px)  rotateX(").concat(h(f),"deg) rotateY(").concat(h(p),"deg) scale(").concat(A,")");if(mne(0,e).style.transform=b,e.style.zIndex=1-Math.abs(Math.round(d)),o.slideShadows){let t=a?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),n=a?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");t||(t=gne("coverflow",e,a?"left":"top")),n||(n=gne("coverflow",e,a?"right":"bottom")),t&&(t.style.opacity=d>0?d:0),n&&(n.style.opacity=-d>0?-d:0)}}},setTransition:e=>{t.slides.map(e=>Xee(e)).forEach(t=>{t.style.transitionDuration="".concat(e,"ms"),t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(t=>{t.style.transitionDuration="".concat(e,"ms")})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}lne.displayName="SwiperSlide";const yne=e=>{let{popupInfo:t}=e;const{title:n,description:i,price:r,images:o}=t,{dispatch:a}=Uae();return(0,uT.jsx)(vee,{sx:{maxWidth:400},children:(0,uT.jsxs)(Eee,{sx:{display:"block"},children:[(0,uT.jsx)(Bee,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7)0%, rgba(0,0,0,0.3)70%, rgba(0,0,0,0)100%)",zIndex:2},title:0===r?"Free Visit":"$"+r,position:"top"}),(0,uT.jsx)(Bee,{title:n,subtitle:i.substr(0,30)+"...",sx:{zIndex:2}}),(0,uT.jsx)(sne,{modules:[fne,dne],autoplay:!0,pagination:{clickable:!0},style:{"--swiper-pagination-color":"rgba(255,255,255, 0.8)","--swiper-pagination-bullet-inactive-color":"#fff","--swiper-pagination-bullet-inactive-opacity":.5},children:o.map(e=>(0,uT.jsx)(lne,{children:(0,uT.jsx)(II,{component:"img",src:e,alt:"pilgrim",sx:{height:255,display:"block",overflow:"hidden",width:"100%",cursor:"pointer",objectFit:"cover"},onClick:()=>a({type:"UPDATE_PILGRIM",payload:t})})},e))})]})})},Ane=new class{constructor(e){this.options=Object.assign(Object.create(D6),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r="prepare ".concat(e.length," points");t&&console.time(r),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,i]=t.geometry.coordinates,r=O6(z6(n)),a=O6(U6(i));o.push(r,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(r);for(let s=i;s>=n;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const e=this.getClusters([n,i,180,o],t),a=this.getClusters([-180,i,r,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(z6(n),U6(o),z6(r),U6(i)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+5]>1?N6(l,e,this.clusterProps):this.points[l[e+3]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(t*this.stride>=o.length)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=o[t*this.stride],l=o[t*this.stride+1],c=r.within(s,l,a),u=[];for(const h of c){const t=h*this.stride;o[t+4]===e&&u.push(o[t+5]>1?N6(o,t,this.clusterProps):this.points[o[t+3]])}if(0===u.length)throw new Error(i);return u}getLeaves(e,t,n){t=t||10,n=n||0;const i=[];return this._appendLeaves(i,e,t,n,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((t-s)/r,l,(t+1+s)/r,c),i.data,t,n,r,u),0===t&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.data,r,n,r,u),t===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?r+t.point_count<=i?r+=t.point_count:r=this._appendLeaves(e,t.cluster_id,n,i,r):r<i?r++:e.push(a),e.length===n)break}return r}_createTree(e){const t=new M6(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,i,r,o){for(const a of e){const e=a*this.stride,s=t[e+5]>1;let l,c,u;if(s)l=F6(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+3]];l=n.properties;const[i,r]=n.geometry.coordinates;c=z6(i),u=U6(r)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;d=s||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,a=n/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const n=s[u],i=s[u+1],h=e.within(s[u],s[u+1],a),d=s[u+5];let p=d;for(const e of h){const n=e*c;s[n+2]>t&&(p+=s[n+5])}if(p>d&&p>=o){let e,o=n*d,a=i*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const i=n*c;if(s[i+2]<=t)continue;s[i+2]=t;const l=s[i+5];o+=s[i]*l,a+=s[i+1]*l,s[i+4]=m,r&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),r(e,this._map(s,i)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),r&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){const i=this.clusterProps[e[t+6]];return n?Object.assign({},i):i}const i=this.points[e[t+3]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}({radius:75,maxZoom:20}),bne=()=>{const{state:{pilgrims:e},dispatch:t,mapRef:n}=Uae(),[r,o]=(0,i.useState)([]),[a,s]=(0,i.useState)([]),[l,c]=(0,i.useState)([-180,-85,180,85]),[u,h]=(0,i.useState)(0),[d,p]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async e=>{e({type:"START_LOADING"});const t=await wN({url:j5,method:"GET"},e);t&&e({type:"UPDATE_PILGRIMS",payload:t}),e({type:"END_LOADING"})})(t)},[]),(0,i.useEffect)(()=>{const t=e.map(e=>({type:"Feature",properties:{cluster:!1,pilgrimId:e._id,price:e.price,title:e.title,description:e.description,lng:e.lng,lat:e.lat,images:e.images,uPhoto:e.uPhoto,uName:e.uName},geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]}}));o(t)},[e]),(0,i.useEffect)(()=>{Ane.load(r),s(Ane.getClusters(l,u))},[r,u,l]),(0,i.useEffect)(()=>{n.current&&c(n.current.getMap().getBounds().toArray().flat())},[null===n||void 0===n?void 0:n.current]),(0,i.useEffect)(()=>{if(n.current){const e=n.current.getMap();console.log("Map reference:",e);const t=new dee({apiKey:"tRqjZjhKcJr1uachzPuM",maplibregl:E5()});console.log("Geocoding Control:",t),e.addControl(t),console.log("Added Geocoding Control to map.")}},[n]),(0,uT.jsx)(II,{children:(0,uT.jsxs)(T6,{mapLib:E5(),initialViewState:{longitude:80,latitude:25,zoom:2},style:{width:"100%",height:" calc(100vh - 77px)"},mapStyle:"https://api.maptiler.com/maps/streets/style.json?key=tRqjZjhKcJr1uachzPuM",ref:n,onZoomEnd:e=>h(Math.round(e.viewState.zoom)),children:[(0,uT.jsx)(S6,{position:"bottom-right"}),(0,uT.jsx)(w6,{position:"bottom-right"}),(0,uT.jsx)(E6,{position:"bottom-right"}),(0,uT.jsx)(C6,{position:"bottom-right"}),a.map(e=>{const{cluster:t,point_count:i}=e.properties,[o,a]=e.geometry.coordinates;return t?(0,uT.jsx)(x6,{longitude:o,latitude:a,children:(0,uT.jsx)("div",{className:"cluster-marker",style:{width:"".concat(10+i/r.length*20,"px"),height:"".concat(10+i/r.length*20,"px")},onClick:()=>{const t=Math.min(Ane.getClusterExpansionZoom(e.id),20);n.current.flyTo({center:[o,a],zoom:t,speed:1})},children:i})},"cluster-".concat(e.id)):(0,uT.jsx)(x6,{longitude:o,latitude:a,children:(0,uT.jsx)(LR,{title:e.properties.title,children:(0,uT.jsx)(PL,{src:e.properties.images,component:UB,elevation:2,onClick:()=>p(e.properties)})})},"pilgrim-".concat(e.properties.roomId))}),d&&(0,uT.jsx)(_6,{longitude:d.lng,latitude:d.lat,maxWidth:"auto",closeOnClick:!1,focusAfterOpen:!1,onClose:()=>p(null),children:(0,uT.jsx)(yne,{popupInfo:d})})]})})};function xne(e){return wI("MuiImageList",e)}EI("MuiImageList",["root","masonry","quilted","standard","woven"]);const _ne=["children","className","cols","component","rowHeight","gap","style","variant"],wne=HI("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},"masonry"===t.variant&&{display:"block"})}),Ene=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiImageList"}),{children:r,className:o,cols:a=2,component:s="ul",rowHeight:l="auto",gap:c=4,style:u,variant:h="standard"}=n,d=(0,gT.A)(n,_ne),p=i.useMemo(()=>({rowHeight:l,gap:c,variant:h}),[l,c,h]);i.useEffect(()=>{0},[]);const f="masonry"===h?(0,mT.A)({columnCount:a,columnGap:c},u):(0,mT.A)({gridTemplateColumns:"repeat(".concat(a,", 1fr)"),gap:c},u),m=(0,mT.A)({},n,{component:s,gap:c,rowHeight:l,variant:h}),g=(e=>{const{classes:t,variant:n}=e;return BI({root:["root",n]},xne,t)})(m);return(0,uT.jsx)(wne,(0,mT.A)({as:s,className:MT(g.root,g[h],o),ref:t,style:f,ownerState:m},d,{children:(0,uT.jsx)(yee.Provider,{value:p,children:r})}))}),Cne=Ene,Sne=()=>{const{state:{filteredPilgrims:e},dispatch:t}=Uae();return(0,uT.jsx)(J4,{children:(0,uT.jsx)(Cne,{gap:12,sx:{mb:8,gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))!important"},children:e.map(e=>(0,uT.jsx)(vee,{children:(0,uT.jsxs)(Eee,{sx:{height:"100% !important"},children:[(0,uT.jsx)(Bee,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7)0%, rgba(0,0,0,0.3)70%, rgba(0,0,0,0)100%)"},title:0===e.price?"Free Visit":"Rs"+e.price,actionIcon:(0,uT.jsx)(LR,{title:e.uName,sx:{mr:"5px"},children:(0,uT.jsx)(PL,{src:e.uPhoto})}),position:"top"}),(0,uT.jsx)("img",{src:e.images[0],alt:e.title,loading:"lazy",style:{cursor:"pointer"},onClick:()=>t({type:"UPDATE_PILGRIM",payload:e})}),(0,uT.jsx)(Bee,{title:e.title})]})},e._id))})})};function Tne(e){return wI("MuiStepper",e)}EI("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Ine=i.createContext({});const Mne=Ine,kne=i.createContext({});const Rne=kne;function Lne(e){return wI("MuiStepConnector",e)}EI("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Bne=["className"],Pne=HI("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({flex:"1 1 auto"},"vertical"===t.orientation&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})}),Dne=HI("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t["line".concat(KI(n.orientation))]]}})(e=>{let{ownerState:t,theme:n}=e;const i="light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600];return(0,mT.A)({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:i},"horizontal"===t.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===t.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),One=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiStepConnector"}),{className:r}=n,o=(0,gT.A)(n,Bne),{alternativeLabel:a,orientation:s="horizontal"}=i.useContext(Mne),{active:l,disabled:c,completed:u}=i.useContext(Rne),h=(0,mT.A)({},n,{alternativeLabel:a,orientation:s,active:l,completed:u,disabled:c}),d=(e=>{const{classes:t,orientation:n,alternativeLabel:i,active:r,completed:o,disabled:a}=e;return BI({root:["root",n,i&&"alternativeLabel",r&&"active",o&&"completed",a&&"disabled"],line:["line","line".concat(KI(n))]},Lne,t)})(h);return(0,uT.jsx)(Pne,(0,mT.A)({className:MT(d.root,r),ref:t,ownerState:h},o,{children:(0,uT.jsx)(Dne,{className:d.line,ownerState:h})}))}),Nne=One,Fne=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],zne=HI("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"flex"},"horizontal"===t.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===t.orientation&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})}),Une=(0,uT.jsx)(Nne,{}),jne=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:o=!1,children:a,className:s,component:l="div",connector:c=Une,nonLinear:u=!1,orientation:h="horizontal"}=n,d=(0,gT.A)(n,Fne),p=(0,mT.A)({},n,{nonLinear:u,alternativeLabel:o,orientation:h,component:l}),f=(e=>{const{orientation:t,nonLinear:n,alternativeLabel:i,classes:r}=e;return BI({root:["root",t,n&&"nonLinear",i&&"alternativeLabel"]},Tne,r)})(p),m=i.Children.toArray(a).filter(Boolean),g=m.map((e,t)=>i.cloneElement(e,(0,mT.A)({index:t,last:t+1===m.length},e.props))),v=i.useMemo(()=>({activeStep:r,alternativeLabel:o,connector:c,nonLinear:u,orientation:h}),[r,o,c,u,h]);return(0,uT.jsx)(Mne.Provider,{value:v,children:(0,uT.jsx)(zne,(0,mT.A)({as:l,ownerState:p,className:MT(f.root,s),ref:t},d,{children:g}))})}),Vne=jne;function Hne(e){return wI("MuiStep",e)}EI("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Gne=["active","children","className","component","completed","disabled","expanded","index","last"],Qne=HI("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({},"horizontal"===t.orientation&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})}),Wne=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiStep"}),{active:r,children:o,className:a,component:s="div",completed:l,disabled:c,expanded:u=!1,index:h,last:d}=n,p=(0,gT.A)(n,Gne),{activeStep:f,connector:m,alternativeLabel:g,orientation:v,nonLinear:y}=i.useContext(Mne);let[A=!1,b=!1,x=!1]=[r,l,c];f===h?A=void 0===r||r:!y&&f>h?b=void 0===l||l:!y&&f<h&&(x=void 0===c||c);const _=i.useMemo(()=>({index:h,last:d,expanded:u,icon:h+1,active:A,completed:b,disabled:x}),[h,d,u,A,b,x]),w=(0,mT.A)({},n,{active:A,orientation:v,alternativeLabel:g,completed:b,disabled:x,expanded:u,component:s}),E=(e=>{const{classes:t,orientation:n,alternativeLabel:i,completed:r}=e;return BI({root:["root",n,i&&"alternativeLabel",r&&"completed"]},Hne,t)})(w),C=(0,uT.jsxs)(Qne,(0,mT.A)({as:s,className:MT(E.root,a),ref:t,ownerState:w},p,{children:[m&&g&&0!==h?m:null,o]}));return(0,uT.jsx)(Rne.Provider,{value:_,children:m&&!g&&0!==h?(0,uT.jsxs)(i.Fragment,{children:[m,C]}):C})}),qne=Wne,Xne=_L((0,uT.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Yne=_L((0,uT.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Kne(e){return wI("MuiStepIcon",e)}const Jne=EI("MuiStepIcon",["root","active","completed","error","text"]);var Zne;const $ne=["active","className","completed","error","icon"],eie=HI(xL,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,["&.".concat(Jne.completed)]:{color:(t.vars||t).palette.primary.main},["&.".concat(Jne.active)]:{color:(t.vars||t).palette.primary.main},["&.".concat(Jne.error)]:{color:(t.vars||t).palette.error.main}}}),tie=HI("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(e=>{let{theme:t}=e;return{fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}}),nie=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiStepIcon"}),{active:i=!1,className:r,completed:o=!1,error:a=!1,icon:s}=n,l=(0,gT.A)(n,$ne),c=(0,mT.A)({},n,{active:i,completed:o,error:a}),u=(e=>{const{classes:t,active:n,completed:i,error:r}=e;return BI({root:["root",n&&"active",i&&"completed",r&&"error"],text:["text"]},Kne,t)})(c);if("number"===typeof s||"string"===typeof s){const e=MT(r,u.root);return a?(0,uT.jsx)(eie,(0,mT.A)({as:Yne,className:e,ref:t,ownerState:c},l)):o?(0,uT.jsx)(eie,(0,mT.A)({as:Xne,className:e,ref:t,ownerState:c},l)):(0,uT.jsxs)(eie,(0,mT.A)({className:e,ref:t,ownerState:c},l,{children:[Zne||(Zne=(0,uT.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,uT.jsx)(tie,{className:u.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:s})]}))}return s}),iie=nie;function rie(e){return wI("MuiStepLabel",e)}const oie=EI("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),aie=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],sie=HI("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"flex",alignItems:"center",["&.".concat(oie.alternativeLabel)]:{flexDirection:"column"},["&.".concat(oie.disabled)]:{cursor:"default"}},"vertical"===t.orientation&&{textAlign:"left",padding:"8px 0"})}),lie=HI("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(e=>{let{theme:t}=e;return(0,mT.A)({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),["&.".concat(oie.active)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(oie.completed)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(oie.alternativeLabel)]:{marginTop:16},["&.".concat(oie.error)]:{color:(t.vars||t).palette.error.main}})}),cie=HI("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,["&.".concat(oie.alternativeLabel)]:{paddingRight:0}})),uie=HI("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(e=>{let{theme:t}=e;return{width:"100%",color:(t.vars||t).palette.text.secondary,["&.".concat(oie.alternativeLabel)]:{textAlign:"center"}}}),hie=i.forwardRef(function(e,t){var n;const r=XI({props:e,name:"MuiStepLabel"}),{children:o,className:a,componentsProps:s={},error:l=!1,icon:c,optional:u,slotProps:h={},StepIconComponent:d,StepIconProps:p}=r,f=(0,gT.A)(r,aie),{alternativeLabel:m,orientation:g}=i.useContext(Mne),{active:v,disabled:y,completed:A,icon:b}=i.useContext(Rne),x=c||b;let _=d;x&&!_&&(_=iie);const w=(0,mT.A)({},r,{active:v,alternativeLabel:m,completed:A,disabled:y,error:l,orientation:g}),E=(e=>{const{classes:t,orientation:n,active:i,completed:r,error:o,disabled:a,alternativeLabel:s}=e;return BI({root:["root",n,o&&"error",a&&"disabled",s&&"alternativeLabel"],label:["label",i&&"active",r&&"completed",o&&"error",a&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",i&&"active",r&&"completed",o&&"error",a&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},rie,t)})(w),C=null!=(n=h.label)?n:s.label;return(0,uT.jsxs)(sie,(0,mT.A)({className:MT(E.root,a),ref:t,ownerState:w},f,{children:[x||_?(0,uT.jsx)(cie,{className:E.iconContainer,ownerState:w,children:(0,uT.jsx)(_,(0,mT.A)({completed:A,active:v,error:l,icon:x},p))}):null,(0,uT.jsxs)(uie,{className:E.labelContainer,ownerState:w,children:[o?(0,uT.jsx)(lie,(0,mT.A)({ownerState:w},C,{className:MT(E.label,null==C?void 0:C.className),children:o})):null,u]})]}))});hie.muiName="StepLabel";const die=hie;function pie(e){return wI("MuiStepButton",e)}const fie=EI("MuiStepButton",["root","horizontal","vertical","touchRipple"]),mie=["children","className","icon","optional"],gie=HI(uL,{name:"MuiStepButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(fie.touchRipple)]:t.touchRipple},t.root,t[n.orientation]]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},"vertical"===t.orientation&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{["& .".concat(fie.touchRipple)]:{color:"rgba(0, 0, 0, 0.3)"}})}),vie=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiStepButton"}),{children:r,className:o,icon:a,optional:s}=n,l=(0,gT.A)(n,mie),{disabled:c,active:u}=i.useContext(Rne),{orientation:h}=i.useContext(Mne),d=(0,mT.A)({},n,{orientation:h}),p=(e=>{const{classes:t,orientation:n}=e;return BI({root:["root",n],touchRipple:["touchRipple"]},pie,t)})(d),f={icon:a,optional:s},m=hO(r,["StepLabel"])?i.cloneElement(r,f):(0,uT.jsx)(die,(0,mT.A)({},f,{children:r}));return(0,uT.jsx)(gie,(0,mT.A)({focusRipple:!0,disabled:c,TouchRippleProps:{className:p.touchRipple},className:MT(p.root,o),ref:t,ownerState:d,"aria-current":u?"step":void 0},l,{children:m}))}),yie=vie;var Aie=n(9751),bie=n(8604);const xie=["component","direction","spacing","divider","children","className","useFlexGap"],_ie=(0,BT.A)(),wie=Q4("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Eie(e){return B4({props:e,name:"MuiStack",defaultTheme:_ie})}function Cie(e,t){const n=i.Children.toArray(e).filter(Boolean);return n.reduce((e,r,o)=>(e.push(r),o<n.length-1&&e.push(i.cloneElement(t,{key:"separator-".concat(o)})),e),[])}const Sie=e=>{let{ownerState:t,theme:n}=e,i=(0,mT.A)({display:"flex",flexDirection:"column"},(0,Aie.NI)({theme:n},(0,Aie.kW)({values:t.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(t.spacing){const e=(0,bie.LX)(n),r=Object.keys(n.breakpoints.values).reduce((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e),{}),o=(0,Aie.kW)({values:t.direction,base:r}),a=(0,Aie.kW)({values:t.spacing,base:r});"object"===typeof o&&Object.keys(o).forEach((e,t,n)=>{if(!o[e]){const i=t>0?o[n[t-1]]:"column";o[e]=i}});const s=(n,i)=>{return t.useFlexGap?{gap:(0,bie._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((r=i?o[i]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[r]))]:(0,bie._W)(e,n)}};var r};i=(0,VT.A)(i,(0,Aie.NI)({theme:n},a,s))}return i=(0,Aie.iZ)(n.breakpoints,i),i};const Tie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=wie,useThemeProps:n=Eie,componentName:r="MuiStack"}=e,o=t(Sie),a=i.forwardRef(function(e,t){const i=n(e),a=(0,LT.A)(i),{component:s="div",direction:l="column",spacing:c=0,divider:u,children:h,className:d,useFlexGap:p=!1}=a,f=(0,gT.A)(a,xie),m={direction:l,spacing:c,useFlexGap:p},g=BI({root:["root"]},e=>wI(r,e),{});return(0,uT.jsx)(o,(0,mT.A)({as:s,ownerState:m,ref:t,className:MT(g.root,d)},f,{children:u?Cie(h,u):h}))});return a}({createStyledComponent:HI("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>XI({props:e,name:"MuiStack"})}),Iie=Tie,Mie=()=>{const{state:{location:{lng:e,lat:t}},dispatch:n}=Uae(),r=(0,i.useRef)(null),o=(0,i.useRef)(null),[a,s]=(0,i.useState)({center:[e,t],zoom:5,pitch:50}),[l,c]=(0,i.useState)("");(0,i.useEffect)(()=>{const i=new(E5().Map)(u({container:r.current,style:"https://tiles.basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json"},a));return o.current=new(E5().Marker)({draggable:!0}).setLngLat([e,t]).addTo(i),o.current.on("dragend",function(e){console.log("Marker drag ended");const{lng:t,lat:i}=e.target.getLngLat();console.log("Marker dragged to:",t,i),n({type:"Update_location",payload:{lng:t,lat:i}}),console.log("After dispatch - State:",t,i)}),i.addControl(new(E5().ScaleControl),"bottom-right"),i.addControl(new(E5().FullscreenControl),"bottom-right"),i.addControl(new(E5().NavigationControl),"bottom-right"),i.addControl(new(E5().GeolocateControl),"bottom-right"),i.on("geolocate",function(i){console.log("Geolocated coordinates:",e,t),n({type:"Update_location",payload:{lng:i.coords.longitute,lat:i.coords.latitude}})}),()=>{i.remove()}},[a]);return(0,uT.jsx)(uT.Fragment,{children:(0,uT.jsx)("div",{className:"Map-location",ref:r,children:(0,uT.jsx)(II,{sx:{height:400,position:"relative"},children:(0,uT.jsxs)("div",{className:"Search-container",style:{position:"absolute",top:10,left:10,zIndex:999},children:[(0,uT.jsx)(rN,{className:"Search-location",variant:"outlined",value:l,onChange:e=>c(e.target.value)}),(0,uT.jsx)(bN,{className:"Search-button",variant:"contained",onClick:()=>{fetch("https://nominatim.openstreetmap.org/search?q=".concat(l,"&format=json")).then(e=>e.json()).then(i=>{if(i&&i.length>0){const r=i[0];n({type:"Update_location",payload:{lng:parseFloat(r.lon),lat:parseFloat(r.lat)}}),console.log("after search updated locations : ",e,t),s({center:[parseFloat(r.lon),parseFloat(r.lat)],zoom:10,pitch:50})}}).catch(e=>{console.error("Error searching location:",e)})},style:{marginLeft:10},children:"Search"})]})})})})},kie=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Rie(e,t,n){const i=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),i=kie.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:r}=e,o="string"===typeof t?t:"string"===typeof r&&r.length>0?r:"./".concat(e.name);return"string"!==typeof i.path&&Lie(i,"path",o),void 0!==n&&Object.defineProperty(i,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),Lie(i,"relativePath",o),i}function Lie(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Bie=[".DS_Store","Thumbs.db"];function Pie(e){return"object"===typeof e&&null!==e}function Die(e){return e.filter(e=>-1===Bie.indexOf(e.name))}function Oie(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(i)}return t}function Nie(e){if("function"!==typeof e.webkitGetAsEntry)return zie(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?jie(t):zie(e,t)}function Fie(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?Fie(t):[t]],[])}function zie(e,t){return aW(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"===typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error("".concat(e," is not a File"));if(void 0!==t){const e=yield t.getFile();return e.handle=t,Rie(e)}}const i=e.getAsFile();if(!i)throw new Error("".concat(e," is not a File"));return Rie(i,null!==(n=null===t||void 0===t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function Uie(e){return aW(this,void 0,void 0,function*(){return e.isDirectory?jie(e):function(e){return aW(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{const i=Rie(n,e.fullPath);t(i)},e=>{n(e)})})})}(e)})}function jie(e){const t=e.createReader();return new Promise((e,n)=>{const i=[];!function r(){t.readEntries(t=>aW(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(Uie));i.push(e),r()}else try{const t=yield Promise.all(i);e(t)}catch(o){n(o)}}),e=>{n(e)})}()})}var Vie=n(8628);function Hie(e){return function(e){if(Array.isArray(e))return Yie(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Qie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gie(Object(n),!0).forEach(function(t){Wie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||Xie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xie(e,t){if(e){if("string"===typeof e)return Yie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yie(e,t):void 0}}function Yie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Kie="function"===typeof Vie?Vie:Vie.default,Jie="file-invalid-type",Zie="file-too-large",$ie="file-too-small",ere="too-many-files",tre=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:Jie,message:"File type must be ".concat(t)}},nre=function(e){return{code:Zie,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},ire=function(e){return{code:$ie,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},rre={code:ere,message:"Too many files"};function ore(e,t){var n="application/x-moz-file"===e.type||Kie(e,t);return[n,n?null:tre(t)]}function are(e,t,n){if(sre(e.size))if(sre(t)&&sre(n)){if(e.size>n)return[!1,nre(n)];if(e.size<t)return[!1,ire(t)]}else{if(sre(t)&&e.size<t)return[!1,ire(t)];if(sre(n)&&e.size>n)return[!1,nre(n)]}return[!0,null]}function sre(e){return void 0!==e&&null!==e}function lre(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function cre(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function ure(e){e.preventDefault()}function hre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some(function(t){return!lre(e)&&t&&t.apply(void 0,[e].concat(i)),lre(e)})}}function dre(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function pre(e){return/^.*\.[\w]+$/.test(e)}var fre=["children"],mre=["open"],gre=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vre=["refKey","onChange","onClick"];function yre(e){return function(e){if(Array.isArray(e))return xre(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bre(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Are(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||bre(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bre(e,t){if(e){if("string"===typeof e)return xre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xre(e,t):void 0}}function xre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function wre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_re(Object(n),!0).forEach(function(t){Ere(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_re(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ere(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cre(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Sre=(0,i.forwardRef)(function(e,t){var n=e.children,r=Mre(Cre(e,fre)),o=r.open,a=Cre(r,mre);return(0,i.useImperativeHandle)(t,function(){return{open:o}},[o]),i.createElement(i.Fragment,null,n(wre(wre({},a),{},{open:o})))});Sre.displayName="Dropzone";var Tre={disabled:!1,getFilesFromEvent:function(e){return aW(this,void 0,void 0,function*(){return Pie(e)&&Pie(e.dataTransfer)?function(e,t){return aW(this,void 0,void 0,function*(){if(e.items){const n=Oie(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return n;return Die(Fie(yield Promise.all(n.map(Nie))))}return Die(Oie(e.files).map(e=>Rie(e)))})}(e.dataTransfer,e.type):function(e){return Pie(e)&&Pie(e.target)}(e)?function(e){return Oie(e.target.files).map(e=>Rie(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"===typeof e.getFile)?function(e){return aW(this,void 0,void 0,function*(){const t=yield Promise.all(e.map(e=>e.getFile()));return t.map(e=>Rie(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Sre.defaultProps=Tre,Sre.propTypes={children:Y0.func,accept:Y0.objectOf(Y0.arrayOf(Y0.string)),multiple:Y0.bool,preventDropOnDocument:Y0.bool,noClick:Y0.bool,noKeyboard:Y0.bool,noDrag:Y0.bool,noDragEventsBubbling:Y0.bool,minSize:Y0.number,maxSize:Y0.number,maxFiles:Y0.number,disabled:Y0.bool,getFilesFromEvent:Y0.func,onFileDialogCancel:Y0.func,onFileDialogOpen:Y0.func,useFsAccessApi:Y0.bool,autoFocus:Y0.bool,onDragEnter:Y0.func,onDragLeave:Y0.func,onDragOver:Y0.func,onDrop:Y0.func,onDropAccepted:Y0.func,onDropRejected:Y0.func,onError:Y0.func,validator:Y0.func};var Ire={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Mre(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wre(wre({},Tre),e),n=t.accept,r=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,h=t.onDragLeave,d=t.onDragOver,p=t.onDrop,f=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,v=t.onFileDialogOpen,y=t.useFsAccessApi,A=t.autoFocus,b=t.preventDropOnDocument,x=t.noClick,_=t.noKeyboard,w=t.noDrag,E=t.noDragEventsBubbling,C=t.onError,S=t.validator,T=(0,i.useMemo)(function(){return function(e){if(sre(e))return Object.entries(e).reduce(function(e,t){var n=qie(t,2),i=n[0],r=n[1];return[].concat(Hie(e),[i],Hie(r))},[]).filter(function(e){return dre(e)||pre(e)}).join(",")}(n)},[n]),I=(0,i.useMemo)(function(){return function(e){return sre(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=qie(e,2),n=t[0],i=t[1],r=!0;return dre(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(i)&&i.every(pre)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),r=!1),r}).reduce(function(e,t){var n=qie(t,2),i=n[0],r=n[1];return Qie(Qie({},e),{},Wie({},i,r))},{})}]:e}(n)},[n]),M=(0,i.useMemo)(function(){return"function"===typeof v?v:Rre},[v]),k=(0,i.useMemo)(function(){return"function"===typeof g?g:Rre},[g]),R=(0,i.useRef)(null),L=(0,i.useRef)(null),B=Are((0,i.useReducer)(kre,Ire),2),P=B[0],D=B[1],O=P.isFocused,N=P.isFileDialogActive,F=(0,i.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),z=function(){!F.current&&N&&setTimeout(function(){L.current&&(L.current.files.length||(D({type:"closeDialog"}),k()))},300)};(0,i.useEffect)(function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}},[L,N,k,F]);var U=(0,i.useRef)([]),j=function(e){R.current&&R.current.contains(e.target)||(e.preventDefault(),U.current=[])};(0,i.useEffect)(function(){return b&&(document.addEventListener("dragover",ure,!1),document.addEventListener("drop",j,!1)),function(){b&&(document.removeEventListener("dragover",ure),document.removeEventListener("drop",j))}},[R,b]),(0,i.useEffect)(function(){return!r&&A&&R.current&&R.current.focus(),function(){}},[R,A,r]);var V=(0,i.useCallback)(function(e){C?C(e):console.error(e)},[C]),H=(0,i.useCallback)(function(e){e.preventDefault(),e.persist(),ne(e),U.current=[].concat(yre(U.current),[e.target]),cre(e)&&Promise.resolve(o(e)).then(function(t){if(!lre(e)||E){var n=t.length,i=n>0&&function(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,o=e.multiple,a=e.maxFiles,s=e.validator;return!(!o&&t.length>1||o&&a>=1&&t.length>a)&&t.every(function(e){var t=qie(ore(e,n),1)[0],o=qie(are(e,i,r),1)[0],a=s?s(e):null;return t&&o&&!a})}({files:t,accept:T,minSize:s,maxSize:a,multiple:l,maxFiles:c,validator:S});D({isDragAccept:i,isDragReject:n>0&&!i,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}}).catch(function(e){return V(e)})},[o,u,V,E,T,s,a,l,c,S]),G=(0,i.useCallback)(function(e){e.preventDefault(),e.persist(),ne(e);var t=cre(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1},[d,E]),Q=(0,i.useCallback)(function(e){e.preventDefault(),e.persist(),ne(e);var t=U.current.filter(function(e){return R.current&&R.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),U.current=t,t.length>0||(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),cre(e)&&h&&h(e))},[R,h,E]),W=(0,i.useCallback)(function(e,t){var n=[],i=[];e.forEach(function(e){var t=Are(ore(e,T),2),r=t[0],o=t[1],l=Are(are(e,s,a),2),c=l[0],u=l[1],h=S?S(e):null;if(r&&c&&!h)n.push(e);else{var d=[o,u];h&&(d=d.concat(h)),i.push({file:e,errors:d.filter(function(e){return e})})}}),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach(function(e){i.push({file:e,errors:[rre]})}),n.splice(0)),D({acceptedFiles:n,fileRejections:i,isDragReject:i.length>0,type:"setFiles"}),p&&p(n,i,t),i.length>0&&m&&m(i,t),n.length>0&&f&&f(n,t)},[D,l,T,s,a,c,p,f,m,S]),q=(0,i.useCallback)(function(e){e.preventDefault(),e.persist(),ne(e),U.current=[],cre(e)&&Promise.resolve(o(e)).then(function(t){lre(e)&&!E||W(t,e)}).catch(function(e){return V(e)}),D({type:"reset"})},[o,W,V,E]),X=(0,i.useCallback)(function(){if(F.current){D({type:"openDialog"}),M();var e={multiple:l,types:I};window.showOpenFilePicker(e).then(function(e){return o(e)}).then(function(e){W(e,null),D({type:"closeDialog"})}).catch(function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?V(e):(F.current=!1,L.current?(L.current.value=null,L.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(k(e),D({type:"closeDialog"}))})}else L.current&&(D({type:"openDialog"}),M(),L.current.value=null,L.current.click())},[D,M,k,y,W,V,I,l]),Y=(0,i.useCallback)(function(e){R.current&&R.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),X()))},[R,X]),K=(0,i.useCallback)(function(){D({type:"focus"})},[]),J=(0,i.useCallback)(function(){D({type:"blur"})},[]),Z=(0,i.useCallback)(function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?X():setTimeout(X,0))},[x,X]),$=function(e){return r?null:e},ee=function(e){return _?null:$(e)},te=function(e){return w?null:$(e)},ne=function(e){E&&e.stopPropagation()},ie=(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,o=e.onKeyDown,a=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,h=e.onDragLeave,d=e.onDrop,p=Cre(e,gre);return wre(wre(Ere({onKeyDown:ee(hre(o,Y)),onFocus:ee(hre(a,K)),onBlur:ee(hre(s,J)),onClick:$(hre(l,Z)),onDragEnter:te(hre(c,H)),onDragOver:te(hre(u,G)),onDragLeave:te(hre(h,Q)),onDrop:te(hre(d,q)),role:"string"===typeof i&&""!==i?i:"presentation"},n,R),r||_?{}:{tabIndex:0}),p)}},[R,Y,K,J,Z,H,G,Q,q,_,w,r]),re=(0,i.useCallback)(function(e){e.stopPropagation()},[]),oe=(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,r=e.onClick,o=Cre(e,vre);return wre(wre({},Ere({accept:T,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:$(hre(i,q)),onClick:$(hre(r,re)),tabIndex:-1},n,L)),o)}},[L,n,l,q,r]);return wre(wre({},P),{},{isFocused:O&&!r,getRootProps:ie,getInputProps:oe,rootRef:R,inputRef:L,open:$(X)})}function kre(e,t){switch(t.type){case"focus":return wre(wre({},e),{},{isFocused:!0});case"blur":return wre(wre({},e),{},{isFocused:!1});case"openDialog":return wre(wre({},Ire),{},{isFileDialogActive:!0});case"closeDialog":return wre(wre({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return wre(wre({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return wre(wre({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return wre({},Ire);default:return e}}function Rre(){}const Lre=_L((0,uT.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");function Bre(e){return wI("MuiCircularProgress",e)}EI("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Pre,Dre,Ore,Nre;const Fre=["className","color","disableShrink","size","style","thickness","value","variant"];let zre,Ure,jre,Vre;const Hre=44,Gre=(0,UR.i7)(zre||(zre=Pre||(Pre=BR(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Qre=(0,UR.i7)(Ure||(Ure=Dre||(Dre=BR(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),Wre=HI("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat(KI(n.color))]]}})(e=>{let{ownerState:t,theme:n}=e;return(0,mT.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})},e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,UR.AH)(jre||(jre=Ore||(Ore=BR(["\n      animation: "," 1.4s linear infinite;\n    "]))),Gre)}),qre=HI("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Xre=HI("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat(KI(n.variant))],n.disableShrink&&t.circleDisableShrink]}})(e=>{let{ownerState:t,theme:n}=e;return(0,mT.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})},e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,UR.AH)(Vre||(Vre=Nre||(Nre=BR(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Qre)}),Yre=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiCircularProgress"}),{className:i,color:r="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,h=(0,gT.A)(n,Fre),d=(0,mT.A)({},n,{color:r,disableShrink:o,size:a,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:i,disableShrink:r}=e;return BI({root:["root",n,"color".concat(KI(i))],svg:["svg"],circle:["circle","circle".concat(KI(n)),r&&"circleDisableShrink"]},Bre,t)})(d),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((Hre-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset="".concat(((100-c)/100*e).toFixed(3),"px"),m.transform="rotate(-90deg)"}return(0,uT.jsx)(Wre,(0,mT.A)({className:MT(p.root,i),style:(0,mT.A)({width:a,height:a},m,s),ownerState:d,ref:t,role:"progressbar"},g,h,{children:(0,uT.jsx)(qre,{className:p.svg,ownerState:d,viewBox:"".concat(22," ").concat(22," ").concat(Hre," ").concat(Hre),children:(0,uT.jsx)(Xre,{className:p.circle,style:f,ownerState:d,cx:Hre,cy:Hre,r:(Hre-l)/2,fill:"none",strokeWidth:l})})}))}),Kre=Yre,Jre=e=>{let{value:t}=e;return(0,uT.jsxs)(II,{children:[(0,uT.jsx)(Kre,{size:60,thickness:5,variant:"determinate",value:t}),(0,uT.jsx)(II,{sx:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,uT.jsx)(zP,{variant:"caption",component:"div",color:"white",fontSize:"1rem",children:Math.round(t)+"%"})})]})},Zre=(e,t,n,i)=>new Promise((r,o)=>{const a=pj(mY,t+"/"+n);hj(a,e).on("state_change",e=>{const t=e.bytesTransferred/e.totalBytes*100;i(t)},e=>{o(e)},async()=>{try{const e=await dj(a);r(e)}catch(e){o(e)}})}),$re=e=>{let{file:t}=e;const[n,r]=(0,i.useState)(0),[o,a]=(0,i.useState)(null),{state:{currentUser:s},dispatch:l}=Uae();return(0,i.useEffect)(()=>{a(URL.createObjectURL(t)),(async()=>{const e=LN()+"."+t.name.split(".").pop();try{const n=await Zre(t,"pilgrims/".concat(null===s||void 0===s?void 0:s.id),e,r);l({type:"UPDATE_IMAGES",payload:n}),a(null)}catch(n){l({type:"UPDATE_ALERT",payload:{open:!0,severity:"error",message:n.message}}),console.log(n)}})()},[t]),o&&(0,uT.jsxs)(Eee,{cols:1,rows:1,children:[(0,uT.jsx)("img",{src:o,alt:"gallery",loading:"lazy"}),(0,uT.jsx)(II,{sx:eoe,children:n<100?(0,uT.jsx)(Jre,{value:n}):(0,uT.jsx)(Lre,{sx:{width:60,height:60,color:"lightgreen"}})})]})},eoe={position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0, .5)"},toe=e=>{let{files:t}=e;return(0,uT.jsx)(Cne,{rowHeight:250,sx:{"&.MuiImageList-root":{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))!important"}},children:t.map((e,t)=>(0,uT.jsx)($re,{file:e},t))})},noe=_L((0,uT.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),ioe=e=>function(e){return nj(e=oF(e))}(pj(mY,e)),roe=()=>{const{state:{images:e,currentUser:t},dispatch:n}=Uae();return(0,uT.jsx)(Cne,{rowHeight:250,sx:{"&.MuiImageList-root":{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))!important"}},children:e.map((e,i)=>(0,uT.jsxs)(Eee,{cols:1,rows:1,children:[(0,uT.jsx)("img",{src:e,alt:"pilgrims",loading:"lazy",style:{height:"100%"}}),(0,uT.jsx)(Bee,{position:"top",sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7)0%, rgba(0,0,0,0.3)70%, rgba(0,0,0,0)100%)"},actionIcon:(0,uT.jsx)(gL,{sx:{color:"white"},onClick:()=>(async e=>{var i;n({type:"DELETE_IMAGE",payload:e});const r=null===e||void 0===e||null===(i=e.split("".concat(null===t||void 0===t?void 0:t.id,"%2F"))[1])||void 0===i?void 0:i.split("?")[0];try{await ioe("pilgrims/".concat(null===t||void 0===t?void 0:t.id,"/").concat(r))}catch(o){console.log(o)}})(e),children:(0,uT.jsx)(noe,{})})})]},i))})},ooe=()=>{const[e,t]=(0,i.useState)([]),n=(0,i.useCallback)(e=>{t(e)},[]),{getRootProps:r,getInputProps:o,isDragActive:a}=Mre({onDrop:n,accept:{"images/*":[]}});return(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(UB,{sx:{cursor:"pointer",background:"#fafafa",color:"#bdbdbd",border:"1px dashed #ccc","&:hover":{border:"2px solid #ccc"}},children:(0,uT.jsxs)("div",u(u({style:{padding:"16px"}},r()),{},{children:[(0,uT.jsx)("input",u({},o())),a?(0,uT.jsx)("p",{style:{color:"green"},children:"Drop the files here.."}):(0,uT.jsx)("p",{children:"Drag 'n' Drop files here, or click to select files"}),(0,uT.jsx)("em",{style:{fontSize:20,color:"red",fontWeight:"bold"},children:"(images with *.jpeg,*.png,*.jpg extensions will be accepted)"})]}))}),(0,uT.jsx)(toe,{files:e}),(0,uT.jsx)(roe,{})]})};function aoe(e){return wI("MuiFormGroup",e)}EI("MuiFormGroup",["root","row","error"]);const soe=["className","row"],loe=HI("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(e=>{let{ownerState:t}=e;return(0,mT.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})}),coe=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiFormGroup"}),{className:i,row:r=!1}=n,o=(0,gT.A)(n,soe),a=lD({props:n,muiFormControl:uD(),states:["error"]}),s=(0,mT.A)({},n,{row:r,error:a.error}),l=(e=>{const{classes:t,row:n,error:i}=e;return BI({root:["root",n&&"row",i&&"error"]},aoe,t)})(s);return(0,uT.jsx)(loe,(0,mT.A)({className:MT(l.root,i),ownerState:s,ref:t},o))}),uoe=coe;function hoe(e){return wI("MuiRadioGroup",e)}EI("MuiRadioGroup",["root","row","error"]);const doe=i.createContext(void 0),poe=["actions","children","className","defaultValue","name","onChange","value"],foe=i.forwardRef(function(e,t){const{actions:n,children:r,className:o,defaultValue:a,name:s,onChange:l,value:c}=e,u=(0,gT.A)(e,poe),h=i.useRef(null),d=(e=>{const{classes:t,row:n,error:i}=e;return BI({root:["root",n&&"row",i&&"error"]},hoe,t)})(e),[p,f]=bR({controlled:c,default:a,name:"RadioGroup"});i.useImperativeHandle(n,()=>({focus:()=>{let e=h.current.querySelector("input:not(:disabled):checked");e||(e=h.current.querySelector("input:not(:disabled)")),e&&e.focus()}}),[]);const m=dM(t,h),g=uR(s),v=i.useMemo(()=>({name:g,onChange(e){f(e.target.value),l&&l(e,e.target.value)},value:p}),[g,l,f,p]);return(0,uT.jsx)(doe.Provider,{value:v,children:(0,uT.jsx)(uoe,(0,mT.A)({role:"radiogroup",ref:m,className:MT(d.root,o)},u,{children:r}))})}),moe=foe;function goe(e){return wI("MuiFormControlLabel",e)}const voe=EI("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),yoe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Aoe=HI("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(voe.label)]:t.label},t.root,t["labelPlacement".concat(KI(n.labelPlacement))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(voe.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(voe.label)]:{["&.".concat(voe.disabled)]:{color:(t.vars||t).palette.text.disabled}}})}),boe=HI("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(e=>{let{theme:t}=e;return{["&.".concat(voe.error)]:{color:(t.vars||t).palette.error.main}}}),xoe=i.forwardRef(function(e,t){var n,r;const o=XI({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:h,labelPlacement:d="end",required:p,slotProps:f={}}=o,m=(0,gT.A)(o,yoe),g=uD(),v=null!=(n=null!=c?c:l.props.disabled)?n:null==g?void 0:g.disabled,y=null!=p?p:l.props.required,A={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach(e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof o[e]&&(A[e]=o[e])});const b=lD({props:o,muiFormControl:g,states:["error"]}),x=(0,mT.A)({},o,{disabled:v,labelPlacement:d,required:y,error:b.error}),_=(e=>{const{classes:t,disabled:n,labelPlacement:i,error:r,required:o}=e;return BI({root:["root",n&&"disabled","labelPlacement".concat(KI(i)),r&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",r&&"error"]},goe,t)})(x),w=null!=(r=f.typography)?r:s.typography;let E=h;return null==E||E.type===zP||u||(E=(0,uT.jsx)(zP,(0,mT.A)({component:"span"},w,{className:MT(_.label,null==w?void 0:w.className),children:E}))),(0,uT.jsxs)(Aoe,(0,mT.A)({className:MT(_.root,a),ownerState:x,ref:t},m,{children:[i.cloneElement(l,A),y?(0,uT.jsxs)(Iie,{display:"block",children:[E,(0,uT.jsxs)(boe,{ownerState:x,"aria-hidden":!0,className:_.asterisk,children:["\u2009","*"]})]}):E]}))}),_oe=xoe;function woe(e){return wI("PrivateSwitchBase",e)}EI("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Eoe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Coe=HI(uL,{name:"MuiSwitchBase"})(e=>{let{ownerState:t}=e;return(0,mT.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),Soe=HI("input",{name:"MuiSwitchBase",shouldForwardProp:VI})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Toe=i.forwardRef(function(e,t){const{autoFocus:n,checked:i,checkedIcon:r,className:o,defaultChecked:a,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:h,inputProps:d,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:A=!1,tabIndex:b,type:x,value:_}=e,w=(0,gT.A)(e,Eoe),[E,C]=bR({controlled:i,default:Boolean(a),name:"SwitchBase",state:"checked"}),S=uD();let T=s;S&&"undefined"===typeof T&&(T=S.disabled);const I="checkbox"===x||"radio"===x,M=(0,mT.A)({},e,{checked:E,disabled:T,disableFocusRipple:l,edge:c}),k=(e=>{const{classes:t,checked:n,disabled:i,edge:r}=e;return BI({root:["root",n&&"checked",i&&"disabled",r&&"edge".concat(KI(r))],input:["input"]},woe,t)})(M);return(0,uT.jsxs)(Coe,(0,mT.A)({component:"span",className:MT(k.root,o),centerRipple:!0,focusRipple:!l,disabled:T,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),S&&S.onFocus&&S.onFocus(e)},onBlur:e=>{m&&m(e),S&&S.onBlur&&S.onBlur(e)},ownerState:M,ref:t},w,{children:[(0,uT.jsx)(Soe,(0,mT.A)({autoFocus:n,checked:i,defaultChecked:a,className:k.input,disabled:T,id:I?h:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;C(t),g&&g(e,t)},readOnly:y,ref:p,required:A,ownerState:M,tabIndex:b,type:x},"checkbox"===x&&void 0===_?{}:{value:_},d)),E?r:u]}))}),Ioe=Toe,Moe=_L((0,uT.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),koe=_L((0,uT.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Roe=HI("span",{name:"MuiRadioButtonIcon",shouldForwardProp:VI})({position:"relative",display:"flex"}),Loe=HI(Moe,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Boe=HI(koe,{name:"MuiRadioButtonIcon"})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},n.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})});const Poe=function(e){const{checked:t=!1,classes:n={},fontSize:i}=e,r=(0,mT.A)({},e,{checked:t});return(0,uT.jsxs)(Roe,{className:n.root,ownerState:r,children:[(0,uT.jsx)(Loe,{fontSize:i,className:n.background,ownerState:r}),(0,uT.jsx)(Boe,{fontSize:i,className:n.dot,ownerState:r})]})},Doe=xB;function Ooe(e){return wI("MuiRadio",e)}const Noe=EI("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Foe=["checked","checkedIcon","color","icon","name","onChange","size","className"],zoe=HI(Ioe,{shouldForwardProp:e=>VI(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"medium"!==n.size&&t["size".concat(KI(n.size))],t["color".concat(KI(n.color))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,QT.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(Noe.checked)]:{color:(t.vars||t).palette[n.color].main}},{["&.".concat(Noe.disabled)]:{color:(t.vars||t).palette.action.disabled}})});const Uoe=(0,uT.jsx)(Poe,{checked:!0}),joe=(0,uT.jsx)(Poe,{}),Voe=i.forwardRef(function(e,t){var n,r;const o=XI({props:e,name:"MuiRadio"}),{checked:a,checkedIcon:s=Uoe,color:l="primary",icon:c=joe,name:u,onChange:h,size:d="medium",className:p}=o,f=(0,gT.A)(o,Foe),m=(0,mT.A)({},o,{color:l,size:d}),g=(e=>{const{classes:t,color:n,size:i}=e,r={root:["root","color".concat(KI(n)),"medium"!==i&&"size".concat(KI(i))]};return(0,mT.A)({},t,BI(r,Ooe,t))})(m),v=i.useContext(doe);let y=a;const A=Doe(h,v&&v.onChange);let b=u;return v&&("undefined"===typeof y&&(y=function(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}(v.value,o.value)),"undefined"===typeof b&&(b=v.name)),(0,uT.jsx)(zoe,(0,mT.A)({type:"radio",icon:i.cloneElement(c,{fontSize:null!=(n=joe.props.fontSize)?n:d}),checkedIcon:i.cloneElement(s,{fontSize:null!=(r=Uoe.props.fontSize)?r:d}),ownerState:m,classes:g,name:b,checked:y,onChange:A,ref:t,className:MT(g.root,p)},f))}),Hoe=Voe;const Goe=n.p+"static/media/progress1.ce08463d519fab460d7702dc9448b9a7.svg",Qoe=_L((0,uT.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");let Woe;const qoe=e=>{let{mainProps:t,optionalProps:n={},minLength:r}=e;const{dispatch:o}=Uae(),[a,s]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[h,d]=(0,i.useState)(!1);return(0,uT.jsx)(rN,u(u(u({},t),n),{},{error:l,helperText:l&&"This field must be ".concat(r," characters or more"),color:h?"success":"primary",variant:"outlined",onChange:e=>{o({type:"UPDATE_DETAILS",payload:{[e.target.name]:e.target.value}}),a||s(!0),clearTimeout(Woe),Woe=setTimeout(()=>{s(!1),e.target.value.length<r?(l||c(!0),h&&d(!1)):(l&&c(!1),h||d(!0))},1e3)},required:!0,InputProps:{endAdornment:(0,uT.jsx)(Y1,{position:"end",children:a?(0,uT.jsx)(PL,{src:Goe,sx:{height:70}}):h&&(0,uT.jsx)(Qoe,{color:"success"})})}}))},Xoe=()=>{const{state:{details:{title:e,description:t,price:n}},dispatch:r}=Uae(),[o,a]=(0,i.useState)(n?1:0);return(0,uT.jsxs)(Iie,{sx:{alignItems:"center","& .MuiTextField-root":{width:"100%",maxWidth:500,m:1}},children:[(0,uT.jsx)(gO,{children:(0,uT.jsxs)(moe,{name:"costType",value:o,row:!0,onChange:e=>{const t=Number(e.target.value);a(t),r(0===t?{type:"UPDATE_DETAILS",payload:{price:0}}:{type:"UPDATE_DETAILS",payload:{price:20}})},children:[(0,uT.jsx)(_oe,{value:0,control:(0,uT.jsx)(Hoe,{}),label:"Free Visit"}),(0,uT.jsx)(_oe,{value:1,control:(0,uT.jsx)(Hoe,{}),label:"Nominal Fee for Visit"}),Boolean(o)&&(0,uT.jsx)(rN,{sx:{width:"12ch !important"},variant:"standard",InputProps:{startAdornment:(0,uT.jsx)(Y1,{position:"start",children:"Rs"})},inputProps:{type:"number",min:1,max:50},value:n,onChange:e=>{r({type:"UPDATE_DETAILS",payload:{price:e.target.value}})},name:"price"})]})}),(0,uT.jsx)(qoe,{mainProps:{name:"title",label:"Title",value:e},minLength:5}),(0,uT.jsx)(qoe,{mainProps:{name:"description",label:"Description",value:t},minLength:10,optionalProps:{multiline:!0,rows:4}})]})},Yoe=e=>{let{setPage:t}=e;const{state:{images:n,details:r,location:o,currentUser:a},dispatch:s}=Uae(),[l,c]=(0,i.useState)(0),[u,h]=(0,i.useState)([{label:"Location",completed:!1},{label:"Details",completed:!1},{label:"Images",completed:!1}]),[d,p]=(0,i.useState)(!1),f=()=>u.findIndex(e=>!e.completed);(0,i.useEffect)(()=>{n.length?u[2].completed||m(2,!0):u[2].completed&&m(2,!1)},[n]),(0,i.useEffect)(()=>{r.title.length>4&&r.description.length>9?u[1].completed||m(1,!0):u[1].completed&&m(1,!1)},[r]),(0,i.useEffect)(()=>{o.lng||o.lat?u[0].completed||m(0,!0):u[0].completed&&m(0,!1)},[o]);const m=(e,t)=>{h(n=>(n[e].completed=t,[...n]))};(0,i.useEffect)(()=>{-1===f()?d||p(!0):d&&p(!1)},[u]);return(0,uT.jsxs)(J4,{sx:{my:4},children:[(0,uT.jsx)(Vne,{alternativeLabel:!0,nonLinear:!0,activeStep:l,sx:{mb:3},children:u.map((e,t)=>(0,uT.jsx)(qne,{completed:e.completed,children:(0,uT.jsx)(yie,{onClick:()=>c(t),children:e.label})},e.label))}),(0,uT.jsxs)(II,{sx:{pb:7},children:[{0:(0,uT.jsx)(Mie,{}),1:(0,uT.jsx)(Xoe,{}),2:(0,uT.jsx)(ooe,{})}[l],(0,uT.jsxs)(Iie,{direction:"row",sx:{pt:2,justifyContent:"space-around"},children:[(0,uT.jsx)(bN,{color:"inherit",disabled:!l,onClick:()=>c(e=>e-1),children:"Back"}),(0,uT.jsx)(bN,{disabled:(()=>{if(l<u.length-1)return!1;return-1===f()})(),onClick:()=>{if(l<u.length-1)c(e=>e+1);else{const e=f();c(e)}},children:"Next"})]}),d&&(0,uT.jsx)(Iie,{sx:{alignItems:"center"},children:(0,uT.jsx)(bN,{variant:"contained",endIcon:(0,uT.jsx)(_N,{}),onClick:()=>{(async(e,t,n,i)=>{n({type:"START_LOADING"}),await wN({url:j5,body:e,token:null===t||void 0===t?void 0:t.token},n)&&(n({type:"UPDATE_ALERT",payload:{open:!0,severity:"success",message:"The pilgrim location has been added successfully"}}),n({type:"RESET_ROOM"}),i(0)),n({type:"END_LOADING"})})({lng:o.lng,lat:o.lat,price:r.price,title:r.title,description:r.description,images:n},a,s,t)},children:"Submit"})})]})]})},Koe=()=>{const[e,t]=(0,i.useState)(0),n=(0,i.useRef)();return(0,i.useEffect)(()=>{n.current.ownerDocument.body.scrollTop=0},[e]),(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)("div",{className:"add-bar",children:(0,uT.jsxs)(II,{sx:{height:700,position:"relative"},ref:n,children:[{0:(0,uT.jsx)(bne,{}),1:(0,uT.jsx)(Sne,{}),2:(0,uT.jsx)(A5,{children:(0,uT.jsx)(Yoe,{setPage:t})})}[e],(0,uT.jsx)(UB,{elevation:3,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:2},children:(0,uT.jsxs)(k5,{showLabels:!0,value:e,onChange:(e,n)=>t(n),children:[(0,uT.jsx)(N5,{label:"Map",icon:(0,uT.jsx)(F5,{})}),(0,uT.jsx)(N5,{label:"PilGrims",icon:(0,uT.jsx)(z5,{})}),(0,uT.jsx)(N5,{label:"Add",icon:(0,uT.jsx)(U5,{})})]})})]})}),(0,uT.jsx)(HY,{})]})};const Joe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:o,resumeHideDuration:a}=e,s=LI();i.useEffect(()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==r||r(e,"escapeKeyDown")}},[o,r]);const l=oR((e,t)=>{null==r||r(e,t)}),c=oR(e=>{r&&null!=e&&s.start(e,()=>{l(null,"timeout")})});i.useEffect(()=>(o&&c(t),s.clear),[o,t,c,s]);const u=s.clear,h=i.useCallback(()=>{null!=t&&c(null!=a?a:.5*t)},[t,a,c]),d=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),h()};return i.useEffect(()=>{if(!n&&o)return window.addEventListener("focus",h),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",u)}},[n,o,h,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,mT.A)({},Uk(e),Uk(t));return(0,mT.A)({role:"presentation"},t,n,{onBlur:(i=n,e=>{const t=i.onBlur;null==t||t(e),h()}),onFocus:d(n),onMouseEnter:p(n),onMouseLeave:f(n)});var i},onClickAway:e=>{null==r||r(e,"clickaway")}}};function Zoe(e){return e.substring(2).toLowerCase()}function $oe(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:a="onTouchEnd"}=e,s=i.useRef(!1),l=i.useRef(null),c=i.useRef(!1),u=i.useRef(!1);i.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const h=hM(FI(t),l),d=oR(e=>{const t=u.current;u.current=!1;const i=xM(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,i))return;if(s.current)return void(s.current=!1);let r;r=e.composedPath?e.composedPath().indexOf(l.current)>-1:!i.documentElement.contains(e.target)||l.current.contains(e.target),r||!n&&t||o(e)}),p=e=>n=>{u.current=!0;const i=t.props[e];i&&i(n)},f={ref:h};return!1!==a&&(f[a]=p(a)),i.useEffect(()=>{if(!1!==a){const e=Zoe(a),t=xM(l.current),n=()=>{s.current=!0};return t.addEventListener(e,d),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,d),t.removeEventListener("touchmove",n)}}},[d,a]),!1!==r&&(f[r]=p(r)),i.useEffect(()=>{if(!1!==r){const e=Zoe(r),t=xM(l.current);return t.addEventListener(e,d),()=>{t.removeEventListener(e,d)}}},[d,r]),(0,uT.jsx)(i.Fragment,{children:i.cloneElement(t,f)})}function eae(e){return wI("MuiSnackbarContent",e)}EI("MuiSnackbarContent",["root","message","action"]);const tae=["action","className","message","role"],nae=HI(UB,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,i=(0,QT.tL)(t.palette.background.default,n);return(0,mT.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(i),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:i,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),iae=HI("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),rae=HI("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),oae=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiSnackbarContent"}),{action:i,className:r,message:o,role:a="alert"}=n,s=(0,gT.A)(n,tae),l=n,c=(e=>{const{classes:t}=e;return BI({root:["root"],action:["action"],message:["message"]},eae,t)})(l);return(0,uT.jsxs)(nae,(0,mT.A)({role:a,square:!0,elevation:6,className:MT(c.root,r),ownerState:l,ref:t},s,{children:[(0,uT.jsx)(iae,{className:c.message,ownerState:l,children:o}),i?(0,uT.jsx)(rae,{className:c.action,ownerState:l,children:i}):null]}))}),aae=oae;function sae(e){return wI("MuiSnackbar",e)}EI("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const lae=["onEnter","onExited"],cae=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],uae=HI("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["anchorOrigin".concat(KI(n.anchorOrigin.vertical)).concat(KI(n.anchorOrigin.horizontal))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,mT.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})}),hae=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiSnackbar"}),r=GI(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:h,ClickAwayListenerProps:d,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:v=yM,transitionDuration:y=o,TransitionProps:{onEnter:A,onExited:b}={}}=n,x=(0,gT.A)(n.TransitionProps,lae),_=(0,gT.A)(n,cae),w=(0,mT.A)({},n,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:v,transitionDuration:y}),E=(e=>{const{classes:t,anchorOrigin:n}=e;return BI({root:["root","anchorOrigin".concat(KI(n.vertical)).concat(KI(n.horizontal))]},sae,t)})(w),{getRootProps:C,onClickAway:S}=Joe((0,mT.A)({},w)),[T,I]=i.useState(!0),M=Qk({elementType:uae,getSlotProps:C,externalForwardedProps:_,ownerState:w,additionalProps:{ref:t},className:[E.root,h]});return!g&&T?null:(0,uT.jsx)($oe,(0,mT.A)({onClickAway:S},d,{children:(0,uT.jsx)(uae,(0,mT.A)({},M,{children:(0,uT.jsx)(v,(0,mT.A)({appear:!0,in:g,timeout:y,direction:"top"===s?"down":"up",onEnter:(e,t)=>{I(!1),A&&A(e,t)},onExited:e=>{I(!0),b&&b(e)}},x,{children:u||(0,uT.jsx)(aae,(0,mT.A)({message:m,action:a},p))}))}))}))}),dae=hae,pae=()=>{const{state:{alert:e},dispatch:t}=Uae(),n=(n,i)=>{"clickaway"!==i&&t({type:"UPDATE_ALERT",payload:u(u({},e),{},{open:!1})})};return(0,uT.jsx)(dae,{open:e.open,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,uT.jsx)(d5,{onClose:n,severity:e.severity,sx:{width:"100%"},variant:"filled",elevation:6,children:e.message})})},fae=()=>{const{state:{loading:e}}=Uae();return(0,uT.jsx)(bB,{open:e,sx:{zIndex:e=>e.zIndex.modal+1},children:(0,uT.jsx)(Kre,{sx:{color:"white"}})})},mae=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function gae(e,t,n){var i;const r=function(e,t,n){const i=t.getBoundingClientRect(),r=n&&n.getBoundingClientRect(),o=sB(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=o.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(r?r.right+s-i.left:o.innerWidth+s-i.left,"px)"):"right"===e?"translateX(-".concat(r?i.right-r.left-s:i.left+i.width-s,"px)"):"up"===e?"translateY(".concat(r?r.bottom+l-i.top:o.innerHeight+l-i.top,"px)"):"translateY(-".concat(r?i.top-r.top+i.height-l:i.top+i.height-l,"px)")}(e,t,"function"===typeof(i=n)?i():i);r&&(t.style.webkitTransform=r,t.style.transform=r)}const vae=i.forwardRef(function(e,t){const n=GI(),r={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:h=r,in:d,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:v,onExiting:y,style:A,timeout:b=o,TransitionComponent:x=sM}=e,_=(0,gT.A)(e,mae),w=i.useRef(null),E=dM(FI(l),w,t),C=e=>t=>{e&&(void 0===t?e(w.current):e(w.current,t))},S=C((e,t)=>{gae(u,e,c),lM(e),p&&p(e,t)}),T=C((e,t)=>{const i=cM({timeout:b,style:A,easing:h},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,mT.A)({},i)),e.style.transition=n.transitions.create("transform",(0,mT.A)({},i)),e.style.webkitTransform="none",e.style.transform="none",m&&m(e,t)}),I=C(f),M=C(y),k=C(e=>{const t=cM({timeout:b,style:A,easing:h},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),gae(u,e,c),g&&g(e)}),R=C(e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)}),L=i.useCallback(()=>{w.current&&gae(u,w.current,c)},[u,c]);return i.useEffect(()=>{if(d||"down"===u||"right"===u)return;const e=oB(()=>{w.current&&gae(u,w.current,c)}),t=sB(w.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[u,d,c]),i.useEffect(()=>{d||L()},[d,L]),(0,uT.jsx)(x,(0,mT.A)({nodeRef:w,onEnter:S,onEntered:I,onEntering:T,onExit:k,onExited:R,onExiting:M,addEndListener:e=>{a&&a(w.current,e)},appear:s,in:d,timeout:b},_,{children:(e,t)=>i.cloneElement(l,(0,mT.A)({ref:E,style:(0,mT.A)({visibility:"exited"!==e||d?void 0:"hidden"},A,l.props.style)},t))}))}),yae=vae;function Aae(e){return wI("MuiAppBar",e)}EI("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const bae=["className","color","enableColorOnDark","position"],xae=(e,t)=>e?"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"):t,_ae=HI(UB,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(KI(n.position))],t["color".concat(KI(n.color))]]}})(e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,mT.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,mT.A)({},"default"===n.color&&{backgroundColor:i,color:t.palette.getContrastText(i)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,mT.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,mT.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:xae(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:xae(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:xae(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:xae(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),wae=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiAppBar"}),{className:i,color:r="primary",enableColorOnDark:o=!1,position:a="fixed"}=n,s=(0,gT.A)(n,bae),l=(0,mT.A)({},n,{color:r,position:a,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:i}=e;return BI({root:["root","color".concat(KI(t)),"position".concat(KI(n))]},Aae,i)})(l);return(0,uT.jsx)(_ae,(0,mT.A)({square:!0,component:"header",ownerState:l,elevation:4,className:MT(c.root,i,"fixed"===a&&"mui-fixed"),ref:t},s))}),Eae=wae;function Cae(e){return wI("MuiToolbar",e)}EI("MuiToolbar",["root","gutters","regular","dense"]);const Sae=["className","component","disableGutters","variant"],Tae=HI("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,mT.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})},e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar}),Iae=i.forwardRef(function(e,t){const n=XI({props:e,name:"MuiToolbar"}),{className:i,component:r="div",disableGutters:o=!1,variant:a="regular"}=n,s=(0,gT.A)(n,Sae),l=(0,mT.A)({},n,{component:r,disableGutters:o,variant:a}),c=(e=>{const{classes:t,disableGutters:n,variant:i}=e;return BI({root:["root",!n&&"gutters",i]},Cae,t)})(l);return(0,uT.jsx)(Tae,(0,mT.A)({as:r,className:MT(c.root,i),ref:t,ownerState:l},s))}),Mae=Iae,kae=(0,i.forwardRef)((e,t)=>(0,uT.jsx)(yae,u(u({direction:"up"},e),{},{ref:t}))),Rae=()=>{var e;const{state:{pilgrim:t},dispatch:n}=Uae(),[r,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(t){const e="https://api.maptiler.com/geocoding/v1/reverse?lat=".concat(t.lat,"&lon=").concat(t.lng,"&key=","tRqjZjhKcJr1uachzPuM");fetch(e).then(e=>e.json()).then(e=>o(e.features[0]))}},[t]);const a=()=>{n({type:"UPDATE_PILGRIM",payload:null})};return(0,uT.jsxs)(LP,{fullScreen:!0,open:Boolean(t),onClose:a,TransitionComponent:kae,children:[(0,uT.jsx)(Eae,{position:"relative",children:(0,uT.jsxs)(Mae,{children:[(0,uT.jsx)(zP,{variant:"h6",component:"h3",sx:{ml:2,flex:1},children:null===t||void 0===t?void 0:t.title}),(0,uT.jsx)(gL,{color:"inherit",onClick:a,children:(0,uT.jsx)(xN,{})})]})}),(0,uT.jsxs)(J4,{sx:{pt:5},children:[(0,uT.jsxs)(sne,{modules:[une,fne,vne,pne],centeredSlides:!0,slidesPerView:2,grabCursor:!0,navigation:!0,autoplay:!0,zoom:!0,effect:"coverflow",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},children:[null===t||void 0===t||null===(e=t.images)||void 0===e?void 0:e.map(e=>(0,uT.jsx)(lne,{children:(0,uT.jsx)("div",{className:"swiper-zoom-container",children:(0,uT.jsx)("img",{src:e,alt:"pilgrim"})})},e)),(0,uT.jsx)(LR,{title:(null===t||void 0===t?void 0:t.uName)||"",sx:{position:"absolute",bottom:"8px",left:"8px",zIndex:2},children:(0,uT.jsx)(PL,{src:null===t||void 0===t?void 0:t.uPhoto})})]}),(0,uT.jsxs)(Iie,{sx:{p:3},spacing:2,children:[(0,uT.jsxs)(Iie,{direction:"row",sx:{justifyContent:"space-between",flexWrap:"wrap"},children:[(0,uT.jsxs)(II,{children:[(0,uT.jsx)(zP,{variant:"h6",component:"span",sx:{fontSize:"20px"},children:"CHARGES: "}),(0,uT.jsx)(zP,{component:"span",sx:{fontSize:"15px"},children:0===(null===t||void 0===t?void 0:t.price)?"Free Visit":"$"+(null===t||void 0===t?void 0:t.price)})]}),(0,uT.jsx)(II,{sx:{display:"flex",alignItems:"center"}})]}),(0,uT.jsx)(Iie,{direction:"row",sx:{justifyContent:"space-between",flexWrap:"wrap"},children:(0,uT.jsxs)(II,{children:[(0,uT.jsx)(zP,{variant:"h6",component:"span",sx:{fontSize:"20px"},children:"Place Name: "}),(0,uT.jsx)(zP,{component:"span",sx:{fontSize:"15px"},children:null===t||void 0===t?void 0:t.title})]})}),(0,uT.jsxs)(Iie,{children:[(0,uT.jsx)(zP,{variant:"h6",component:"span",sx:{fontSize:"20px"},children:"Details: "}),(0,uT.jsx)(zP,{component:"span",sx:{fontSize:"15px"},children:null===t||void 0===t?void 0:t.description})]})]})]})]})};var Lae=n(6796);const Bae=()=>(0,uT.jsx)(A5,{children:(0,uT.jsxs)("div",{className:"donation-main",children:[(0,uT.jsx)("h1",{children:"DONATE HERE "}),(0,uT.jsx)("form",{children:(0,uT.jsx)(Lae.A,{src:"https://checkout.razorpay.com/v1/payment-button.js","data-payment_button_id":"pl_NymJYzEjiPU4ez",async:!0})})]})}),Pae=n.p+"static/media/Lot1.4d304e630c2d1d3572ea.jpg",Dae=n.p+"static/media/Lot2.18c81364c0bbabf35407.jpg",Oae=n.p+"static/media/Lot3.06b144899fd069c9b027.jpg",Nae=n.p+"static/media/Lot4.6fc030126ad770630955.jpg",Fae=()=>(0,uT.jsxs)("div",{children:[(0,uT.jsxs)("div",{className:"main",children:[(0,uT.jsx)(_Y,{}),(0,uT.jsx)("div",{className:"blog_leftside",style:{width:"65%",float:"left"},children:(0,uT.jsxs)("div",{className:"main-wrapper-boxed",children:[(0,uT.jsx)("center",{children:(0,uT.jsx)("img",{src:Pae,alt:""})}),(0,uT.jsx)("h1",{children:"A Flight To The Marvelous World Of Akshardham Temple"}),(0,uT.jsx)("h2",{children:'The Lotus Temple, located in New Delhi, India, is a Bah\xe1\u02bc\xed House of Worship that was dedicated in December 1986. Notable for its lotus-like shape, it has become a prominent attraction in the city. Like all Bah\xe1\u2019\xed Houses of Worship, the Lotus Temple is open to all, regardless of religion or any other qualification.The building is composed of 27 free-standing marble-clad "petals" arranged in clusters of three to form nine sides,with nine doors opening onto a central hall with a height of slightly over 34 metres and a capacity of 1,300 people.The Lotus Temple has won numerous architectural awards and has been featured in many newspaper and magazine articles.'}),(0,uT.jsx)("div",{className:"vertical"}),(0,uT.jsx)("b",{children:"R\xfah\xedyyih Kh\xe1num laid the foundation stone for the Lotus Temple on 19 October 1977 and dedicated the temple on 24 December 1986.For the dedication, there was a gathering of 8,000 Bah\xe1\u02bc\xeds from 107 countries, including some 4,000 Bah\xe1\u02bc\xeds from 22 states in India.The temple was opened to the public on 1 January 1987 and more than 10,000 people visited that day."}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{})," ",(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("br",{}),(0,uT.jsx)("h2",{children:"The Lotus Temple is situated near the Kalkaji Mandir metro station about 500 metres away.It is in the village of Bahapur in New Delhi, National Capital Territory of Delhi, near Nehru Place and lies on the western bank of the Yamuna River. Of the temple's total electricity use of 500 kilowatts (kW), 120 kW is provided by solar power generated by solar panels on the building.This saves the temple \u20b9120,000 per month.It is the first temple in Delhi to use solar power. As is the case with other stone monuments such as the Taj Mahal, the Lotus Temple is becoming discoloured due to air pollution in India. Specifically, the white marble is turning grey and yellow due to pollution from vehicles and manufacturing in the city, among other sources."}),(0,uT.jsx)("img",{src:Dae,alt:"",className:"A1"}),(0,uT.jsx)("img",{src:Oae,alt:"",className:"A2"}),(0,uT.jsx)("img",{src:Nae,alt:"",className:"A3"}),(0,uT.jsx)(TT,{to:"/blog",className:"readless",children:"READ LESS"})]})}),(0,uT.jsx)("div",{className:"blog_rightside",style:{width:"30%",height:"575px",float:"left"},children:(0,uT.jsx)(y1,{})})]}),(0,uT.jsx)(HY,{})]}),zae=(0,i.createContext)(),Uae=()=>(0,i.useContext)(zae),jae=()=>{const[e,t]=(0,i.useReducer)(d,h),n=(0,i.useRef)(),r=(0,i.useRef)();return(0,i.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("currentUser"));e&&t({type:"UPDATE_USER",payload:e})},[]),(0,uT.jsx)("div",{className:"App",children:(0,uT.jsxs)(zae.Provider,{value:{state:e,dispatch:t,mapRef:n,containerRef:r},children:[(0,uT.jsxs)(cT.Switch,{children:[(0,uT.jsx)(cT.Route,{exact:!0,path:"/",children:(0,uT.jsx)(hK,{})}),(0,uT.jsx)(cT.Route,{path:"/about",children:(0,uT.jsx)(pK,{})}),(0,uT.jsx)(cT.Route,{path:"/blog",children:(0,uT.jsx)(b1,{})}),(0,uT.jsx)(cT.Route,{path:"/contact",children:(0,uT.jsx)(E1,{})}),(0,uT.jsx)(cT.Route,{path:"/pilgrimage",children:(0,uT.jsx)(F1,{})}),(0,uT.jsx)(cT.Route,{path:"/Akshardham",children:(0,uT.jsx)(n2,{})}),(0,uT.jsx)(cT.Route,{path:"/rammandir",children:(0,uT.jsx)(b5,{})}),(0,uT.jsx)(cT.Route,{path:"/apsit",children:(0,uT.jsx)(x5,{})}),(0,uT.jsx)(cT.Route,{path:"/submit-meeting-form",children:(0,uT.jsx)(S4,{})}),(0,uT.jsx)(cT.Route,{path:"/location",children:(0,uT.jsx)(C5,{})}),(0,uT.jsx)(cT.Route,{path:"/addlocation",children:(0,uT.jsx)(Koe,{})}),(0,uT.jsx)(cT.Route,{path:"/Razor",children:(0,uT.jsx)(Bae,{})}),(0,uT.jsx)(cT.Route,{path:"/lotus",children:(0,uT.jsx)(Fae,{})})]}),(0,uT.jsx)(J1,{}),(0,uT.jsx)(pae,{}),(0,uT.jsx)(fae,{}),(0,uT.jsx)(Rae,{})]})})},Vae=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:a}=t;n(e),i(e),r(e),o(e),a(e)})};o.createRoot(document.getElementById("root")).render((0,uT.jsx)(yT,{children:(0,uT.jsx)(i.StrictMode,{children:(0,uT.jsx)(jae,{})})})),Vae()})()})();
//# sourceMappingURL=main.62ae233e.js.map